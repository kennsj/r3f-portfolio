function nH(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in n)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();var iH=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function WE(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var fk={exports:{}},rx={},hk={exports:{}},jt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fg=Symbol.for("react.element"),rH=Symbol.for("react.portal"),sH=Symbol.for("react.fragment"),oH=Symbol.for("react.strict_mode"),aH=Symbol.for("react.profiler"),lH=Symbol.for("react.provider"),uH=Symbol.for("react.context"),cH=Symbol.for("react.forward_ref"),fH=Symbol.for("react.suspense"),hH=Symbol.for("react.memo"),dH=Symbol.for("react.lazy"),xA=Symbol.iterator;function pH(n){return n===null||typeof n!="object"?null:(n=xA&&n[xA]||n["@@iterator"],typeof n=="function"?n:null)}var dk={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},pk=Object.assign,mk={};function rd(n,e,t){this.props=n,this.context=e,this.refs=mk,this.updater=t||dk}rd.prototype.isReactComponent={};rd.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};rd.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function gk(){}gk.prototype=rd.prototype;function jE(n,e,t){this.props=n,this.context=e,this.refs=mk,this.updater=t||dk}var XE=jE.prototype=new gk;XE.constructor=jE;pk(XE,rd.prototype);XE.isPureReactComponent=!0;var SA=Array.isArray,vk=Object.prototype.hasOwnProperty,YE={current:null},yk={key:!0,ref:!0,__self:!0,__source:!0};function _k(n,e,t){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)vk.call(e,i)&&!yk.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=t;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}if(n&&n.defaultProps)for(i in a=n.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:fg,type:n,key:s,ref:o,props:r,_owner:YE.current}}function mH(n,e){return{$$typeof:fg,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function qE(n){return typeof n=="object"&&n!==null&&n.$$typeof===fg}function gH(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var wA=/\/+/g;function uS(n,e){return typeof n=="object"&&n!==null&&n.key!=null?gH(""+n.key):e.toString(36)}function vy(n,e,t,i,r){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case fg:case rH:o=!0}}if(o)return o=n,r=r(o),n=i===""?"."+uS(o,0):i,SA(r)?(t="",n!=null&&(t=n.replace(wA,"$&/")+"/"),vy(r,e,t,"",function(u){return u})):r!=null&&(qE(r)&&(r=mH(r,t+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(wA,"$&/")+"/")+n)),e.push(r)),1;if(o=0,i=i===""?".":i+":",SA(n))for(var a=0;a<n.length;a++){s=n[a];var l=i+uS(s,a);o+=vy(s,e,t,l,r)}else if(l=pH(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=i+uS(s,a++),o+=vy(s,e,t,l,r);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Bv(n,e,t){if(n==null)return n;var i=[],r=0;return vy(n,i,"","",function(s){return e.call(t,s,r++)}),i}function vH(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Tr={current:null},yy={transition:null},yH={ReactCurrentDispatcher:Tr,ReactCurrentBatchConfig:yy,ReactCurrentOwner:YE};jt.Children={map:Bv,forEach:function(n,e,t){Bv(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Bv(n,function(){e++}),e},toArray:function(n){return Bv(n,function(e){return e})||[]},only:function(n){if(!qE(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};jt.Component=rd;jt.Fragment=sH;jt.Profiler=aH;jt.PureComponent=jE;jt.StrictMode=oH;jt.Suspense=fH;jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yH;jt.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=pk({},n.props),r=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=YE.current),e.key!==void 0&&(r=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)vk.call(e,l)&&!yk.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=t;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}return{$$typeof:fg,type:n.type,key:r,ref:s,props:i,_owner:o}};jt.createContext=function(n){return n={$$typeof:uH,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:lH,_context:n},n.Consumer=n};jt.createElement=_k;jt.createFactory=function(n){var e=_k.bind(null,n);return e.type=n,e};jt.createRef=function(){return{current:null}};jt.forwardRef=function(n){return{$$typeof:cH,render:n}};jt.isValidElement=qE;jt.lazy=function(n){return{$$typeof:dH,_payload:{_status:-1,_result:n},_init:vH}};jt.memo=function(n,e){return{$$typeof:hH,type:n,compare:e===void 0?null:e}};jt.startTransition=function(n){var e=yy.transition;yy.transition={};try{n()}finally{yy.transition=e}};jt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};jt.useCallback=function(n,e){return Tr.current.useCallback(n,e)};jt.useContext=function(n){return Tr.current.useContext(n)};jt.useDebugValue=function(){};jt.useDeferredValue=function(n){return Tr.current.useDeferredValue(n)};jt.useEffect=function(n,e){return Tr.current.useEffect(n,e)};jt.useId=function(){return Tr.current.useId()};jt.useImperativeHandle=function(n,e,t){return Tr.current.useImperativeHandle(n,e,t)};jt.useInsertionEffect=function(n,e){return Tr.current.useInsertionEffect(n,e)};jt.useLayoutEffect=function(n,e){return Tr.current.useLayoutEffect(n,e)};jt.useMemo=function(n,e){return Tr.current.useMemo(n,e)};jt.useReducer=function(n,e,t){return Tr.current.useReducer(n,e,t)};jt.useRef=function(n){return Tr.current.useRef(n)};jt.useState=function(n){return Tr.current.useState(n)};jt.useSyncExternalStore=function(n,e,t){return Tr.current.useSyncExternalStore(n,e,t)};jt.useTransition=function(){return Tr.current.useTransition()};jt.version="18.2.0";hk.exports=jt;var O=hk.exports;const Jl=WE(O),_H=nH({__proto__:null,default:Jl},[O]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xH=O,SH=Symbol.for("react.element"),wH=Symbol.for("react.fragment"),MH=Object.prototype.hasOwnProperty,TH=xH.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,EH={key:!0,ref:!0,__self:!0,__source:!0};function xk(n,e,t){var i,r={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)MH.call(e,i)&&!EH.hasOwnProperty(i)&&(r[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:SH,type:n,key:s,ref:o,props:r,_owner:TH.current}}rx.Fragment=wH;rx.jsx=xk;rx.jsxs=xk;fk.exports=rx;var ZE=fk.exports;const $s=ZE.Fragment,de=ZE.jsx,yt=ZE.jsxs;var oM={},Sk={exports:{}},xs={},wk={exports:{}},Mk={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(z,j){var I=z.length;z.push(j);e:for(;0<I;){var ee=I-1>>>1,oe=z[ee];if(0<r(oe,j))z[ee]=j,z[I]=oe,I=ee;else break e}}function t(z){return z.length===0?null:z[0]}function i(z){if(z.length===0)return null;var j=z[0],I=z.pop();if(I!==j){z[0]=I;e:for(var ee=0,oe=z.length,se=oe>>>1;ee<se;){var te=2*(ee+1)-1,Te=z[te],we=te+1,J=z[we];if(0>r(Te,I))we<oe&&0>r(J,Te)?(z[ee]=J,z[we]=I,ee=we):(z[ee]=Te,z[te]=I,ee=te);else if(we<oe&&0>r(J,I))z[ee]=J,z[we]=I,ee=we;else break e}}return j}function r(z,j){var I=z.sortIndex-j.sortIndex;return I!==0?I:z.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],f=1,d=null,p=3,m=!1,g=!1,y=!1,x=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(z){for(var j=t(u);j!==null;){if(j.callback===null)i(u);else if(j.startTime<=z)i(u),j.sortIndex=j.expirationTime,e(l,j);else break;j=t(u)}}function T(z){if(y=!1,S(z),!g)if(t(l)!==null)g=!0,re(b);else{var j=t(u);j!==null&&Q(T,j.startTime-z)}}function b(z,j){g=!1,y&&(y=!1,v(D),D=-1),m=!0;var I=p;try{for(S(j),d=t(l);d!==null&&(!(d.expirationTime>j)||z&&!F());){var ee=d.callback;if(typeof ee=="function"){d.callback=null,p=d.priorityLevel;var oe=ee(d.expirationTime<=j);j=n.unstable_now(),typeof oe=="function"?d.callback=oe:d===t(l)&&i(l),S(j)}else i(l);d=t(l)}if(d!==null)var se=!0;else{var te=t(u);te!==null&&Q(T,te.startTime-j),se=!1}return se}finally{d=null,p=I,m=!1}}var P=!1,R=null,D=-1,C=5,L=-1;function F(){return!(n.unstable_now()-L<C)}function H(){if(R!==null){var z=n.unstable_now();L=z;var j=!0;try{j=R(!0,z)}finally{j?G():(P=!1,R=null)}}else P=!1}var G;if(typeof w=="function")G=function(){w(H)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,X=W.port2;W.port1.onmessage=H,G=function(){X.postMessage(null)}}else G=function(){x(H,0)};function re(z){R=z,P||(P=!0,G())}function Q(z,j){D=x(function(){z(n.unstable_now())},j)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(z){z.callback=null},n.unstable_continueExecution=function(){g||m||(g=!0,re(b))},n.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<z?Math.floor(1e3/z):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(z){switch(p){case 1:case 2:case 3:var j=3;break;default:j=p}var I=p;p=j;try{return z()}finally{p=I}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(z,j){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var I=p;p=z;try{return j()}finally{p=I}},n.unstable_scheduleCallback=function(z,j,I){var ee=n.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?ee+I:ee):I=ee,z){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=I+oe,z={id:f++,callback:j,priorityLevel:z,startTime:I,expirationTime:oe,sortIndex:-1},I>ee?(z.sortIndex=I,e(u,z),t(l)===null&&z===t(u)&&(y?(v(D),D=-1):y=!0,Q(T,I-ee))):(z.sortIndex=oe,e(l,z),g||m||(g=!0,re(b))),z},n.unstable_shouldYield=F,n.unstable_wrapCallback=function(z){var j=p;return function(){var I=p;p=j;try{return z.apply(this,arguments)}finally{p=I}}}})(Mk);wk.exports=Mk;var bH=wk.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tk=O,vs=bH;function Le(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ek=new Set,gm={};function Hc(n,e){Nh(n,e),Nh(n+"Capture",e)}function Nh(n,e){for(gm[n]=e,n=0;n<e.length;n++)Ek.add(e[n])}var Ha=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),aM=Object.prototype.hasOwnProperty,CH=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,MA={},TA={};function PH(n){return aM.call(TA,n)?!0:aM.call(MA,n)?!1:CH.test(n)?TA[n]=!0:(MA[n]=!0,!1)}function AH(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function RH(n,e,t,i){if(e===null||typeof e>"u"||AH(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Er(n,e,t,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ji={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){ji[n]=new Er(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];ji[e]=new Er(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){ji[n]=new Er(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){ji[n]=new Er(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){ji[n]=new Er(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){ji[n]=new Er(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){ji[n]=new Er(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){ji[n]=new Er(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){ji[n]=new Er(n,5,!1,n.toLowerCase(),null,!1,!1)});var $E=/[\-:]([a-z])/g;function KE(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace($E,KE);ji[e]=new Er(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace($E,KE);ji[e]=new Er(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace($E,KE);ji[e]=new Er(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){ji[n]=new Er(n,1,!1,n.toLowerCase(),null,!1,!1)});ji.xlinkHref=new Er("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){ji[n]=new Er(n,1,!1,n.toLowerCase(),null,!0,!0)});function JE(n,e,t,i){var r=ji.hasOwnProperty(e)?ji[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(RH(e,t,r,i)&&(t=null),i||r===null?PH(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):r.mustUseProperty?n[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,i=r.attributeNamespace,t===null?n.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var Ka=Tk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Vv=Symbol.for("react.element"),Zf=Symbol.for("react.portal"),$f=Symbol.for("react.fragment"),QE=Symbol.for("react.strict_mode"),lM=Symbol.for("react.profiler"),bk=Symbol.for("react.provider"),Ck=Symbol.for("react.context"),eb=Symbol.for("react.forward_ref"),uM=Symbol.for("react.suspense"),cM=Symbol.for("react.suspense_list"),tb=Symbol.for("react.memo"),xl=Symbol.for("react.lazy"),Pk=Symbol.for("react.offscreen"),EA=Symbol.iterator;function Hd(n){return n===null||typeof n!="object"?null:(n=EA&&n[EA]||n["@@iterator"],typeof n=="function"?n:null)}var Vn=Object.assign,cS;function xp(n){if(cS===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);cS=e&&e[1]||""}return`
`+cS+n}var fS=!1;function hS(n,e){if(!n||fS)return"";fS=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){i=u}n.call(e.prototype)}else{try{throw Error()}catch(u){i=u}n()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{fS=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?xp(n):""}function DH(n){switch(n.tag){case 5:return xp(n.type);case 16:return xp("Lazy");case 13:return xp("Suspense");case 19:return xp("SuspenseList");case 0:case 2:case 15:return n=hS(n.type,!1),n;case 11:return n=hS(n.type.render,!1),n;case 1:return n=hS(n.type,!0),n;default:return""}}function fM(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case $f:return"Fragment";case Zf:return"Portal";case lM:return"Profiler";case QE:return"StrictMode";case uM:return"Suspense";case cM:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case Ck:return(n.displayName||"Context")+".Consumer";case bk:return(n._context.displayName||"Context")+".Provider";case eb:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case tb:return e=n.displayName||null,e!==null?e:fM(n.type)||"Memo";case xl:e=n._payload,n=n._init;try{return fM(n(e))}catch{}}return null}function LH(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fM(e);case 8:return e===QE?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ql(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ak(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function IH(n){var e=Ak(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Hv(n){n._valueTracker||(n._valueTracker=IH(n))}function Rk(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=Ak(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function t_(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function hM(n,e){var t=e.checked;return Vn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function bA(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=Ql(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Dk(n,e){e=e.checked,e!=null&&JE(n,"checked",e,!1)}function dM(n,e){Dk(n,e);var t=Ql(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?pM(n,e.type,t):e.hasOwnProperty("defaultValue")&&pM(n,e.type,Ql(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function CA(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function pM(n,e,t){(e!=="number"||t_(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Sp=Array.isArray;function Sh(n,e,t,i){if(n=n.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<n.length;t++)r=e.hasOwnProperty("$"+n[t].value),n[t].selected!==r&&(n[t].selected=r),r&&i&&(n[t].defaultSelected=!0)}else{for(t=""+Ql(t),e=null,r=0;r<n.length;r++){if(n[r].value===t){n[r].selected=!0,i&&(n[r].defaultSelected=!0);return}e!==null||n[r].disabled||(e=n[r])}e!==null&&(e.selected=!0)}}function mM(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Le(91));return Vn({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function PA(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Le(92));if(Sp(t)){if(1<t.length)throw Error(Le(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Ql(t)}}function Lk(n,e){var t=Ql(e.value),i=Ql(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function AA(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function Ik(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function gM(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?Ik(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Gv,kk=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,r){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,r)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Gv=Gv||document.createElement("div"),Gv.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Gv.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function vm(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Op={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},kH=["Webkit","ms","Moz","O"];Object.keys(Op).forEach(function(n){kH.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Op[e]=Op[n]})});function Ok(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Op.hasOwnProperty(n)&&Op[n]?(""+e).trim():e+"px"}function Nk(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,r=Ok(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,r):n[t]=r}}var OH=Vn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vM(n,e){if(e){if(OH[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Le(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Le(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Le(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Le(62))}}function yM(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _M=null;function nb(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var xM=null,wh=null,Mh=null;function RA(n){if(n=pg(n)){if(typeof xM!="function")throw Error(Le(280));var e=n.stateNode;e&&(e=ux(e),xM(n.stateNode,n.type,e))}}function Uk(n){wh?Mh?Mh.push(n):Mh=[n]:wh=n}function Fk(){if(wh){var n=wh,e=Mh;if(Mh=wh=null,RA(n),e)for(n=0;n<e.length;n++)RA(e[n])}}function zk(n,e){return n(e)}function Bk(){}var dS=!1;function Vk(n,e,t){if(dS)return n(e,t);dS=!0;try{return zk(n,e,t)}finally{dS=!1,(wh!==null||Mh!==null)&&(Bk(),Fk())}}function ym(n,e){var t=n.stateNode;if(t===null)return null;var i=ux(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Le(231,e,typeof t));return t}var SM=!1;if(Ha)try{var Gd={};Object.defineProperty(Gd,"passive",{get:function(){SM=!0}}),window.addEventListener("test",Gd,Gd),window.removeEventListener("test",Gd,Gd)}catch{SM=!1}function NH(n,e,t,i,r,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(f){this.onError(f)}}var Np=!1,n_=null,i_=!1,wM=null,UH={onError:function(n){Np=!0,n_=n}};function FH(n,e,t,i,r,s,o,a,l){Np=!1,n_=null,NH.apply(UH,arguments)}function zH(n,e,t,i,r,s,o,a,l){if(FH.apply(this,arguments),Np){if(Np){var u=n_;Np=!1,n_=null}else throw Error(Le(198));i_||(i_=!0,wM=u)}}function Gc(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function Hk(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function DA(n){if(Gc(n)!==n)throw Error(Le(188))}function BH(n){var e=n.alternate;if(!e){if(e=Gc(n),e===null)throw Error(Le(188));return e!==n?null:n}for(var t=n,i=e;;){var r=t.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){t=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===t)return DA(r),n;if(s===i)return DA(r),e;s=s.sibling}throw Error(Le(188))}if(t.return!==i.return)t=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===t){o=!0,t=r,i=s;break}if(a===i){o=!0,i=r,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,i=r;break}if(a===i){o=!0,i=s,t=r;break}a=a.sibling}if(!o)throw Error(Le(189))}}if(t.alternate!==i)throw Error(Le(190))}if(t.tag!==3)throw Error(Le(188));return t.stateNode.current===t?n:e}function Gk(n){return n=BH(n),n!==null?Wk(n):null}function Wk(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=Wk(n);if(e!==null)return e;n=n.sibling}return null}var jk=vs.unstable_scheduleCallback,LA=vs.unstable_cancelCallback,VH=vs.unstable_shouldYield,HH=vs.unstable_requestPaint,Qn=vs.unstable_now,GH=vs.unstable_getCurrentPriorityLevel,ib=vs.unstable_ImmediatePriority,Xk=vs.unstable_UserBlockingPriority,r_=vs.unstable_NormalPriority,WH=vs.unstable_LowPriority,Yk=vs.unstable_IdlePriority,sx=null,Zo=null;function jH(n){if(Zo&&typeof Zo.onCommitFiberRoot=="function")try{Zo.onCommitFiberRoot(sx,n,void 0,(n.current.flags&128)===128)}catch{}}var Mo=Math.clz32?Math.clz32:qH,XH=Math.log,YH=Math.LN2;function qH(n){return n>>>=0,n===0?32:31-(XH(n)/YH|0)|0}var Wv=64,jv=4194304;function wp(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function s_(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,r=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~r;a!==0?i=wp(a):(s&=o,s!==0&&(i=wp(s)))}else o=t&~r,o!==0?i=wp(o):s!==0&&(i=wp(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-Mo(e),r=1<<t,i|=n[t],e&=~r;return i}function ZH(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $H(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,r=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-Mo(s),a=1<<o,l=r[o];l===-1?(!(a&t)||a&i)&&(r[o]=ZH(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function MM(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function qk(){var n=Wv;return Wv<<=1,!(Wv&4194240)&&(Wv=64),n}function pS(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function hg(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Mo(e),n[e]=t}function KH(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var r=31-Mo(t),s=1<<r;e[r]=0,i[r]=-1,n[r]=-1,t&=~s}}function rb(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-Mo(t),r=1<<i;r&e|n[i]&e&&(n[i]|=e),t&=~r}}var fn=0;function Zk(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var $k,sb,Kk,Jk,Qk,TM=!1,Xv=[],Nl=null,Ul=null,Fl=null,_m=new Map,xm=new Map,Tl=[],JH="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function IA(n,e){switch(n){case"focusin":case"focusout":Nl=null;break;case"dragenter":case"dragleave":Ul=null;break;case"mouseover":case"mouseout":Fl=null;break;case"pointerover":case"pointerout":_m.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":xm.delete(e.pointerId)}}function Wd(n,e,t,i,r,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=pg(e),e!==null&&sb(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),n)}function QH(n,e,t,i,r){switch(e){case"focusin":return Nl=Wd(Nl,n,e,t,i,r),!0;case"dragenter":return Ul=Wd(Ul,n,e,t,i,r),!0;case"mouseover":return Fl=Wd(Fl,n,e,t,i,r),!0;case"pointerover":var s=r.pointerId;return _m.set(s,Wd(_m.get(s)||null,n,e,t,i,r)),!0;case"gotpointercapture":return s=r.pointerId,xm.set(s,Wd(xm.get(s)||null,n,e,t,i,r)),!0}return!1}function eO(n){var e=ec(n.target);if(e!==null){var t=Gc(e);if(t!==null){if(e=t.tag,e===13){if(e=Hk(t),e!==null){n.blockedOn=e,Qk(n.priority,function(){Kk(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function _y(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=EM(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);_M=i,t.target.dispatchEvent(i),_M=null}else return e=pg(t),e!==null&&sb(e),n.blockedOn=t,!1;e.shift()}return!0}function kA(n,e,t){_y(n)&&t.delete(e)}function e6(){TM=!1,Nl!==null&&_y(Nl)&&(Nl=null),Ul!==null&&_y(Ul)&&(Ul=null),Fl!==null&&_y(Fl)&&(Fl=null),_m.forEach(kA),xm.forEach(kA)}function jd(n,e){n.blockedOn===e&&(n.blockedOn=null,TM||(TM=!0,vs.unstable_scheduleCallback(vs.unstable_NormalPriority,e6)))}function Sm(n){function e(r){return jd(r,n)}if(0<Xv.length){jd(Xv[0],n);for(var t=1;t<Xv.length;t++){var i=Xv[t];i.blockedOn===n&&(i.blockedOn=null)}}for(Nl!==null&&jd(Nl,n),Ul!==null&&jd(Ul,n),Fl!==null&&jd(Fl,n),_m.forEach(e),xm.forEach(e),t=0;t<Tl.length;t++)i=Tl[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<Tl.length&&(t=Tl[0],t.blockedOn===null);)eO(t),t.blockedOn===null&&Tl.shift()}var Th=Ka.ReactCurrentBatchConfig,o_=!0;function t6(n,e,t,i){var r=fn,s=Th.transition;Th.transition=null;try{fn=1,ob(n,e,t,i)}finally{fn=r,Th.transition=s}}function n6(n,e,t,i){var r=fn,s=Th.transition;Th.transition=null;try{fn=4,ob(n,e,t,i)}finally{fn=r,Th.transition=s}}function ob(n,e,t,i){if(o_){var r=EM(n,e,t,i);if(r===null)TS(n,e,i,a_,t),IA(n,i);else if(QH(r,n,e,t,i))i.stopPropagation();else if(IA(n,i),e&4&&-1<JH.indexOf(n)){for(;r!==null;){var s=pg(r);if(s!==null&&$k(s),s=EM(n,e,t,i),s===null&&TS(n,e,i,a_,t),s===r)break;r=s}r!==null&&i.stopPropagation()}else TS(n,e,i,null,t)}}var a_=null;function EM(n,e,t,i){if(a_=null,n=nb(i),n=ec(n),n!==null)if(e=Gc(n),e===null)n=null;else if(t=e.tag,t===13){if(n=Hk(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return a_=n,null}function tO(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(GH()){case ib:return 1;case Xk:return 4;case r_:case WH:return 16;case Yk:return 536870912;default:return 16}default:return 16}}var bl=null,ab=null,xy=null;function nO(){if(xy)return xy;var n,e=ab,t=e.length,i,r="value"in bl?bl.value:bl.textContent,s=r.length;for(n=0;n<t&&e[n]===r[n];n++);var o=t-n;for(i=1;i<=o&&e[t-i]===r[s-i];i++);return xy=r.slice(n,1<i?1-i:void 0)}function Sy(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Yv(){return!0}function OA(){return!1}function Ss(n){function e(t,i,r,s,o){this._reactName=t,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Yv:OA,this.isPropagationStopped=OA,this}return Vn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Yv)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Yv)},persist:function(){},isPersistent:Yv}),e}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lb=Ss(sd),dg=Vn({},sd,{view:0,detail:0}),i6=Ss(dg),mS,gS,Xd,ox=Vn({},dg,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ub,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Xd&&(Xd&&n.type==="mousemove"?(mS=n.screenX-Xd.screenX,gS=n.screenY-Xd.screenY):gS=mS=0,Xd=n),mS)},movementY:function(n){return"movementY"in n?n.movementY:gS}}),NA=Ss(ox),r6=Vn({},ox,{dataTransfer:0}),s6=Ss(r6),o6=Vn({},dg,{relatedTarget:0}),vS=Ss(o6),a6=Vn({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),l6=Ss(a6),u6=Vn({},sd,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),c6=Ss(u6),f6=Vn({},sd,{data:0}),UA=Ss(f6),h6={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},d6={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},p6={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function m6(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=p6[n])?!!e[n]:!1}function ub(){return m6}var g6=Vn({},dg,{key:function(n){if(n.key){var e=h6[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Sy(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?d6[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ub,charCode:function(n){return n.type==="keypress"?Sy(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Sy(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),v6=Ss(g6),y6=Vn({},ox,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),FA=Ss(y6),_6=Vn({},dg,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ub}),x6=Ss(_6),S6=Vn({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),w6=Ss(S6),M6=Vn({},ox,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),T6=Ss(M6),E6=[9,13,27,32],cb=Ha&&"CompositionEvent"in window,Up=null;Ha&&"documentMode"in document&&(Up=document.documentMode);var b6=Ha&&"TextEvent"in window&&!Up,iO=Ha&&(!cb||Up&&8<Up&&11>=Up),zA=String.fromCharCode(32),BA=!1;function rO(n,e){switch(n){case"keyup":return E6.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sO(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Kf=!1;function C6(n,e){switch(n){case"compositionend":return sO(e);case"keypress":return e.which!==32?null:(BA=!0,zA);case"textInput":return n=e.data,n===zA&&BA?null:n;default:return null}}function P6(n,e){if(Kf)return n==="compositionend"||!cb&&rO(n,e)?(n=nO(),xy=ab=bl=null,Kf=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return iO&&e.locale!=="ko"?null:e.data;default:return null}}var A6={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function VA(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!A6[n.type]:e==="textarea"}function oO(n,e,t,i){Uk(i),e=l_(e,"onChange"),0<e.length&&(t=new lb("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var Fp=null,wm=null;function R6(n){vO(n,0)}function ax(n){var e=eh(n);if(Rk(e))return n}function D6(n,e){if(n==="change")return e}var aO=!1;if(Ha){var yS;if(Ha){var _S="oninput"in document;if(!_S){var HA=document.createElement("div");HA.setAttribute("oninput","return;"),_S=typeof HA.oninput=="function"}yS=_S}else yS=!1;aO=yS&&(!document.documentMode||9<document.documentMode)}function GA(){Fp&&(Fp.detachEvent("onpropertychange",lO),wm=Fp=null)}function lO(n){if(n.propertyName==="value"&&ax(wm)){var e=[];oO(e,wm,n,nb(n)),Vk(R6,e)}}function L6(n,e,t){n==="focusin"?(GA(),Fp=e,wm=t,Fp.attachEvent("onpropertychange",lO)):n==="focusout"&&GA()}function I6(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return ax(wm)}function k6(n,e){if(n==="click")return ax(e)}function O6(n,e){if(n==="input"||n==="change")return ax(e)}function N6(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Po=typeof Object.is=="function"?Object.is:N6;function Mm(n,e){if(Po(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var r=t[i];if(!aM.call(e,r)||!Po(n[r],e[r]))return!1}return!0}function WA(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function jA(n,e){var t=WA(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=WA(t)}}function uO(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?uO(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function cO(){for(var n=window,e=t_();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=t_(n.document)}return e}function fb(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function U6(n){var e=cO(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&uO(t.ownerDocument.documentElement,t)){if(i!==null&&fb(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!n.extend&&s>i&&(r=i,i=s,s=r),r=jA(t,s);var o=jA(t,i);r&&o&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),s>i?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var F6=Ha&&"documentMode"in document&&11>=document.documentMode,Jf=null,bM=null,zp=null,CM=!1;function XA(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;CM||Jf==null||Jf!==t_(i)||(i=Jf,"selectionStart"in i&&fb(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),zp&&Mm(zp,i)||(zp=i,i=l_(bM,"onSelect"),0<i.length&&(e=new lb("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=Jf)))}function qv(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Qf={animationend:qv("Animation","AnimationEnd"),animationiteration:qv("Animation","AnimationIteration"),animationstart:qv("Animation","AnimationStart"),transitionend:qv("Transition","TransitionEnd")},xS={},fO={};Ha&&(fO=document.createElement("div").style,"AnimationEvent"in window||(delete Qf.animationend.animation,delete Qf.animationiteration.animation,delete Qf.animationstart.animation),"TransitionEvent"in window||delete Qf.transitionend.transition);function lx(n){if(xS[n])return xS[n];if(!Qf[n])return n;var e=Qf[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in fO)return xS[n]=e[t];return n}var hO=lx("animationend"),dO=lx("animationiteration"),pO=lx("animationstart"),mO=lx("transitionend"),gO=new Map,YA="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function cu(n,e){gO.set(n,e),Hc(e,[n])}for(var SS=0;SS<YA.length;SS++){var wS=YA[SS],z6=wS.toLowerCase(),B6=wS[0].toUpperCase()+wS.slice(1);cu(z6,"on"+B6)}cu(hO,"onAnimationEnd");cu(dO,"onAnimationIteration");cu(pO,"onAnimationStart");cu("dblclick","onDoubleClick");cu("focusin","onFocus");cu("focusout","onBlur");cu(mO,"onTransitionEnd");Nh("onMouseEnter",["mouseout","mouseover"]);Nh("onMouseLeave",["mouseout","mouseover"]);Nh("onPointerEnter",["pointerout","pointerover"]);Nh("onPointerLeave",["pointerout","pointerover"]);Hc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Hc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Hc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Hc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Hc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Hc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),V6=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mp));function qA(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,zH(i,e,void 0,n),n.currentTarget=null}function vO(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;qA(r,a,u),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;qA(r,a,u),s=l}}}if(i_)throw n=wM,i_=!1,wM=null,n}function wn(n,e){var t=e[LM];t===void 0&&(t=e[LM]=new Set);var i=n+"__bubble";t.has(i)||(yO(e,n,2,!1),t.add(i))}function MS(n,e,t){var i=0;e&&(i|=4),yO(t,n,i,e)}var Zv="_reactListening"+Math.random().toString(36).slice(2);function Tm(n){if(!n[Zv]){n[Zv]=!0,Ek.forEach(function(t){t!=="selectionchange"&&(V6.has(t)||MS(t,!1,n),MS(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Zv]||(e[Zv]=!0,MS("selectionchange",!1,e))}}function yO(n,e,t,i){switch(tO(e)){case 1:var r=t6;break;case 4:r=n6;break;default:r=ob}t=r.bind(null,e,t,n),r=void 0,!SM||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?n.addEventListener(e,t,{capture:!0,passive:r}):n.addEventListener(e,t,!0):r!==void 0?n.addEventListener(e,t,{passive:r}):n.addEventListener(e,t,!1)}function TS(n,e,t,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=ec(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}Vk(function(){var u=s,f=nb(t),d=[];e:{var p=gO.get(n);if(p!==void 0){var m=lb,g=n;switch(n){case"keypress":if(Sy(t)===0)break e;case"keydown":case"keyup":m=v6;break;case"focusin":g="focus",m=vS;break;case"focusout":g="blur",m=vS;break;case"beforeblur":case"afterblur":m=vS;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=NA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=s6;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=x6;break;case hO:case dO:case pO:m=l6;break;case mO:m=w6;break;case"scroll":m=i6;break;case"wheel":m=T6;break;case"copy":case"cut":case"paste":m=c6;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=FA}var y=(e&4)!==0,x=!y&&n==="scroll",v=y?p!==null?p+"Capture":null:p;y=[];for(var w=u,S;w!==null;){S=w;var T=S.stateNode;if(S.tag===5&&T!==null&&(S=T,v!==null&&(T=ym(w,v),T!=null&&y.push(Em(w,T,S)))),x)break;w=w.return}0<y.length&&(p=new m(p,g,null,t,f),d.push({event:p,listeners:y}))}}if(!(e&7)){e:{if(p=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",p&&t!==_M&&(g=t.relatedTarget||t.fromElement)&&(ec(g)||g[Ga]))break e;if((m||p)&&(p=f.window===f?f:(p=f.ownerDocument)?p.defaultView||p.parentWindow:window,m?(g=t.relatedTarget||t.toElement,m=u,g=g?ec(g):null,g!==null&&(x=Gc(g),g!==x||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=u),m!==g)){if(y=NA,T="onMouseLeave",v="onMouseEnter",w="mouse",(n==="pointerout"||n==="pointerover")&&(y=FA,T="onPointerLeave",v="onPointerEnter",w="pointer"),x=m==null?p:eh(m),S=g==null?p:eh(g),p=new y(T,w+"leave",m,t,f),p.target=x,p.relatedTarget=S,T=null,ec(f)===u&&(y=new y(v,w+"enter",g,t,f),y.target=S,y.relatedTarget=x,T=y),x=T,m&&g)t:{for(y=m,v=g,w=0,S=y;S;S=df(S))w++;for(S=0,T=v;T;T=df(T))S++;for(;0<w-S;)y=df(y),w--;for(;0<S-w;)v=df(v),S--;for(;w--;){if(y===v||v!==null&&y===v.alternate)break t;y=df(y),v=df(v)}y=null}else y=null;m!==null&&ZA(d,p,m,y,!1),g!==null&&x!==null&&ZA(d,x,g,y,!0)}}e:{if(p=u?eh(u):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var b=D6;else if(VA(p))if(aO)b=O6;else{b=I6;var P=L6}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(b=k6);if(b&&(b=b(n,u))){oO(d,b,t,f);break e}P&&P(n,p,u),n==="focusout"&&(P=p._wrapperState)&&P.controlled&&p.type==="number"&&pM(p,"number",p.value)}switch(P=u?eh(u):window,n){case"focusin":(VA(P)||P.contentEditable==="true")&&(Jf=P,bM=u,zp=null);break;case"focusout":zp=bM=Jf=null;break;case"mousedown":CM=!0;break;case"contextmenu":case"mouseup":case"dragend":CM=!1,XA(d,t,f);break;case"selectionchange":if(F6)break;case"keydown":case"keyup":XA(d,t,f)}var R;if(cb)e:{switch(n){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else Kf?rO(n,t)&&(D="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(D="onCompositionStart");D&&(iO&&t.locale!=="ko"&&(Kf||D!=="onCompositionStart"?D==="onCompositionEnd"&&Kf&&(R=nO()):(bl=f,ab="value"in bl?bl.value:bl.textContent,Kf=!0)),P=l_(u,D),0<P.length&&(D=new UA(D,n,null,t,f),d.push({event:D,listeners:P}),R?D.data=R:(R=sO(t),R!==null&&(D.data=R)))),(R=b6?C6(n,t):P6(n,t))&&(u=l_(u,"onBeforeInput"),0<u.length&&(f=new UA("onBeforeInput","beforeinput",null,t,f),d.push({event:f,listeners:u}),f.data=R))}vO(d,e)})}function Em(n,e,t){return{instance:n,listener:e,currentTarget:t}}function l_(n,e){for(var t=e+"Capture",i=[];n!==null;){var r=n,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=ym(n,t),s!=null&&i.unshift(Em(n,s,r)),s=ym(n,e),s!=null&&i.push(Em(n,s,r))),n=n.return}return i}function df(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function ZA(n,e,t,i,r){for(var s=e._reactName,o=[];t!==null&&t!==i;){var a=t,l=a.alternate,u=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&u!==null&&(a=u,r?(l=ym(t,s),l!=null&&o.unshift(Em(t,l,a))):r||(l=ym(t,s),l!=null&&o.push(Em(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var H6=/\r\n?/g,G6=/\u0000|\uFFFD/g;function $A(n){return(typeof n=="string"?n:""+n).replace(H6,`
`).replace(G6,"")}function $v(n,e,t){if(e=$A(e),$A(n)!==e&&t)throw Error(Le(425))}function u_(){}var PM=null,AM=null;function RM(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var DM=typeof setTimeout=="function"?setTimeout:void 0,W6=typeof clearTimeout=="function"?clearTimeout:void 0,KA=typeof Promise=="function"?Promise:void 0,j6=typeof queueMicrotask=="function"?queueMicrotask:typeof KA<"u"?function(n){return KA.resolve(null).then(n).catch(X6)}:DM;function X6(n){setTimeout(function(){throw n})}function ES(n,e){var t=e,i=0;do{var r=t.nextSibling;if(n.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(i===0){n.removeChild(r),Sm(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=r}while(t);Sm(e)}function zl(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function JA(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var od=Math.random().toString(36).slice(2),Go="__reactFiber$"+od,bm="__reactProps$"+od,Ga="__reactContainer$"+od,LM="__reactEvents$"+od,Y6="__reactListeners$"+od,q6="__reactHandles$"+od;function ec(n){var e=n[Go];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Ga]||t[Go]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=JA(n);n!==null;){if(t=n[Go])return t;n=JA(n)}return e}n=t,t=n.parentNode}return null}function pg(n){return n=n[Go]||n[Ga],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function eh(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Le(33))}function ux(n){return n[bm]||null}var IM=[],th=-1;function fu(n){return{current:n}}function Tn(n){0>th||(n.current=IM[th],IM[th]=null,th--)}function _n(n,e){th++,IM[th]=n.current,n.current=e}var eu={},ur=fu(eu),Hr=fu(!1),Cc=eu;function Uh(n,e){var t=n.type.contextTypes;if(!t)return eu;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in t)r[s]=e[s];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=r),r}function Gr(n){return n=n.childContextTypes,n!=null}function c_(){Tn(Hr),Tn(ur)}function QA(n,e,t){if(ur.current!==eu)throw Error(Le(168));_n(ur,e),_n(Hr,t)}function _O(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(Le(108,LH(n)||"Unknown",r));return Vn({},t,i)}function f_(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||eu,Cc=ur.current,_n(ur,n),_n(Hr,Hr.current),!0}function eR(n,e,t){var i=n.stateNode;if(!i)throw Error(Le(169));t?(n=_O(n,e,Cc),i.__reactInternalMemoizedMergedChildContext=n,Tn(Hr),Tn(ur),_n(ur,n)):Tn(Hr),_n(Hr,t)}var ba=null,cx=!1,bS=!1;function xO(n){ba===null?ba=[n]:ba.push(n)}function Z6(n){cx=!0,xO(n)}function hu(){if(!bS&&ba!==null){bS=!0;var n=0,e=fn;try{var t=ba;for(fn=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}ba=null,cx=!1}catch(r){throw ba!==null&&(ba=ba.slice(n+1)),jk(ib,hu),r}finally{fn=e,bS=!1}}return null}var nh=[],ih=0,h_=null,d_=0,Bs=[],Vs=0,Pc=null,Da=1,La="";function Wu(n,e){nh[ih++]=d_,nh[ih++]=h_,h_=n,d_=e}function SO(n,e,t){Bs[Vs++]=Da,Bs[Vs++]=La,Bs[Vs++]=Pc,Pc=n;var i=Da;n=La;var r=32-Mo(i)-1;i&=~(1<<r),t+=1;var s=32-Mo(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Da=1<<32-Mo(e)+r|t<<r|i,La=s+n}else Da=1<<s|t<<r|i,La=n}function hb(n){n.return!==null&&(Wu(n,1),SO(n,1,0))}function db(n){for(;n===h_;)h_=nh[--ih],nh[ih]=null,d_=nh[--ih],nh[ih]=null;for(;n===Pc;)Pc=Bs[--Vs],Bs[Vs]=null,La=Bs[--Vs],Bs[Vs]=null,Da=Bs[--Vs],Bs[Vs]=null}var ds=null,fs=null,Rn=!1,yo=null;function wO(n,e){var t=Gs(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function tR(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,ds=n,fs=zl(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,ds=n,fs=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Pc!==null?{id:Da,overflow:La}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Gs(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,ds=n,fs=null,!0):!1;default:return!1}}function kM(n){return(n.mode&1)!==0&&(n.flags&128)===0}function OM(n){if(Rn){var e=fs;if(e){var t=e;if(!tR(n,e)){if(kM(n))throw Error(Le(418));e=zl(t.nextSibling);var i=ds;e&&tR(n,e)?wO(i,t):(n.flags=n.flags&-4097|2,Rn=!1,ds=n)}}else{if(kM(n))throw Error(Le(418));n.flags=n.flags&-4097|2,Rn=!1,ds=n}}}function nR(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;ds=n}function Kv(n){if(n!==ds)return!1;if(!Rn)return nR(n),Rn=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!RM(n.type,n.memoizedProps)),e&&(e=fs)){if(kM(n))throw MO(),Error(Le(418));for(;e;)wO(n,e),e=zl(e.nextSibling)}if(nR(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Le(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){fs=zl(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}fs=null}}else fs=ds?zl(n.stateNode.nextSibling):null;return!0}function MO(){for(var n=fs;n;)n=zl(n.nextSibling)}function Fh(){fs=ds=null,Rn=!1}function pb(n){yo===null?yo=[n]:yo.push(n)}var $6=Ka.ReactCurrentBatchConfig;function po(n,e){if(n&&n.defaultProps){e=Vn({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var p_=fu(null),m_=null,rh=null,mb=null;function gb(){mb=rh=m_=null}function vb(n){var e=p_.current;Tn(p_),n._currentValue=e}function NM(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function Eh(n,e){m_=n,mb=rh=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Vr=!0),n.firstContext=null)}function Ks(n){var e=n._currentValue;if(mb!==n)if(n={context:n,memoizedValue:e,next:null},rh===null){if(m_===null)throw Error(Le(308));rh=n,m_.dependencies={lanes:0,firstContext:n}}else rh=rh.next=n;return e}var tc=null;function yb(n){tc===null?tc=[n]:tc.push(n)}function TO(n,e,t,i){var r=e.interleaved;return r===null?(t.next=t,yb(e)):(t.next=r.next,r.next=t),e.interleaved=t,Wa(n,i)}function Wa(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Sl=!1;function _b(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function EO(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Na(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Bl(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,Kt&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Wa(n,t)}return r=i.interleaved,r===null?(e.next=e,yb(i)):(e.next=r.next,r.next=e),i.interleaved=e,Wa(n,t)}function wy(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,rb(n,t)}}function iR(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var r=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?r=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?r=s=e:s=s.next=e}else r=s=e;t={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function g_(n,e,t,i){var r=n.updateQueue;Sl=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var f=n.alternate;f!==null&&(f=f.updateQueue,a=f.lastBaseUpdate,a!==o&&(a===null?f.firstBaseUpdate=u:a.next=u,f.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;o=0,f=u=l=null,a=s;do{var p=a.lane,m=a.eventTime;if((i&p)===p){f!==null&&(f=f.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=n,y=a;switch(p=e,m=t,y.tag){case 1:if(g=y.payload,typeof g=="function"){d=g.call(m,d,p);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=y.payload,p=typeof g=="function"?g.call(m,d,p):g,p==null)break e;d=Vn({},d,p);break e;case 2:Sl=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,p=r.effects,p===null?r.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},f===null?(u=f=m,l=d):f=f.next=m,o|=p;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;p=a,a=p.next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}while(1);if(f===null&&(l=d),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=f,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Rc|=o,n.lanes=o,n.memoizedState=d}}function rR(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],r=i.callback;if(r!==null){if(i.callback=null,i=t,typeof r!="function")throw Error(Le(191,r));r.call(i)}}}var bO=new Tk.Component().refs;function UM(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:Vn({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var fx={isMounted:function(n){return(n=n._reactInternals)?Gc(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=Mr(),r=Hl(n),s=Na(i,r);s.payload=e,t!=null&&(s.callback=t),e=Bl(n,s,r),e!==null&&(To(e,n,r,i),wy(e,n,r))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=Mr(),r=Hl(n),s=Na(i,r);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=Bl(n,s,r),e!==null&&(To(e,n,r,i),wy(e,n,r))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Mr(),i=Hl(n),r=Na(t,i);r.tag=2,e!=null&&(r.callback=e),e=Bl(n,r,i),e!==null&&(To(e,n,i,t),wy(e,n,i))}};function sR(n,e,t,i,r,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!Mm(t,i)||!Mm(r,s):!0}function CO(n,e,t){var i=!1,r=eu,s=e.contextType;return typeof s=="object"&&s!==null?s=Ks(s):(r=Gr(e)?Cc:ur.current,i=e.contextTypes,s=(i=i!=null)?Uh(n,r):eu),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=fx,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=s),e}function oR(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&fx.enqueueReplaceState(e,e.state,null)}function FM(n,e,t,i){var r=n.stateNode;r.props=t,r.state=n.memoizedState,r.refs=bO,_b(n);var s=e.contextType;typeof s=="object"&&s!==null?r.context=Ks(s):(s=Gr(e)?Cc:ur.current,r.context=Uh(n,s)),r.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(UM(n,e,s,t),r.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&fx.enqueueReplaceState(r,r.state,null),g_(n,t,r,i),r.state=n.memoizedState),typeof r.componentDidMount=="function"&&(n.flags|=4194308)}function Yd(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Le(309));var i=t.stateNode}if(!i)throw Error(Le(147,n));var r=i,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;a===bO&&(a=r.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(Le(284));if(!t._owner)throw Error(Le(290,n))}return n}function Jv(n,e){throw n=Object.prototype.toString.call(e),Error(Le(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function aR(n){var e=n._init;return e(n._payload)}function PO(n){function e(v,w){if(n){var S=v.deletions;S===null?(v.deletions=[w],v.flags|=16):S.push(w)}}function t(v,w){if(!n)return null;for(;w!==null;)e(v,w),w=w.sibling;return null}function i(v,w){for(v=new Map;w!==null;)w.key!==null?v.set(w.key,w):v.set(w.index,w),w=w.sibling;return v}function r(v,w){return v=Gl(v,w),v.index=0,v.sibling=null,v}function s(v,w,S){return v.index=S,n?(S=v.alternate,S!==null?(S=S.index,S<w?(v.flags|=2,w):S):(v.flags|=2,w)):(v.flags|=1048576,w)}function o(v){return n&&v.alternate===null&&(v.flags|=2),v}function a(v,w,S,T){return w===null||w.tag!==6?(w=IS(S,v.mode,T),w.return=v,w):(w=r(w,S),w.return=v,w)}function l(v,w,S,T){var b=S.type;return b===$f?f(v,w,S.props.children,T,S.key):w!==null&&(w.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===xl&&aR(b)===w.type)?(T=r(w,S.props),T.ref=Yd(v,w,S),T.return=v,T):(T=Py(S.type,S.key,S.props,null,v.mode,T),T.ref=Yd(v,w,S),T.return=v,T)}function u(v,w,S,T){return w===null||w.tag!==4||w.stateNode.containerInfo!==S.containerInfo||w.stateNode.implementation!==S.implementation?(w=kS(S,v.mode,T),w.return=v,w):(w=r(w,S.children||[]),w.return=v,w)}function f(v,w,S,T,b){return w===null||w.tag!==7?(w=mc(S,v.mode,T,b),w.return=v,w):(w=r(w,S),w.return=v,w)}function d(v,w,S){if(typeof w=="string"&&w!==""||typeof w=="number")return w=IS(""+w,v.mode,S),w.return=v,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Vv:return S=Py(w.type,w.key,w.props,null,v.mode,S),S.ref=Yd(v,null,w),S.return=v,S;case Zf:return w=kS(w,v.mode,S),w.return=v,w;case xl:var T=w._init;return d(v,T(w._payload),S)}if(Sp(w)||Hd(w))return w=mc(w,v.mode,S,null),w.return=v,w;Jv(v,w)}return null}function p(v,w,S,T){var b=w!==null?w.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return b!==null?null:a(v,w,""+S,T);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Vv:return S.key===b?l(v,w,S,T):null;case Zf:return S.key===b?u(v,w,S,T):null;case xl:return b=S._init,p(v,w,b(S._payload),T)}if(Sp(S)||Hd(S))return b!==null?null:f(v,w,S,T,null);Jv(v,S)}return null}function m(v,w,S,T,b){if(typeof T=="string"&&T!==""||typeof T=="number")return v=v.get(S)||null,a(w,v,""+T,b);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Vv:return v=v.get(T.key===null?S:T.key)||null,l(w,v,T,b);case Zf:return v=v.get(T.key===null?S:T.key)||null,u(w,v,T,b);case xl:var P=T._init;return m(v,w,S,P(T._payload),b)}if(Sp(T)||Hd(T))return v=v.get(S)||null,f(w,v,T,b,null);Jv(w,T)}return null}function g(v,w,S,T){for(var b=null,P=null,R=w,D=w=0,C=null;R!==null&&D<S.length;D++){R.index>D?(C=R,R=null):C=R.sibling;var L=p(v,R,S[D],T);if(L===null){R===null&&(R=C);break}n&&R&&L.alternate===null&&e(v,R),w=s(L,w,D),P===null?b=L:P.sibling=L,P=L,R=C}if(D===S.length)return t(v,R),Rn&&Wu(v,D),b;if(R===null){for(;D<S.length;D++)R=d(v,S[D],T),R!==null&&(w=s(R,w,D),P===null?b=R:P.sibling=R,P=R);return Rn&&Wu(v,D),b}for(R=i(v,R);D<S.length;D++)C=m(R,v,D,S[D],T),C!==null&&(n&&C.alternate!==null&&R.delete(C.key===null?D:C.key),w=s(C,w,D),P===null?b=C:P.sibling=C,P=C);return n&&R.forEach(function(F){return e(v,F)}),Rn&&Wu(v,D),b}function y(v,w,S,T){var b=Hd(S);if(typeof b!="function")throw Error(Le(150));if(S=b.call(S),S==null)throw Error(Le(151));for(var P=b=null,R=w,D=w=0,C=null,L=S.next();R!==null&&!L.done;D++,L=S.next()){R.index>D?(C=R,R=null):C=R.sibling;var F=p(v,R,L.value,T);if(F===null){R===null&&(R=C);break}n&&R&&F.alternate===null&&e(v,R),w=s(F,w,D),P===null?b=F:P.sibling=F,P=F,R=C}if(L.done)return t(v,R),Rn&&Wu(v,D),b;if(R===null){for(;!L.done;D++,L=S.next())L=d(v,L.value,T),L!==null&&(w=s(L,w,D),P===null?b=L:P.sibling=L,P=L);return Rn&&Wu(v,D),b}for(R=i(v,R);!L.done;D++,L=S.next())L=m(R,v,D,L.value,T),L!==null&&(n&&L.alternate!==null&&R.delete(L.key===null?D:L.key),w=s(L,w,D),P===null?b=L:P.sibling=L,P=L);return n&&R.forEach(function(H){return e(v,H)}),Rn&&Wu(v,D),b}function x(v,w,S,T){if(typeof S=="object"&&S!==null&&S.type===$f&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Vv:e:{for(var b=S.key,P=w;P!==null;){if(P.key===b){if(b=S.type,b===$f){if(P.tag===7){t(v,P.sibling),w=r(P,S.props.children),w.return=v,v=w;break e}}else if(P.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===xl&&aR(b)===P.type){t(v,P.sibling),w=r(P,S.props),w.ref=Yd(v,P,S),w.return=v,v=w;break e}t(v,P);break}else e(v,P);P=P.sibling}S.type===$f?(w=mc(S.props.children,v.mode,T,S.key),w.return=v,v=w):(T=Py(S.type,S.key,S.props,null,v.mode,T),T.ref=Yd(v,w,S),T.return=v,v=T)}return o(v);case Zf:e:{for(P=S.key;w!==null;){if(w.key===P)if(w.tag===4&&w.stateNode.containerInfo===S.containerInfo&&w.stateNode.implementation===S.implementation){t(v,w.sibling),w=r(w,S.children||[]),w.return=v,v=w;break e}else{t(v,w);break}else e(v,w);w=w.sibling}w=kS(S,v.mode,T),w.return=v,v=w}return o(v);case xl:return P=S._init,x(v,w,P(S._payload),T)}if(Sp(S))return g(v,w,S,T);if(Hd(S))return y(v,w,S,T);Jv(v,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,w!==null&&w.tag===6?(t(v,w.sibling),w=r(w,S),w.return=v,v=w):(t(v,w),w=IS(S,v.mode,T),w.return=v,v=w),o(v)):t(v,w)}return x}var zh=PO(!0),AO=PO(!1),mg={},$o=fu(mg),Cm=fu(mg),Pm=fu(mg);function nc(n){if(n===mg)throw Error(Le(174));return n}function xb(n,e){switch(_n(Pm,e),_n(Cm,n),_n($o,mg),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:gM(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=gM(e,n)}Tn($o),_n($o,e)}function Bh(){Tn($o),Tn(Cm),Tn(Pm)}function RO(n){nc(Pm.current);var e=nc($o.current),t=gM(e,n.type);e!==t&&(_n(Cm,n),_n($o,t))}function Sb(n){Cm.current===n&&(Tn($o),Tn(Cm))}var kn=fu(0);function v_(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var CS=[];function wb(){for(var n=0;n<CS.length;n++)CS[n]._workInProgressVersionPrimary=null;CS.length=0}var My=Ka.ReactCurrentDispatcher,PS=Ka.ReactCurrentBatchConfig,Ac=0,Bn=null,fi=null,Li=null,y_=!1,Bp=!1,Am=0,K6=0;function Ki(){throw Error(Le(321))}function Mb(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Po(n[t],e[t]))return!1;return!0}function Tb(n,e,t,i,r,s){if(Ac=s,Bn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,My.current=n===null||n.memoizedState===null?tG:nG,n=t(i,r),Bp){s=0;do{if(Bp=!1,Am=0,25<=s)throw Error(Le(301));s+=1,Li=fi=null,e.updateQueue=null,My.current=iG,n=t(i,r)}while(Bp)}if(My.current=__,e=fi!==null&&fi.next!==null,Ac=0,Li=fi=Bn=null,y_=!1,e)throw Error(Le(300));return n}function Eb(){var n=Am!==0;return Am=0,n}function Bo(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Li===null?Bn.memoizedState=Li=n:Li=Li.next=n,Li}function Js(){if(fi===null){var n=Bn.alternate;n=n!==null?n.memoizedState:null}else n=fi.next;var e=Li===null?Bn.memoizedState:Li.next;if(e!==null)Li=e,fi=n;else{if(n===null)throw Error(Le(310));fi=n,n={memoizedState:fi.memoizedState,baseState:fi.baseState,baseQueue:fi.baseQueue,queue:fi.queue,next:null},Li===null?Bn.memoizedState=Li=n:Li=Li.next=n}return Li}function Rm(n,e){return typeof e=="function"?e(n):e}function AS(n){var e=Js(),t=e.queue;if(t===null)throw Error(Le(311));t.lastRenderedReducer=n;var i=fi,r=i.baseQueue,s=t.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,t.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,u=s;do{var f=u.lane;if((Ac&f)===f)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:n(i,u.action);else{var d={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=i):l=l.next=d,Bn.lanes|=f,Rc|=f}u=u.next}while(u!==null&&u!==s);l===null?o=i:l.next=a,Po(i,e.memoizedState)||(Vr=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,t.lastRenderedState=i}if(n=t.interleaved,n!==null){r=n;do s=r.lane,Bn.lanes|=s,Rc|=s,r=r.next;while(r!==n)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function RS(n){var e=Js(),t=e.queue;if(t===null)throw Error(Le(311));t.lastRenderedReducer=n;var i=t.dispatch,r=t.pending,s=e.memoizedState;if(r!==null){t.pending=null;var o=r=r.next;do s=n(s,o.action),o=o.next;while(o!==r);Po(s,e.memoizedState)||(Vr=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,i]}function DO(){}function LO(n,e){var t=Bn,i=Js(),r=e(),s=!Po(i.memoizedState,r);if(s&&(i.memoizedState=r,Vr=!0),i=i.queue,bb(OO.bind(null,t,i,n),[n]),i.getSnapshot!==e||s||Li!==null&&Li.memoizedState.tag&1){if(t.flags|=2048,Dm(9,kO.bind(null,t,i,r,e),void 0,null),ki===null)throw Error(Le(349));Ac&30||IO(t,e,r)}return r}function IO(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Bn.updateQueue,e===null?(e={lastEffect:null,stores:null},Bn.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function kO(n,e,t,i){e.value=t,e.getSnapshot=i,NO(e)&&UO(n)}function OO(n,e,t){return t(function(){NO(e)&&UO(n)})}function NO(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Po(n,t)}catch{return!0}}function UO(n){var e=Wa(n,1);e!==null&&To(e,n,1,-1)}function lR(n){var e=Bo();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Rm,lastRenderedState:n},e.queue=n,n=n.dispatch=eG.bind(null,Bn,n),[e.memoizedState,n]}function Dm(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=Bn.updateQueue,e===null?(e={lastEffect:null,stores:null},Bn.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function FO(){return Js().memoizedState}function Ty(n,e,t,i){var r=Bo();Bn.flags|=n,r.memoizedState=Dm(1|e,t,void 0,i===void 0?null:i)}function hx(n,e,t,i){var r=Js();i=i===void 0?null:i;var s=void 0;if(fi!==null){var o=fi.memoizedState;if(s=o.destroy,i!==null&&Mb(i,o.deps)){r.memoizedState=Dm(e,t,s,i);return}}Bn.flags|=n,r.memoizedState=Dm(1|e,t,s,i)}function uR(n,e){return Ty(8390656,8,n,e)}function bb(n,e){return hx(2048,8,n,e)}function zO(n,e){return hx(4,2,n,e)}function BO(n,e){return hx(4,4,n,e)}function VO(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function HO(n,e,t){return t=t!=null?t.concat([n]):null,hx(4,4,VO.bind(null,e,n),t)}function Cb(){}function GO(n,e){var t=Js();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&Mb(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function WO(n,e){var t=Js();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&Mb(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function jO(n,e,t){return Ac&21?(Po(t,e)||(t=qk(),Bn.lanes|=t,Rc|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Vr=!0),n.memoizedState=t)}function J6(n,e){var t=fn;fn=t!==0&&4>t?t:4,n(!0);var i=PS.transition;PS.transition={};try{n(!1),e()}finally{fn=t,PS.transition=i}}function XO(){return Js().memoizedState}function Q6(n,e,t){var i=Hl(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},YO(n))qO(e,t);else if(t=TO(n,e,t,i),t!==null){var r=Mr();To(t,n,i,r),ZO(t,e,i)}}function eG(n,e,t){var i=Hl(n),r={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(YO(n))qO(e,r);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(r.hasEagerState=!0,r.eagerState=a,Po(a,o)){var l=e.interleaved;l===null?(r.next=r,yb(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}t=TO(n,e,r,i),t!==null&&(r=Mr(),To(t,n,i,r),ZO(t,e,i))}}function YO(n){var e=n.alternate;return n===Bn||e!==null&&e===Bn}function qO(n,e){Bp=y_=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function ZO(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,rb(n,t)}}var __={readContext:Ks,useCallback:Ki,useContext:Ki,useEffect:Ki,useImperativeHandle:Ki,useInsertionEffect:Ki,useLayoutEffect:Ki,useMemo:Ki,useReducer:Ki,useRef:Ki,useState:Ki,useDebugValue:Ki,useDeferredValue:Ki,useTransition:Ki,useMutableSource:Ki,useSyncExternalStore:Ki,useId:Ki,unstable_isNewReconciler:!1},tG={readContext:Ks,useCallback:function(n,e){return Bo().memoizedState=[n,e===void 0?null:e],n},useContext:Ks,useEffect:uR,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Ty(4194308,4,VO.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Ty(4194308,4,n,e)},useInsertionEffect:function(n,e){return Ty(4,2,n,e)},useMemo:function(n,e){var t=Bo();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=Bo();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=Q6.bind(null,Bn,n),[i.memoizedState,n]},useRef:function(n){var e=Bo();return n={current:n},e.memoizedState=n},useState:lR,useDebugValue:Cb,useDeferredValue:function(n){return Bo().memoizedState=n},useTransition:function(){var n=lR(!1),e=n[0];return n=J6.bind(null,n[1]),Bo().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=Bn,r=Bo();if(Rn){if(t===void 0)throw Error(Le(407));t=t()}else{if(t=e(),ki===null)throw Error(Le(349));Ac&30||IO(i,e,t)}r.memoizedState=t;var s={value:t,getSnapshot:e};return r.queue=s,uR(OO.bind(null,i,s,n),[n]),i.flags|=2048,Dm(9,kO.bind(null,i,s,t,e),void 0,null),t},useId:function(){var n=Bo(),e=ki.identifierPrefix;if(Rn){var t=La,i=Da;t=(i&~(1<<32-Mo(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=Am++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=K6++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},nG={readContext:Ks,useCallback:GO,useContext:Ks,useEffect:bb,useImperativeHandle:HO,useInsertionEffect:zO,useLayoutEffect:BO,useMemo:WO,useReducer:AS,useRef:FO,useState:function(){return AS(Rm)},useDebugValue:Cb,useDeferredValue:function(n){var e=Js();return jO(e,fi.memoizedState,n)},useTransition:function(){var n=AS(Rm)[0],e=Js().memoizedState;return[n,e]},useMutableSource:DO,useSyncExternalStore:LO,useId:XO,unstable_isNewReconciler:!1},iG={readContext:Ks,useCallback:GO,useContext:Ks,useEffect:bb,useImperativeHandle:HO,useInsertionEffect:zO,useLayoutEffect:BO,useMemo:WO,useReducer:RS,useRef:FO,useState:function(){return RS(Rm)},useDebugValue:Cb,useDeferredValue:function(n){var e=Js();return fi===null?e.memoizedState=n:jO(e,fi.memoizedState,n)},useTransition:function(){var n=RS(Rm)[0],e=Js().memoizedState;return[n,e]},useMutableSource:DO,useSyncExternalStore:LO,useId:XO,unstable_isNewReconciler:!1};function Vh(n,e){try{var t="",i=e;do t+=DH(i),i=i.return;while(i);var r=t}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:r,digest:null}}function DS(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function zM(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var rG=typeof WeakMap=="function"?WeakMap:Map;function $O(n,e,t){t=Na(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){S_||(S_=!0,ZM=i),zM(n,e)},t}function KO(n,e,t){t=Na(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;t.payload=function(){return i(r)},t.callback=function(){zM(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){zM(n,e),typeof i!="function"&&(Vl===null?Vl=new Set([this]):Vl.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function cR(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new rG;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(t)||(r.add(t),n=yG.bind(null,n,e,t),e.then(n,n))}function fR(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function hR(n,e,t,i,r){return n.mode&1?(n.flags|=65536,n.lanes=r,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Na(-1,1),e.tag=2,Bl(t,e,1))),t.lanes|=1),n)}var sG=Ka.ReactCurrentOwner,Vr=!1;function yr(n,e,t,i){e.child=n===null?AO(e,null,t,i):zh(e,n.child,t,i)}function dR(n,e,t,i,r){t=t.render;var s=e.ref;return Eh(e,r),i=Tb(n,e,t,i,s,r),t=Eb(),n!==null&&!Vr?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,ja(n,e,r)):(Rn&&t&&hb(e),e.flags|=1,yr(n,e,i,r),e.child)}function pR(n,e,t,i,r){if(n===null){var s=t.type;return typeof s=="function"&&!Ob(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,JO(n,e,s,i,r)):(n=Py(t.type,null,i,e,e.mode,r),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&r)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:Mm,t(o,i)&&n.ref===e.ref)return ja(n,e,r)}return e.flags|=1,n=Gl(s,i),n.ref=e.ref,n.return=e,e.child=n}function JO(n,e,t,i,r){if(n!==null){var s=n.memoizedProps;if(Mm(s,i)&&n.ref===e.ref)if(Vr=!1,e.pendingProps=i=s,(n.lanes&r)!==0)n.flags&131072&&(Vr=!0);else return e.lanes=n.lanes,ja(n,e,r)}return BM(n,e,t,i,r)}function QO(n,e,t){var i=e.pendingProps,r=i.children,s=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},_n(oh,os),os|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,_n(oh,os),os|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:t,_n(oh,os),os|=i}else s!==null?(i=s.baseLanes|t,e.memoizedState=null):i=t,_n(oh,os),os|=i;return yr(n,e,r,t),e.child}function eN(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function BM(n,e,t,i,r){var s=Gr(t)?Cc:ur.current;return s=Uh(e,s),Eh(e,r),t=Tb(n,e,t,i,s,r),i=Eb(),n!==null&&!Vr?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,ja(n,e,r)):(Rn&&i&&hb(e),e.flags|=1,yr(n,e,t,r),e.child)}function mR(n,e,t,i,r){if(Gr(t)){var s=!0;f_(e)}else s=!1;if(Eh(e,r),e.stateNode===null)Ey(n,e),CO(e,t,i),FM(e,t,i,r),i=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=t.contextType;typeof u=="object"&&u!==null?u=Ks(u):(u=Gr(t)?Cc:ur.current,u=Uh(e,u));var f=t.getDerivedStateFromProps,d=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==u)&&oR(e,o,i,u),Sl=!1;var p=e.memoizedState;o.state=p,g_(e,i,o,r),l=e.memoizedState,a!==i||p!==l||Hr.current||Sl?(typeof f=="function"&&(UM(e,t,f,i),l=e.memoizedState),(a=Sl||sR(e,t,a,i,p,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=u,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,EO(n,e),a=e.memoizedProps,u=e.type===e.elementType?a:po(e.type,a),o.props=u,d=e.pendingProps,p=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=Ks(l):(l=Gr(t)?Cc:ur.current,l=Uh(e,l));var m=t.getDerivedStateFromProps;(f=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||p!==l)&&oR(e,o,i,l),Sl=!1,p=e.memoizedState,o.state=p,g_(e,i,o,r);var g=e.memoizedState;a!==d||p!==g||Hr.current||Sl?(typeof m=="function"&&(UM(e,t,m,i),g=e.memoizedState),(u=Sl||sR(e,t,u,i,p,g,l)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=g),o.props=i,o.state=g,o.context=l,i=u):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),i=!1)}return VM(n,e,t,i,s,r)}function VM(n,e,t,i,r,s){eN(n,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&eR(e,t,!1),ja(n,e,s);i=e.stateNode,sG.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&o?(e.child=zh(e,n.child,null,s),e.child=zh(e,null,a,s)):yr(n,e,a,s),e.memoizedState=i.state,r&&eR(e,t,!0),e.child}function tN(n){var e=n.stateNode;e.pendingContext?QA(n,e.pendingContext,e.pendingContext!==e.context):e.context&&QA(n,e.context,!1),xb(n,e.containerInfo)}function gR(n,e,t,i,r){return Fh(),pb(r),e.flags|=256,yr(n,e,t,i),e.child}var HM={dehydrated:null,treeContext:null,retryLane:0};function GM(n){return{baseLanes:n,cachePool:null,transitions:null}}function nN(n,e,t){var i=e.pendingProps,r=kn.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(r|=1),_n(kn,r&1),n===null)return OM(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,n=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=mx(o,i,0,null),n=mc(n,i,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=GM(t),e.memoizedState=HM,n):Pb(e,o));if(r=n.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return oG(n,e,o,i,a,r,t);if(s){s=i.fallback,o=e.mode,r=n.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=Gl(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=Gl(a,s):(s=mc(s,o,t,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=n.child.memoizedState,o=o===null?GM(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=HM,i}return s=n.child,n=s.sibling,i=Gl(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function Pb(n,e){return e=mx({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Qv(n,e,t,i){return i!==null&&pb(i),zh(e,n.child,null,t),n=Pb(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function oG(n,e,t,i,r,s,o){if(t)return e.flags&256?(e.flags&=-257,i=DS(Error(Le(422))),Qv(n,e,o,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=mx({mode:"visible",children:i.children},r,0,null),s=mc(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&zh(e,n.child,null,o),e.child.memoizedState=GM(o),e.memoizedState=HM,s);if(!(e.mode&1))return Qv(n,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(Le(419)),i=DS(s,i,void 0),Qv(n,e,o,i)}if(a=(o&n.childLanes)!==0,Vr||a){if(i=ki,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,Wa(n,r),To(i,n,r,-1))}return kb(),i=DS(Error(Le(421))),Qv(n,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=n.child,e=_G.bind(null,n),r._reactRetry=e,null):(n=s.treeContext,fs=zl(r.nextSibling),ds=e,Rn=!0,yo=null,n!==null&&(Bs[Vs++]=Da,Bs[Vs++]=La,Bs[Vs++]=Pc,Da=n.id,La=n.overflow,Pc=e),e=Pb(e,i.children),e.flags|=4096,e)}function vR(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),NM(n.return,e,t)}function LS(n,e,t,i,r){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=t,s.tailMode=r)}function iN(n,e,t){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(yr(n,e,i.children,t),i=kn.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&vR(n,t,e);else if(n.tag===19)vR(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(_n(kn,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)n=t.alternate,n!==null&&v_(n)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),LS(e,!1,r,t,s);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(n=r.alternate,n!==null&&v_(n)===null){e.child=r;break}n=r.sibling,r.sibling=t,t=r,r=n}LS(e,!0,t,null,s);break;case"together":LS(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ey(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function ja(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Rc|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(Le(153));if(e.child!==null){for(n=e.child,t=Gl(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Gl(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function aG(n,e,t){switch(e.tag){case 3:tN(e),Fh();break;case 5:RO(e);break;case 1:Gr(e.type)&&f_(e);break;case 4:xb(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;_n(p_,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(_n(kn,kn.current&1),e.flags|=128,null):t&e.child.childLanes?nN(n,e,t):(_n(kn,kn.current&1),n=ja(n,e,t),n!==null?n.sibling:null);_n(kn,kn.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return iN(n,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),_n(kn,kn.current),i)break;return null;case 22:case 23:return e.lanes=0,QO(n,e,t)}return ja(n,e,t)}var rN,WM,sN,oN;rN=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};WM=function(){};sN=function(n,e,t,i){var r=n.memoizedProps;if(r!==i){n=e.stateNode,nc($o.current);var s=null;switch(t){case"input":r=hM(n,r),i=hM(n,i),s=[];break;case"select":r=Vn({},r,{value:void 0}),i=Vn({},i,{value:void 0}),s=[];break;case"textarea":r=mM(n,r),i=mM(n,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=u_)}vM(t,i);var o;t=null;for(u in r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var a=r[u];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(gm.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in i){var l=i[u];if(a=r!=null?r[u]:void 0,i.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(u,t)),t=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(gm.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&wn("scroll",n),s||a===l||(s=[])):(s=s||[]).push(u,l))}t&&(s=s||[]).push("style",t);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};oN=function(n,e,t,i){t!==i&&(e.flags|=4)};function qd(n,e){if(!Rn)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function Ji(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function lG(n,e,t){var i=e.pendingProps;switch(db(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ji(e),null;case 1:return Gr(e.type)&&c_(),Ji(e),null;case 3:return i=e.stateNode,Bh(),Tn(Hr),Tn(ur),wb(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(Kv(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,yo!==null&&(JM(yo),yo=null))),WM(n,e),Ji(e),null;case 5:Sb(e);var r=nc(Pm.current);if(t=e.type,n!==null&&e.stateNode!=null)sN(n,e,t,i,r),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(Le(166));return Ji(e),null}if(n=nc($o.current),Kv(e)){i=e.stateNode,t=e.type;var s=e.memoizedProps;switch(i[Go]=e,i[bm]=s,n=(e.mode&1)!==0,t){case"dialog":wn("cancel",i),wn("close",i);break;case"iframe":case"object":case"embed":wn("load",i);break;case"video":case"audio":for(r=0;r<Mp.length;r++)wn(Mp[r],i);break;case"source":wn("error",i);break;case"img":case"image":case"link":wn("error",i),wn("load",i);break;case"details":wn("toggle",i);break;case"input":bA(i,s),wn("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},wn("invalid",i);break;case"textarea":PA(i,s),wn("invalid",i)}vM(t,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&$v(i.textContent,a,n),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&$v(i.textContent,a,n),r=["children",""+a]):gm.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&wn("scroll",i)}switch(t){case"input":Hv(i),CA(i,s,!0);break;case"textarea":Hv(i),AA(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=u_)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Ik(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=o.createElement(t,{is:i.is}):(n=o.createElement(t),t==="select"&&(o=n,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):n=o.createElementNS(n,t),n[Go]=e,n[bm]=i,rN(n,e,!1,!1),e.stateNode=n;e:{switch(o=yM(t,i),t){case"dialog":wn("cancel",n),wn("close",n),r=i;break;case"iframe":case"object":case"embed":wn("load",n),r=i;break;case"video":case"audio":for(r=0;r<Mp.length;r++)wn(Mp[r],n);r=i;break;case"source":wn("error",n),r=i;break;case"img":case"image":case"link":wn("error",n),wn("load",n),r=i;break;case"details":wn("toggle",n),r=i;break;case"input":bA(n,i),r=hM(n,i),wn("invalid",n);break;case"option":r=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},r=Vn({},i,{value:void 0}),wn("invalid",n);break;case"textarea":PA(n,i),r=mM(n,i),wn("invalid",n);break;default:r=i}vM(t,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?Nk(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&kk(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&vm(n,l):typeof l=="number"&&vm(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(gm.hasOwnProperty(s)?l!=null&&s==="onScroll"&&wn("scroll",n):l!=null&&JE(n,s,l,o))}switch(t){case"input":Hv(n),CA(n,i,!1);break;case"textarea":Hv(n),AA(n);break;case"option":i.value!=null&&n.setAttribute("value",""+Ql(i.value));break;case"select":n.multiple=!!i.multiple,s=i.value,s!=null?Sh(n,!!i.multiple,s,!1):i.defaultValue!=null&&Sh(n,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(n.onclick=u_)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ji(e),null;case 6:if(n&&e.stateNode!=null)oN(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Le(166));if(t=nc(Pm.current),nc($o.current),Kv(e)){if(i=e.stateNode,t=e.memoizedProps,i[Go]=e,(s=i.nodeValue!==t)&&(n=ds,n!==null))switch(n.tag){case 3:$v(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&$v(i.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[Go]=e,e.stateNode=i}return Ji(e),null;case 13:if(Tn(kn),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Rn&&fs!==null&&e.mode&1&&!(e.flags&128))MO(),Fh(),e.flags|=98560,s=!1;else if(s=Kv(e),i!==null&&i.dehydrated!==null){if(n===null){if(!s)throw Error(Le(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Le(317));s[Go]=e}else Fh(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ji(e),s=!1}else yo!==null&&(JM(yo),yo=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||kn.current&1?vi===0&&(vi=3):kb())),e.updateQueue!==null&&(e.flags|=4),Ji(e),null);case 4:return Bh(),WM(n,e),n===null&&Tm(e.stateNode.containerInfo),Ji(e),null;case 10:return vb(e.type._context),Ji(e),null;case 17:return Gr(e.type)&&c_(),Ji(e),null;case 19:if(Tn(kn),s=e.memoizedState,s===null)return Ji(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)qd(s,!1);else{if(vi!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=v_(n),o!==null){for(e.flags|=128,qd(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)s=t,n=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return _n(kn,kn.current&1|2),e.child}n=n.sibling}s.tail!==null&&Qn()>Hh&&(e.flags|=128,i=!0,qd(s,!1),e.lanes=4194304)}else{if(!i)if(n=v_(o),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),qd(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Rn)return Ji(e),null}else 2*Qn()-s.renderingStartTime>Hh&&t!==1073741824&&(e.flags|=128,i=!0,qd(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Qn(),e.sibling=null,t=kn.current,_n(kn,i?t&1|2:t&1),e):(Ji(e),null);case 22:case 23:return Ib(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?os&1073741824&&(Ji(e),e.subtreeFlags&6&&(e.flags|=8192)):Ji(e),null;case 24:return null;case 25:return null}throw Error(Le(156,e.tag))}function uG(n,e){switch(db(e),e.tag){case 1:return Gr(e.type)&&c_(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Bh(),Tn(Hr),Tn(ur),wb(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return Sb(e),null;case 13:if(Tn(kn),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Le(340));Fh()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Tn(kn),null;case 4:return Bh(),null;case 10:return vb(e.type._context),null;case 22:case 23:return Ib(),null;case 24:return null;default:return null}}var e0=!1,ir=!1,cG=typeof WeakSet=="function"?WeakSet:Set,Je=null;function sh(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){jn(n,e,i)}else t.current=null}function jM(n,e,t){try{t()}catch(i){jn(n,e,i)}}var yR=!1;function fG(n,e){if(PM=o_,n=cO(),fb(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,u=0,f=0,d=n,p=null;t:for(;;){for(var m;d!==t||r!==0&&d.nodeType!==3||(a=o+r),d!==s||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)p=d,d=m;for(;;){if(d===n)break t;if(p===t&&++u===r&&(a=o),p===s&&++f===i&&(l=o),(m=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=m}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(AM={focusedElem:n,selectionRange:t},o_=!1,Je=e;Je!==null;)if(e=Je,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,Je=n;else for(;Je!==null;){e=Je;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var y=g.memoizedProps,x=g.memoizedState,v=e.stateNode,w=v.getSnapshotBeforeUpdate(e.elementType===e.type?y:po(e.type,y),x);v.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Le(163))}}catch(T){jn(e,e.return,T)}if(n=e.sibling,n!==null){n.return=e.return,Je=n;break}Je=e.return}return g=yR,yR=!1,g}function Vp(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&n)===n){var s=r.destroy;r.destroy=void 0,s!==void 0&&jM(e,t,s)}r=r.next}while(r!==i)}}function dx(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function XM(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function aN(n){var e=n.alternate;e!==null&&(n.alternate=null,aN(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Go],delete e[bm],delete e[LM],delete e[Y6],delete e[q6])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function lN(n){return n.tag===5||n.tag===3||n.tag===4}function _R(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||lN(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function YM(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=u_));else if(i!==4&&(n=n.child,n!==null))for(YM(n,e,t),n=n.sibling;n!==null;)YM(n,e,t),n=n.sibling}function qM(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(qM(n,e,t),n=n.sibling;n!==null;)qM(n,e,t),n=n.sibling}var Vi=null,go=!1;function ul(n,e,t){for(t=t.child;t!==null;)uN(n,e,t),t=t.sibling}function uN(n,e,t){if(Zo&&typeof Zo.onCommitFiberUnmount=="function")try{Zo.onCommitFiberUnmount(sx,t)}catch{}switch(t.tag){case 5:ir||sh(t,e);case 6:var i=Vi,r=go;Vi=null,ul(n,e,t),Vi=i,go=r,Vi!==null&&(go?(n=Vi,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Vi.removeChild(t.stateNode));break;case 18:Vi!==null&&(go?(n=Vi,t=t.stateNode,n.nodeType===8?ES(n.parentNode,t):n.nodeType===1&&ES(n,t),Sm(n)):ES(Vi,t.stateNode));break;case 4:i=Vi,r=go,Vi=t.stateNode.containerInfo,go=!0,ul(n,e,t),Vi=i,go=r;break;case 0:case 11:case 14:case 15:if(!ir&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&jM(t,e,o),r=r.next}while(r!==i)}ul(n,e,t);break;case 1:if(!ir&&(sh(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(a){jn(t,e,a)}ul(n,e,t);break;case 21:ul(n,e,t);break;case 22:t.mode&1?(ir=(i=ir)||t.memoizedState!==null,ul(n,e,t),ir=i):ul(n,e,t);break;default:ul(n,e,t)}}function xR(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new cG),e.forEach(function(i){var r=xG.bind(null,n,i);t.has(i)||(t.add(i),i.then(r,r))})}}function ao(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var r=t[i];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Vi=a.stateNode,go=!1;break e;case 3:Vi=a.stateNode.containerInfo,go=!0;break e;case 4:Vi=a.stateNode.containerInfo,go=!0;break e}a=a.return}if(Vi===null)throw Error(Le(160));uN(s,o,r),Vi=null,go=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(u){jn(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)cN(e,n),e=e.sibling}function cN(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(ao(e,n),Fo(n),i&4){try{Vp(3,n,n.return),dx(3,n)}catch(y){jn(n,n.return,y)}try{Vp(5,n,n.return)}catch(y){jn(n,n.return,y)}}break;case 1:ao(e,n),Fo(n),i&512&&t!==null&&sh(t,t.return);break;case 5:if(ao(e,n),Fo(n),i&512&&t!==null&&sh(t,t.return),n.flags&32){var r=n.stateNode;try{vm(r,"")}catch(y){jn(n,n.return,y)}}if(i&4&&(r=n.stateNode,r!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Dk(r,s),yM(a,o);var u=yM(a,s);for(o=0;o<l.length;o+=2){var f=l[o],d=l[o+1];f==="style"?Nk(r,d):f==="dangerouslySetInnerHTML"?kk(r,d):f==="children"?vm(r,d):JE(r,f,d,u)}switch(a){case"input":dM(r,s);break;case"textarea":Lk(r,s);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Sh(r,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?Sh(r,!!s.multiple,s.defaultValue,!0):Sh(r,!!s.multiple,s.multiple?[]:"",!1))}r[bm]=s}catch(y){jn(n,n.return,y)}}break;case 6:if(ao(e,n),Fo(n),i&4){if(n.stateNode===null)throw Error(Le(162));r=n.stateNode,s=n.memoizedProps;try{r.nodeValue=s}catch(y){jn(n,n.return,y)}}break;case 3:if(ao(e,n),Fo(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{Sm(e.containerInfo)}catch(y){jn(n,n.return,y)}break;case 4:ao(e,n),Fo(n);break;case 13:ao(e,n),Fo(n),r=n.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(Db=Qn())),i&4&&xR(n);break;case 22:if(f=t!==null&&t.memoizedState!==null,n.mode&1?(ir=(u=ir)||f,ao(e,n),ir=u):ao(e,n),Fo(n),i&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!f&&n.mode&1)for(Je=n,f=n.child;f!==null;){for(d=Je=f;Je!==null;){switch(p=Je,m=p.child,p.tag){case 0:case 11:case 14:case 15:Vp(4,p,p.return);break;case 1:sh(p,p.return);var g=p.stateNode;if(typeof g.componentWillUnmount=="function"){i=p,t=p.return;try{e=i,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(y){jn(i,t,y)}}break;case 5:sh(p,p.return);break;case 22:if(p.memoizedState!==null){wR(d);continue}}m!==null?(m.return=p,Je=m):wR(d)}f=f.sibling}e:for(f=null,d=n;;){if(d.tag===5){if(f===null){f=d;try{r=d.stateNode,u?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Ok("display",o))}catch(y){jn(n,n.return,y)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(y){jn(n,n.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===n)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break e;for(;d.sibling===null;){if(d.return===null||d.return===n)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ao(e,n),Fo(n),i&4&&xR(n);break;case 21:break;default:ao(e,n),Fo(n)}}function Fo(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(lN(t)){var i=t;break e}t=t.return}throw Error(Le(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(vm(r,""),i.flags&=-33);var s=_R(n);qM(n,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=_R(n);YM(n,a,o);break;default:throw Error(Le(161))}}catch(l){jn(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function hG(n,e,t){Je=n,fN(n)}function fN(n,e,t){for(var i=(n.mode&1)!==0;Je!==null;){var r=Je,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||e0;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||ir;a=e0;var u=ir;if(e0=o,(ir=l)&&!u)for(Je=r;Je!==null;)o=Je,l=o.child,o.tag===22&&o.memoizedState!==null?MR(r):l!==null?(l.return=o,Je=l):MR(r);for(;s!==null;)Je=s,fN(s),s=s.sibling;Je=r,e0=a,ir=u}SR(n)}else r.subtreeFlags&8772&&s!==null?(s.return=r,Je=s):SR(n)}}function SR(n){for(;Je!==null;){var e=Je;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ir||dx(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!ir)if(t===null)i.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:po(e.type,t.memoizedProps);i.componentDidUpdate(r,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&rR(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}rR(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&Sm(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Le(163))}ir||e.flags&512&&XM(e)}catch(p){jn(e,e.return,p)}}if(e===n){Je=null;break}if(t=e.sibling,t!==null){t.return=e.return,Je=t;break}Je=e.return}}function wR(n){for(;Je!==null;){var e=Je;if(e===n){Je=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Je=t;break}Je=e.return}}function MR(n){for(;Je!==null;){var e=Je;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{dx(4,e)}catch(l){jn(e,t,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){jn(e,r,l)}}var s=e.return;try{XM(e)}catch(l){jn(e,s,l)}break;case 5:var o=e.return;try{XM(e)}catch(l){jn(e,o,l)}}}catch(l){jn(e,e.return,l)}if(e===n){Je=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Je=a;break}Je=e.return}}var dG=Math.ceil,x_=Ka.ReactCurrentDispatcher,Ab=Ka.ReactCurrentOwner,Ys=Ka.ReactCurrentBatchConfig,Kt=0,ki=null,ai=null,Wi=0,os=0,oh=fu(0),vi=0,Lm=null,Rc=0,px=0,Rb=0,Hp=null,Ur=null,Db=0,Hh=1/0,Ta=null,S_=!1,ZM=null,Vl=null,t0=!1,Cl=null,w_=0,Gp=0,$M=null,by=-1,Cy=0;function Mr(){return Kt&6?Qn():by!==-1?by:by=Qn()}function Hl(n){return n.mode&1?Kt&2&&Wi!==0?Wi&-Wi:$6.transition!==null?(Cy===0&&(Cy=qk()),Cy):(n=fn,n!==0||(n=window.event,n=n===void 0?16:tO(n.type)),n):1}function To(n,e,t,i){if(50<Gp)throw Gp=0,$M=null,Error(Le(185));hg(n,t,i),(!(Kt&2)||n!==ki)&&(n===ki&&(!(Kt&2)&&(px|=t),vi===4&&El(n,Wi)),Wr(n,i),t===1&&Kt===0&&!(e.mode&1)&&(Hh=Qn()+500,cx&&hu()))}function Wr(n,e){var t=n.callbackNode;$H(n,e);var i=s_(n,n===ki?Wi:0);if(i===0)t!==null&&LA(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&LA(t),e===1)n.tag===0?Z6(TR.bind(null,n)):xO(TR.bind(null,n)),j6(function(){!(Kt&6)&&hu()}),t=null;else{switch(Zk(i)){case 1:t=ib;break;case 4:t=Xk;break;case 16:t=r_;break;case 536870912:t=Yk;break;default:t=r_}t=_N(t,hN.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function hN(n,e){if(by=-1,Cy=0,Kt&6)throw Error(Le(327));var t=n.callbackNode;if(bh()&&n.callbackNode!==t)return null;var i=s_(n,n===ki?Wi:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=M_(n,i);else{e=i;var r=Kt;Kt|=2;var s=pN();(ki!==n||Wi!==e)&&(Ta=null,Hh=Qn()+500,pc(n,e));do try{gG();break}catch(a){dN(n,a)}while(1);gb(),x_.current=s,Kt=r,ai!==null?e=0:(ki=null,Wi=0,e=vi)}if(e!==0){if(e===2&&(r=MM(n),r!==0&&(i=r,e=KM(n,r))),e===1)throw t=Lm,pc(n,0),El(n,i),Wr(n,Qn()),t;if(e===6)El(n,i);else{if(r=n.current.alternate,!(i&30)&&!pG(r)&&(e=M_(n,i),e===2&&(s=MM(n),s!==0&&(i=s,e=KM(n,s))),e===1))throw t=Lm,pc(n,0),El(n,i),Wr(n,Qn()),t;switch(n.finishedWork=r,n.finishedLanes=i,e){case 0:case 1:throw Error(Le(345));case 2:ju(n,Ur,Ta);break;case 3:if(El(n,i),(i&130023424)===i&&(e=Db+500-Qn(),10<e)){if(s_(n,0)!==0)break;if(r=n.suspendedLanes,(r&i)!==i){Mr(),n.pingedLanes|=n.suspendedLanes&r;break}n.timeoutHandle=DM(ju.bind(null,n,Ur,Ta),e);break}ju(n,Ur,Ta);break;case 4:if(El(n,i),(i&4194240)===i)break;for(e=n.eventTimes,r=-1;0<i;){var o=31-Mo(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=Qn()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*dG(i/1960))-i,10<i){n.timeoutHandle=DM(ju.bind(null,n,Ur,Ta),i);break}ju(n,Ur,Ta);break;case 5:ju(n,Ur,Ta);break;default:throw Error(Le(329))}}}return Wr(n,Qn()),n.callbackNode===t?hN.bind(null,n):null}function KM(n,e){var t=Hp;return n.current.memoizedState.isDehydrated&&(pc(n,e).flags|=256),n=M_(n,e),n!==2&&(e=Ur,Ur=t,e!==null&&JM(e)),n}function JM(n){Ur===null?Ur=n:Ur.push.apply(Ur,n)}function pG(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var r=t[i],s=r.getSnapshot;r=r.value;try{if(!Po(s(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function El(n,e){for(e&=~Rb,e&=~px,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Mo(e),i=1<<t;n[t]=-1,e&=~i}}function TR(n){if(Kt&6)throw Error(Le(327));bh();var e=s_(n,0);if(!(e&1))return Wr(n,Qn()),null;var t=M_(n,e);if(n.tag!==0&&t===2){var i=MM(n);i!==0&&(e=i,t=KM(n,i))}if(t===1)throw t=Lm,pc(n,0),El(n,e),Wr(n,Qn()),t;if(t===6)throw Error(Le(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,ju(n,Ur,Ta),Wr(n,Qn()),null}function Lb(n,e){var t=Kt;Kt|=1;try{return n(e)}finally{Kt=t,Kt===0&&(Hh=Qn()+500,cx&&hu())}}function Dc(n){Cl!==null&&Cl.tag===0&&!(Kt&6)&&bh();var e=Kt;Kt|=1;var t=Ys.transition,i=fn;try{if(Ys.transition=null,fn=1,n)return n()}finally{fn=i,Ys.transition=t,Kt=e,!(Kt&6)&&hu()}}function Ib(){os=oh.current,Tn(oh)}function pc(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,W6(t)),ai!==null)for(t=ai.return;t!==null;){var i=t;switch(db(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&c_();break;case 3:Bh(),Tn(Hr),Tn(ur),wb();break;case 5:Sb(i);break;case 4:Bh();break;case 13:Tn(kn);break;case 19:Tn(kn);break;case 10:vb(i.type._context);break;case 22:case 23:Ib()}t=t.return}if(ki=n,ai=n=Gl(n.current,null),Wi=os=e,vi=0,Lm=null,Rb=px=Rc=0,Ur=Hp=null,tc!==null){for(e=0;e<tc.length;e++)if(t=tc[e],i=t.interleaved,i!==null){t.interleaved=null;var r=i.next,s=t.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}t.pending=i}tc=null}return n}function dN(n,e){do{var t=ai;try{if(gb(),My.current=__,y_){for(var i=Bn.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}y_=!1}if(Ac=0,Li=fi=Bn=null,Bp=!1,Am=0,Ab.current=null,t===null||t.return===null){vi=1,Lm=e,ai=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=Wi,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,f=a,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var p=f.alternate;p?(f.updateQueue=p.updateQueue,f.memoizedState=p.memoizedState,f.lanes=p.lanes):(f.updateQueue=null,f.memoizedState=null)}var m=fR(o);if(m!==null){m.flags&=-257,hR(m,o,a,s,e),m.mode&1&&cR(s,u,e),e=m,l=u;var g=e.updateQueue;if(g===null){var y=new Set;y.add(l),e.updateQueue=y}else g.add(l);break e}else{if(!(e&1)){cR(s,u,e),kb();break e}l=Error(Le(426))}}else if(Rn&&a.mode&1){var x=fR(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),hR(x,o,a,s,e),pb(Vh(l,a));break e}}s=l=Vh(l,a),vi!==4&&(vi=2),Hp===null?Hp=[s]:Hp.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=$O(s,l,e);iR(s,v);break e;case 1:a=l;var w=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Vl===null||!Vl.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var T=KO(s,a,e);iR(s,T);break e}}s=s.return}while(s!==null)}gN(t)}catch(b){e=b,ai===t&&t!==null&&(ai=t=t.return);continue}break}while(1)}function pN(){var n=x_.current;return x_.current=__,n===null?__:n}function kb(){(vi===0||vi===3||vi===2)&&(vi=4),ki===null||!(Rc&268435455)&&!(px&268435455)||El(ki,Wi)}function M_(n,e){var t=Kt;Kt|=2;var i=pN();(ki!==n||Wi!==e)&&(Ta=null,pc(n,e));do try{mG();break}catch(r){dN(n,r)}while(1);if(gb(),Kt=t,x_.current=i,ai!==null)throw Error(Le(261));return ki=null,Wi=0,vi}function mG(){for(;ai!==null;)mN(ai)}function gG(){for(;ai!==null&&!VH();)mN(ai)}function mN(n){var e=yN(n.alternate,n,os);n.memoizedProps=n.pendingProps,e===null?gN(n):ai=e,Ab.current=null}function gN(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=uG(t,e),t!==null){t.flags&=32767,ai=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{vi=6,ai=null;return}}else if(t=lG(t,e,os),t!==null){ai=t;return}if(e=e.sibling,e!==null){ai=e;return}ai=e=n}while(e!==null);vi===0&&(vi=5)}function ju(n,e,t){var i=fn,r=Ys.transition;try{Ys.transition=null,fn=1,vG(n,e,t,i)}finally{Ys.transition=r,fn=i}return null}function vG(n,e,t,i){do bh();while(Cl!==null);if(Kt&6)throw Error(Le(327));t=n.finishedWork;var r=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(Le(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(KH(n,s),n===ki&&(ai=ki=null,Wi=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||t0||(t0=!0,_N(r_,function(){return bh(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=Ys.transition,Ys.transition=null;var o=fn;fn=1;var a=Kt;Kt|=4,Ab.current=null,fG(n,t),cN(t,n),U6(AM),o_=!!PM,AM=PM=null,n.current=t,hG(t),HH(),Kt=a,fn=o,Ys.transition=s}else n.current=t;if(t0&&(t0=!1,Cl=n,w_=r),s=n.pendingLanes,s===0&&(Vl=null),jH(t.stateNode),Wr(n,Qn()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)r=e[t],i(r.value,{componentStack:r.stack,digest:r.digest});if(S_)throw S_=!1,n=ZM,ZM=null,n;return w_&1&&n.tag!==0&&bh(),s=n.pendingLanes,s&1?n===$M?Gp++:(Gp=0,$M=n):Gp=0,hu(),null}function bh(){if(Cl!==null){var n=Zk(w_),e=Ys.transition,t=fn;try{if(Ys.transition=null,fn=16>n?16:n,Cl===null)var i=!1;else{if(n=Cl,Cl=null,w_=0,Kt&6)throw Error(Le(331));var r=Kt;for(Kt|=4,Je=n.current;Je!==null;){var s=Je,o=s.child;if(Je.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(Je=u;Je!==null;){var f=Je;switch(f.tag){case 0:case 11:case 15:Vp(8,f,s)}var d=f.child;if(d!==null)d.return=f,Je=d;else for(;Je!==null;){f=Je;var p=f.sibling,m=f.return;if(aN(f),f===u){Je=null;break}if(p!==null){p.return=m,Je=p;break}Je=m}}}var g=s.alternate;if(g!==null){var y=g.child;if(y!==null){g.child=null;do{var x=y.sibling;y.sibling=null,y=x}while(y!==null)}}Je=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Je=o;else e:for(;Je!==null;){if(s=Je,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Vp(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,Je=v;break e}Je=s.return}}var w=n.current;for(Je=w;Je!==null;){o=Je;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,Je=S;else e:for(o=w;Je!==null;){if(a=Je,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:dx(9,a)}}catch(b){jn(a,a.return,b)}if(a===o){Je=null;break e}var T=a.sibling;if(T!==null){T.return=a.return,Je=T;break e}Je=a.return}}if(Kt=r,hu(),Zo&&typeof Zo.onPostCommitFiberRoot=="function")try{Zo.onPostCommitFiberRoot(sx,n)}catch{}i=!0}return i}finally{fn=t,Ys.transition=e}}return!1}function ER(n,e,t){e=Vh(t,e),e=$O(n,e,1),n=Bl(n,e,1),e=Mr(),n!==null&&(hg(n,1,e),Wr(n,e))}function jn(n,e,t){if(n.tag===3)ER(n,n,t);else for(;e!==null;){if(e.tag===3){ER(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Vl===null||!Vl.has(i))){n=Vh(t,n),n=KO(e,n,1),e=Bl(e,n,1),n=Mr(),e!==null&&(hg(e,1,n),Wr(e,n));break}}e=e.return}}function yG(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=Mr(),n.pingedLanes|=n.suspendedLanes&t,ki===n&&(Wi&t)===t&&(vi===4||vi===3&&(Wi&130023424)===Wi&&500>Qn()-Db?pc(n,0):Rb|=t),Wr(n,e)}function vN(n,e){e===0&&(n.mode&1?(e=jv,jv<<=1,!(jv&130023424)&&(jv=4194304)):e=1);var t=Mr();n=Wa(n,e),n!==null&&(hg(n,e,t),Wr(n,t))}function _G(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),vN(n,t)}function xG(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,r=n.memoizedState;r!==null&&(t=r.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(Le(314))}i!==null&&i.delete(e),vN(n,t)}var yN;yN=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Hr.current)Vr=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Vr=!1,aG(n,e,t);Vr=!!(n.flags&131072)}else Vr=!1,Rn&&e.flags&1048576&&SO(e,d_,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Ey(n,e),n=e.pendingProps;var r=Uh(e,ur.current);Eh(e,t),r=Tb(null,e,i,n,r,t);var s=Eb();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Gr(i)?(s=!0,f_(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,_b(e),r.updater=fx,e.stateNode=r,r._reactInternals=e,FM(e,i,n,t),e=VM(null,e,i,!0,s,t)):(e.tag=0,Rn&&s&&hb(e),yr(null,e,r,t),e=e.child),e;case 16:i=e.elementType;e:{switch(Ey(n,e),n=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=wG(i),n=po(i,n),r){case 0:e=BM(null,e,i,n,t);break e;case 1:e=mR(null,e,i,n,t);break e;case 11:e=dR(null,e,i,n,t);break e;case 14:e=pR(null,e,i,po(i.type,n),t);break e}throw Error(Le(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:po(i,r),BM(n,e,i,r,t);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:po(i,r),mR(n,e,i,r,t);case 3:e:{if(tN(e),n===null)throw Error(Le(387));i=e.pendingProps,s=e.memoizedState,r=s.element,EO(n,e),g_(e,i,null,t);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Vh(Error(Le(423)),e),e=gR(n,e,i,t,r);break e}else if(i!==r){r=Vh(Error(Le(424)),e),e=gR(n,e,i,t,r);break e}else for(fs=zl(e.stateNode.containerInfo.firstChild),ds=e,Rn=!0,yo=null,t=AO(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Fh(),i===r){e=ja(n,e,t);break e}yr(n,e,i,t)}e=e.child}return e;case 5:return RO(e),n===null&&OM(e),i=e.type,r=e.pendingProps,s=n!==null?n.memoizedProps:null,o=r.children,RM(i,r)?o=null:s!==null&&RM(i,s)&&(e.flags|=32),eN(n,e),yr(n,e,o,t),e.child;case 6:return n===null&&OM(e),null;case 13:return nN(n,e,t);case 4:return xb(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=zh(e,null,i,t):yr(n,e,i,t),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:po(i,r),dR(n,e,i,r,t);case 7:return yr(n,e,e.pendingProps,t),e.child;case 8:return yr(n,e,e.pendingProps.children,t),e.child;case 12:return yr(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,_n(p_,i._currentValue),i._currentValue=o,s!==null)if(Po(s.value,o)){if(s.children===r.children&&!Hr.current){e=ja(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=Na(-1,t&-t),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?l.next=l:(l.next=f.next,f.next=l),u.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),NM(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Le(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),NM(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}yr(n,e,r.children,t),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Eh(e,t),r=Ks(r),i=i(r),e.flags|=1,yr(n,e,i,t),e.child;case 14:return i=e.type,r=po(i,e.pendingProps),r=po(i.type,r),pR(n,e,i,r,t);case 15:return JO(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:po(i,r),Ey(n,e),e.tag=1,Gr(i)?(n=!0,f_(e)):n=!1,Eh(e,t),CO(e,i,r),FM(e,i,r,t),VM(null,e,i,!0,n,t);case 19:return iN(n,e,t);case 22:return QO(n,e,t)}throw Error(Le(156,e.tag))};function _N(n,e){return jk(n,e)}function SG(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gs(n,e,t,i){return new SG(n,e,t,i)}function Ob(n){return n=n.prototype,!(!n||!n.isReactComponent)}function wG(n){if(typeof n=="function")return Ob(n)?1:0;if(n!=null){if(n=n.$$typeof,n===eb)return 11;if(n===tb)return 14}return 2}function Gl(n,e){var t=n.alternate;return t===null?(t=Gs(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Py(n,e,t,i,r,s){var o=2;if(i=n,typeof n=="function")Ob(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case $f:return mc(t.children,r,s,e);case QE:o=8,r|=8;break;case lM:return n=Gs(12,t,e,r|2),n.elementType=lM,n.lanes=s,n;case uM:return n=Gs(13,t,e,r),n.elementType=uM,n.lanes=s,n;case cM:return n=Gs(19,t,e,r),n.elementType=cM,n.lanes=s,n;case Pk:return mx(t,r,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case bk:o=10;break e;case Ck:o=9;break e;case eb:o=11;break e;case tb:o=14;break e;case xl:o=16,i=null;break e}throw Error(Le(130,n==null?n:typeof n,""))}return e=Gs(o,t,e,r),e.elementType=n,e.type=i,e.lanes=s,e}function mc(n,e,t,i){return n=Gs(7,n,i,e),n.lanes=t,n}function mx(n,e,t,i){return n=Gs(22,n,i,e),n.elementType=Pk,n.lanes=t,n.stateNode={isHidden:!1},n}function IS(n,e,t){return n=Gs(6,n,null,e),n.lanes=t,n}function kS(n,e,t){return e=Gs(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function MG(n,e,t,i,r){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pS(0),this.expirationTimes=pS(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pS(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Nb(n,e,t,i,r,s,o,a,l){return n=new MG(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Gs(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},_b(s),n}function TG(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Zf,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function xN(n){if(!n)return eu;n=n._reactInternals;e:{if(Gc(n)!==n||n.tag!==1)throw Error(Le(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Gr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Le(171))}if(n.tag===1){var t=n.type;if(Gr(t))return _O(n,t,e)}return e}function SN(n,e,t,i,r,s,o,a,l){return n=Nb(t,i,!0,n,r,s,o,a,l),n.context=xN(null),t=n.current,i=Mr(),r=Hl(t),s=Na(i,r),s.callback=e??null,Bl(t,s,r),n.current.lanes=r,hg(n,r,i),Wr(n,i),n}function gx(n,e,t,i){var r=e.current,s=Mr(),o=Hl(r);return t=xN(t),e.context===null?e.context=t:e.pendingContext=t,e=Na(s,o),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=Bl(r,e,o),n!==null&&(To(n,r,o,s),wy(n,r,o)),o}function T_(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function bR(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function Ub(n,e){bR(n,e),(n=n.alternate)&&bR(n,e)}function EG(){return null}var wN=typeof reportError=="function"?reportError:function(n){console.error(n)};function Fb(n){this._internalRoot=n}vx.prototype.render=Fb.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Le(409));gx(n,e,null,null)};vx.prototype.unmount=Fb.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Dc(function(){gx(null,n,null,null)}),e[Ga]=null}};function vx(n){this._internalRoot=n}vx.prototype.unstable_scheduleHydration=function(n){if(n){var e=Jk();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Tl.length&&e!==0&&e<Tl[t].priority;t++);Tl.splice(t,0,n),t===0&&eO(n)}};function zb(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function yx(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function CR(){}function bG(n,e,t,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var u=T_(o);s.call(u)}}var o=SN(e,i,n,0,null,!1,!1,"",CR);return n._reactRootContainer=o,n[Ga]=o.current,Tm(n.nodeType===8?n.parentNode:n),Dc(),o}for(;r=n.lastChild;)n.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var u=T_(l);a.call(u)}}var l=Nb(n,0,!1,null,null,!1,!1,"",CR);return n._reactRootContainer=l,n[Ga]=l.current,Tm(n.nodeType===8?n.parentNode:n),Dc(function(){gx(e,l,t,i)}),l}function _x(n,e,t,i,r){var s=t._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=T_(o);a.call(l)}}gx(e,o,n,r)}else o=bG(t,e,n,r,i);return T_(o)}$k=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=wp(e.pendingLanes);t!==0&&(rb(e,t|1),Wr(e,Qn()),!(Kt&6)&&(Hh=Qn()+500,hu()))}break;case 13:Dc(function(){var i=Wa(n,1);if(i!==null){var r=Mr();To(i,n,1,r)}}),Ub(n,1)}};sb=function(n){if(n.tag===13){var e=Wa(n,134217728);if(e!==null){var t=Mr();To(e,n,134217728,t)}Ub(n,134217728)}};Kk=function(n){if(n.tag===13){var e=Hl(n),t=Wa(n,e);if(t!==null){var i=Mr();To(t,n,e,i)}Ub(n,e)}};Jk=function(){return fn};Qk=function(n,e){var t=fn;try{return fn=n,e()}finally{fn=t}};xM=function(n,e,t){switch(e){case"input":if(dM(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var r=ux(i);if(!r)throw Error(Le(90));Rk(i),dM(i,r)}}}break;case"textarea":Lk(n,t);break;case"select":e=t.value,e!=null&&Sh(n,!!t.multiple,e,!1)}};zk=Lb;Bk=Dc;var CG={usingClientEntryPoint:!1,Events:[pg,eh,ux,Uk,Fk,Lb]},Zd={findFiberByHostInstance:ec,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},PG={bundleType:Zd.bundleType,version:Zd.version,rendererPackageName:Zd.rendererPackageName,rendererConfig:Zd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ka.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Gk(n),n===null?null:n.stateNode},findFiberByHostInstance:Zd.findFiberByHostInstance||EG,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var n0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!n0.isDisabled&&n0.supportsFiber)try{sx=n0.inject(PG),Zo=n0}catch{}}xs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=CG;xs.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zb(e))throw Error(Le(200));return TG(n,e,null,t)};xs.createRoot=function(n,e){if(!zb(n))throw Error(Le(299));var t=!1,i="",r=wN;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Nb(n,1,!1,null,null,t,!1,i,r),n[Ga]=e.current,Tm(n.nodeType===8?n.parentNode:n),new Fb(e)};xs.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Le(188)):(n=Object.keys(n).join(","),Error(Le(268,n)));return n=Gk(e),n=n===null?null:n.stateNode,n};xs.flushSync=function(n){return Dc(n)};xs.hydrate=function(n,e,t){if(!yx(e))throw Error(Le(200));return _x(null,n,e,!0,t)};xs.hydrateRoot=function(n,e,t){if(!zb(n))throw Error(Le(405));var i=t!=null&&t.hydratedSources||null,r=!1,s="",o=wN;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=SN(e,null,n,1,t??null,r,!1,s,o),n[Ga]=e.current,Tm(n),i)for(n=0;n<i.length;n++)t=i[n],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new vx(e)};xs.render=function(n,e,t){if(!yx(e))throw Error(Le(200));return _x(null,n,e,!1,t)};xs.unmountComponentAtNode=function(n){if(!yx(n))throw Error(Le(40));return n._reactRootContainer?(Dc(function(){_x(null,null,n,!1,function(){n._reactRootContainer=null,n[Ga]=null})}),!0):!1};xs.unstable_batchedUpdates=Lb;xs.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!yx(t))throw Error(Le(200));if(n==null||n._reactInternals===void 0)throw Error(Le(38));return _x(n,e,t,!1,i)};xs.version="18.2.0-next-9e3b772b8-20220608";function MN(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(MN)}catch(n){console.error(n)}}MN(),Sk.exports=xs;var AG=Sk.exports,PR=AG;oM.createRoot=PR.createRoot,oM.hydrateRoot=PR.hydrateRoot;function Im(){return Im=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Im.apply(this,arguments)}/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Wc="151",RG={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},DG={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},TN=0,QM=1,EN=2,LG=3,bN=0,xx=1,Wp=2,ic=3,ta=0,yi=1,zr=2,IG=2,En=0,gc=1,eT=2,tT=3,nT=4,CN=5,Ku=100,PN=101,AN=102,iT=103,rT=104,RN=200,DN=201,LN=202,IN=203,Bb=204,Vb=205,kN=206,ON=207,NN=208,UN=209,FN=210,Hb=0,Gb=1,E_=2,km=3,Om=4,Wb=5,jb=6,Sx=7,gg=0,zN=1,BN=2,Eo=0,VN=1,HN=2,GN=3,Xb=4,WN=5,wx=300,tu=301,nu=302,Nm=303,Um=304,ad=306,Xa=1e3,mi=1001,Fm=1002,Ht=1003,b_=1004,kG=1004,jp=1005,OG=1005,vt=1006,Yb=1007,NG=1007,iu=1008,UG=1008,xn=1009,jN=1010,XN=1011,qb=1012,YN=1013,Ia=1014,Jn=1015,ps=1016,qN=1017,ZN=1018,Wl=1020,$N=1021,Dn=1023,Mx=1024,KN=1025,jl=1026,ru=1027,Zb=1028,JN=1029,$b=1030,QN=1031,eU=1033,Ay=33776,Ry=33777,Dy=33778,Ly=33779,sT=35840,oT=35841,aT=35842,lT=35843,tU=36196,uT=37492,cT=37496,fT=37808,hT=37809,dT=37810,pT=37811,mT=37812,gT=37813,vT=37814,yT=37815,_T=37816,xT=37817,ST=37818,wT=37819,MT=37820,TT=37821,Iy=36492,nU=36283,ET=36284,bT=36285,CT=36286,iU=2200,rU=2201,sU=2202,zm=2300,Bm=2301,ky=2302,rc=2400,sc=2401,Vm=2402,Tx=2500,Kb=2501,FG=0,zG=1,BG=2,na=3e3,an=3001,Oi=3200,ia=3201,Ja=0,oU=1,VG="",vo="srgb",Gh="srgb-linear",Jb="display-p3",HG=0,Oy=7680,GG=7681,WG=7682,jG=7683,XG=34055,YG=34056,qG=5386,ZG=512,$G=513,KG=514,JG=515,QG=516,eW=517,tW=518,aU=519,Hm=35044,nW=35048,iW=35040,rW=35045,sW=35049,oW=35041,aW=35046,lW=35050,uW=35042,cW="100",C_="300 es",P_=1035;class eo{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const Qi=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let AR=1234567;const vc=Math.PI/180,Wh=180/Math.PI;function ms(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Qi[n&255]+Qi[n>>8&255]+Qi[n>>16&255]+Qi[n>>24&255]+"-"+Qi[e&255]+Qi[e>>8&255]+"-"+Qi[e>>16&15|64]+Qi[e>>24&255]+"-"+Qi[t&63|128]+Qi[t>>8&255]+"-"+Qi[t>>16&255]+Qi[t>>24&255]+Qi[i&255]+Qi[i>>8&255]+Qi[i>>16&255]+Qi[i>>24&255]).toLowerCase()}function Xn(n,e,t){return Math.max(e,Math.min(t,n))}function Qb(n,e){return(n%e+e)%e}function fW(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function hW(n,e,t){return n!==e?(t-n)/(e-n):0}function Xp(n,e,t){return(1-t)*n+t*e}function dW(n,e,t,i){return Xp(n,e,1-Math.exp(-t*i))}function pW(n,e=1){return e-Math.abs(Qb(n,e*2)-e)}function mW(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function gW(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function vW(n,e){return n+Math.floor(Math.random()*(e-n+1))}function yW(n,e){return n+Math.random()*(e-n)}function _W(n){return n*(.5-Math.random())}function xW(n){n!==void 0&&(AR=n);let e=AR+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function SW(n){return n*vc}function wW(n){return n*Wh}function PT(n){return(n&n-1)===0&&n!==0}function lU(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function uU(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function MW(n,e,t,i,r){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),u=s((e+i)/2),f=o((e+i)/2),d=s((e-i)/2),p=o((e-i)/2),m=s((i-e)/2),g=o((i-e)/2);switch(r){case"XYX":n.set(a*f,l*d,l*p,a*u);break;case"YZY":n.set(l*p,a*f,l*d,a*u);break;case"ZXZ":n.set(l*d,l*p,a*f,a*u);break;case"XZX":n.set(a*f,l*g,l*m,a*u);break;case"YXY":n.set(l*m,a*f,l*g,a*u);break;case"ZYZ":n.set(l*g,l*m,a*f,a*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function hs(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function kt(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const TW={DEG2RAD:vc,RAD2DEG:Wh,generateUUID:ms,clamp:Xn,euclideanModulo:Qb,mapLinear:fW,inverseLerp:hW,lerp:Xp,damp:dW,pingpong:pW,smoothstep:mW,smootherstep:gW,randInt:vW,randFloat:yW,randFloatSpread:_W,seededRandom:xW,degToRad:SW,radToDeg:wW,isPowerOfTwo:PT,ceilPowerOfTwo:lU,floorPowerOfTwo:uU,setQuaternionFromProperEuler:MW,normalize:kt,denormalize:hs};class le{constructor(e=0,t=0){le.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Xn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Ut{constructor(){Ut.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,i,r,s,o,a,l,u){const f=this.elements;return f[0]=e,f[1]=r,f[2]=a,f[3]=t,f[4]=s,f[5]=l,f[6]=i,f[7]=o,f[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],l=i[6],u=i[1],f=i[4],d=i[7],p=i[2],m=i[5],g=i[8],y=r[0],x=r[3],v=r[6],w=r[1],S=r[4],T=r[7],b=r[2],P=r[5],R=r[8];return s[0]=o*y+a*w+l*b,s[3]=o*x+a*S+l*P,s[6]=o*v+a*T+l*R,s[1]=u*y+f*w+d*b,s[4]=u*x+f*S+d*P,s[7]=u*v+f*T+d*R,s[2]=p*y+m*w+g*b,s[5]=p*x+m*S+g*P,s[8]=p*v+m*T+g*R,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],f=e[8];return t*o*f-t*a*u-i*s*f+i*a*l+r*s*u-r*o*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],f=e[8],d=f*o-a*u,p=a*l-f*s,m=u*s-o*l,g=t*d+i*p+r*m;if(g===0)return this.set(0,0,0,0,0,0,0,0,0);const y=1/g;return e[0]=d*y,e[1]=(r*u-f*i)*y,e[2]=(a*i-r*o)*y,e[3]=p*y,e[4]=(f*t-r*l)*y,e[5]=(r*s-a*t)*y,e[6]=m*y,e[7]=(i*l-u*t)*y,e[8]=(o*t-i*s)*y,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const l=Math.cos(s),u=Math.sin(s);return this.set(i*l,i*u,-i*(l*o+u*a)+o+e,-r*u,r*l,-r*(-u*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(OS.makeScale(e,t)),this}rotate(e){return this.premultiply(OS.makeRotation(-e)),this}translate(e,t){return this.premultiply(OS.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const OS=new Ut;function cU(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const EW={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function ah(n,e){return new EW[n](e)}function Gm(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function Ch(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function NS(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}const bW=new Ut().fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),CW=new Ut().fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]);function PW(n){return n.convertSRGBToLinear().applyMatrix3(CW)}function AW(n){return n.applyMatrix3(bW).convertLinearToSRGB()}const RW={[Gh]:n=>n,[vo]:n=>n.convertSRGBToLinear(),[Jb]:PW},DW={[Gh]:n=>n,[vo]:n=>n.convertLinearToSRGB(),[Jb]:AW},kr={enabled:!1,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(n){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!n},get workingColorSpace(){return Gh},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const i=RW[e],r=DW[t];if(i===void 0||r===void 0)throw new Error(`Unsupported color space conversion, "${e}" to "${t}".`);return r(i(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}};let pf;class eC{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{pf===void 0&&(pf=Gm("canvas")),pf.width=e.width,pf.height=e.height;const i=pf.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=pf}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Gm("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=Ch(s[o]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Ch(t[i]/255)*255):t[i]=Ch(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class oc{constructor(e=null){this.isSource=!0,this.uuid=ms(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(US(r[o].image)):s.push(US(r[o]))}else s=US(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function US(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?eC.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let LW=0;class bn extends eo{constructor(e=bn.DEFAULT_IMAGE,t=bn.DEFAULT_MAPPING,i=mi,r=mi,s=vt,o=iu,a=Dn,l=xn,u=bn.DEFAULT_ANISOTROPY,f=na){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:LW++}),this.uuid=ms(),this.name="",this.source=new oc(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=u,this.format=a,this.internalFormat=null,this.type=l,this.offset=new le(0,0),this.repeat=new le(1,1),this.center=new le(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ut,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=f,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==wx)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Xa:e.x=e.x-Math.floor(e.x);break;case mi:e.x=e.x<0?0:1;break;case Fm:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Xa:e.y=e.y-Math.floor(e.y);break;case mi:e.y=e.y<0?0:1;break;case Fm:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}bn.DEFAULT_IMAGE=null;bn.DEFAULT_MAPPING=wx;bn.DEFAULT_ANISOTROPY=1;class Gt{constructor(e=0,t=0,i=0,r=1){Gt.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const l=e.elements,u=l[0],f=l[4],d=l[8],p=l[1],m=l[5],g=l[9],y=l[2],x=l[6],v=l[10];if(Math.abs(f-p)<.01&&Math.abs(d-y)<.01&&Math.abs(g-x)<.01){if(Math.abs(f+p)<.1&&Math.abs(d+y)<.1&&Math.abs(g+x)<.1&&Math.abs(u+m+v-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const S=(u+1)/2,T=(m+1)/2,b=(v+1)/2,P=(f+p)/4,R=(d+y)/4,D=(g+x)/4;return S>T&&S>b?S<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(S),r=P/i,s=R/i):T>b?T<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(T),i=P/r,s=D/r):b<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(b),i=R/s,r=D/s),this.set(i,r,s,t),this}let w=Math.sqrt((x-g)*(x-g)+(d-y)*(d-y)+(p-f)*(p-f));return Math.abs(w)<.001&&(w=1),this.x=(x-g)/w,this.y=(d-y)/w,this.z=(p-f)/w,this.w=Math.acos((u+m+v-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class qt extends eo{constructor(e=1,t=1,i={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Gt(0,0,e,t),this.scissorTest=!1,this.viewport=new Gt(0,0,e,t);const r={width:e,height:t,depth:1};this.texture=new bn(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.internalFormat=i.internalFormat!==void 0?i.internalFormat:null,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:vt,this.depthBuffer=i.depthBuffer!==void 0?i.depthBuffer:!0,this.stencilBuffer=i.stencilBuffer!==void 0?i.stencilBuffer:!1,this.depthTexture=i.depthTexture!==void 0?i.depthTexture:null,this.samples=i.samples!==void 0?i.samples:0}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new oc(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Ex extends bn{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Ht,this.minFilter=Ht,this.wrapR=mi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class IW extends qt{constructor(e=1,t=1,i=1){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new Ex(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class yc extends bn{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Ht,this.minFilter=Ht,this.wrapR=mi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class kW extends qt{constructor(e=1,t=1,i=1){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new yc(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class fU extends qt{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let o=0;o<i;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.texture.length;r<s;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=i;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,i=e.texture.length;t<i;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class Si{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,a){let l=i[r+0],u=i[r+1],f=i[r+2],d=i[r+3];const p=s[o+0],m=s[o+1],g=s[o+2],y=s[o+3];if(a===0){e[t+0]=l,e[t+1]=u,e[t+2]=f,e[t+3]=d;return}if(a===1){e[t+0]=p,e[t+1]=m,e[t+2]=g,e[t+3]=y;return}if(d!==y||l!==p||u!==m||f!==g){let x=1-a;const v=l*p+u*m+f*g+d*y,w=v>=0?1:-1,S=1-v*v;if(S>Number.EPSILON){const b=Math.sqrt(S),P=Math.atan2(b,v*w);x=Math.sin(x*P)/b,a=Math.sin(a*P)/b}const T=a*w;if(l=l*x+p*T,u=u*x+m*T,f=f*x+g*T,d=d*x+y*T,x===1-a){const b=1/Math.sqrt(l*l+u*u+f*f+d*d);l*=b,u*=b,f*=b,d*=b}}e[t]=l,e[t+1]=u,e[t+2]=f,e[t+3]=d}static multiplyQuaternionsFlat(e,t,i,r,s,o){const a=i[r],l=i[r+1],u=i[r+2],f=i[r+3],d=s[o],p=s[o+1],m=s[o+2],g=s[o+3];return e[t]=a*g+f*d+l*m-u*p,e[t+1]=l*g+f*p+u*d-a*m,e[t+2]=u*g+f*m+a*p-l*d,e[t+3]=f*g-a*d-l*p-u*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,u=a(i/2),f=a(r/2),d=a(s/2),p=l(i/2),m=l(r/2),g=l(s/2);switch(o){case"XYZ":this._x=p*f*d+u*m*g,this._y=u*m*d-p*f*g,this._z=u*f*g+p*m*d,this._w=u*f*d-p*m*g;break;case"YXZ":this._x=p*f*d+u*m*g,this._y=u*m*d-p*f*g,this._z=u*f*g-p*m*d,this._w=u*f*d+p*m*g;break;case"ZXY":this._x=p*f*d-u*m*g,this._y=u*m*d+p*f*g,this._z=u*f*g+p*m*d,this._w=u*f*d-p*m*g;break;case"ZYX":this._x=p*f*d-u*m*g,this._y=u*m*d+p*f*g,this._z=u*f*g-p*m*d,this._w=u*f*d+p*m*g;break;case"YZX":this._x=p*f*d+u*m*g,this._y=u*m*d+p*f*g,this._z=u*f*g-p*m*d,this._w=u*f*d-p*m*g;break;case"XZY":this._x=p*f*d-u*m*g,this._y=u*m*d-p*f*g,this._z=u*f*g+p*m*d,this._w=u*f*d+p*m*g;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],u=t[2],f=t[6],d=t[10],p=i+a+d;if(p>0){const m=.5/Math.sqrt(p+1);this._w=.25/m,this._x=(f-l)*m,this._y=(s-u)*m,this._z=(o-r)*m}else if(i>a&&i>d){const m=2*Math.sqrt(1+i-a-d);this._w=(f-l)/m,this._x=.25*m,this._y=(r+o)/m,this._z=(s+u)/m}else if(a>d){const m=2*Math.sqrt(1+a-i-d);this._w=(s-u)/m,this._x=(r+o)/m,this._y=.25*m,this._z=(l+f)/m}else{const m=2*Math.sqrt(1+d-i-a);this._w=(o-r)/m,this._x=(s+u)/m,this._y=(l+f)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Xn(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,u=t._z,f=t._w;return this._x=i*f+o*a+r*u-s*l,this._y=r*f+o*l+s*a-i*u,this._z=s*f+o*u+i*l-r*a,this._w=o*f-i*a-r*l-s*u,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const m=1-t;return this._w=m*o+t*this._w,this._x=m*i+t*this._x,this._y=m*r+t*this._y,this._z=m*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const u=Math.sqrt(l),f=Math.atan2(u,a),d=Math.sin((1-t)*f)/u,p=Math.sin(t*f)/u;return this._w=o*d+this._w*p,this._x=i*d+this._x*p,this._y=r*d+this._y*p,this._z=s*d+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),i*Math.sin(s),i*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class N{constructor(e=0,t=0,i=0){N.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(RR.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(RR.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,u=l*t+o*r-a*i,f=l*i+a*t-s*r,d=l*r+s*i-o*t,p=-s*t-o*i-a*r;return this.x=u*l+p*-s+f*-a-d*-o,this.y=f*l+p*-o+d*-s-u*-a,this.z=d*l+p*-a+u*-o-f*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return FS.copy(this).projectOnVector(e),this.sub(FS)}reflect(e){return this.sub(FS.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Xn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const FS=new N,RR=new Si;class oa{constructor(e=new N(1/0,1/0,1/0),t=new N(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(va.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(va.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=va.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){if(e.updateWorldMatrix(!1,!1),e.boundingBox!==void 0)e.boundingBox===null&&e.computeBoundingBox(),mf.copy(e.boundingBox),mf.applyMatrix4(e.matrixWorld),this.union(mf);else{const r=e.geometry;if(r!==void 0)if(t&&r.attributes!==void 0&&r.attributes.position!==void 0){const s=r.attributes.position;for(let o=0,a=s.count;o<a;o++)va.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(va)}else r.boundingBox===null&&r.computeBoundingBox(),mf.copy(r.boundingBox),mf.applyMatrix4(e.matrixWorld),this.union(mf)}const i=e.children;for(let r=0,s=i.length;r<s;r++)this.expandByObject(i[r],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,va),va.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter($d),i0.subVectors(this.max,$d),gf.subVectors(e.a,$d),vf.subVectors(e.b,$d),yf.subVectors(e.c,$d),cl.subVectors(vf,gf),fl.subVectors(yf,vf),Ru.subVectors(gf,yf);let t=[0,-cl.z,cl.y,0,-fl.z,fl.y,0,-Ru.z,Ru.y,cl.z,0,-cl.x,fl.z,0,-fl.x,Ru.z,0,-Ru.x,-cl.y,cl.x,0,-fl.y,fl.x,0,-Ru.y,Ru.x,0];return!zS(t,gf,vf,yf,i0)||(t=[1,0,0,0,1,0,0,0,1],!zS(t,gf,vf,yf,i0))?!1:(r0.crossVectors(cl,fl),t=[r0.x,r0.y,r0.z],zS(t,gf,vf,yf,i0))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,va).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(va).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(ga[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),ga[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),ga[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),ga[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),ga[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),ga[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),ga[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),ga[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(ga),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const ga=[new N,new N,new N,new N,new N,new N,new N,new N],va=new N,mf=new oa,gf=new N,vf=new N,yf=new N,cl=new N,fl=new N,Ru=new N,$d=new N,i0=new N,r0=new N,Du=new N;function zS(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){Du.fromArray(n,s);const a=r.x*Math.abs(Du.x)+r.y*Math.abs(Du.y)+r.z*Math.abs(Du.z),l=e.dot(Du),u=t.dot(Du),f=i.dot(Du);if(Math.max(-Math.max(l,u,f),Math.min(l,u,f))>a)return!1}return!0}const OW=new oa,Kd=new N,BS=new N;class aa{constructor(e=new N,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):OW.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Kd.subVectors(e,this.center);const t=Kd.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(Kd,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(BS.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Kd.copy(e.center).add(BS)),this.expandByPoint(Kd.copy(e.center).sub(BS))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const ya=new N,VS=new N,s0=new N,hl=new N,HS=new N,o0=new N,GS=new N;class vg{constructor(e=new N,t=new N(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,ya)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=ya.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(ya.copy(this.origin).addScaledVector(this.direction,t),ya.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){VS.copy(e).add(t).multiplyScalar(.5),s0.copy(t).sub(e).normalize(),hl.copy(this.origin).sub(VS);const s=e.distanceTo(t)*.5,o=-this.direction.dot(s0),a=hl.dot(this.direction),l=-hl.dot(s0),u=hl.lengthSq(),f=Math.abs(1-o*o);let d,p,m,g;if(f>0)if(d=o*l-a,p=o*a-l,g=s*f,d>=0)if(p>=-g)if(p<=g){const y=1/f;d*=y,p*=y,m=d*(d+o*p+2*a)+p*(o*d+p+2*l)+u}else p=s,d=Math.max(0,-(o*p+a)),m=-d*d+p*(p+2*l)+u;else p=-s,d=Math.max(0,-(o*p+a)),m=-d*d+p*(p+2*l)+u;else p<=-g?(d=Math.max(0,-(-o*s+a)),p=d>0?-s:Math.min(Math.max(-s,-l),s),m=-d*d+p*(p+2*l)+u):p<=g?(d=0,p=Math.min(Math.max(-s,-l),s),m=p*(p+2*l)+u):(d=Math.max(0,-(o*s+a)),p=d>0?s:Math.min(Math.max(-s,-l),s),m=-d*d+p*(p+2*l)+u);else p=o>0?-s:s,d=Math.max(0,-(o*p+a)),m=-d*d+p*(p+2*l)+u;return i&&i.copy(this.origin).addScaledVector(this.direction,d),r&&r.copy(VS).addScaledVector(s0,p),m}intersectSphere(e,t){ya.subVectors(e.center,this.origin);const i=ya.dot(this.direction),r=ya.dot(ya)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,l=i+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,l;const u=1/this.direction.x,f=1/this.direction.y,d=1/this.direction.z,p=this.origin;return u>=0?(i=(e.min.x-p.x)*u,r=(e.max.x-p.x)*u):(i=(e.max.x-p.x)*u,r=(e.min.x-p.x)*u),f>=0?(s=(e.min.y-p.y)*f,o=(e.max.y-p.y)*f):(s=(e.max.y-p.y)*f,o=(e.min.y-p.y)*f),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),d>=0?(a=(e.min.z-p.z)*d,l=(e.max.z-p.z)*d):(a=(e.max.z-p.z)*d,l=(e.min.z-p.z)*d),i>l||a>r)||((a>i||i!==i)&&(i=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,ya)!==null}intersectTriangle(e,t,i,r,s){HS.subVectors(t,e),o0.subVectors(i,e),GS.crossVectors(HS,o0);let o=this.direction.dot(GS),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;hl.subVectors(this.origin,e);const l=a*this.direction.dot(o0.crossVectors(hl,o0));if(l<0)return null;const u=a*this.direction.dot(HS.cross(hl));if(u<0||l+u>o)return null;const f=-a*hl.dot(GS);return f<0?null:this.at(f/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class mt{constructor(){mt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,i,r,s,o,a,l,u,f,d,p,m,g,y,x){const v=this.elements;return v[0]=e,v[4]=t,v[8]=i,v[12]=r,v[1]=s,v[5]=o,v[9]=a,v[13]=l,v[2]=u,v[6]=f,v[10]=d,v[14]=p,v[3]=m,v[7]=g,v[11]=y,v[15]=x,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new mt().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/_f.setFromMatrixColumn(e,0).length(),s=1/_f.setFromMatrixColumn(e,1).length(),o=1/_f.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),u=Math.sin(r),f=Math.cos(s),d=Math.sin(s);if(e.order==="XYZ"){const p=o*f,m=o*d,g=a*f,y=a*d;t[0]=l*f,t[4]=-l*d,t[8]=u,t[1]=m+g*u,t[5]=p-y*u,t[9]=-a*l,t[2]=y-p*u,t[6]=g+m*u,t[10]=o*l}else if(e.order==="YXZ"){const p=l*f,m=l*d,g=u*f,y=u*d;t[0]=p+y*a,t[4]=g*a-m,t[8]=o*u,t[1]=o*d,t[5]=o*f,t[9]=-a,t[2]=m*a-g,t[6]=y+p*a,t[10]=o*l}else if(e.order==="ZXY"){const p=l*f,m=l*d,g=u*f,y=u*d;t[0]=p-y*a,t[4]=-o*d,t[8]=g+m*a,t[1]=m+g*a,t[5]=o*f,t[9]=y-p*a,t[2]=-o*u,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const p=o*f,m=o*d,g=a*f,y=a*d;t[0]=l*f,t[4]=g*u-m,t[8]=p*u+y,t[1]=l*d,t[5]=y*u+p,t[9]=m*u-g,t[2]=-u,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const p=o*l,m=o*u,g=a*l,y=a*u;t[0]=l*f,t[4]=y-p*d,t[8]=g*d+m,t[1]=d,t[5]=o*f,t[9]=-a*f,t[2]=-u*f,t[6]=m*d+g,t[10]=p-y*d}else if(e.order==="XZY"){const p=o*l,m=o*u,g=a*l,y=a*u;t[0]=l*f,t[4]=-d,t[8]=u*f,t[1]=p*d+y,t[5]=o*f,t[9]=m*d-g,t[2]=g*d-m,t[6]=a*f,t[10]=y*d+p}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(NW,e,UW)}lookAt(e,t,i){const r=this.elements;return ns.subVectors(e,t),ns.lengthSq()===0&&(ns.z=1),ns.normalize(),dl.crossVectors(i,ns),dl.lengthSq()===0&&(Math.abs(i.z)===1?ns.x+=1e-4:ns.z+=1e-4,ns.normalize(),dl.crossVectors(i,ns)),dl.normalize(),a0.crossVectors(ns,dl),r[0]=dl.x,r[4]=a0.x,r[8]=ns.x,r[1]=dl.y,r[5]=a0.y,r[9]=ns.y,r[2]=dl.z,r[6]=a0.z,r[10]=ns.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],l=i[8],u=i[12],f=i[1],d=i[5],p=i[9],m=i[13],g=i[2],y=i[6],x=i[10],v=i[14],w=i[3],S=i[7],T=i[11],b=i[15],P=r[0],R=r[4],D=r[8],C=r[12],L=r[1],F=r[5],H=r[9],G=r[13],W=r[2],X=r[6],re=r[10],Q=r[14],z=r[3],j=r[7],I=r[11],ee=r[15];return s[0]=o*P+a*L+l*W+u*z,s[4]=o*R+a*F+l*X+u*j,s[8]=o*D+a*H+l*re+u*I,s[12]=o*C+a*G+l*Q+u*ee,s[1]=f*P+d*L+p*W+m*z,s[5]=f*R+d*F+p*X+m*j,s[9]=f*D+d*H+p*re+m*I,s[13]=f*C+d*G+p*Q+m*ee,s[2]=g*P+y*L+x*W+v*z,s[6]=g*R+y*F+x*X+v*j,s[10]=g*D+y*H+x*re+v*I,s[14]=g*C+y*G+x*Q+v*ee,s[3]=w*P+S*L+T*W+b*z,s[7]=w*R+S*F+T*X+b*j,s[11]=w*D+S*H+T*re+b*I,s[15]=w*C+S*G+T*Q+b*ee,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],u=e[13],f=e[2],d=e[6],p=e[10],m=e[14],g=e[3],y=e[7],x=e[11],v=e[15];return g*(+s*l*d-r*u*d-s*a*p+i*u*p+r*a*m-i*l*m)+y*(+t*l*m-t*u*p+s*o*p-r*o*m+r*u*f-s*l*f)+x*(+t*u*d-t*a*m-s*o*d+i*o*m+s*a*f-i*u*f)+v*(-r*a*f-t*l*d+t*a*p+r*o*d-i*o*p+i*l*f)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],f=e[8],d=e[9],p=e[10],m=e[11],g=e[12],y=e[13],x=e[14],v=e[15],w=d*x*u-y*p*u+y*l*m-a*x*m-d*l*v+a*p*v,S=g*p*u-f*x*u-g*l*m+o*x*m+f*l*v-o*p*v,T=f*y*u-g*d*u+g*a*m-o*y*m-f*a*v+o*d*v,b=g*d*l-f*y*l-g*a*p+o*y*p+f*a*x-o*d*x,P=t*w+i*S+r*T+s*b;if(P===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const R=1/P;return e[0]=w*R,e[1]=(y*p*s-d*x*s-y*r*m+i*x*m+d*r*v-i*p*v)*R,e[2]=(a*x*s-y*l*s+y*r*u-i*x*u-a*r*v+i*l*v)*R,e[3]=(d*l*s-a*p*s-d*r*u+i*p*u+a*r*m-i*l*m)*R,e[4]=S*R,e[5]=(f*x*s-g*p*s+g*r*m-t*x*m-f*r*v+t*p*v)*R,e[6]=(g*l*s-o*x*s-g*r*u+t*x*u+o*r*v-t*l*v)*R,e[7]=(o*p*s-f*l*s+f*r*u-t*p*u-o*r*m+t*l*m)*R,e[8]=T*R,e[9]=(g*d*s-f*y*s-g*i*m+t*y*m+f*i*v-t*d*v)*R,e[10]=(o*y*s-g*a*s+g*i*u-t*y*u-o*i*v+t*a*v)*R,e[11]=(f*a*s-o*d*s-f*i*u+t*d*u+o*i*m-t*a*m)*R,e[12]=b*R,e[13]=(f*y*r-g*d*r+g*i*p-t*y*p-f*i*x+t*d*x)*R,e[14]=(g*a*r-o*y*r-g*i*l+t*y*l+o*i*x-t*a*x)*R,e[15]=(o*d*r-f*a*r+f*i*l-t*d*l-o*i*p+t*a*p)*R,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,l=e.z,u=s*o,f=s*a;return this.set(u*o+i,u*a-r*l,u*l+r*a,0,u*a+r*l,f*a+i,f*l-r*o,0,u*l-r*a,f*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,u=s+s,f=o+o,d=a+a,p=s*u,m=s*f,g=s*d,y=o*f,x=o*d,v=a*d,w=l*u,S=l*f,T=l*d,b=i.x,P=i.y,R=i.z;return r[0]=(1-(y+v))*b,r[1]=(m+T)*b,r[2]=(g-S)*b,r[3]=0,r[4]=(m-T)*P,r[5]=(1-(p+v))*P,r[6]=(x+w)*P,r[7]=0,r[8]=(g+S)*R,r[9]=(x-w)*R,r[10]=(1-(p+y))*R,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=_f.set(r[0],r[1],r[2]).length();const o=_f.set(r[4],r[5],r[6]).length(),a=_f.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],lo.copy(this);const u=1/s,f=1/o,d=1/a;return lo.elements[0]*=u,lo.elements[1]*=u,lo.elements[2]*=u,lo.elements[4]*=f,lo.elements[5]*=f,lo.elements[6]*=f,lo.elements[8]*=d,lo.elements[9]*=d,lo.elements[10]*=d,t.setFromRotationMatrix(lo),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o){const a=this.elements,l=2*s/(t-e),u=2*s/(i-r),f=(t+e)/(t-e),d=(i+r)/(i-r),p=-(o+s)/(o-s),m=-2*o*s/(o-s);return a[0]=l,a[4]=0,a[8]=f,a[12]=0,a[1]=0,a[5]=u,a[9]=d,a[13]=0,a[2]=0,a[6]=0,a[10]=p,a[14]=m,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,i,r,s,o){const a=this.elements,l=1/(t-e),u=1/(i-r),f=1/(o-s),d=(t+e)*l,p=(i+r)*u,m=(o+s)*f;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-d,a[1]=0,a[5]=2*u,a[9]=0,a[13]=-p,a[2]=0,a[6]=0,a[10]=-2*f,a[14]=-m,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const _f=new N,lo=new mt,NW=new N(0,0,0),UW=new N(1,1,1),dl=new N,a0=new N,ns=new N,DR=new mt,LR=new Si;class ld{constructor(e=0,t=0,i=0,r=ld.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],l=r[1],u=r[5],f=r[9],d=r[2],p=r[6],m=r[10];switch(t){case"XYZ":this._y=Math.asin(Xn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-f,m),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(p,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Xn(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(a,m),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-d,s),this._z=0);break;case"ZXY":this._x=Math.asin(Xn(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-d,m),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Xn(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(p,m),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin(Xn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-f,u),this._y=Math.atan2(-d,s)):(this._x=0,this._y=Math.atan2(a,m));break;case"XZY":this._z=Math.asin(-Xn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(p,u),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-f,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return DR.makeRotationFromQuaternion(e),this.setFromRotationMatrix(DR,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return LR.setFromEuler(this),this.setFromQuaternion(LR,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}ld.DEFAULT_ORDER="XYZ";class _c{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let FW=0;const IR=new N,xf=new Si,_a=new mt,l0=new N,Jd=new N,zW=new N,BW=new Si,kR=new N(1,0,0),OR=new N(0,1,0),NR=new N(0,0,1),VW={type:"added"},UR={type:"removed"};class rn extends eo{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:FW++}),this.uuid=ms(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=rn.DEFAULT_UP.clone();const e=new N,t=new ld,i=new Si,r=new N(1,1,1);function s(){i.setFromEuler(t,!1)}function o(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new mt},normalMatrix:{value:new Ut}}),this.matrix=new mt,this.matrixWorld=new mt,this.matrixAutoUpdate=rn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=rn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new _c,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return xf.setFromAxisAngle(e,t),this.quaternion.multiply(xf),this}rotateOnWorldAxis(e,t){return xf.setFromAxisAngle(e,t),this.quaternion.premultiply(xf),this}rotateX(e){return this.rotateOnAxis(kR,e)}rotateY(e){return this.rotateOnAxis(OR,e)}rotateZ(e){return this.rotateOnAxis(NR,e)}translateOnAxis(e,t){return IR.copy(e).applyQuaternion(this.quaternion),this.position.add(IR.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(kR,e)}translateY(e){return this.translateOnAxis(OR,e)}translateZ(e){return this.translateOnAxis(NR,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(_a.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?l0.copy(e):l0.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),Jd.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?_a.lookAt(Jd,l0,this.up):_a.lookAt(l0,Jd,this.up),this.quaternion.setFromRotationMatrix(_a),r&&(_a.extractRotation(r.matrixWorld),xf.setFromRotationMatrix(_a),this.quaternion.premultiply(xf.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(VW)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(UR)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(UR)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),_a.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),_a.multiply(e.parent.matrixWorld)),e.applyMatrix4(_a),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t){let i=[];this[e]===t&&i.push(this);for(let r=0,s=this.children.length;r<s;r++){const o=this.children[r].getObjectsByProperty(e,t);o.length>0&&(i=i.concat(o))}return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Jd,e,zW),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Jd,BW,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++){const s=t[i];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++){const a=r[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON()));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let u=0,f=l.length;u<f;u++){const d=l[u];s(e.shapes,d)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,u=this.material.length;l<u;l++)a.push(s(e.materials,this.material[l]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];r.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),u=o(e.textures),f=o(e.images),d=o(e.shapes),p=o(e.skeletons),m=o(e.animations),g=o(e.nodes);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),u.length>0&&(i.textures=u),f.length>0&&(i.images=f),d.length>0&&(i.shapes=d),p.length>0&&(i.skeletons=p),m.length>0&&(i.animations=m),g.length>0&&(i.nodes=g)}return i.object=r,i;function o(a){const l=[];for(const u in a){const f=a[u];delete f.metadata,l.push(f)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}rn.DEFAULT_UP=new N(0,1,0);rn.DEFAULT_MATRIX_AUTO_UPDATE=!0;rn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const uo=new N,xa=new N,WS=new N,Sa=new N,Sf=new N,wf=new N,FR=new N,jS=new N,XS=new N,YS=new N;let u0=!1;class Fr{constructor(e=new N,t=new N,i=new N){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),uo.subVectors(e,t),r.cross(uo);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){uo.subVectors(r,t),xa.subVectors(i,t),WS.subVectors(e,t);const o=uo.dot(uo),a=uo.dot(xa),l=uo.dot(WS),u=xa.dot(xa),f=xa.dot(WS),d=o*u-a*a;if(d===0)return s.set(-2,-1,-1);const p=1/d,m=(u*l-a*f)*p,g=(o*f-a*l)*p;return s.set(1-m-g,g,m)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,Sa),Sa.x>=0&&Sa.y>=0&&Sa.x+Sa.y<=1}static getUV(e,t,i,r,s,o,a,l){return u0===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),u0=!0),this.getInterpolation(e,t,i,r,s,o,a,l)}static getInterpolation(e,t,i,r,s,o,a,l){return this.getBarycoord(e,t,i,r,Sa),l.setScalar(0),l.addScaledVector(s,Sa.x),l.addScaledVector(o,Sa.y),l.addScaledVector(a,Sa.z),l}static isFrontFacing(e,t,i,r){return uo.subVectors(i,t),xa.subVectors(e,t),uo.cross(xa).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return uo.subVectors(this.c,this.b),xa.subVectors(this.a,this.b),uo.cross(xa).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Fr.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Fr.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,r,s){return u0===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),u0=!0),Fr.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}getInterpolation(e,t,i,r,s){return Fr.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return Fr.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Fr.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,a;Sf.subVectors(r,i),wf.subVectors(s,i),jS.subVectors(e,i);const l=Sf.dot(jS),u=wf.dot(jS);if(l<=0&&u<=0)return t.copy(i);XS.subVectors(e,r);const f=Sf.dot(XS),d=wf.dot(XS);if(f>=0&&d<=f)return t.copy(r);const p=l*d-f*u;if(p<=0&&l>=0&&f<=0)return o=l/(l-f),t.copy(i).addScaledVector(Sf,o);YS.subVectors(e,s);const m=Sf.dot(YS),g=wf.dot(YS);if(g>=0&&m<=g)return t.copy(s);const y=m*u-l*g;if(y<=0&&u>=0&&g<=0)return a=u/(u-g),t.copy(i).addScaledVector(wf,a);const x=f*g-m*d;if(x<=0&&d-f>=0&&m-g>=0)return FR.subVectors(s,r),a=(d-f)/(d-f+(m-g)),t.copy(r).addScaledVector(FR,a);const v=1/(x+y+p);return o=y*v,a=p*v,t.copy(i).addScaledVector(Sf,o).addScaledVector(wf,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let HW=0;class Ti extends eo{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:HW++}),this.uuid=ms(),this.name="",this.type="Material",this.blending=gc,this.side=ta,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=Bb,this.blendDst=Vb,this.blendEquation=Ku,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=km,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=aU,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Oy,this.stencilZFail=Oy,this.stencilZPass=Oy,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==gc&&(i.blending=this.blending),this.side!==ta&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(i.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(i.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=this.flatShading),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}const hU={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},co={h:0,s:0,l:0},c0={h:0,s:0,l:0};function qS(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class Oe{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,t===void 0&&i===void 0?this.set(e):this.setRGB(e,t,i)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=vo){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,kr.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=kr.workingColorSpace){return this.r=e,this.g=t,this.b=i,kr.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=kr.workingColorSpace){if(e=Qb(e,1),t=Xn(t,0,1),i=Xn(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,o=2*i-s;this.r=qS(o,s,e+1/3),this.g=qS(o,s,e),this.b=qS(o,s,e-1/3)}return kr.toWorkingColorSpace(this,r),this}setStyle(e,t=vo){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(s[1],10))/255,this.g=Math.min(255,parseInt(s[2],10))/255,this.b=Math.min(255,parseInt(s[3],10))/255,kr.toWorkingColorSpace(this,t),i(s[4]),this;if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(s[1],10))/100,this.g=Math.min(100,parseInt(s[2],10))/100,this.b=Math.min(100,parseInt(s[3],10))/100,kr.toWorkingColorSpace(this,t),i(s[4]),this;break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){const l=parseFloat(s[1])/360,u=parseFloat(s[2])/100,f=parseFloat(s[3])/100;return i(s[4]),this.setHSL(l,u,f,t)}break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=vo){const i=hU[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Ch(e.r),this.g=Ch(e.g),this.b=Ch(e.b),this}copyLinearToSRGB(e){return this.r=NS(e.r),this.g=NS(e.g),this.b=NS(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=vo){return kr.fromWorkingColorSpace(er.copy(this),e),Xn(er.r*255,0,255)<<16^Xn(er.g*255,0,255)<<8^Xn(er.b*255,0,255)<<0}getHexString(e=vo){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=kr.workingColorSpace){kr.fromWorkingColorSpace(er.copy(this),t);const i=er.r,r=er.g,s=er.b,o=Math.max(i,r,s),a=Math.min(i,r,s);let l,u;const f=(a+o)/2;if(a===o)l=0,u=0;else{const d=o-a;switch(u=f<=.5?d/(o+a):d/(2-o-a),o){case i:l=(r-s)/d+(r<s?6:0);break;case r:l=(s-i)/d+2;break;case s:l=(i-r)/d+4;break}l/=6}return e.h=l,e.s=u,e.l=f,e}getRGB(e,t=kr.workingColorSpace){return kr.fromWorkingColorSpace(er.copy(this),t),e.r=er.r,e.g=er.g,e.b=er.b,e}getStyle(e=vo){kr.fromWorkingColorSpace(er.copy(this),e);const t=er.r,i=er.g,r=er.b;return e!==vo?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${t*255|0},${i*255|0},${r*255|0})`}offsetHSL(e,t,i){return this.getHSL(co),co.h+=e,co.s+=t,co.l+=i,this.setHSL(co.h,co.s,co.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(co),e.getHSL(c0);const i=Xp(co.h,c0.h,t),r=Xp(co.s,c0.s,t),s=Xp(co.l,c0.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const er=new Oe;Oe.NAMES=hU;class du extends Ti{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Oe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=gg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Pa=GW();function GW(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const u=l-127;u<-27?(i[l]=0,i[l|256]=32768,r[l]=24,r[l|256]=24):u<-14?(i[l]=1024>>-u-14,i[l|256]=1024>>-u-14|32768,r[l]=-u-1,r[l|256]=-u-1):u<=15?(i[l]=u+15<<10,i[l|256]=u+15<<10|32768,r[l]=13,r[l|256]=13):u<128?(i[l]=31744,i[l|256]=64512,r[l]=24,r[l|256]=24):(i[l]=31744,i[l|256]=64512,r[l]=13,r[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let u=l<<13,f=0;for(;!(u&8388608);)u<<=1,f-=8388608;u&=-8388609,f+=947912704,s[l]=u|f}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:a}}function Or(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=Xn(n,-65504,65504),Pa.floatView[0]=n;const e=Pa.uint32View[0],t=e>>23&511;return Pa.baseTable[t]+((e&8388607)>>Pa.shiftTable[t])}function Tp(n){const e=n>>10;return Pa.uint32View[0]=Pa.mantissaTable[Pa.offsetTable[e]+(n&1023)]+Pa.exponentTable[e],Pa.floatView[0]}const WW={toHalfFloat:Or,fromHalfFloat:Tp},ri=new N,f0=new le;class sn{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=Hm,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)f0.fromBufferAttribute(this,t),f0.applyMatrix3(e),this.setXY(t,f0.x,f0.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)ri.fromBufferAttribute(this,t),ri.applyMatrix3(e),this.setXYZ(t,ri.x,ri.y,ri.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)ri.fromBufferAttribute(this,t),ri.applyMatrix4(e),this.setXYZ(t,ri.x,ri.y,ri.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)ri.fromBufferAttribute(this,t),ri.applyNormalMatrix(e),this.setXYZ(t,ri.x,ri.y,ri.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)ri.fromBufferAttribute(this,t),ri.transformDirection(e),this.setXYZ(t,ri.x,ri.y,ri.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=hs(t,this.array)),t}setX(e,t){return this.normalized&&(t=kt(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=hs(t,this.array)),t}setY(e,t){return this.normalized&&(t=kt(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=hs(t,this.array)),t}setZ(e,t){return this.normalized&&(t=kt(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=hs(t,this.array)),t}setW(e,t){return this.normalized&&(t=kt(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=kt(t,this.array),i=kt(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=kt(t,this.array),i=kt(i,this.array),r=kt(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=kt(t,this.array),i=kt(i,this.array),r=kt(r,this.array),s=kt(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Hm&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class jW extends sn{constructor(e,t,i){super(new Int8Array(e),t,i)}}class XW extends sn{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class YW extends sn{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class qW extends sn{constructor(e,t,i){super(new Int16Array(e),t,i)}}class tC extends sn{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class ZW extends sn{constructor(e,t,i){super(new Int32Array(e),t,i)}}class nC extends sn{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class $W extends sn{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=Tp(this.array[e*this.itemSize]);return this.normalized&&(t=hs(t,this.array)),t}setX(e,t){return this.normalized&&(t=kt(t,this.array)),this.array[e*this.itemSize]=Or(t),this}getY(e){let t=Tp(this.array[e*this.itemSize+1]);return this.normalized&&(t=hs(t,this.array)),t}setY(e,t){return this.normalized&&(t=kt(t,this.array)),this.array[e*this.itemSize+1]=Or(t),this}getZ(e){let t=Tp(this.array[e*this.itemSize+2]);return this.normalized&&(t=hs(t,this.array)),t}setZ(e,t){return this.normalized&&(t=kt(t,this.array)),this.array[e*this.itemSize+2]=Or(t),this}getW(e){let t=Tp(this.array[e*this.itemSize+3]);return this.normalized&&(t=hs(t,this.array)),t}setW(e,t){return this.normalized&&(t=kt(t,this.array)),this.array[e*this.itemSize+3]=Or(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=kt(t,this.array),i=kt(i,this.array)),this.array[e+0]=Or(t),this.array[e+1]=Or(i),this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=kt(t,this.array),i=kt(i,this.array),r=kt(r,this.array)),this.array[e+0]=Or(t),this.array[e+1]=Or(i),this.array[e+2]=Or(r),this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=kt(t,this.array),i=kt(i,this.array),r=kt(r,this.array),s=kt(s,this.array)),this.array[e+0]=Or(t),this.array[e+1]=Or(i),this.array[e+2]=Or(r),this.array[e+3]=Or(s),this}}class st extends sn{constructor(e,t,i){super(new Float32Array(e),t,i)}}class KW extends sn{constructor(e,t,i){super(new Float64Array(e),t,i)}}let JW=0;const Ls=new mt,ZS=new rn,Mf=new N,is=new oa,Qd=new oa,Ai=new N;class Lt extends eo{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:JW++}),this.uuid=ms(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(cU(e)?nC:tC)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new Ut().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ls.makeRotationFromQuaternion(e),this.applyMatrix4(Ls),this}rotateX(e){return Ls.makeRotationX(e),this.applyMatrix4(Ls),this}rotateY(e){return Ls.makeRotationY(e),this.applyMatrix4(Ls),this}rotateZ(e){return Ls.makeRotationZ(e),this.applyMatrix4(Ls),this}translate(e,t,i){return Ls.makeTranslation(e,t,i),this.applyMatrix4(Ls),this}scale(e,t,i){return Ls.makeScale(e,t,i),this.applyMatrix4(Ls),this}lookAt(e){return ZS.lookAt(e),ZS.updateMatrix(),this.applyMatrix4(ZS.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Mf).negate(),this.translate(Mf.x,Mf.y,Mf.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new st(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new oa);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new N(-1/0,-1/0,-1/0),new N(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];is.setFromBufferAttribute(s),this.morphTargetsRelative?(Ai.addVectors(this.boundingBox.min,is.min),this.boundingBox.expandByPoint(Ai),Ai.addVectors(this.boundingBox.max,is.max),this.boundingBox.expandByPoint(Ai)):(this.boundingBox.expandByPoint(is.min),this.boundingBox.expandByPoint(is.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new aa);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new N,1/0);return}if(e){const i=this.boundingSphere.center;if(is.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];Qd.setFromBufferAttribute(a),this.morphTargetsRelative?(Ai.addVectors(is.min,Qd.min),is.expandByPoint(Ai),Ai.addVectors(is.max,Qd.max),is.expandByPoint(Ai)):(is.expandByPoint(Qd.min),is.expandByPoint(Qd.max))}is.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)Ai.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(Ai));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let u=0,f=a.count;u<f;u++)Ai.fromBufferAttribute(a,u),l&&(Mf.fromBufferAttribute(e,u),Ai.add(Mf)),r=Math.max(r,i.distanceToSquared(Ai))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.array,r=t.position.array,s=t.normal.array,o=t.uv.array,a=r.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new sn(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,u=[],f=[];for(let L=0;L<a;L++)u[L]=new N,f[L]=new N;const d=new N,p=new N,m=new N,g=new le,y=new le,x=new le,v=new N,w=new N;function S(L,F,H){d.fromArray(r,L*3),p.fromArray(r,F*3),m.fromArray(r,H*3),g.fromArray(o,L*2),y.fromArray(o,F*2),x.fromArray(o,H*2),p.sub(d),m.sub(d),y.sub(g),x.sub(g);const G=1/(y.x*x.y-x.x*y.y);isFinite(G)&&(v.copy(p).multiplyScalar(x.y).addScaledVector(m,-y.y).multiplyScalar(G),w.copy(m).multiplyScalar(y.x).addScaledVector(p,-x.x).multiplyScalar(G),u[L].add(v),u[F].add(v),u[H].add(v),f[L].add(w),f[F].add(w),f[H].add(w))}let T=this.groups;T.length===0&&(T=[{start:0,count:i.length}]);for(let L=0,F=T.length;L<F;++L){const H=T[L],G=H.start,W=H.count;for(let X=G,re=G+W;X<re;X+=3)S(i[X+0],i[X+1],i[X+2])}const b=new N,P=new N,R=new N,D=new N;function C(L){R.fromArray(s,L*3),D.copy(R);const F=u[L];b.copy(F),b.sub(R.multiplyScalar(R.dot(F))).normalize(),P.crossVectors(D,F);const G=P.dot(f[L])<0?-1:1;l[L*4]=b.x,l[L*4+1]=b.y,l[L*4+2]=b.z,l[L*4+3]=G}for(let L=0,F=T.length;L<F;++L){const H=T[L],G=H.start,W=H.count;for(let X=G,re=G+W;X<re;X+=3)C(i[X+0]),C(i[X+1]),C(i[X+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new sn(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let p=0,m=i.count;p<m;p++)i.setXYZ(p,0,0,0);const r=new N,s=new N,o=new N,a=new N,l=new N,u=new N,f=new N,d=new N;if(e)for(let p=0,m=e.count;p<m;p+=3){const g=e.getX(p+0),y=e.getX(p+1),x=e.getX(p+2);r.fromBufferAttribute(t,g),s.fromBufferAttribute(t,y),o.fromBufferAttribute(t,x),f.subVectors(o,s),d.subVectors(r,s),f.cross(d),a.fromBufferAttribute(i,g),l.fromBufferAttribute(i,y),u.fromBufferAttribute(i,x),a.add(f),l.add(f),u.add(f),i.setXYZ(g,a.x,a.y,a.z),i.setXYZ(y,l.x,l.y,l.z),i.setXYZ(x,u.x,u.y,u.z)}else for(let p=0,m=t.count;p<m;p+=3)r.fromBufferAttribute(t,p+0),s.fromBufferAttribute(t,p+1),o.fromBufferAttribute(t,p+2),f.subVectors(o,s),d.subVectors(r,s),f.cross(d),i.setXYZ(p+0,f.x,f.y,f.z),i.setXYZ(p+1,f.x,f.y,f.z),i.setXYZ(p+2,f.x,f.y,f.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Ai.fromBufferAttribute(e,t),Ai.normalize(),e.setXYZ(t,Ai.x,Ai.y,Ai.z)}toNonIndexed(){function e(a,l){const u=a.array,f=a.itemSize,d=a.normalized,p=new u.constructor(l.length*f);let m=0,g=0;for(let y=0,x=l.length;y<x;y++){a.isInterleavedBufferAttribute?m=l[y]*a.data.stride+a.offset:m=l[y]*f;for(let v=0;v<f;v++)p[g++]=u[m++]}return new sn(p,f,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Lt,i=this.index.array,r=this.attributes;for(const a in r){const l=r[a],u=e(l,i);t.setAttribute(a,u)}const s=this.morphAttributes;for(const a in s){const l=[],u=s[a];for(let f=0,d=u.length;f<d;f++){const p=u[f],m=e(p,i);l.push(m)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const u=o[a];t.addGroup(u.start,u.count,u.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i){const u=i[l];e.data.attributes[l]=u.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],f=[];for(let d=0,p=u.length;d<p;d++){const m=u[d];f.push(m.toJSON(e.data))}f.length>0&&(r[l]=f,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const r=e.attributes;for(const u in r){const f=r[u];this.setAttribute(u,f.clone(t))}const s=e.morphAttributes;for(const u in s){const f=[],d=s[u];for(let p=0,m=d.length;p<m;p++)f.push(d[p].clone(t));this.morphAttributes[u]=f}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let u=0,f=o.length;u<f;u++){const d=o[u];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const zR=new mt,zo=new vg,h0=new aa,BR=new N,Tf=new N,Ef=new N,bf=new N,$S=new N,d0=new N,p0=new le,m0=new le,g0=new le,VR=new N,HR=new N,GR=new N,v0=new N,y0=new N;class Ii extends rn{constructor(e=new Lt,t=new du){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const a=this.morphTargetInfluences;if(s&&a){d0.set(0,0,0);for(let l=0,u=s.length;l<u;l++){const f=a[l],d=s[l];f!==0&&($S.fromBufferAttribute(d,e),o?d0.addScaledVector($S,f):d0.addScaledVector($S.sub(t),f))}t.add(d0)}return this.isSkinnedMesh&&this.applyBoneTransform(e,t),t}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;if(r===void 0||(i.boundingSphere===null&&i.computeBoundingSphere(),h0.copy(i.boundingSphere),h0.applyMatrix4(s),zo.copy(e.ray).recast(e.near),h0.containsPoint(zo.origin)===!1&&(zo.intersectSphere(h0,BR)===null||zo.origin.distanceToSquared(BR)>(e.far-e.near)**2))||(zR.copy(s).invert(),zo.copy(e.ray).applyMatrix4(zR),i.boundingBox!==null&&zo.intersectsBox(i.boundingBox)===!1))return;let o;const a=i.index,l=i.attributes.position,u=i.attributes.uv,f=i.attributes.uv2,d=i.attributes.normal,p=i.groups,m=i.drawRange;if(a!==null)if(Array.isArray(r))for(let g=0,y=p.length;g<y;g++){const x=p[g],v=r[x.materialIndex],w=Math.max(x.start,m.start),S=Math.min(a.count,Math.min(x.start+x.count,m.start+m.count));for(let T=w,b=S;T<b;T+=3){const P=a.getX(T),R=a.getX(T+1),D=a.getX(T+2);o=_0(this,v,e,zo,u,f,d,P,R,D),o&&(o.faceIndex=Math.floor(T/3),o.face.materialIndex=x.materialIndex,t.push(o))}}else{const g=Math.max(0,m.start),y=Math.min(a.count,m.start+m.count);for(let x=g,v=y;x<v;x+=3){const w=a.getX(x),S=a.getX(x+1),T=a.getX(x+2);o=_0(this,r,e,zo,u,f,d,w,S,T),o&&(o.faceIndex=Math.floor(x/3),t.push(o))}}else if(l!==void 0)if(Array.isArray(r))for(let g=0,y=p.length;g<y;g++){const x=p[g],v=r[x.materialIndex],w=Math.max(x.start,m.start),S=Math.min(l.count,Math.min(x.start+x.count,m.start+m.count));for(let T=w,b=S;T<b;T+=3){const P=T,R=T+1,D=T+2;o=_0(this,v,e,zo,u,f,d,P,R,D),o&&(o.faceIndex=Math.floor(T/3),o.face.materialIndex=x.materialIndex,t.push(o))}}else{const g=Math.max(0,m.start),y=Math.min(l.count,m.start+m.count);for(let x=g,v=y;x<v;x+=3){const w=x,S=x+1,T=x+2;o=_0(this,r,e,zo,u,f,d,w,S,T),o&&(o.faceIndex=Math.floor(x/3),t.push(o))}}}}function QW(n,e,t,i,r,s,o,a){let l;if(e.side===yi?l=i.intersectTriangle(o,s,r,!0,a):l=i.intersectTriangle(r,s,o,e.side===ta,a),l===null)return null;y0.copy(a),y0.applyMatrix4(n.matrixWorld);const u=t.ray.origin.distanceTo(y0);return u<t.near||u>t.far?null:{distance:u,point:y0.clone(),object:n}}function _0(n,e,t,i,r,s,o,a,l,u){n.getVertexPosition(a,Tf),n.getVertexPosition(l,Ef),n.getVertexPosition(u,bf);const f=QW(n,e,t,i,Tf,Ef,bf,v0);if(f){r&&(p0.fromBufferAttribute(r,a),m0.fromBufferAttribute(r,l),g0.fromBufferAttribute(r,u),f.uv=Fr.getInterpolation(v0,Tf,Ef,bf,p0,m0,g0,new le)),s&&(p0.fromBufferAttribute(s,a),m0.fromBufferAttribute(s,l),g0.fromBufferAttribute(s,u),f.uv2=Fr.getInterpolation(v0,Tf,Ef,bf,p0,m0,g0,new le)),o&&(VR.fromBufferAttribute(o,a),HR.fromBufferAttribute(o,l),GR.fromBufferAttribute(o,u),f.normal=Fr.getInterpolation(v0,Tf,Ef,bf,VR,HR,GR,new N),f.normal.dot(i.direction)>0&&f.normal.multiplyScalar(-1));const d={a,b:l,c:u,normal:new N,materialIndex:0};Fr.getNormal(Tf,Ef,bf,d.normal),f.face=d}return f}class pu extends Lt{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],u=[],f=[],d=[];let p=0,m=0;g("z","y","x",-1,-1,i,t,e,o,s,0),g("z","y","x",1,-1,i,t,-e,o,s,1),g("x","z","y",1,1,e,i,t,r,o,2),g("x","z","y",1,-1,e,i,-t,r,o,3),g("x","y","z",1,-1,e,t,i,r,s,4),g("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new st(u,3)),this.setAttribute("normal",new st(f,3)),this.setAttribute("uv",new st(d,2));function g(y,x,v,w,S,T,b,P,R,D,C){const L=T/R,F=b/D,H=T/2,G=b/2,W=P/2,X=R+1,re=D+1;let Q=0,z=0;const j=new N;for(let I=0;I<re;I++){const ee=I*F-G;for(let oe=0;oe<X;oe++){const se=oe*L-H;j[y]=se*w,j[x]=ee*S,j[v]=W,u.push(j.x,j.y,j.z),j[y]=0,j[x]=0,j[v]=P>0?1:-1,f.push(j.x,j.y,j.z),d.push(oe/R),d.push(1-I/D),Q+=1}}for(let I=0;I<D;I++)for(let ee=0;ee<R;ee++){const oe=p+ee+X*I,se=p+ee+X*(I+1),te=p+(ee+1)+X*(I+1),Te=p+(ee+1)+X*I;l.push(oe,se,Te),l.push(se,te,Te),z+=6}a.addGroup(m,z,C),m+=z,p+=Q}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new pu(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function jh(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function gr(n){const e={};for(let t=0;t<n.length;t++){const i=jh(n[t]);for(const r in i)e[r]=i[r]}return e}function e8(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function dU(n){return n.getRenderTarget()===null&&n.outputEncoding===an?vo:Gh}const pU={clone:jh,merge:gr};var t8=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,n8=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class on extends Ti{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=t8,this.fragmentShader=n8,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=jh(e.uniforms),this.uniformsGroups=e8(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class ud extends rn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new mt,this.projectionMatrix=new mt,this.projectionMatrixInverse=new mt}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class Nn extends ud{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Wh*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(vc*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Wh*2*Math.atan(Math.tan(vc*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(vc*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,u=o.fullHeight;s+=o.offsetX*r/l,t-=o.offsetY*i/u,r*=o.width/l,i*=o.height/u}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Cf=-90,Pf=1;class bx extends rn{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i;const r=new Nn(Cf,Pf,e,t);r.layers=this.layers,r.up.set(0,1,0),r.lookAt(1,0,0),this.add(r);const s=new Nn(Cf,Pf,e,t);s.layers=this.layers,s.up.set(0,1,0),s.lookAt(-1,0,0),this.add(s);const o=new Nn(Cf,Pf,e,t);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(0,1,0),this.add(o);const a=new Nn(Cf,Pf,e,t);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(0,-1,0),this.add(a);const l=new Nn(Cf,Pf,e,t);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,1),this.add(l);const u=new Nn(Cf,Pf,e,t);u.layers=this.layers,u.up.set(0,1,0),u.lookAt(0,0,-1),this.add(u)}update(e,t){this.parent===null&&this.updateMatrixWorld();const i=this.renderTarget,[r,s,o,a,l,u]=this.children,f=e.getRenderTarget(),d=e.toneMapping,p=e.xr.enabled;e.toneMapping=Eo,e.xr.enabled=!1;const m=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,r),e.setRenderTarget(i,1),e.render(t,s),e.setRenderTarget(i,2),e.render(t,o),e.setRenderTarget(i,3),e.render(t,a),e.setRenderTarget(i,4),e.render(t,l),i.texture.generateMipmaps=m,e.setRenderTarget(i,5),e.render(t,u),e.setRenderTarget(f),e.toneMapping=d,e.xr.enabled=p,i.texture.needsPMREMUpdate=!0}}class yg extends bn{constructor(e,t,i,r,s,o,a,l,u,f){e=e!==void 0?e:[],t=t!==void 0?t:tu,super(e,t,i,r,s,o,a,l,u,f),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class _g extends qt{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new yg(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:vt}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new pu(5,5,5),s=new on({name:"CubemapFromEquirect",uniforms:jh(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:yi,blending:En});s.uniforms.tEquirect.value=t;const o=new Ii(r,s),a=t.minFilter;return t.minFilter===iu&&(t.minFilter=vt),new bx(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}const KS=new N,i8=new N,r8=new Ut;let wl=class{constructor(e=new N(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=KS.subVectors(i,t).cross(i8.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(KS),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||r8.getNormalMatrix(e),r=this.coplanarPoint(KS).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}};const Lu=new aa,x0=new N;class Cx{constructor(e=new wl,t=new wl,i=new wl,r=new wl,s=new wl,o=new wl){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){const t=this.planes,i=e.elements,r=i[0],s=i[1],o=i[2],a=i[3],l=i[4],u=i[5],f=i[6],d=i[7],p=i[8],m=i[9],g=i[10],y=i[11],x=i[12],v=i[13],w=i[14],S=i[15];return t[0].setComponents(a-r,d-l,y-p,S-x).normalize(),t[1].setComponents(a+r,d+l,y+p,S+x).normalize(),t[2].setComponents(a+s,d+u,y+m,S+v).normalize(),t[3].setComponents(a-s,d-u,y-m,S-v).normalize(),t[4].setComponents(a-o,d-f,y-g,S-w).normalize(),t[5].setComponents(a+o,d+f,y+g,S+w).normalize(),this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Lu.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Lu.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Lu)}intersectsSprite(e){return Lu.center.set(0,0,0),Lu.radius=.7071067811865476,Lu.applyMatrix4(e.matrixWorld),this.intersectsSphere(Lu)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(x0.x=r.normal.x>0?e.max.x:e.min.x,x0.y=r.normal.y>0?e.max.y:e.min.y,x0.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(x0)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function mU(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function s8(n,e){const t=e.isWebGL2,i=new WeakMap;function r(u,f){const d=u.array,p=u.usage,m=n.createBuffer();n.bindBuffer(f,m),n.bufferData(f,d,p),u.onUploadCallback();let g;if(d instanceof Float32Array)g=5126;else if(d instanceof Uint16Array)if(u.isFloat16BufferAttribute)if(t)g=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else g=5123;else if(d instanceof Int16Array)g=5122;else if(d instanceof Uint32Array)g=5125;else if(d instanceof Int32Array)g=5124;else if(d instanceof Int8Array)g=5120;else if(d instanceof Uint8Array)g=5121;else if(d instanceof Uint8ClampedArray)g=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);return{buffer:m,type:g,bytesPerElement:d.BYTES_PER_ELEMENT,version:u.version}}function s(u,f,d){const p=f.array,m=f.updateRange;n.bindBuffer(d,u),m.count===-1?n.bufferSubData(d,0,p):(t?n.bufferSubData(d,m.offset*p.BYTES_PER_ELEMENT,p,m.offset,m.count):n.bufferSubData(d,m.offset*p.BYTES_PER_ELEMENT,p.subarray(m.offset,m.offset+m.count)),m.count=-1),f.onUploadCallback()}function o(u){return u.isInterleavedBufferAttribute&&(u=u.data),i.get(u)}function a(u){u.isInterleavedBufferAttribute&&(u=u.data);const f=i.get(u);f&&(n.deleteBuffer(f.buffer),i.delete(u))}function l(u,f){if(u.isGLBufferAttribute){const p=i.get(u);(!p||p.version<u.version)&&i.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}u.isInterleavedBufferAttribute&&(u=u.data);const d=i.get(u);d===void 0?i.set(u,r(u,f)):d.version<u.version&&(s(d.buffer,u,f),d.version=u.version)}return{get:o,remove:a,update:l}}class cd extends Lt{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(i),l=Math.floor(r),u=a+1,f=l+1,d=e/a,p=t/l,m=[],g=[],y=[],x=[];for(let v=0;v<f;v++){const w=v*p-o;for(let S=0;S<u;S++){const T=S*d-s;g.push(T,-w,0),y.push(0,0,1),x.push(S/a),x.push(1-v/l)}}for(let v=0;v<l;v++)for(let w=0;w<a;w++){const S=w+u*v,T=w+u*(v+1),b=w+1+u*(v+1),P=w+1+u*v;m.push(S,T,P),m.push(T,b,P)}this.setIndex(m),this.setAttribute("position",new st(g,3)),this.setAttribute("normal",new st(y,3)),this.setAttribute("uv",new st(x,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new cd(e.width,e.height,e.widthSegments,e.heightSegments)}}var o8=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,a8=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,l8=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,u8=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,c8=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,f8=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,h8="vec3 transformed = vec3( position );",d8=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,p8=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,m8=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,g8=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,v8=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,y8=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,_8=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,x8=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,S8=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,w8=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,M8=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,T8=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,E8=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,b8=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,C8=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,P8=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,A8=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,R8=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,D8=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,L8="gl_FragColor = linearToOutputTexel( gl_FragColor );",I8=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,k8=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,O8=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,N8=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,U8=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,F8=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,z8=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,B8=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,V8=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,H8=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,G8=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,W8=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,j8=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,X8=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Y8=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,q8=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Z8=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,$8=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,K8=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,J8=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Q8=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,e9=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif`,t9=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,n9=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,i9=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,r9=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,s9=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,o9=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,a9=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,l9=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,u9=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,c9=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,f9=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,h9=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,d9=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,p9=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,m9=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,g9=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,v9=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,y9=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,_9=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#ifdef USE_NORMALMAP_TANGENTSPACE
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal, vNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 geometryNormal = normal;`,x9=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,S9=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,w9=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,M9=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,T9=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,E9=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,b9=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,C9=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,P9=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,A9=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,R9=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,D9=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,L9=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,I9=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,k9=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,O9=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,N9=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,U9=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,F9=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,z9=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,B9=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,V9=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,H9=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,G9=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,W9=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,j9=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,X9=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Y9=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,q9=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Z9=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,$9=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, vec2 fullSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		
		vec2 lodFudge = pow( 1.95, lod ) / fullSize;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec2 fullSize = vec2( textureSize( sampler, 0 ) );
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), fullSize, floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), fullSize, ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,K9=`#ifdef USE_UV
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,J9=`#ifdef USE_UV
	varying vec2 vUv;
#endif
#ifdef USE_UV2
	attribute vec2 uv2;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Q9=`#ifdef USE_UV
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,e7=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const t7=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,n7=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,i7=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,r7=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,s7=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,o7=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,a7=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,l7=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,u7=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,c7=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,f7=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,h7=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,d7=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,p7=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,m7=`#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,g7=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,v7=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,y7=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,_7=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,x7=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,S7=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,w7=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,M7=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,T7=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,E7=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,b7=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,C7=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,P7=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,A7=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,R7=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,D7=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,L7=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,I7=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,k7=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,pt={alphamap_fragment:o8,alphamap_pars_fragment:a8,alphatest_fragment:l8,alphatest_pars_fragment:u8,aomap_fragment:c8,aomap_pars_fragment:f8,begin_vertex:h8,beginnormal_vertex:d8,bsdfs:p8,iridescence_fragment:m8,bumpmap_pars_fragment:g8,clipping_planes_fragment:v8,clipping_planes_pars_fragment:y8,clipping_planes_pars_vertex:_8,clipping_planes_vertex:x8,color_fragment:S8,color_pars_fragment:w8,color_pars_vertex:M8,color_vertex:T8,common:E8,cube_uv_reflection_fragment:b8,defaultnormal_vertex:C8,displacementmap_pars_vertex:P8,displacementmap_vertex:A8,emissivemap_fragment:R8,emissivemap_pars_fragment:D8,encodings_fragment:L8,encodings_pars_fragment:I8,envmap_fragment:k8,envmap_common_pars_fragment:O8,envmap_pars_fragment:N8,envmap_pars_vertex:U8,envmap_physical_pars_fragment:Z8,envmap_vertex:F8,fog_vertex:z8,fog_pars_vertex:B8,fog_fragment:V8,fog_pars_fragment:H8,gradientmap_pars_fragment:G8,lightmap_fragment:W8,lightmap_pars_fragment:j8,lights_lambert_fragment:X8,lights_lambert_pars_fragment:Y8,lights_pars_begin:q8,lights_toon_fragment:$8,lights_toon_pars_fragment:K8,lights_phong_fragment:J8,lights_phong_pars_fragment:Q8,lights_physical_fragment:e9,lights_physical_pars_fragment:t9,lights_fragment_begin:n9,lights_fragment_maps:i9,lights_fragment_end:r9,logdepthbuf_fragment:s9,logdepthbuf_pars_fragment:o9,logdepthbuf_pars_vertex:a9,logdepthbuf_vertex:l9,map_fragment:u9,map_pars_fragment:c9,map_particle_fragment:f9,map_particle_pars_fragment:h9,metalnessmap_fragment:d9,metalnessmap_pars_fragment:p9,morphcolor_vertex:m9,morphnormal_vertex:g9,morphtarget_pars_vertex:v9,morphtarget_vertex:y9,normal_fragment_begin:_9,normal_fragment_maps:x9,normal_pars_fragment:S9,normal_pars_vertex:w9,normal_vertex:M9,normalmap_pars_fragment:T9,clearcoat_normal_fragment_begin:E9,clearcoat_normal_fragment_maps:b9,clearcoat_pars_fragment:C9,iridescence_pars_fragment:P9,output_fragment:A9,packing:R9,premultiplied_alpha_fragment:D9,project_vertex:L9,dithering_fragment:I9,dithering_pars_fragment:k9,roughnessmap_fragment:O9,roughnessmap_pars_fragment:N9,shadowmap_pars_fragment:U9,shadowmap_pars_vertex:F9,shadowmap_vertex:z9,shadowmask_pars_fragment:B9,skinbase_vertex:V9,skinning_pars_vertex:H9,skinning_vertex:G9,skinnormal_vertex:W9,specularmap_fragment:j9,specularmap_pars_fragment:X9,tonemapping_fragment:Y9,tonemapping_pars_fragment:q9,transmission_fragment:Z9,transmission_pars_fragment:$9,uv_pars_fragment:K9,uv_pars_vertex:J9,uv_vertex:Q9,worldpos_vertex:e7,background_vert:t7,background_frag:n7,backgroundCube_vert:i7,backgroundCube_frag:r7,cube_vert:s7,cube_frag:o7,depth_vert:a7,depth_frag:l7,distanceRGBA_vert:u7,distanceRGBA_frag:c7,equirect_vert:f7,equirect_frag:h7,linedashed_vert:d7,linedashed_frag:p7,meshbasic_vert:m7,meshbasic_frag:g7,meshlambert_vert:v7,meshlambert_frag:y7,meshmatcap_vert:_7,meshmatcap_frag:x7,meshnormal_vert:S7,meshnormal_frag:w7,meshphong_vert:M7,meshphong_frag:T7,meshphysical_vert:E7,meshphysical_frag:b7,meshtoon_vert:C7,meshtoon_frag:P7,points_vert:A7,points_frag:R7,shadow_vert:D7,shadow_frag:L7,sprite_vert:I7,sprite_frag:k7},Be={common:{diffuse:{value:new Oe(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Ut},alphaMap:{value:null},alphaMapTransform:{value:new Ut},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Ut}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Ut}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Ut}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Ut},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Ut},normalScale:{value:new le(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Ut},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Ut}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Ut}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Ut}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Oe(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Oe(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Ut}},sprite:{diffuse:{value:new Oe(16777215)},opacity:{value:1},center:{value:new le(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Ut},alphaMap:{value:null},alphaTest:{value:0}}},_o={basic:{uniforms:gr([Be.common,Be.specularmap,Be.envmap,Be.aomap,Be.lightmap,Be.fog]),vertexShader:pt.meshbasic_vert,fragmentShader:pt.meshbasic_frag},lambert:{uniforms:gr([Be.common,Be.specularmap,Be.envmap,Be.aomap,Be.lightmap,Be.emissivemap,Be.bumpmap,Be.normalmap,Be.displacementmap,Be.fog,Be.lights,{emissive:{value:new Oe(0)}}]),vertexShader:pt.meshlambert_vert,fragmentShader:pt.meshlambert_frag},phong:{uniforms:gr([Be.common,Be.specularmap,Be.envmap,Be.aomap,Be.lightmap,Be.emissivemap,Be.bumpmap,Be.normalmap,Be.displacementmap,Be.fog,Be.lights,{emissive:{value:new Oe(0)},specular:{value:new Oe(1118481)},shininess:{value:30}}]),vertexShader:pt.meshphong_vert,fragmentShader:pt.meshphong_frag},standard:{uniforms:gr([Be.common,Be.envmap,Be.aomap,Be.lightmap,Be.emissivemap,Be.bumpmap,Be.normalmap,Be.displacementmap,Be.roughnessmap,Be.metalnessmap,Be.fog,Be.lights,{emissive:{value:new Oe(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:pt.meshphysical_vert,fragmentShader:pt.meshphysical_frag},toon:{uniforms:gr([Be.common,Be.aomap,Be.lightmap,Be.emissivemap,Be.bumpmap,Be.normalmap,Be.displacementmap,Be.gradientmap,Be.fog,Be.lights,{emissive:{value:new Oe(0)}}]),vertexShader:pt.meshtoon_vert,fragmentShader:pt.meshtoon_frag},matcap:{uniforms:gr([Be.common,Be.bumpmap,Be.normalmap,Be.displacementmap,Be.fog,{matcap:{value:null}}]),vertexShader:pt.meshmatcap_vert,fragmentShader:pt.meshmatcap_frag},points:{uniforms:gr([Be.points,Be.fog]),vertexShader:pt.points_vert,fragmentShader:pt.points_frag},dashed:{uniforms:gr([Be.common,Be.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:pt.linedashed_vert,fragmentShader:pt.linedashed_frag},depth:{uniforms:gr([Be.common,Be.displacementmap]),vertexShader:pt.depth_vert,fragmentShader:pt.depth_frag},normal:{uniforms:gr([Be.common,Be.bumpmap,Be.normalmap,Be.displacementmap,{opacity:{value:1}}]),vertexShader:pt.meshnormal_vert,fragmentShader:pt.meshnormal_frag},sprite:{uniforms:gr([Be.sprite,Be.fog]),vertexShader:pt.sprite_vert,fragmentShader:pt.sprite_frag},background:{uniforms:{uvTransform:{value:new Ut},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:pt.background_vert,fragmentShader:pt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:pt.backgroundCube_vert,fragmentShader:pt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:pt.cube_vert,fragmentShader:pt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:pt.equirect_vert,fragmentShader:pt.equirect_frag},distanceRGBA:{uniforms:gr([Be.common,Be.displacementmap,{referencePosition:{value:new N},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:pt.distanceRGBA_vert,fragmentShader:pt.distanceRGBA_frag},shadow:{uniforms:gr([Be.lights,Be.fog,{color:{value:new Oe(0)},opacity:{value:1}}]),vertexShader:pt.shadow_vert,fragmentShader:pt.shadow_frag}};_o.physical={uniforms:gr([_o.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Ut},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Ut},clearcoatNormalScale:{value:new le(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Ut},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Ut},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Ut},sheen:{value:0},sheenColor:{value:new Oe(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Ut},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Ut},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Ut},transmissionSamplerSize:{value:new le},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Ut},attenuationDistance:{value:0},attenuationColor:{value:new Oe(0)},specularColor:{value:new Oe(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Ut},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Ut}}]),vertexShader:pt.meshphysical_vert,fragmentShader:pt.meshphysical_frag};const S0={r:0,b:0,g:0};function O7(n,e,t,i,r,s,o){const a=new Oe(0);let l=s===!0?0:1,u,f,d=null,p=0,m=null;function g(x,v){let w=!1,S=v.isScene===!0?v.background:null;S&&S.isTexture&&(S=(v.backgroundBlurriness>0?t:e).get(S));const T=n.xr,b=T.getSession&&T.getSession();b&&b.environmentBlendMode==="additive"&&(S=null),S===null?y(a,l):S&&S.isColor&&(y(S,1),w=!0),(n.autoClear||w)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),S&&(S.isCubeTexture||S.mapping===ad)?(f===void 0&&(f=new Ii(new pu(1,1,1),new on({name:"BackgroundCubeMaterial",uniforms:jh(_o.backgroundCube.uniforms),vertexShader:_o.backgroundCube.vertexShader,fragmentShader:_o.backgroundCube.fragmentShader,side:yi,depthTest:!1,depthWrite:!1,fog:!1})),f.geometry.deleteAttribute("normal"),f.geometry.deleteAttribute("uv"),f.onBeforeRender=function(P,R,D){this.matrixWorld.copyPosition(D.matrixWorld)},Object.defineProperty(f.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(f)),f.material.uniforms.envMap.value=S,f.material.uniforms.flipEnvMap.value=S.isCubeTexture&&S.isRenderTargetTexture===!1?-1:1,f.material.uniforms.backgroundBlurriness.value=v.backgroundBlurriness,f.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,f.material.toneMapped=S.encoding!==an,(d!==S||p!==S.version||m!==n.toneMapping)&&(f.material.needsUpdate=!0,d=S,p=S.version,m=n.toneMapping),f.layers.enableAll(),x.unshift(f,f.geometry,f.material,0,0,null)):S&&S.isTexture&&(u===void 0&&(u=new Ii(new cd(2,2),new on({name:"BackgroundMaterial",uniforms:jh(_o.background.uniforms),vertexShader:_o.background.vertexShader,fragmentShader:_o.background.fragmentShader,side:ta,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(u)),u.material.uniforms.t2D.value=S,u.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,u.material.toneMapped=S.encoding!==an,S.matrixAutoUpdate===!0&&S.updateMatrix(),u.material.uniforms.uvTransform.value.copy(S.matrix),(d!==S||p!==S.version||m!==n.toneMapping)&&(u.material.needsUpdate=!0,d=S,p=S.version,m=n.toneMapping),u.layers.enableAll(),x.unshift(u,u.geometry,u.material,0,0,null))}function y(x,v){x.getRGB(S0,dU(n)),i.buffers.color.setClear(S0.r,S0.g,S0.b,v,o)}return{getClearColor:function(){return a},setClearColor:function(x,v=1){a.set(x),l=v,y(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(x){l=x,y(a,l)},render:g}}function N7(n,e,t,i){const r=n.getParameter(34921),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||s!==null,a={},l=x(null);let u=l,f=!1;function d(W,X,re,Q,z){let j=!1;if(o){const I=y(Q,re,X);u!==I&&(u=I,m(u.object)),j=v(W,Q,re,z),j&&w(W,Q,re,z)}else{const I=X.wireframe===!0;(u.geometry!==Q.id||u.program!==re.id||u.wireframe!==I)&&(u.geometry=Q.id,u.program=re.id,u.wireframe=I,j=!0)}z!==null&&t.update(z,34963),(j||f)&&(f=!1,D(W,X,re,Q),z!==null&&n.bindBuffer(34963,t.get(z).buffer))}function p(){return i.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function m(W){return i.isWebGL2?n.bindVertexArray(W):s.bindVertexArrayOES(W)}function g(W){return i.isWebGL2?n.deleteVertexArray(W):s.deleteVertexArrayOES(W)}function y(W,X,re){const Q=re.wireframe===!0;let z=a[W.id];z===void 0&&(z={},a[W.id]=z);let j=z[X.id];j===void 0&&(j={},z[X.id]=j);let I=j[Q];return I===void 0&&(I=x(p()),j[Q]=I),I}function x(W){const X=[],re=[],Q=[];for(let z=0;z<r;z++)X[z]=0,re[z]=0,Q[z]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:X,enabledAttributes:re,attributeDivisors:Q,object:W,attributes:{},index:null}}function v(W,X,re,Q){const z=u.attributes,j=X.attributes;let I=0;const ee=re.getAttributes();for(const oe in ee)if(ee[oe].location>=0){const te=z[oe];let Te=j[oe];if(Te===void 0&&(oe==="instanceMatrix"&&W.instanceMatrix&&(Te=W.instanceMatrix),oe==="instanceColor"&&W.instanceColor&&(Te=W.instanceColor)),te===void 0||te.attribute!==Te||Te&&te.data!==Te.data)return!0;I++}return u.attributesNum!==I||u.index!==Q}function w(W,X,re,Q){const z={},j=X.attributes;let I=0;const ee=re.getAttributes();for(const oe in ee)if(ee[oe].location>=0){let te=j[oe];te===void 0&&(oe==="instanceMatrix"&&W.instanceMatrix&&(te=W.instanceMatrix),oe==="instanceColor"&&W.instanceColor&&(te=W.instanceColor));const Te={};Te.attribute=te,te&&te.data&&(Te.data=te.data),z[oe]=Te,I++}u.attributes=z,u.attributesNum=I,u.index=Q}function S(){const W=u.newAttributes;for(let X=0,re=W.length;X<re;X++)W[X]=0}function T(W){b(W,0)}function b(W,X){const re=u.newAttributes,Q=u.enabledAttributes,z=u.attributeDivisors;re[W]=1,Q[W]===0&&(n.enableVertexAttribArray(W),Q[W]=1),z[W]!==X&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](W,X),z[W]=X)}function P(){const W=u.newAttributes,X=u.enabledAttributes;for(let re=0,Q=X.length;re<Q;re++)X[re]!==W[re]&&(n.disableVertexAttribArray(re),X[re]=0)}function R(W,X,re,Q,z,j){i.isWebGL2===!0&&(re===5124||re===5125)?n.vertexAttribIPointer(W,X,re,z,j):n.vertexAttribPointer(W,X,re,Q,z,j)}function D(W,X,re,Q){if(i.isWebGL2===!1&&(W.isInstancedMesh||Q.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;S();const z=Q.attributes,j=re.getAttributes(),I=X.defaultAttributeValues;for(const ee in j){const oe=j[ee];if(oe.location>=0){let se=z[ee];if(se===void 0&&(ee==="instanceMatrix"&&W.instanceMatrix&&(se=W.instanceMatrix),ee==="instanceColor"&&W.instanceColor&&(se=W.instanceColor)),se!==void 0){const te=se.normalized,Te=se.itemSize,we=t.get(se);if(we===void 0)continue;const J=we.buffer,Xe=we.type,it=we.bytesPerElement;if(se.isInterleavedBufferAttribute){const Ee=se.data,Ie=Ee.stride,ce=se.offset;if(Ee.isInstancedInterleavedBuffer){for(let ae=0;ae<oe.locationSize;ae++)b(oe.location+ae,Ee.meshPerAttribute);W.isInstancedMesh!==!0&&Q._maxInstanceCount===void 0&&(Q._maxInstanceCount=Ee.meshPerAttribute*Ee.count)}else for(let ae=0;ae<oe.locationSize;ae++)T(oe.location+ae);n.bindBuffer(34962,J);for(let ae=0;ae<oe.locationSize;ae++)R(oe.location+ae,Te/oe.locationSize,Xe,te,Ie*it,(ce+Te/oe.locationSize*ae)*it)}else{if(se.isInstancedBufferAttribute){for(let Ee=0;Ee<oe.locationSize;Ee++)b(oe.location+Ee,se.meshPerAttribute);W.isInstancedMesh!==!0&&Q._maxInstanceCount===void 0&&(Q._maxInstanceCount=se.meshPerAttribute*se.count)}else for(let Ee=0;Ee<oe.locationSize;Ee++)T(oe.location+Ee);n.bindBuffer(34962,J);for(let Ee=0;Ee<oe.locationSize;Ee++)R(oe.location+Ee,Te/oe.locationSize,Xe,te,Te*it,Te/oe.locationSize*Ee*it)}}else if(I!==void 0){const te=I[ee];if(te!==void 0)switch(te.length){case 2:n.vertexAttrib2fv(oe.location,te);break;case 3:n.vertexAttrib3fv(oe.location,te);break;case 4:n.vertexAttrib4fv(oe.location,te);break;default:n.vertexAttrib1fv(oe.location,te)}}}}P()}function C(){H();for(const W in a){const X=a[W];for(const re in X){const Q=X[re];for(const z in Q)g(Q[z].object),delete Q[z];delete X[re]}delete a[W]}}function L(W){if(a[W.id]===void 0)return;const X=a[W.id];for(const re in X){const Q=X[re];for(const z in Q)g(Q[z].object),delete Q[z];delete X[re]}delete a[W.id]}function F(W){for(const X in a){const re=a[X];if(re[W.id]===void 0)continue;const Q=re[W.id];for(const z in Q)g(Q[z].object),delete Q[z];delete re[W.id]}}function H(){G(),f=!0,u!==l&&(u=l,m(u.object))}function G(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:d,reset:H,resetDefaultState:G,dispose:C,releaseStatesOfGeometry:L,releaseStatesOfProgram:F,initAttributes:S,enableAttribute:T,disableUnusedAttributes:P}}function U7(n,e,t,i){const r=i.isWebGL2;let s;function o(u){s=u}function a(u,f){n.drawArrays(s,u,f),t.update(f,s,1)}function l(u,f,d){if(d===0)return;let p,m;if(r)p=n,m="drawArraysInstanced";else if(p=e.get("ANGLE_instanced_arrays"),m="drawArraysInstancedANGLE",p===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}p[m](s,u,f,d),t.update(f,s,d)}this.setMode=o,this.render=a,this.renderInstances=l}function F7(n,e,t){let i;function r(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const R=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(R.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(R){if(R==="highp"){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";R="mediump"}return R==="mediump"&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&n.constructor.name==="WebGL2RenderingContext";let a=t.precision!==void 0?t.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const u=o||e.has("WEBGL_draw_buffers"),f=t.logarithmicDepthBuffer===!0,d=n.getParameter(34930),p=n.getParameter(35660),m=n.getParameter(3379),g=n.getParameter(34076),y=n.getParameter(34921),x=n.getParameter(36347),v=n.getParameter(36348),w=n.getParameter(36349),S=p>0,T=o||e.has("OES_texture_float"),b=S&&T,P=o?n.getParameter(36183):0;return{isWebGL2:o,drawBuffers:u,getMaxAnisotropy:r,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:f,maxTextures:d,maxVertexTextures:p,maxTextureSize:m,maxCubemapSize:g,maxAttributes:y,maxVertexUniforms:x,maxVaryings:v,maxFragmentUniforms:w,vertexTextures:S,floatFragmentTextures:T,floatVertexTextures:b,maxSamples:P}}function z7(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new wl,a=new Ut,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,p){const m=d.length!==0||p||i!==0||r;return r=p,i=d.length,m},this.beginShadows=function(){s=!0,f(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(d,p){t=f(d,p,0)},this.setState=function(d,p,m){const g=d.clippingPlanes,y=d.clipIntersection,x=d.clipShadows,v=n.get(d);if(!r||g===null||g.length===0||s&&!x)s?f(null):u();else{const w=s?0:i,S=w*4;let T=v.clippingState||null;l.value=T,T=f(g,p,S,m);for(let b=0;b!==S;++b)T[b]=t[b];v.clippingState=T,this.numIntersection=y?this.numPlanes:0,this.numPlanes+=w}};function u(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function f(d,p,m,g){const y=d!==null?d.length:0;let x=null;if(y!==0){if(x=l.value,g!==!0||x===null){const v=m+y*4,w=p.matrixWorldInverse;a.getNormalMatrix(w),(x===null||x.length<v)&&(x=new Float32Array(v));for(let S=0,T=m;S!==y;++S,T+=4)o.copy(d[S]).applyMatrix4(w,a),o.normal.toArray(x,T),x[T+3]=o.constant}l.value=x,l.needsUpdate=!0}return e.numPlanes=y,e.numIntersection=0,x}}function B7(n){let e=new WeakMap;function t(o,a){return a===Nm?o.mapping=tu:a===Um&&(o.mapping=nu),o}function i(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const a=o.mapping;if(a===Nm||a===Um)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const u=new _g(l.height/2);return u.fromEquirectangularTexture(n,o),e.set(o,u),o.addEventListener("dispose",r),t(u.texture,o.mapping)}else return null}}return o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}class xg extends ud{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,f=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=u*this.view.offsetX,o=s+u*this.view.width,a-=f*this.view.offsetY,l=a-f*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const lh=4,WR=[.125,.215,.35,.446,.526,.582],Ju=20,JS=new xg,jR=new Oe;let QS=null;const Xu=(1+Math.sqrt(5))/2,Af=1/Xu,XR=[new N(1,1,1),new N(-1,1,1),new N(1,1,-1),new N(-1,1,-1),new N(0,Xu,Af),new N(0,Xu,-Af),new N(Af,0,Xu),new N(-Af,0,Xu),new N(Xu,Af,0),new N(-Xu,Af,0)];class A_{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){QS=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=ZR(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=qR(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(QS),e.scissorTest=!1,w0(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===tu||e.mapping===nu?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),QS=this._renderer.getRenderTarget();const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:vt,minFilter:vt,generateMipmaps:!1,type:ps,format:Dn,encoding:na,depthBuffer:!1},r=YR(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=YR(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=V7(s)),this._blurMaterial=H7(s,e,t)}return r}_compileMaterial(e){const t=new Ii(this._lodPlanes[0],e);this._renderer.compile(t,JS)}_sceneToCubeUV(e,t,i,r){const a=new Nn(90,1,t,i),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],f=this._renderer,d=f.autoClear,p=f.toneMapping;f.getClearColor(jR),f.toneMapping=Eo,f.autoClear=!1;const m=new du({name:"PMREM.Background",side:yi,depthWrite:!1,depthTest:!1}),g=new Ii(new pu,m);let y=!1;const x=e.background;x?x.isColor&&(m.color.copy(x),e.background=null,y=!0):(m.color.copy(jR),y=!0);for(let v=0;v<6;v++){const w=v%3;w===0?(a.up.set(0,l[v],0),a.lookAt(u[v],0,0)):w===1?(a.up.set(0,0,l[v]),a.lookAt(0,u[v],0)):(a.up.set(0,l[v],0),a.lookAt(0,0,u[v]));const S=this._cubeSize;w0(r,w*S,v>2?S:0,S,S),f.setRenderTarget(r),y&&f.render(g,a),f.render(e,a)}g.geometry.dispose(),g.material.dispose(),f.toneMapping=p,f.autoClear=d,e.background=x}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===tu||e.mapping===nu;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=ZR()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=qR());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new Ii(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;w0(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(o,JS)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),o=XR[(r-1)%XR.length];this._blur(e,r-1,r,s,o)}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){const l=this._renderer,u=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const f=3,d=new Ii(this._lodPlanes[r],u),p=u.uniforms,m=this._sizeLods[i]-1,g=isFinite(s)?Math.PI/(2*m):2*Math.PI/(2*Ju-1),y=s/g,x=isFinite(s)?1+Math.floor(f*y):Ju;x>Ju&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${x} samples when the maximum is set to ${Ju}`);const v=[];let w=0;for(let R=0;R<Ju;++R){const D=R/y,C=Math.exp(-D*D/2);v.push(C),R===0?w+=C:R<x&&(w+=2*C)}for(let R=0;R<v.length;R++)v[R]=v[R]/w;p.envMap.value=e.texture,p.samples.value=x,p.weights.value=v,p.latitudinal.value=o==="latitudinal",a&&(p.poleAxis.value=a);const{_lodMax:S}=this;p.dTheta.value=g,p.mipInt.value=S-i;const T=this._sizeLods[r],b=3*T*(r>S-lh?r-S+lh:0),P=4*(this._cubeSize-T);w0(t,b,P,3*T,2*T),l.setRenderTarget(t),l.render(d,JS)}}function V7(n){const e=[],t=[],i=[];let r=n;const s=n-lh+1+WR.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let l=1/a;o>n-lh?l=WR[o-n+lh-1]:o===0&&(l=0),i.push(l);const u=1/(a-2),f=-u,d=1+u,p=[f,f,d,f,d,d,f,f,d,d,f,d],m=6,g=6,y=3,x=2,v=1,w=new Float32Array(y*g*m),S=new Float32Array(x*g*m),T=new Float32Array(v*g*m);for(let P=0;P<m;P++){const R=P%3*2/3-1,D=P>2?0:-1,C=[R,D,0,R+2/3,D,0,R+2/3,D+1,0,R,D,0,R+2/3,D+1,0,R,D+1,0];w.set(C,y*g*P),S.set(p,x*g*P);const L=[P,P,P,P,P,P];T.set(L,v*g*P)}const b=new Lt;b.setAttribute("position",new sn(w,y)),b.setAttribute("uv",new sn(S,x)),b.setAttribute("faceIndex",new sn(T,v)),e.push(b),r>lh&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function YR(n,e,t){const i=new qt(n,e,t);return i.texture.mapping=ad,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function w0(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function H7(n,e,t){const i=new Float32Array(Ju),r=new N(0,1,0);return new on({name:"SphericalGaussianBlur",defines:{n:Ju,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:iC(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:En,depthTest:!1,depthWrite:!1})}function qR(){return new on({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:iC(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:En,depthTest:!1,depthWrite:!1})}function ZR(){return new on({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:iC(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:En,depthTest:!1,depthWrite:!1})}function iC(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function G7(n){let e=new WeakMap,t=null;function i(a){if(a&&a.isTexture){const l=a.mapping,u=l===Nm||l===Um,f=l===tu||l===nu;if(u||f)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let d=e.get(a);return t===null&&(t=new A_(n)),d=u?t.fromEquirectangular(a,d):t.fromCubemap(a,d),e.set(a,d),d.texture}else{if(e.has(a))return e.get(a).texture;{const d=a.image;if(u&&d&&d.height>0||f&&d&&r(d)){t===null&&(t=new A_(n));const p=u?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,p),a.addEventListener("dispose",s),p.texture}else return null}}}return a}function r(a){let l=0;const u=6;for(let f=0;f<u;f++)a[f]!==void 0&&l++;return l===u}function s(a){const l=a.target;l.removeEventListener("dispose",s);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:o}}function W7(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(i){i.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const r=t(i);return r===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function j7(n,e,t,i){const r={},s=new WeakMap;function o(d){const p=d.target;p.index!==null&&e.remove(p.index);for(const g in p.attributes)e.remove(p.attributes[g]);p.removeEventListener("dispose",o),delete r[p.id];const m=s.get(p);m&&(e.remove(m),s.delete(p)),i.releaseStatesOfGeometry(p),p.isInstancedBufferGeometry===!0&&delete p._maxInstanceCount,t.memory.geometries--}function a(d,p){return r[p.id]===!0||(p.addEventListener("dispose",o),r[p.id]=!0,t.memory.geometries++),p}function l(d){const p=d.attributes;for(const g in p)e.update(p[g],34962);const m=d.morphAttributes;for(const g in m){const y=m[g];for(let x=0,v=y.length;x<v;x++)e.update(y[x],34962)}}function u(d){const p=[],m=d.index,g=d.attributes.position;let y=0;if(m!==null){const w=m.array;y=m.version;for(let S=0,T=w.length;S<T;S+=3){const b=w[S+0],P=w[S+1],R=w[S+2];p.push(b,P,P,R,R,b)}}else{const w=g.array;y=g.version;for(let S=0,T=w.length/3-1;S<T;S+=3){const b=S+0,P=S+1,R=S+2;p.push(b,P,P,R,R,b)}}const x=new(cU(p)?nC:tC)(p,1);x.version=y;const v=s.get(d);v&&e.remove(v),s.set(d,x)}function f(d){const p=s.get(d);if(p){const m=d.index;m!==null&&p.version<m.version&&u(d)}else u(d);return s.get(d)}return{get:a,update:l,getWireframeAttribute:f}}function X7(n,e,t,i){const r=i.isWebGL2;let s;function o(p){s=p}let a,l;function u(p){a=p.type,l=p.bytesPerElement}function f(p,m){n.drawElements(s,m,a,p*l),t.update(m,s,1)}function d(p,m,g){if(g===0)return;let y,x;if(r)y=n,x="drawElementsInstanced";else if(y=e.get("ANGLE_instanced_arrays"),x="drawElementsInstancedANGLE",y===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}y[x](s,m,a,p*l,g),t.update(m,s,g)}this.setMode=o,this.setIndex=u,this.render=f,this.renderInstances=d}function Y7(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(t.calls++,o){case 4:t.triangles+=a*(s/3);break;case 1:t.lines+=a*(s/2);break;case 3:t.lines+=a*(s-1);break;case 2:t.lines+=a*s;break;case 0:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function q7(n,e){return n[0]-e[0]}function Z7(n,e){return Math.abs(e[1])-Math.abs(n[1])}function $7(n,e,t){const i={},r=new Float32Array(8),s=new WeakMap,o=new Gt,a=[];for(let u=0;u<8;u++)a[u]=[u,0];function l(u,f,d){const p=u.morphTargetInfluences;if(e.isWebGL2===!0){const m=f.morphAttributes.position||f.morphAttributes.normal||f.morphAttributes.color,g=m!==void 0?m.length:0;let y=s.get(f);if(y===void 0||y.count!==g){let W=function(){H.dispose(),s.delete(f),f.removeEventListener("dispose",W)};y!==void 0&&y.texture.dispose();const w=f.morphAttributes.position!==void 0,S=f.morphAttributes.normal!==void 0,T=f.morphAttributes.color!==void 0,b=f.morphAttributes.position||[],P=f.morphAttributes.normal||[],R=f.morphAttributes.color||[];let D=0;w===!0&&(D=1),S===!0&&(D=2),T===!0&&(D=3);let C=f.attributes.position.count*D,L=1;C>e.maxTextureSize&&(L=Math.ceil(C/e.maxTextureSize),C=e.maxTextureSize);const F=new Float32Array(C*L*4*g),H=new Ex(F,C,L,g);H.type=Jn,H.needsUpdate=!0;const G=D*4;for(let X=0;X<g;X++){const re=b[X],Q=P[X],z=R[X],j=C*L*4*X;for(let I=0;I<re.count;I++){const ee=I*G;w===!0&&(o.fromBufferAttribute(re,I),F[j+ee+0]=o.x,F[j+ee+1]=o.y,F[j+ee+2]=o.z,F[j+ee+3]=0),S===!0&&(o.fromBufferAttribute(Q,I),F[j+ee+4]=o.x,F[j+ee+5]=o.y,F[j+ee+6]=o.z,F[j+ee+7]=0),T===!0&&(o.fromBufferAttribute(z,I),F[j+ee+8]=o.x,F[j+ee+9]=o.y,F[j+ee+10]=o.z,F[j+ee+11]=z.itemSize===4?o.w:1)}}y={count:g,texture:H,size:new le(C,L)},s.set(f,y),f.addEventListener("dispose",W)}let x=0;for(let w=0;w<p.length;w++)x+=p[w];const v=f.morphTargetsRelative?1:1-x;d.getUniforms().setValue(n,"morphTargetBaseInfluence",v),d.getUniforms().setValue(n,"morphTargetInfluences",p),d.getUniforms().setValue(n,"morphTargetsTexture",y.texture,t),d.getUniforms().setValue(n,"morphTargetsTextureSize",y.size)}else{const m=p===void 0?0:p.length;let g=i[f.id];if(g===void 0||g.length!==m){g=[];for(let S=0;S<m;S++)g[S]=[S,0];i[f.id]=g}for(let S=0;S<m;S++){const T=g[S];T[0]=S,T[1]=p[S]}g.sort(Z7);for(let S=0;S<8;S++)S<m&&g[S][1]?(a[S][0]=g[S][0],a[S][1]=g[S][1]):(a[S][0]=Number.MAX_SAFE_INTEGER,a[S][1]=0);a.sort(q7);const y=f.morphAttributes.position,x=f.morphAttributes.normal;let v=0;for(let S=0;S<8;S++){const T=a[S],b=T[0],P=T[1];b!==Number.MAX_SAFE_INTEGER&&P?(y&&f.getAttribute("morphTarget"+S)!==y[b]&&f.setAttribute("morphTarget"+S,y[b]),x&&f.getAttribute("morphNormal"+S)!==x[b]&&f.setAttribute("morphNormal"+S,x[b]),r[S]=P,v+=P):(y&&f.hasAttribute("morphTarget"+S)===!0&&f.deleteAttribute("morphTarget"+S),x&&f.hasAttribute("morphNormal"+S)===!0&&f.deleteAttribute("morphNormal"+S),r[S]=0)}const w=f.morphTargetsRelative?1:1-v;d.getUniforms().setValue(n,"morphTargetBaseInfluence",w),d.getUniforms().setValue(n,"morphTargetInfluences",r)}}return{update:l}}function K7(n,e,t,i){let r=new WeakMap;function s(l){const u=i.render.frame,f=l.geometry,d=e.get(l,f);return r.get(d)!==u&&(e.update(d),r.set(d,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),t.update(l.instanceMatrix,34962),l.instanceColor!==null&&t.update(l.instanceColor,34962)),d}function o(){r=new WeakMap}function a(l){const u=l.target;u.removeEventListener("dispose",a),t.remove(u.instanceMatrix),u.instanceColor!==null&&t.remove(u.instanceColor)}return{update:s,dispose:o}}const gU=new bn,vU=new Ex,yU=new yc,_U=new yg,$R=[],KR=[],JR=new Float32Array(16),QR=new Float32Array(9),e3=new Float32Array(4);function fd(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=$R[r];if(s===void 0&&(s=new Float32Array(r),$R[r]=s),e!==0){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function wi(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Mi(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function Px(n,e){let t=KR[e];t===void 0&&(t=new Int32Array(e),KR[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function J7(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function Q7(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(wi(t,e))return;n.uniform2fv(this.addr,e),Mi(t,e)}}function ej(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(wi(t,e))return;n.uniform3fv(this.addr,e),Mi(t,e)}}function tj(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(wi(t,e))return;n.uniform4fv(this.addr,e),Mi(t,e)}}function nj(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(wi(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Mi(t,e)}else{if(wi(t,i))return;e3.set(i),n.uniformMatrix2fv(this.addr,!1,e3),Mi(t,i)}}function ij(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(wi(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Mi(t,e)}else{if(wi(t,i))return;QR.set(i),n.uniformMatrix3fv(this.addr,!1,QR),Mi(t,i)}}function rj(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(wi(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Mi(t,e)}else{if(wi(t,i))return;JR.set(i),n.uniformMatrix4fv(this.addr,!1,JR),Mi(t,i)}}function sj(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function oj(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(wi(t,e))return;n.uniform2iv(this.addr,e),Mi(t,e)}}function aj(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(wi(t,e))return;n.uniform3iv(this.addr,e),Mi(t,e)}}function lj(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(wi(t,e))return;n.uniform4iv(this.addr,e),Mi(t,e)}}function uj(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function cj(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(wi(t,e))return;n.uniform2uiv(this.addr,e),Mi(t,e)}}function fj(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(wi(t,e))return;n.uniform3uiv(this.addr,e),Mi(t,e)}}function hj(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(wi(t,e))return;n.uniform4uiv(this.addr,e),Mi(t,e)}}function dj(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2D(e||gU,r)}function pj(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||yU,r)}function mj(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||_U,r)}function gj(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||vU,r)}function vj(n){switch(n){case 5126:return J7;case 35664:return Q7;case 35665:return ej;case 35666:return tj;case 35674:return nj;case 35675:return ij;case 35676:return rj;case 5124:case 35670:return sj;case 35667:case 35671:return oj;case 35668:case 35672:return aj;case 35669:case 35673:return lj;case 5125:return uj;case 36294:return cj;case 36295:return fj;case 36296:return hj;case 35678:case 36198:case 36298:case 36306:case 35682:return dj;case 35679:case 36299:case 36307:return pj;case 35680:case 36300:case 36308:case 36293:return mj;case 36289:case 36303:case 36311:case 36292:return gj}}function yj(n,e){n.uniform1fv(this.addr,e)}function _j(n,e){const t=fd(e,this.size,2);n.uniform2fv(this.addr,t)}function xj(n,e){const t=fd(e,this.size,3);n.uniform3fv(this.addr,t)}function Sj(n,e){const t=fd(e,this.size,4);n.uniform4fv(this.addr,t)}function wj(n,e){const t=fd(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function Mj(n,e){const t=fd(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function Tj(n,e){const t=fd(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function Ej(n,e){n.uniform1iv(this.addr,e)}function bj(n,e){n.uniform2iv(this.addr,e)}function Cj(n,e){n.uniform3iv(this.addr,e)}function Pj(n,e){n.uniform4iv(this.addr,e)}function Aj(n,e){n.uniform1uiv(this.addr,e)}function Rj(n,e){n.uniform2uiv(this.addr,e)}function Dj(n,e){n.uniform3uiv(this.addr,e)}function Lj(n,e){n.uniform4uiv(this.addr,e)}function Ij(n,e,t){const i=this.cache,r=e.length,s=Px(t,r);wi(i,s)||(n.uniform1iv(this.addr,s),Mi(i,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||gU,s[o])}function kj(n,e,t){const i=this.cache,r=e.length,s=Px(t,r);wi(i,s)||(n.uniform1iv(this.addr,s),Mi(i,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||yU,s[o])}function Oj(n,e,t){const i=this.cache,r=e.length,s=Px(t,r);wi(i,s)||(n.uniform1iv(this.addr,s),Mi(i,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||_U,s[o])}function Nj(n,e,t){const i=this.cache,r=e.length,s=Px(t,r);wi(i,s)||(n.uniform1iv(this.addr,s),Mi(i,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||vU,s[o])}function Uj(n){switch(n){case 5126:return yj;case 35664:return _j;case 35665:return xj;case 35666:return Sj;case 35674:return wj;case 35675:return Mj;case 35676:return Tj;case 5124:case 35670:return Ej;case 35667:case 35671:return bj;case 35668:case 35672:return Cj;case 35669:case 35673:return Pj;case 5125:return Aj;case 36294:return Rj;case 36295:return Dj;case 36296:return Lj;case 35678:case 36198:case 36298:case 36306:case 35682:return Ij;case 35679:case 36299:case 36307:return kj;case 35680:case 36300:case 36308:case 36293:return Oj;case 36289:case 36303:case 36311:case 36292:return Nj}}class Fj{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=vj(t.type)}}class zj{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=Uj(t.type)}}class Bj{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],i)}}}const ew=/(\w+)(\])?(\[|\.)?/g;function t3(n,e){n.seq.push(e),n.map[e.id]=e}function Vj(n,e,t){const i=n.name,r=i.length;for(ew.lastIndex=0;;){const s=ew.exec(i),o=ew.lastIndex;let a=s[1];const l=s[2]==="]",u=s[3];if(l&&(a=a|0),u===void 0||u==="["&&o+2===r){t3(t,u===void 0?new Fj(a,n,e):new zj(a,n,e));break}else{let d=t.map[a];d===void 0&&(d=new Bj(a),t3(t,d)),t=d}}}class Ny{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,35718);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r),o=e.getUniformLocation(t,s.name);Vj(s,o,this)}}setValue(e,t,i,r){const s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=i[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&i.push(o)}return i}}function n3(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}let Hj=0;function Gj(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join(`
`)}function Wj(n){switch(n){case na:return["Linear","( value )"];case an:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}function i3(n,e,t){const i=n.getShaderParameter(e,35713),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+Gj(n.getShaderSource(e),o)}else return r}function jj(n,e){const t=Wj(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function Xj(n,e){let t;switch(e){case VN:t="Linear";break;case HN:t="Reinhard";break;case GN:t="OptimizedCineon";break;case Xb:t="ACESFilmic";break;case WN:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function Yj(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.normalMapTangentSpace||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Ep).join(`
`)}function qj(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function Zj(n,e){const t={},i=n.getProgramParameter(e,35721);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let a=1;s.type===35674&&(a=2),s.type===35675&&(a=3),s.type===35676&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function Ep(n){return n!==""}function r3(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function s3(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const $j=/^[ \t]*#include +<([\w\d./]+)>/gm;function AT(n){return n.replace($j,Kj)}function Kj(n,e){const t=pt[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return AT(t)}const Jj=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function o3(n){return n.replace(Jj,Qj)}function Qj(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function a3(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function eX(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===xx?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===Wp?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===ic&&(e="SHADOWMAP_TYPE_VSM"),e}function tX(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case tu:case nu:e="ENVMAP_TYPE_CUBE";break;case ad:e="ENVMAP_TYPE_CUBE_UV";break}return e}function nX(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case nu:e="ENVMAP_MODE_REFRACTION";break}return e}function iX(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case gg:e="ENVMAP_BLENDING_MULTIPLY";break;case zN:e="ENVMAP_BLENDING_MIX";break;case BN:e="ENVMAP_BLENDING_ADD";break}return e}function rX(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function sX(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=eX(t),u=tX(t),f=nX(t),d=iX(t),p=rX(t),m=t.isWebGL2?"":Yj(t),g=qj(s),y=r.createProgram();let x,v,w=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(x=[g].filter(Ep).join(`
`),x.length>0&&(x+=`
`),v=[m,g].filter(Ep).join(`
`),v.length>0&&(v+=`
`)):(x=[a3(t),"#define SHADER_NAME "+t.shaderName,g,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+f:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs2?"#define USE_UV2":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Ep).join(`
`),v=[m,a3(t),"#define SHADER_NAME "+t.shaderName,g,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.envMap?"#define "+f:"",t.envMap?"#define "+d:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs2?"#define USE_UV2":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Eo?"#define TONE_MAPPING":"",t.toneMapping!==Eo?pt.tonemapping_pars_fragment:"",t.toneMapping!==Eo?Xj("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",pt.encodings_pars_fragment,jj("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Ep).join(`
`)),o=AT(o),o=r3(o,t),o=s3(o,t),a=AT(a),a=r3(a,t),a=s3(a,t),o=o3(o),a=o3(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(w=`#version 300 es
`,x=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+x,v=["#define varying in",t.glslVersion===C_?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===C_?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+v);const S=w+x+o,T=w+v+a,b=n3(r,35633,S),P=n3(r,35632,T);if(r.attachShader(y,b),r.attachShader(y,P),t.index0AttributeName!==void 0?r.bindAttribLocation(y,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(y,0,"position"),r.linkProgram(y),n.debug.checkShaderErrors){const C=r.getProgramInfoLog(y).trim(),L=r.getShaderInfoLog(b).trim(),F=r.getShaderInfoLog(P).trim();let H=!0,G=!0;if(r.getProgramParameter(y,35714)===!1)if(H=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,y,b,P);else{const W=i3(r,b,"vertex"),X=i3(r,P,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(y,35715)+`

Program Info Log: `+C+`
`+W+`
`+X)}else C!==""?console.warn("THREE.WebGLProgram: Program Info Log:",C):(L===""||F==="")&&(G=!1);G&&(this.diagnostics={runnable:H,programLog:C,vertexShader:{log:L,prefix:x},fragmentShader:{log:F,prefix:v}})}r.deleteShader(b),r.deleteShader(P);let R;this.getUniforms=function(){return R===void 0&&(R=new Ny(r,y)),R};let D;return this.getAttributes=function(){return D===void 0&&(D=Zj(r,y)),D},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(y),this.program=void 0},this.name=t.shaderName,this.id=Hj++,this.cacheKey=e,this.usedTimes=1,this.program=y,this.vertexShader=b,this.fragmentShader=P,this}let oX=0;class aX{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new lX(e),t.set(e,i)),i}}class lX{constructor(e){this.id=oX++,this.code=e,this.usedTimes=0}}function uX(n,e,t,i,r,s,o){const a=new _c,l=new aX,u=[],f=r.isWebGL2,d=r.logarithmicDepthBuffer,p=r.vertexTextures;let m=r.precision;const g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function y(C){return C===1?"uv2":"uv"}function x(C,L,F,H,G){const W=H.fog,X=G.geometry,re=C.isMeshStandardMaterial?H.environment:null,Q=(C.isMeshStandardMaterial?t:e).get(C.envMap||re),z=Q&&Q.mapping===ad?Q.image.height:null,j=g[C.type];C.precision!==null&&(m=r.getMaxPrecision(C.precision),m!==C.precision&&console.warn("THREE.WebGLProgram.getParameters:",C.precision,"not supported, using",m,"instead."));const I=X.morphAttributes.position||X.morphAttributes.normal||X.morphAttributes.color,ee=I!==void 0?I.length:0;let oe=0;X.morphAttributes.position!==void 0&&(oe=1),X.morphAttributes.normal!==void 0&&(oe=2),X.morphAttributes.color!==void 0&&(oe=3);let se,te,Te,we;if(j){const Ne=_o[j];se=Ne.vertexShader,te=Ne.fragmentShader}else se=C.vertexShader,te=C.fragmentShader,l.update(C),Te=l.getVertexShaderID(C),we=l.getFragmentShaderID(C);const J=n.getRenderTarget(),Xe=G.isInstancedMesh===!0,it=!!C.map,Ee=!!C.matcap,Ie=!!Q,ce=!!C.aoMap,ae=!!C.lightMap,Me=!!C.bumpMap,ze=!!C.normalMap,Re=!!C.displacementMap,$=!!C.emissiveMap,et=!!C.metalnessMap,Ue=!!C.roughnessMap,ft=C.clearcoat>0,Tt=C.iridescence>0,B=C.sheen>0,k=C.transmission>0,fe=ft&&!!C.clearcoatMap,ge=ft&&!!C.clearcoatNormalMap,pe=ft&&!!C.clearcoatRoughnessMap,_e=Tt&&!!C.iridescenceMap,De=Tt&&!!C.iridescenceThicknessMap,Fe=B&&!!C.sheenColorMap,he=B&&!!C.sheenRoughnessMap,Pe=!!C.specularMap,Ce=!!C.specularColorMap,je=!!C.specularIntensityMap,Ve=k&&!!C.transmissionMap,Ze=k&&!!C.thicknessMap,Ct=!!C.gradientMap,qe=!!C.alphaMap,Zt=C.alphaTest>0,Y=!!C.extensions,ye=!!X.attributes.uv2;return{isWebGL2:f,shaderID:j,shaderName:C.type,vertexShader:se,fragmentShader:te,defines:C.defines,customVertexShaderID:Te,customFragmentShaderID:we,isRawShaderMaterial:C.isRawShaderMaterial===!0,glslVersion:C.glslVersion,precision:m,instancing:Xe,instancingColor:Xe&&G.instanceColor!==null,supportsVertexTextures:p,outputEncoding:J===null?n.outputEncoding:J.isXRRenderTarget===!0?J.texture.encoding:na,map:it,matcap:Ee,envMap:Ie,envMapMode:Ie&&Q.mapping,envMapCubeUVHeight:z,aoMap:ce,lightMap:ae,bumpMap:Me,normalMap:ze,displacementMap:p&&Re,emissiveMap:$,normalMapObjectSpace:ze&&C.normalMapType===oU,normalMapTangentSpace:ze&&C.normalMapType===Ja,decodeVideoTexture:it&&C.map.isVideoTexture===!0&&C.map.encoding===an,metalnessMap:et,roughnessMap:Ue,clearcoat:ft,clearcoatMap:fe,clearcoatNormalMap:ge,clearcoatRoughnessMap:pe,iridescence:Tt,iridescenceMap:_e,iridescenceThicknessMap:De,sheen:B,sheenColorMap:Fe,sheenRoughnessMap:he,specularMap:Pe,specularColorMap:Ce,specularIntensityMap:je,transmission:k,transmissionMap:Ve,thicknessMap:Ze,gradientMap:Ct,opaque:C.transparent===!1&&C.blending===gc,alphaMap:qe,alphaTest:Zt,combine:C.combine,mapUv:it&&y(C.map.channel),aoMapUv:ce&&y(C.aoMap.channel),lightMapUv:ae&&y(C.lightMap.channel),bumpMapUv:Me&&y(C.bumpMap.channel),normalMapUv:ze&&y(C.normalMap.channel),displacementMapUv:Re&&y(C.displacementMap.channel),emissiveMapUv:$&&y(C.emissiveMap.channel),metalnessMapUv:et&&y(C.metalnessMap.channel),roughnessMapUv:Ue&&y(C.roughnessMap.channel),clearcoatMapUv:fe&&y(C.clearcoatMap.channel),clearcoatNormalMapUv:ge&&y(C.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:pe&&y(C.clearcoatRoughnessMap.channel),iridescenceMapUv:_e&&y(C.iridescenceMap.channel),iridescenceThicknessMapUv:De&&y(C.iridescenceThicknessMap.channel),sheenColorMapUv:Fe&&y(C.sheenColorMap.channel),sheenRoughnessMapUv:he&&y(C.sheenRoughnessMap.channel),specularMapUv:Pe&&y(C.specularMap.channel),specularColorMapUv:Ce&&y(C.specularColorMap.channel),specularIntensityMapUv:je&&y(C.specularIntensityMap.channel),transmissionMapUv:Ve&&y(C.transmissionMap.channel),thicknessMapUv:Ze&&y(C.thicknessMap.channel),alphaMapUv:qe&&y(C.alphaMap.channel),vertexTangents:ze&&!!X.attributes.tangent,vertexColors:C.vertexColors,vertexAlphas:C.vertexColors===!0&&!!X.attributes.color&&X.attributes.color.itemSize===4,vertexUvs2:ye,pointsUvs:G.isPoints===!0&&!!X.attributes.uv&&(it||qe),fog:!!W,useFog:C.fog===!0,fogExp2:W&&W.isFogExp2,flatShading:C.flatShading===!0,sizeAttenuation:C.sizeAttenuation===!0,logarithmicDepthBuffer:d,skinning:G.isSkinnedMesh===!0,morphTargets:X.morphAttributes.position!==void 0,morphNormals:X.morphAttributes.normal!==void 0,morphColors:X.morphAttributes.color!==void 0,morphTargetsCount:ee,morphTextureStride:oe,numDirLights:L.directional.length,numPointLights:L.point.length,numSpotLights:L.spot.length,numSpotLightMaps:L.spotLightMap.length,numRectAreaLights:L.rectArea.length,numHemiLights:L.hemi.length,numDirLightShadows:L.directionalShadowMap.length,numPointLightShadows:L.pointShadowMap.length,numSpotLightShadows:L.spotShadowMap.length,numSpotLightShadowsWithMaps:L.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:C.dithering,shadowMapEnabled:n.shadowMap.enabled&&F.length>0,shadowMapType:n.shadowMap.type,toneMapping:C.toneMapped?n.toneMapping:Eo,useLegacyLights:n.useLegacyLights,premultipliedAlpha:C.premultipliedAlpha,doubleSided:C.side===zr,flipSided:C.side===yi,useDepthPacking:C.depthPacking>=0,depthPacking:C.depthPacking||0,index0AttributeName:C.index0AttributeName,extensionDerivatives:Y&&C.extensions.derivatives===!0,extensionFragDepth:Y&&C.extensions.fragDepth===!0,extensionDrawBuffers:Y&&C.extensions.drawBuffers===!0,extensionShaderTextureLOD:Y&&C.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:f||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:f||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:f||i.has("EXT_shader_texture_lod"),customProgramCacheKey:C.customProgramCacheKey()}}function v(C){const L=[];if(C.shaderID?L.push(C.shaderID):(L.push(C.customVertexShaderID),L.push(C.customFragmentShaderID)),C.defines!==void 0)for(const F in C.defines)L.push(F),L.push(C.defines[F]);return C.isRawShaderMaterial===!1&&(w(L,C),S(L,C),L.push(n.outputEncoding)),L.push(C.customProgramCacheKey),L.join()}function w(C,L){C.push(L.precision),C.push(L.outputEncoding),C.push(L.envMapMode),C.push(L.envMapCubeUVHeight),C.push(L.mapUv),C.push(L.alphaMapUv),C.push(L.lightMapUv),C.push(L.aoMapUv),C.push(L.bumpMapUv),C.push(L.normalMapUv),C.push(L.displacementMapUv),C.push(L.emissiveMapUv),C.push(L.metalnessMapUv),C.push(L.roughnessMapUv),C.push(L.clearcoatMapUv),C.push(L.clearcoatNormalMapUv),C.push(L.clearcoatRoughnessMapUv),C.push(L.iridescenceMapUv),C.push(L.iridescenceThicknessMapUv),C.push(L.sheenColorMapUv),C.push(L.sheenRoughnessMapUv),C.push(L.specularMapUv),C.push(L.specularColorMapUv),C.push(L.specularIntensityMapUv),C.push(L.transmissionMapUv),C.push(L.thicknessMapUv),C.push(L.combine),C.push(L.fogExp2),C.push(L.sizeAttenuation),C.push(L.morphTargetsCount),C.push(L.morphAttributeCount),C.push(L.numDirLights),C.push(L.numPointLights),C.push(L.numSpotLights),C.push(L.numSpotLightMaps),C.push(L.numHemiLights),C.push(L.numRectAreaLights),C.push(L.numDirLightShadows),C.push(L.numPointLightShadows),C.push(L.numSpotLightShadows),C.push(L.numSpotLightShadowsWithMaps),C.push(L.shadowMapType),C.push(L.toneMapping),C.push(L.numClippingPlanes),C.push(L.numClipIntersection),C.push(L.depthPacking)}function S(C,L){a.disableAll(),L.isWebGL2&&a.enable(0),L.supportsVertexTextures&&a.enable(1),L.instancing&&a.enable(2),L.instancingColor&&a.enable(3),L.matcap&&a.enable(4),L.envMap&&a.enable(5),L.normalMapObjectSpace&&a.enable(6),L.normalMapTangentSpace&&a.enable(7),L.clearcoat&&a.enable(8),L.iridescence&&a.enable(9),L.alphaTest&&a.enable(10),L.vertexColors&&a.enable(11),L.vertexAlphas&&a.enable(12),L.vertexUvs2&&a.enable(13),L.vertexTangents&&a.enable(14),C.push(a.mask),a.disableAll(),L.fog&&a.enable(0),L.useFog&&a.enable(1),L.flatShading&&a.enable(2),L.logarithmicDepthBuffer&&a.enable(3),L.skinning&&a.enable(4),L.morphTargets&&a.enable(5),L.morphNormals&&a.enable(6),L.morphColors&&a.enable(7),L.premultipliedAlpha&&a.enable(8),L.shadowMapEnabled&&a.enable(9),L.useLegacyLights&&a.enable(10),L.doubleSided&&a.enable(11),L.flipSided&&a.enable(12),L.useDepthPacking&&a.enable(13),L.dithering&&a.enable(14),L.transmission&&a.enable(15),L.sheen&&a.enable(16),L.decodeVideoTexture&&a.enable(17),L.opaque&&a.enable(18),L.pointsUvs&&a.enable(19),C.push(a.mask)}function T(C){const L=g[C.type];let F;if(L){const H=_o[L];F=pU.clone(H.uniforms)}else F=C.uniforms;return F}function b(C,L){let F;for(let H=0,G=u.length;H<G;H++){const W=u[H];if(W.cacheKey===L){F=W,++F.usedTimes;break}}return F===void 0&&(F=new sX(n,L,C,s),u.push(F)),F}function P(C){if(--C.usedTimes===0){const L=u.indexOf(C);u[L]=u[u.length-1],u.pop(),C.destroy()}}function R(C){l.remove(C)}function D(){l.dispose()}return{getParameters:x,getProgramCacheKey:v,getUniforms:T,acquireProgram:b,releaseProgram:P,releaseShaderCache:R,programs:u,dispose:D}}function cX(){let n=new WeakMap;function e(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function t(s){n.delete(s)}function i(s,o,a){n.get(s)[o]=a}function r(){n=new WeakMap}return{get:e,remove:t,update:i,dispose:r}}function fX(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function l3(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function u3(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function o(d,p,m,g,y,x){let v=n[e];return v===void 0?(v={id:d.id,object:d,geometry:p,material:m,groupOrder:g,renderOrder:d.renderOrder,z:y,group:x},n[e]=v):(v.id=d.id,v.object=d,v.geometry=p,v.material=m,v.groupOrder=g,v.renderOrder=d.renderOrder,v.z=y,v.group=x),e++,v}function a(d,p,m,g,y,x){const v=o(d,p,m,g,y,x);m.transmission>0?i.push(v):m.transparent===!0?r.push(v):t.push(v)}function l(d,p,m,g,y,x){const v=o(d,p,m,g,y,x);m.transmission>0?i.unshift(v):m.transparent===!0?r.unshift(v):t.unshift(v)}function u(d,p){t.length>1&&t.sort(d||fX),i.length>1&&i.sort(p||l3),r.length>1&&r.sort(p||l3)}function f(){for(let d=e,p=n.length;d<p;d++){const m=n[d];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:a,unshift:l,finish:f,sort:u}}function hX(){let n=new WeakMap;function e(i,r){const s=n.get(i);let o;return s===void 0?(o=new u3,n.set(i,[o])):r>=s.length?(o=new u3,s.push(o)):o=s[r],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function dX(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new N,color:new Oe};break;case"SpotLight":t={position:new N,direction:new N,color:new Oe,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new N,color:new Oe,distance:0,decay:0};break;case"HemisphereLight":t={direction:new N,skyColor:new Oe,groundColor:new Oe};break;case"RectAreaLight":t={color:new Oe,position:new N,halfWidth:new N,halfHeight:new N};break}return n[e.id]=t,t}}}function pX(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new le};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new le};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new le,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let mX=0;function gX(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function vX(n,e){const t=new dX,i=pX(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let f=0;f<9;f++)r.probe.push(new N);const s=new N,o=new mt,a=new mt;function l(f,d){let p=0,m=0,g=0;for(let F=0;F<9;F++)r.probe[F].set(0,0,0);let y=0,x=0,v=0,w=0,S=0,T=0,b=0,P=0,R=0,D=0;f.sort(gX);const C=d===!0?Math.PI:1;for(let F=0,H=f.length;F<H;F++){const G=f[F],W=G.color,X=G.intensity,re=G.distance,Q=G.shadow&&G.shadow.map?G.shadow.map.texture:null;if(G.isAmbientLight)p+=W.r*X*C,m+=W.g*X*C,g+=W.b*X*C;else if(G.isLightProbe)for(let z=0;z<9;z++)r.probe[z].addScaledVector(G.sh.coefficients[z],X);else if(G.isDirectionalLight){const z=t.get(G);if(z.color.copy(G.color).multiplyScalar(G.intensity*C),G.castShadow){const j=G.shadow,I=i.get(G);I.shadowBias=j.bias,I.shadowNormalBias=j.normalBias,I.shadowRadius=j.radius,I.shadowMapSize=j.mapSize,r.directionalShadow[y]=I,r.directionalShadowMap[y]=Q,r.directionalShadowMatrix[y]=G.shadow.matrix,T++}r.directional[y]=z,y++}else if(G.isSpotLight){const z=t.get(G);z.position.setFromMatrixPosition(G.matrixWorld),z.color.copy(W).multiplyScalar(X*C),z.distance=re,z.coneCos=Math.cos(G.angle),z.penumbraCos=Math.cos(G.angle*(1-G.penumbra)),z.decay=G.decay,r.spot[v]=z;const j=G.shadow;if(G.map&&(r.spotLightMap[R]=G.map,R++,j.updateMatrices(G),G.castShadow&&D++),r.spotLightMatrix[v]=j.matrix,G.castShadow){const I=i.get(G);I.shadowBias=j.bias,I.shadowNormalBias=j.normalBias,I.shadowRadius=j.radius,I.shadowMapSize=j.mapSize,r.spotShadow[v]=I,r.spotShadowMap[v]=Q,P++}v++}else if(G.isRectAreaLight){const z=t.get(G);z.color.copy(W).multiplyScalar(X),z.halfWidth.set(G.width*.5,0,0),z.halfHeight.set(0,G.height*.5,0),r.rectArea[w]=z,w++}else if(G.isPointLight){const z=t.get(G);if(z.color.copy(G.color).multiplyScalar(G.intensity*C),z.distance=G.distance,z.decay=G.decay,G.castShadow){const j=G.shadow,I=i.get(G);I.shadowBias=j.bias,I.shadowNormalBias=j.normalBias,I.shadowRadius=j.radius,I.shadowMapSize=j.mapSize,I.shadowCameraNear=j.camera.near,I.shadowCameraFar=j.camera.far,r.pointShadow[x]=I,r.pointShadowMap[x]=Q,r.pointShadowMatrix[x]=G.shadow.matrix,b++}r.point[x]=z,x++}else if(G.isHemisphereLight){const z=t.get(G);z.skyColor.copy(G.color).multiplyScalar(X*C),z.groundColor.copy(G.groundColor).multiplyScalar(X*C),r.hemi[S]=z,S++}}w>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=Be.LTC_FLOAT_1,r.rectAreaLTC2=Be.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=Be.LTC_HALF_1,r.rectAreaLTC2=Be.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=p,r.ambient[1]=m,r.ambient[2]=g;const L=r.hash;(L.directionalLength!==y||L.pointLength!==x||L.spotLength!==v||L.rectAreaLength!==w||L.hemiLength!==S||L.numDirectionalShadows!==T||L.numPointShadows!==b||L.numSpotShadows!==P||L.numSpotMaps!==R)&&(r.directional.length=y,r.spot.length=v,r.rectArea.length=w,r.point.length=x,r.hemi.length=S,r.directionalShadow.length=T,r.directionalShadowMap.length=T,r.pointShadow.length=b,r.pointShadowMap.length=b,r.spotShadow.length=P,r.spotShadowMap.length=P,r.directionalShadowMatrix.length=T,r.pointShadowMatrix.length=b,r.spotLightMatrix.length=P+R-D,r.spotLightMap.length=R,r.numSpotLightShadowsWithMaps=D,L.directionalLength=y,L.pointLength=x,L.spotLength=v,L.rectAreaLength=w,L.hemiLength=S,L.numDirectionalShadows=T,L.numPointShadows=b,L.numSpotShadows=P,L.numSpotMaps=R,r.version=mX++)}function u(f,d){let p=0,m=0,g=0,y=0,x=0;const v=d.matrixWorldInverse;for(let w=0,S=f.length;w<S;w++){const T=f[w];if(T.isDirectionalLight){const b=r.directional[p];b.direction.setFromMatrixPosition(T.matrixWorld),s.setFromMatrixPosition(T.target.matrixWorld),b.direction.sub(s),b.direction.transformDirection(v),p++}else if(T.isSpotLight){const b=r.spot[g];b.position.setFromMatrixPosition(T.matrixWorld),b.position.applyMatrix4(v),b.direction.setFromMatrixPosition(T.matrixWorld),s.setFromMatrixPosition(T.target.matrixWorld),b.direction.sub(s),b.direction.transformDirection(v),g++}else if(T.isRectAreaLight){const b=r.rectArea[y];b.position.setFromMatrixPosition(T.matrixWorld),b.position.applyMatrix4(v),a.identity(),o.copy(T.matrixWorld),o.premultiply(v),a.extractRotation(o),b.halfWidth.set(T.width*.5,0,0),b.halfHeight.set(0,T.height*.5,0),b.halfWidth.applyMatrix4(a),b.halfHeight.applyMatrix4(a),y++}else if(T.isPointLight){const b=r.point[m];b.position.setFromMatrixPosition(T.matrixWorld),b.position.applyMatrix4(v),m++}else if(T.isHemisphereLight){const b=r.hemi[x];b.direction.setFromMatrixPosition(T.matrixWorld),b.direction.transformDirection(v),x++}}}return{setup:l,setupView:u,state:r}}function c3(n,e){const t=new vX(n,e),i=[],r=[];function s(){i.length=0,r.length=0}function o(d){i.push(d)}function a(d){r.push(d)}function l(d){t.setup(i,d)}function u(d){t.setupView(i,d)}return{init:s,state:{lightsArray:i,shadowsArray:r,lights:t},setupLights:l,setupLightsView:u,pushLight:o,pushShadow:a}}function yX(n,e){let t=new WeakMap;function i(s,o=0){const a=t.get(s);let l;return a===void 0?(l=new c3(n,e),t.set(s,[l])):o>=a.length?(l=new c3(n,e),a.push(l)):l=a[o],l}function r(){t=new WeakMap}return{get:i,dispose:r}}class Ax extends Ti{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Oi,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class rC extends Ti{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const _X=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,xX=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function SX(n,e,t){let i=new Cx;const r=new le,s=new le,o=new Gt,a=new Ax({depthPacking:ia}),l=new rC,u={},f=t.maxTextureSize,d={[ta]:yi,[yi]:ta,[zr]:zr},p=new on({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new le},radius:{value:4}},vertexShader:_X,fragmentShader:xX}),m=p.clone();m.defines.HORIZONTAL_PASS=1;const g=new Lt;g.setAttribute("position",new sn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const y=new Ii(g,p),x=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=xx,this.render=function(T,b,P){if(x.enabled===!1||x.autoUpdate===!1&&x.needsUpdate===!1||T.length===0)return;const R=n.getRenderTarget(),D=n.getActiveCubeFace(),C=n.getActiveMipmapLevel(),L=n.state;L.setBlending(En),L.buffers.color.setClear(1,1,1,1),L.buffers.depth.setTest(!0),L.setScissorTest(!1);for(let F=0,H=T.length;F<H;F++){const G=T[F],W=G.shadow;if(W===void 0){console.warn("THREE.WebGLShadowMap:",G,"has no shadow.");continue}if(W.autoUpdate===!1&&W.needsUpdate===!1)continue;r.copy(W.mapSize);const X=W.getFrameExtents();if(r.multiply(X),s.copy(W.mapSize),(r.x>f||r.y>f)&&(r.x>f&&(s.x=Math.floor(f/X.x),r.x=s.x*X.x,W.mapSize.x=s.x),r.y>f&&(s.y=Math.floor(f/X.y),r.y=s.y*X.y,W.mapSize.y=s.y)),W.map===null){const Q=this.type!==ic?{minFilter:Ht,magFilter:Ht}:{};W.map=new qt(r.x,r.y,Q),W.map.texture.name=G.name+".shadowMap",W.camera.updateProjectionMatrix()}n.setRenderTarget(W.map),n.clear();const re=W.getViewportCount();for(let Q=0;Q<re;Q++){const z=W.getViewport(Q);o.set(s.x*z.x,s.y*z.y,s.x*z.z,s.y*z.w),L.viewport(o),W.updateMatrices(G,Q),i=W.getFrustum(),S(b,P,W.camera,G,this.type)}W.isPointLightShadow!==!0&&this.type===ic&&v(W,P),W.needsUpdate=!1}x.needsUpdate=!1,n.setRenderTarget(R,D,C)};function v(T,b){const P=e.update(y);p.defines.VSM_SAMPLES!==T.blurSamples&&(p.defines.VSM_SAMPLES=T.blurSamples,m.defines.VSM_SAMPLES=T.blurSamples,p.needsUpdate=!0,m.needsUpdate=!0),T.mapPass===null&&(T.mapPass=new qt(r.x,r.y)),p.uniforms.shadow_pass.value=T.map.texture,p.uniforms.resolution.value=T.mapSize,p.uniforms.radius.value=T.radius,n.setRenderTarget(T.mapPass),n.clear(),n.renderBufferDirect(b,null,P,p,y,null),m.uniforms.shadow_pass.value=T.mapPass.texture,m.uniforms.resolution.value=T.mapSize,m.uniforms.radius.value=T.radius,n.setRenderTarget(T.map),n.clear(),n.renderBufferDirect(b,null,P,m,y,null)}function w(T,b,P,R){let D=null;const C=P.isPointLight===!0?T.customDistanceMaterial:T.customDepthMaterial;if(C!==void 0)D=C;else if(D=P.isPointLight===!0?l:a,n.localClippingEnabled&&b.clipShadows===!0&&Array.isArray(b.clippingPlanes)&&b.clippingPlanes.length!==0||b.displacementMap&&b.displacementScale!==0||b.alphaMap&&b.alphaTest>0||b.map&&b.alphaTest>0){const L=D.uuid,F=b.uuid;let H=u[L];H===void 0&&(H={},u[L]=H);let G=H[F];G===void 0&&(G=D.clone(),H[F]=G),D=G}if(D.visible=b.visible,D.wireframe=b.wireframe,R===ic?D.side=b.shadowSide!==null?b.shadowSide:b.side:D.side=b.shadowSide!==null?b.shadowSide:d[b.side],D.alphaMap=b.alphaMap,D.alphaTest=b.alphaTest,D.map=b.map,D.clipShadows=b.clipShadows,D.clippingPlanes=b.clippingPlanes,D.clipIntersection=b.clipIntersection,D.displacementMap=b.displacementMap,D.displacementScale=b.displacementScale,D.displacementBias=b.displacementBias,D.wireframeLinewidth=b.wireframeLinewidth,D.linewidth=b.linewidth,P.isPointLight===!0&&D.isMeshDistanceMaterial===!0){const L=n.properties.get(D);L.light=P}return D}function S(T,b,P,R,D){if(T.visible===!1)return;if(T.layers.test(b.layers)&&(T.isMesh||T.isLine||T.isPoints)&&(T.castShadow||T.receiveShadow&&D===ic)&&(!T.frustumCulled||i.intersectsObject(T))){T.modelViewMatrix.multiplyMatrices(P.matrixWorldInverse,T.matrixWorld);const F=e.update(T),H=T.material;if(Array.isArray(H)){const G=F.groups;for(let W=0,X=G.length;W<X;W++){const re=G[W],Q=H[re.materialIndex];if(Q&&Q.visible){const z=w(T,Q,R,D);n.renderBufferDirect(P,null,F,z,T,re)}}}else if(H.visible){const G=w(T,H,R,D);n.renderBufferDirect(P,null,F,G,T,null)}}const L=T.children;for(let F=0,H=L.length;F<H;F++)S(L[F],b,P,R,D)}}function wX(n,e,t){const i=t.isWebGL2;function r(){let Y=!1;const ye=new Gt;let be=null;const Ne=new Gt(0,0,0,0);return{setMask:function(tt){be!==tt&&!Y&&(n.colorMask(tt,tt,tt,tt),be=tt)},setLocked:function(tt){Y=tt},setClear:function(tt,Xt,zt,Cn,dt){dt===!0&&(tt*=Cn,Xt*=Cn,zt*=Cn),ye.set(tt,Xt,zt,Cn),Ne.equals(ye)===!1&&(n.clearColor(tt,Xt,zt,Cn),Ne.copy(ye))},reset:function(){Y=!1,be=null,Ne.set(-1,0,0,0)}}}function s(){let Y=!1,ye=null,be=null,Ne=null;return{setTest:function(tt){tt?J(2929):Xe(2929)},setMask:function(tt){ye!==tt&&!Y&&(n.depthMask(tt),ye=tt)},setFunc:function(tt){if(be!==tt){switch(tt){case Hb:n.depthFunc(512);break;case Gb:n.depthFunc(519);break;case E_:n.depthFunc(513);break;case km:n.depthFunc(515);break;case Om:n.depthFunc(514);break;case Wb:n.depthFunc(518);break;case jb:n.depthFunc(516);break;case Sx:n.depthFunc(517);break;default:n.depthFunc(515)}be=tt}},setLocked:function(tt){Y=tt},setClear:function(tt){Ne!==tt&&(n.clearDepth(tt),Ne=tt)},reset:function(){Y=!1,ye=null,be=null,Ne=null}}}function o(){let Y=!1,ye=null,be=null,Ne=null,tt=null,Xt=null,zt=null,Cn=null,dt=null;return{setTest:function(He){Y||(He?J(2960):Xe(2960))},setMask:function(He){ye!==He&&!Y&&(n.stencilMask(He),ye=He)},setFunc:function(He,Ae,rt){(be!==He||Ne!==Ae||tt!==rt)&&(n.stencilFunc(He,Ae,rt),be=He,Ne=Ae,tt=rt)},setOp:function(He,Ae,rt){(Xt!==He||zt!==Ae||Cn!==rt)&&(n.stencilOp(He,Ae,rt),Xt=He,zt=Ae,Cn=rt)},setLocked:function(He){Y=He},setClear:function(He){dt!==He&&(n.clearStencil(He),dt=He)},reset:function(){Y=!1,ye=null,be=null,Ne=null,tt=null,Xt=null,zt=null,Cn=null,dt=null}}}const a=new r,l=new s,u=new o,f=new WeakMap,d=new WeakMap;let p={},m={},g=new WeakMap,y=[],x=null,v=!1,w=null,S=null,T=null,b=null,P=null,R=null,D=null,C=!1,L=null,F=null,H=null,G=null,W=null;const X=n.getParameter(35661);let re=!1,Q=0;const z=n.getParameter(7938);z.indexOf("WebGL")!==-1?(Q=parseFloat(/^WebGL (\d)/.exec(z)[1]),re=Q>=1):z.indexOf("OpenGL ES")!==-1&&(Q=parseFloat(/^OpenGL ES (\d)/.exec(z)[1]),re=Q>=2);let j=null,I={};const ee=n.getParameter(3088),oe=n.getParameter(2978),se=new Gt().fromArray(ee),te=new Gt().fromArray(oe);function Te(Y,ye,be){const Ne=new Uint8Array(4),tt=n.createTexture();n.bindTexture(Y,tt),n.texParameteri(Y,10241,9728),n.texParameteri(Y,10240,9728);for(let Xt=0;Xt<be;Xt++)n.texImage2D(ye+Xt,0,6408,1,1,0,6408,5121,Ne);return tt}const we={};we[3553]=Te(3553,3553,1),we[34067]=Te(34067,34069,6),a.setClear(0,0,0,1),l.setClear(1),u.setClear(0),J(2929),l.setFunc(km),Re(!1),$(QM),J(2884),Me(En);function J(Y){p[Y]!==!0&&(n.enable(Y),p[Y]=!0)}function Xe(Y){p[Y]!==!1&&(n.disable(Y),p[Y]=!1)}function it(Y,ye){return m[Y]!==ye?(n.bindFramebuffer(Y,ye),m[Y]=ye,i&&(Y===36009&&(m[36160]=ye),Y===36160&&(m[36009]=ye)),!0):!1}function Ee(Y,ye){let be=y,Ne=!1;if(Y)if(be=g.get(ye),be===void 0&&(be=[],g.set(ye,be)),Y.isWebGLMultipleRenderTargets){const tt=Y.texture;if(be.length!==tt.length||be[0]!==36064){for(let Xt=0,zt=tt.length;Xt<zt;Xt++)be[Xt]=36064+Xt;be.length=tt.length,Ne=!0}}else be[0]!==36064&&(be[0]=36064,Ne=!0);else be[0]!==1029&&(be[0]=1029,Ne=!0);Ne&&(t.isWebGL2?n.drawBuffers(be):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(be))}function Ie(Y){return x!==Y?(n.useProgram(Y),x=Y,!0):!1}const ce={[Ku]:32774,[PN]:32778,[AN]:32779};if(i)ce[iT]=32775,ce[rT]=32776;else{const Y=e.get("EXT_blend_minmax");Y!==null&&(ce[iT]=Y.MIN_EXT,ce[rT]=Y.MAX_EXT)}const ae={[RN]:0,[DN]:1,[LN]:768,[Bb]:770,[FN]:776,[NN]:774,[kN]:772,[IN]:769,[Vb]:771,[UN]:775,[ON]:773};function Me(Y,ye,be,Ne,tt,Xt,zt,Cn){if(Y===En){v===!0&&(Xe(3042),v=!1);return}if(v===!1&&(J(3042),v=!0),Y!==CN){if(Y!==w||Cn!==C){if((S!==Ku||P!==Ku)&&(n.blendEquation(32774),S=Ku,P=Ku),Cn)switch(Y){case gc:n.blendFuncSeparate(1,771,1,771);break;case eT:n.blendFunc(1,1);break;case tT:n.blendFuncSeparate(0,769,0,1);break;case nT:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Y);break}else switch(Y){case gc:n.blendFuncSeparate(770,771,1,771);break;case eT:n.blendFunc(770,1);break;case tT:n.blendFuncSeparate(0,769,0,1);break;case nT:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Y);break}T=null,b=null,R=null,D=null,w=Y,C=Cn}return}tt=tt||ye,Xt=Xt||be,zt=zt||Ne,(ye!==S||tt!==P)&&(n.blendEquationSeparate(ce[ye],ce[tt]),S=ye,P=tt),(be!==T||Ne!==b||Xt!==R||zt!==D)&&(n.blendFuncSeparate(ae[be],ae[Ne],ae[Xt],ae[zt]),T=be,b=Ne,R=Xt,D=zt),w=Y,C=!1}function ze(Y,ye){Y.side===zr?Xe(2884):J(2884);let be=Y.side===yi;ye&&(be=!be),Re(be),Y.blending===gc&&Y.transparent===!1?Me(En):Me(Y.blending,Y.blendEquation,Y.blendSrc,Y.blendDst,Y.blendEquationAlpha,Y.blendSrcAlpha,Y.blendDstAlpha,Y.premultipliedAlpha),l.setFunc(Y.depthFunc),l.setTest(Y.depthTest),l.setMask(Y.depthWrite),a.setMask(Y.colorWrite);const Ne=Y.stencilWrite;u.setTest(Ne),Ne&&(u.setMask(Y.stencilWriteMask),u.setFunc(Y.stencilFunc,Y.stencilRef,Y.stencilFuncMask),u.setOp(Y.stencilFail,Y.stencilZFail,Y.stencilZPass)),Ue(Y.polygonOffset,Y.polygonOffsetFactor,Y.polygonOffsetUnits),Y.alphaToCoverage===!0?J(32926):Xe(32926)}function Re(Y){L!==Y&&(Y?n.frontFace(2304):n.frontFace(2305),L=Y)}function $(Y){Y!==TN?(J(2884),Y!==F&&(Y===QM?n.cullFace(1029):Y===EN?n.cullFace(1028):n.cullFace(1032))):Xe(2884),F=Y}function et(Y){Y!==H&&(re&&n.lineWidth(Y),H=Y)}function Ue(Y,ye,be){Y?(J(32823),(G!==ye||W!==be)&&(n.polygonOffset(ye,be),G=ye,W=be)):Xe(32823)}function ft(Y){Y?J(3089):Xe(3089)}function Tt(Y){Y===void 0&&(Y=33984+X-1),j!==Y&&(n.activeTexture(Y),j=Y)}function B(Y,ye,be){be===void 0&&(j===null?be=33984+X-1:be=j);let Ne=I[be];Ne===void 0&&(Ne={type:void 0,texture:void 0},I[be]=Ne),(Ne.type!==Y||Ne.texture!==ye)&&(j!==be&&(n.activeTexture(be),j=be),n.bindTexture(Y,ye||we[Y]),Ne.type=Y,Ne.texture=ye)}function k(){const Y=I[j];Y!==void 0&&Y.type!==void 0&&(n.bindTexture(Y.type,null),Y.type=void 0,Y.texture=void 0)}function fe(){try{n.compressedTexImage2D.apply(n,arguments)}catch(Y){console.error("THREE.WebGLState:",Y)}}function ge(){try{n.compressedTexImage3D.apply(n,arguments)}catch(Y){console.error("THREE.WebGLState:",Y)}}function pe(){try{n.texSubImage2D.apply(n,arguments)}catch(Y){console.error("THREE.WebGLState:",Y)}}function _e(){try{n.texSubImage3D.apply(n,arguments)}catch(Y){console.error("THREE.WebGLState:",Y)}}function De(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(Y){console.error("THREE.WebGLState:",Y)}}function Fe(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(Y){console.error("THREE.WebGLState:",Y)}}function he(){try{n.texStorage2D.apply(n,arguments)}catch(Y){console.error("THREE.WebGLState:",Y)}}function Pe(){try{n.texStorage3D.apply(n,arguments)}catch(Y){console.error("THREE.WebGLState:",Y)}}function Ce(){try{n.texImage2D.apply(n,arguments)}catch(Y){console.error("THREE.WebGLState:",Y)}}function je(){try{n.texImage3D.apply(n,arguments)}catch(Y){console.error("THREE.WebGLState:",Y)}}function Ve(Y){se.equals(Y)===!1&&(n.scissor(Y.x,Y.y,Y.z,Y.w),se.copy(Y))}function Ze(Y){te.equals(Y)===!1&&(n.viewport(Y.x,Y.y,Y.z,Y.w),te.copy(Y))}function Ct(Y,ye){let be=d.get(ye);be===void 0&&(be=new WeakMap,d.set(ye,be));let Ne=be.get(Y);Ne===void 0&&(Ne=n.getUniformBlockIndex(ye,Y.name),be.set(Y,Ne))}function qe(Y,ye){const Ne=d.get(ye).get(Y);f.get(ye)!==Ne&&(n.uniformBlockBinding(ye,Ne,Y.__bindingPointIndex),f.set(ye,Ne))}function Zt(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),i===!0&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),p={},j=null,I={},m={},g=new WeakMap,y=[],x=null,v=!1,w=null,S=null,T=null,b=null,P=null,R=null,D=null,C=!1,L=null,F=null,H=null,G=null,W=null,se.set(0,0,n.canvas.width,n.canvas.height),te.set(0,0,n.canvas.width,n.canvas.height),a.reset(),l.reset(),u.reset()}return{buffers:{color:a,depth:l,stencil:u},enable:J,disable:Xe,bindFramebuffer:it,drawBuffers:Ee,useProgram:Ie,setBlending:Me,setMaterial:ze,setFlipSided:Re,setCullFace:$,setLineWidth:et,setPolygonOffset:Ue,setScissorTest:ft,activeTexture:Tt,bindTexture:B,unbindTexture:k,compressedTexImage2D:fe,compressedTexImage3D:ge,texImage2D:Ce,texImage3D:je,updateUBOMapping:Ct,uniformBlockBinding:qe,texStorage2D:he,texStorage3D:Pe,texSubImage2D:pe,texSubImage3D:_e,compressedTexSubImage2D:De,compressedTexSubImage3D:Fe,scissor:Ve,viewport:Ze,reset:Zt}}function MX(n,e,t,i,r,s,o){const a=r.isWebGL2,l=r.maxTextures,u=r.maxCubemapSize,f=r.maxTextureSize,d=r.maxSamples,p=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,m=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),g=new WeakMap;let y;const x=new WeakMap;let v=!1;try{v=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function w(B,k){return v?new OffscreenCanvas(B,k):Gm("canvas")}function S(B,k,fe,ge){let pe=1;if((B.width>ge||B.height>ge)&&(pe=ge/Math.max(B.width,B.height)),pe<1||k===!0)if(typeof HTMLImageElement<"u"&&B instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&B instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&B instanceof ImageBitmap){const _e=k?uU:Math.floor,De=_e(pe*B.width),Fe=_e(pe*B.height);y===void 0&&(y=w(De,Fe));const he=fe?w(De,Fe):y;return he.width=De,he.height=Fe,he.getContext("2d").drawImage(B,0,0,De,Fe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+B.width+"x"+B.height+") to ("+De+"x"+Fe+")."),he}else return"data"in B&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+B.width+"x"+B.height+")."),B;return B}function T(B){return PT(B.width)&&PT(B.height)}function b(B){return a?!1:B.wrapS!==mi||B.wrapT!==mi||B.minFilter!==Ht&&B.minFilter!==vt}function P(B,k){return B.generateMipmaps&&k&&B.minFilter!==Ht&&B.minFilter!==vt}function R(B){n.generateMipmap(B)}function D(B,k,fe,ge,pe=!1){if(a===!1)return k;if(B!==null){if(n[B]!==void 0)return n[B];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+B+"'")}let _e=k;return k===6403&&(fe===5126&&(_e=33326),fe===5131&&(_e=33325),fe===5121&&(_e=33321)),k===33319&&(fe===5126&&(_e=33328),fe===5131&&(_e=33327),fe===5121&&(_e=33323)),k===6408&&(fe===5126&&(_e=34836),fe===5131&&(_e=34842),fe===5121&&(_e=ge===an&&pe===!1?35907:32856),fe===32819&&(_e=32854),fe===32820&&(_e=32855)),(_e===33325||_e===33326||_e===33327||_e===33328||_e===34842||_e===34836)&&e.get("EXT_color_buffer_float"),_e}function C(B,k,fe){return P(B,fe)===!0||B.isFramebufferTexture&&B.minFilter!==Ht&&B.minFilter!==vt?Math.log2(Math.max(k.width,k.height))+1:B.mipmaps!==void 0&&B.mipmaps.length>0?B.mipmaps.length:B.isCompressedTexture&&Array.isArray(B.image)?k.mipmaps.length:1}function L(B){return B===Ht||B===b_||B===jp?9728:9729}function F(B){const k=B.target;k.removeEventListener("dispose",F),G(k),k.isVideoTexture&&g.delete(k)}function H(B){const k=B.target;k.removeEventListener("dispose",H),X(k)}function G(B){const k=i.get(B);if(k.__webglInit===void 0)return;const fe=B.source,ge=x.get(fe);if(ge){const pe=ge[k.__cacheKey];pe.usedTimes--,pe.usedTimes===0&&W(B),Object.keys(ge).length===0&&x.delete(fe)}i.remove(B)}function W(B){const k=i.get(B);n.deleteTexture(k.__webglTexture);const fe=B.source,ge=x.get(fe);delete ge[k.__cacheKey],o.memory.textures--}function X(B){const k=B.texture,fe=i.get(B),ge=i.get(k);if(ge.__webglTexture!==void 0&&(n.deleteTexture(ge.__webglTexture),o.memory.textures--),B.depthTexture&&B.depthTexture.dispose(),B.isWebGLCubeRenderTarget)for(let pe=0;pe<6;pe++)n.deleteFramebuffer(fe.__webglFramebuffer[pe]),fe.__webglDepthbuffer&&n.deleteRenderbuffer(fe.__webglDepthbuffer[pe]);else{if(n.deleteFramebuffer(fe.__webglFramebuffer),fe.__webglDepthbuffer&&n.deleteRenderbuffer(fe.__webglDepthbuffer),fe.__webglMultisampledFramebuffer&&n.deleteFramebuffer(fe.__webglMultisampledFramebuffer),fe.__webglColorRenderbuffer)for(let pe=0;pe<fe.__webglColorRenderbuffer.length;pe++)fe.__webglColorRenderbuffer[pe]&&n.deleteRenderbuffer(fe.__webglColorRenderbuffer[pe]);fe.__webglDepthRenderbuffer&&n.deleteRenderbuffer(fe.__webglDepthRenderbuffer)}if(B.isWebGLMultipleRenderTargets)for(let pe=0,_e=k.length;pe<_e;pe++){const De=i.get(k[pe]);De.__webglTexture&&(n.deleteTexture(De.__webglTexture),o.memory.textures--),i.remove(k[pe])}i.remove(k),i.remove(B)}let re=0;function Q(){re=0}function z(){const B=re;return B>=l&&console.warn("THREE.WebGLTextures: Trying to use "+B+" texture units while this GPU supports only "+l),re+=1,B}function j(B){const k=[];return k.push(B.wrapS),k.push(B.wrapT),k.push(B.wrapR||0),k.push(B.magFilter),k.push(B.minFilter),k.push(B.anisotropy),k.push(B.internalFormat),k.push(B.format),k.push(B.type),k.push(B.generateMipmaps),k.push(B.premultiplyAlpha),k.push(B.flipY),k.push(B.unpackAlignment),k.push(B.encoding),k.join()}function I(B,k){const fe=i.get(B);if(B.isVideoTexture&&ft(B),B.isRenderTargetTexture===!1&&B.version>0&&fe.__version!==B.version){const ge=B.image;if(ge===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(ge.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Xe(fe,B,k);return}}t.bindTexture(3553,fe.__webglTexture,33984+k)}function ee(B,k){const fe=i.get(B);if(B.version>0&&fe.__version!==B.version){Xe(fe,B,k);return}t.bindTexture(35866,fe.__webglTexture,33984+k)}function oe(B,k){const fe=i.get(B);if(B.version>0&&fe.__version!==B.version){Xe(fe,B,k);return}t.bindTexture(32879,fe.__webglTexture,33984+k)}function se(B,k){const fe=i.get(B);if(B.version>0&&fe.__version!==B.version){it(fe,B,k);return}t.bindTexture(34067,fe.__webglTexture,33984+k)}const te={[Xa]:10497,[mi]:33071,[Fm]:33648},Te={[Ht]:9728,[b_]:9984,[jp]:9986,[vt]:9729,[Yb]:9985,[iu]:9987};function we(B,k,fe){if(fe?(n.texParameteri(B,10242,te[k.wrapS]),n.texParameteri(B,10243,te[k.wrapT]),(B===32879||B===35866)&&n.texParameteri(B,32882,te[k.wrapR]),n.texParameteri(B,10240,Te[k.magFilter]),n.texParameteri(B,10241,Te[k.minFilter])):(n.texParameteri(B,10242,33071),n.texParameteri(B,10243,33071),(B===32879||B===35866)&&n.texParameteri(B,32882,33071),(k.wrapS!==mi||k.wrapT!==mi)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(B,10240,L(k.magFilter)),n.texParameteri(B,10241,L(k.minFilter)),k.minFilter!==Ht&&k.minFilter!==vt&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const ge=e.get("EXT_texture_filter_anisotropic");if(k.magFilter===Ht||k.minFilter!==jp&&k.minFilter!==iu||k.type===Jn&&e.has("OES_texture_float_linear")===!1||a===!1&&k.type===ps&&e.has("OES_texture_half_float_linear")===!1)return;(k.anisotropy>1||i.get(k).__currentAnisotropy)&&(n.texParameterf(B,ge.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(k.anisotropy,r.getMaxAnisotropy())),i.get(k).__currentAnisotropy=k.anisotropy)}}function J(B,k){let fe=!1;B.__webglInit===void 0&&(B.__webglInit=!0,k.addEventListener("dispose",F));const ge=k.source;let pe=x.get(ge);pe===void 0&&(pe={},x.set(ge,pe));const _e=j(k);if(_e!==B.__cacheKey){pe[_e]===void 0&&(pe[_e]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,fe=!0),pe[_e].usedTimes++;const De=pe[B.__cacheKey];De!==void 0&&(pe[B.__cacheKey].usedTimes--,De.usedTimes===0&&W(k)),B.__cacheKey=_e,B.__webglTexture=pe[_e].texture}return fe}function Xe(B,k,fe){let ge=3553;(k.isDataArrayTexture||k.isCompressedArrayTexture)&&(ge=35866),k.isData3DTexture&&(ge=32879);const pe=J(B,k),_e=k.source;t.bindTexture(ge,B.__webglTexture,33984+fe);const De=i.get(_e);if(_e.version!==De.__version||pe===!0){t.activeTexture(33984+fe),n.pixelStorei(37440,k.flipY),n.pixelStorei(37441,k.premultiplyAlpha),n.pixelStorei(3317,k.unpackAlignment),n.pixelStorei(37443,0);const Fe=b(k)&&T(k.image)===!1;let he=S(k.image,Fe,!1,f);he=Tt(k,he);const Pe=T(he)||a,Ce=s.convert(k.format,k.encoding);let je=s.convert(k.type),Ve=D(k.internalFormat,Ce,je,k.encoding,k.isVideoTexture);we(ge,k,Pe);let Ze;const Ct=k.mipmaps,qe=a&&k.isVideoTexture!==!0,Zt=De.__version===void 0||pe===!0,Y=C(k,he,Pe);if(k.isDepthTexture)Ve=6402,a?k.type===Jn?Ve=36012:k.type===Ia?Ve=33190:k.type===Wl?Ve=35056:Ve=33189:k.type===Jn&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),k.format===jl&&Ve===6402&&k.type!==qb&&k.type!==Ia&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),k.type=Ia,je=s.convert(k.type)),k.format===ru&&Ve===6402&&(Ve=34041,k.type!==Wl&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),k.type=Wl,je=s.convert(k.type))),Zt&&(qe?t.texStorage2D(3553,1,Ve,he.width,he.height):t.texImage2D(3553,0,Ve,he.width,he.height,0,Ce,je,null));else if(k.isDataTexture)if(Ct.length>0&&Pe){qe&&Zt&&t.texStorage2D(3553,Y,Ve,Ct[0].width,Ct[0].height);for(let ye=0,be=Ct.length;ye<be;ye++)Ze=Ct[ye],qe?t.texSubImage2D(3553,ye,0,0,Ze.width,Ze.height,Ce,je,Ze.data):t.texImage2D(3553,ye,Ve,Ze.width,Ze.height,0,Ce,je,Ze.data);k.generateMipmaps=!1}else qe?(Zt&&t.texStorage2D(3553,Y,Ve,he.width,he.height),t.texSubImage2D(3553,0,0,0,he.width,he.height,Ce,je,he.data)):t.texImage2D(3553,0,Ve,he.width,he.height,0,Ce,je,he.data);else if(k.isCompressedTexture)if(k.isCompressedArrayTexture){qe&&Zt&&t.texStorage3D(35866,Y,Ve,Ct[0].width,Ct[0].height,he.depth);for(let ye=0,be=Ct.length;ye<be;ye++)Ze=Ct[ye],k.format!==Dn?Ce!==null?qe?t.compressedTexSubImage3D(35866,ye,0,0,0,Ze.width,Ze.height,he.depth,Ce,Ze.data,0,0):t.compressedTexImage3D(35866,ye,Ve,Ze.width,Ze.height,he.depth,0,Ze.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):qe?t.texSubImage3D(35866,ye,0,0,0,Ze.width,Ze.height,he.depth,Ce,je,Ze.data):t.texImage3D(35866,ye,Ve,Ze.width,Ze.height,he.depth,0,Ce,je,Ze.data)}else{qe&&Zt&&t.texStorage2D(3553,Y,Ve,Ct[0].width,Ct[0].height);for(let ye=0,be=Ct.length;ye<be;ye++)Ze=Ct[ye],k.format!==Dn?Ce!==null?qe?t.compressedTexSubImage2D(3553,ye,0,0,Ze.width,Ze.height,Ce,Ze.data):t.compressedTexImage2D(3553,ye,Ve,Ze.width,Ze.height,0,Ze.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):qe?t.texSubImage2D(3553,ye,0,0,Ze.width,Ze.height,Ce,je,Ze.data):t.texImage2D(3553,ye,Ve,Ze.width,Ze.height,0,Ce,je,Ze.data)}else if(k.isDataArrayTexture)qe?(Zt&&t.texStorage3D(35866,Y,Ve,he.width,he.height,he.depth),t.texSubImage3D(35866,0,0,0,0,he.width,he.height,he.depth,Ce,je,he.data)):t.texImage3D(35866,0,Ve,he.width,he.height,he.depth,0,Ce,je,he.data);else if(k.isData3DTexture)qe?(Zt&&t.texStorage3D(32879,Y,Ve,he.width,he.height,he.depth),t.texSubImage3D(32879,0,0,0,0,he.width,he.height,he.depth,Ce,je,he.data)):t.texImage3D(32879,0,Ve,he.width,he.height,he.depth,0,Ce,je,he.data);else if(k.isFramebufferTexture){if(Zt)if(qe)t.texStorage2D(3553,Y,Ve,he.width,he.height);else{let ye=he.width,be=he.height;for(let Ne=0;Ne<Y;Ne++)t.texImage2D(3553,Ne,Ve,ye,be,0,Ce,je,null),ye>>=1,be>>=1}}else if(Ct.length>0&&Pe){qe&&Zt&&t.texStorage2D(3553,Y,Ve,Ct[0].width,Ct[0].height);for(let ye=0,be=Ct.length;ye<be;ye++)Ze=Ct[ye],qe?t.texSubImage2D(3553,ye,0,0,Ce,je,Ze):t.texImage2D(3553,ye,Ve,Ce,je,Ze);k.generateMipmaps=!1}else qe?(Zt&&t.texStorage2D(3553,Y,Ve,he.width,he.height),t.texSubImage2D(3553,0,0,0,Ce,je,he)):t.texImage2D(3553,0,Ve,Ce,je,he);P(k,Pe)&&R(ge),De.__version=_e.version,k.onUpdate&&k.onUpdate(k)}B.__version=k.version}function it(B,k,fe){if(k.image.length!==6)return;const ge=J(B,k),pe=k.source;t.bindTexture(34067,B.__webglTexture,33984+fe);const _e=i.get(pe);if(pe.version!==_e.__version||ge===!0){t.activeTexture(33984+fe),n.pixelStorei(37440,k.flipY),n.pixelStorei(37441,k.premultiplyAlpha),n.pixelStorei(3317,k.unpackAlignment),n.pixelStorei(37443,0);const De=k.isCompressedTexture||k.image[0].isCompressedTexture,Fe=k.image[0]&&k.image[0].isDataTexture,he=[];for(let ye=0;ye<6;ye++)!De&&!Fe?he[ye]=S(k.image[ye],!1,!0,u):he[ye]=Fe?k.image[ye].image:k.image[ye],he[ye]=Tt(k,he[ye]);const Pe=he[0],Ce=T(Pe)||a,je=s.convert(k.format,k.encoding),Ve=s.convert(k.type),Ze=D(k.internalFormat,je,Ve,k.encoding),Ct=a&&k.isVideoTexture!==!0,qe=_e.__version===void 0||ge===!0;let Zt=C(k,Pe,Ce);we(34067,k,Ce);let Y;if(De){Ct&&qe&&t.texStorage2D(34067,Zt,Ze,Pe.width,Pe.height);for(let ye=0;ye<6;ye++){Y=he[ye].mipmaps;for(let be=0;be<Y.length;be++){const Ne=Y[be];k.format!==Dn?je!==null?Ct?t.compressedTexSubImage2D(34069+ye,be,0,0,Ne.width,Ne.height,je,Ne.data):t.compressedTexImage2D(34069+ye,be,Ze,Ne.width,Ne.height,0,Ne.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ct?t.texSubImage2D(34069+ye,be,0,0,Ne.width,Ne.height,je,Ve,Ne.data):t.texImage2D(34069+ye,be,Ze,Ne.width,Ne.height,0,je,Ve,Ne.data)}}}else{Y=k.mipmaps,Ct&&qe&&(Y.length>0&&Zt++,t.texStorage2D(34067,Zt,Ze,he[0].width,he[0].height));for(let ye=0;ye<6;ye++)if(Fe){Ct?t.texSubImage2D(34069+ye,0,0,0,he[ye].width,he[ye].height,je,Ve,he[ye].data):t.texImage2D(34069+ye,0,Ze,he[ye].width,he[ye].height,0,je,Ve,he[ye].data);for(let be=0;be<Y.length;be++){const tt=Y[be].image[ye].image;Ct?t.texSubImage2D(34069+ye,be+1,0,0,tt.width,tt.height,je,Ve,tt.data):t.texImage2D(34069+ye,be+1,Ze,tt.width,tt.height,0,je,Ve,tt.data)}}else{Ct?t.texSubImage2D(34069+ye,0,0,0,je,Ve,he[ye]):t.texImage2D(34069+ye,0,Ze,je,Ve,he[ye]);for(let be=0;be<Y.length;be++){const Ne=Y[be];Ct?t.texSubImage2D(34069+ye,be+1,0,0,je,Ve,Ne.image[ye]):t.texImage2D(34069+ye,be+1,Ze,je,Ve,Ne.image[ye])}}}P(k,Ce)&&R(34067),_e.__version=pe.version,k.onUpdate&&k.onUpdate(k)}B.__version=k.version}function Ee(B,k,fe,ge,pe){const _e=s.convert(fe.format,fe.encoding),De=s.convert(fe.type),Fe=D(fe.internalFormat,_e,De,fe.encoding);i.get(k).__hasExternalTextures||(pe===32879||pe===35866?t.texImage3D(pe,0,Fe,k.width,k.height,k.depth,0,_e,De,null):t.texImage2D(pe,0,Fe,k.width,k.height,0,_e,De,null)),t.bindFramebuffer(36160,B),Ue(k)?p.framebufferTexture2DMultisampleEXT(36160,ge,pe,i.get(fe).__webglTexture,0,et(k)):(pe===3553||pe>=34069&&pe<=34074)&&n.framebufferTexture2D(36160,ge,pe,i.get(fe).__webglTexture,0),t.bindFramebuffer(36160,null)}function Ie(B,k,fe){if(n.bindRenderbuffer(36161,B),k.depthBuffer&&!k.stencilBuffer){let ge=33189;if(fe||Ue(k)){const pe=k.depthTexture;pe&&pe.isDepthTexture&&(pe.type===Jn?ge=36012:pe.type===Ia&&(ge=33190));const _e=et(k);Ue(k)?p.renderbufferStorageMultisampleEXT(36161,_e,ge,k.width,k.height):n.renderbufferStorageMultisample(36161,_e,ge,k.width,k.height)}else n.renderbufferStorage(36161,ge,k.width,k.height);n.framebufferRenderbuffer(36160,36096,36161,B)}else if(k.depthBuffer&&k.stencilBuffer){const ge=et(k);fe&&Ue(k)===!1?n.renderbufferStorageMultisample(36161,ge,35056,k.width,k.height):Ue(k)?p.renderbufferStorageMultisampleEXT(36161,ge,35056,k.width,k.height):n.renderbufferStorage(36161,34041,k.width,k.height),n.framebufferRenderbuffer(36160,33306,36161,B)}else{const ge=k.isWebGLMultipleRenderTargets===!0?k.texture:[k.texture];for(let pe=0;pe<ge.length;pe++){const _e=ge[pe],De=s.convert(_e.format,_e.encoding),Fe=s.convert(_e.type),he=D(_e.internalFormat,De,Fe,_e.encoding),Pe=et(k);fe&&Ue(k)===!1?n.renderbufferStorageMultisample(36161,Pe,he,k.width,k.height):Ue(k)?p.renderbufferStorageMultisampleEXT(36161,Pe,he,k.width,k.height):n.renderbufferStorage(36161,he,k.width,k.height)}}n.bindRenderbuffer(36161,null)}function ce(B,k){if(k&&k.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,B),!(k.depthTexture&&k.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(k.depthTexture).__webglTexture||k.depthTexture.image.width!==k.width||k.depthTexture.image.height!==k.height)&&(k.depthTexture.image.width=k.width,k.depthTexture.image.height=k.height,k.depthTexture.needsUpdate=!0),I(k.depthTexture,0);const ge=i.get(k.depthTexture).__webglTexture,pe=et(k);if(k.depthTexture.format===jl)Ue(k)?p.framebufferTexture2DMultisampleEXT(36160,36096,3553,ge,0,pe):n.framebufferTexture2D(36160,36096,3553,ge,0);else if(k.depthTexture.format===ru)Ue(k)?p.framebufferTexture2DMultisampleEXT(36160,33306,3553,ge,0,pe):n.framebufferTexture2D(36160,33306,3553,ge,0);else throw new Error("Unknown depthTexture format")}function ae(B){const k=i.get(B),fe=B.isWebGLCubeRenderTarget===!0;if(B.depthTexture&&!k.__autoAllocateDepthBuffer){if(fe)throw new Error("target.depthTexture not supported in Cube render targets");ce(k.__webglFramebuffer,B)}else if(fe){k.__webglDepthbuffer=[];for(let ge=0;ge<6;ge++)t.bindFramebuffer(36160,k.__webglFramebuffer[ge]),k.__webglDepthbuffer[ge]=n.createRenderbuffer(),Ie(k.__webglDepthbuffer[ge],B,!1)}else t.bindFramebuffer(36160,k.__webglFramebuffer),k.__webglDepthbuffer=n.createRenderbuffer(),Ie(k.__webglDepthbuffer,B,!1);t.bindFramebuffer(36160,null)}function Me(B,k,fe){const ge=i.get(B);k!==void 0&&Ee(ge.__webglFramebuffer,B,B.texture,36064,3553),fe!==void 0&&ae(B)}function ze(B){const k=B.texture,fe=i.get(B),ge=i.get(k);B.addEventListener("dispose",H),B.isWebGLMultipleRenderTargets!==!0&&(ge.__webglTexture===void 0&&(ge.__webglTexture=n.createTexture()),ge.__version=k.version,o.memory.textures++);const pe=B.isWebGLCubeRenderTarget===!0,_e=B.isWebGLMultipleRenderTargets===!0,De=T(B)||a;if(pe){fe.__webglFramebuffer=[];for(let Fe=0;Fe<6;Fe++)fe.__webglFramebuffer[Fe]=n.createFramebuffer()}else{if(fe.__webglFramebuffer=n.createFramebuffer(),_e)if(r.drawBuffers){const Fe=B.texture;for(let he=0,Pe=Fe.length;he<Pe;he++){const Ce=i.get(Fe[he]);Ce.__webglTexture===void 0&&(Ce.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&B.samples>0&&Ue(B)===!1){const Fe=_e?k:[k];fe.__webglMultisampledFramebuffer=n.createFramebuffer(),fe.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,fe.__webglMultisampledFramebuffer);for(let he=0;he<Fe.length;he++){const Pe=Fe[he];fe.__webglColorRenderbuffer[he]=n.createRenderbuffer(),n.bindRenderbuffer(36161,fe.__webglColorRenderbuffer[he]);const Ce=s.convert(Pe.format,Pe.encoding),je=s.convert(Pe.type),Ve=D(Pe.internalFormat,Ce,je,Pe.encoding,B.isXRRenderTarget===!0),Ze=et(B);n.renderbufferStorageMultisample(36161,Ze,Ve,B.width,B.height),n.framebufferRenderbuffer(36160,36064+he,36161,fe.__webglColorRenderbuffer[he])}n.bindRenderbuffer(36161,null),B.depthBuffer&&(fe.__webglDepthRenderbuffer=n.createRenderbuffer(),Ie(fe.__webglDepthRenderbuffer,B,!0)),t.bindFramebuffer(36160,null)}}if(pe){t.bindTexture(34067,ge.__webglTexture),we(34067,k,De);for(let Fe=0;Fe<6;Fe++)Ee(fe.__webglFramebuffer[Fe],B,k,36064,34069+Fe);P(k,De)&&R(34067),t.unbindTexture()}else if(_e){const Fe=B.texture;for(let he=0,Pe=Fe.length;he<Pe;he++){const Ce=Fe[he],je=i.get(Ce);t.bindTexture(3553,je.__webglTexture),we(3553,Ce,De),Ee(fe.__webglFramebuffer,B,Ce,36064+he,3553),P(Ce,De)&&R(3553)}t.unbindTexture()}else{let Fe=3553;(B.isWebGL3DRenderTarget||B.isWebGLArrayRenderTarget)&&(a?Fe=B.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(Fe,ge.__webglTexture),we(Fe,k,De),Ee(fe.__webglFramebuffer,B,k,36064,Fe),P(k,De)&&R(Fe),t.unbindTexture()}B.depthBuffer&&ae(B)}function Re(B){const k=T(B)||a,fe=B.isWebGLMultipleRenderTargets===!0?B.texture:[B.texture];for(let ge=0,pe=fe.length;ge<pe;ge++){const _e=fe[ge];if(P(_e,k)){const De=B.isWebGLCubeRenderTarget?34067:3553,Fe=i.get(_e).__webglTexture;t.bindTexture(De,Fe),R(De),t.unbindTexture()}}}function $(B){if(a&&B.samples>0&&Ue(B)===!1){const k=B.isWebGLMultipleRenderTargets?B.texture:[B.texture],fe=B.width,ge=B.height;let pe=16384;const _e=[],De=B.stencilBuffer?33306:36096,Fe=i.get(B),he=B.isWebGLMultipleRenderTargets===!0;if(he)for(let Pe=0;Pe<k.length;Pe++)t.bindFramebuffer(36160,Fe.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+Pe,36161,null),t.bindFramebuffer(36160,Fe.__webglFramebuffer),n.framebufferTexture2D(36009,36064+Pe,3553,null,0);t.bindFramebuffer(36008,Fe.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,Fe.__webglFramebuffer);for(let Pe=0;Pe<k.length;Pe++){_e.push(36064+Pe),B.depthBuffer&&_e.push(De);const Ce=Fe.__ignoreDepthValues!==void 0?Fe.__ignoreDepthValues:!1;if(Ce===!1&&(B.depthBuffer&&(pe|=256),B.stencilBuffer&&(pe|=1024)),he&&n.framebufferRenderbuffer(36008,36064,36161,Fe.__webglColorRenderbuffer[Pe]),Ce===!0&&(n.invalidateFramebuffer(36008,[De]),n.invalidateFramebuffer(36009,[De])),he){const je=i.get(k[Pe]).__webglTexture;n.framebufferTexture2D(36009,36064,3553,je,0)}n.blitFramebuffer(0,0,fe,ge,0,0,fe,ge,pe,9728),m&&n.invalidateFramebuffer(36008,_e)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),he)for(let Pe=0;Pe<k.length;Pe++){t.bindFramebuffer(36160,Fe.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+Pe,36161,Fe.__webglColorRenderbuffer[Pe]);const Ce=i.get(k[Pe]).__webglTexture;t.bindFramebuffer(36160,Fe.__webglFramebuffer),n.framebufferTexture2D(36009,36064+Pe,3553,Ce,0)}t.bindFramebuffer(36009,Fe.__webglMultisampledFramebuffer)}}function et(B){return Math.min(d,B.samples)}function Ue(B){const k=i.get(B);return a&&B.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&k.__useRenderToTexture!==!1}function ft(B){const k=o.render.frame;g.get(B)!==k&&(g.set(B,k),B.update())}function Tt(B,k){const fe=B.encoding,ge=B.format,pe=B.type;return B.isCompressedTexture===!0||B.isVideoTexture===!0||B.format===P_||fe!==na&&(fe===an?a===!1?e.has("EXT_sRGB")===!0&&ge===Dn?(B.format=P_,B.minFilter=vt,B.generateMipmaps=!1):k=eC.sRGBToLinear(k):(ge!==Dn||pe!==xn)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",fe)),k}this.allocateTextureUnit=z,this.resetTextureUnits=Q,this.setTexture2D=I,this.setTexture2DArray=ee,this.setTexture3D=oe,this.setTextureCube=se,this.rebindTextures=Me,this.setupRenderTarget=ze,this.updateRenderTargetMipmap=Re,this.updateMultisampleRenderTarget=$,this.setupDepthRenderbuffer=ae,this.setupFrameBufferTexture=Ee,this.useMultisampledRTT=Ue}function xU(n,e,t){const i=t.isWebGL2;function r(s,o=null){let a;if(s===xn)return 5121;if(s===qN)return 32819;if(s===ZN)return 32820;if(s===jN)return 5120;if(s===XN)return 5122;if(s===qb)return 5123;if(s===YN)return 5124;if(s===Ia)return 5125;if(s===Jn)return 5126;if(s===ps)return i?5131:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===$N)return 6406;if(s===Dn)return 6408;if(s===Mx)return 6409;if(s===KN)return 6410;if(s===jl)return 6402;if(s===ru)return 34041;if(s===P_)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===Zb)return 6403;if(s===JN)return 36244;if(s===$b)return 33319;if(s===QN)return 33320;if(s===eU)return 36249;if(s===Ay||s===Ry||s===Dy||s===Ly)if(o===an)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===Ay)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===Ry)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===Dy)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===Ly)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===Ay)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===Ry)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===Dy)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===Ly)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===sT||s===oT||s===aT||s===lT)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===sT)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===oT)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===aT)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===lT)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===tU)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===uT||s===cT)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===uT)return o===an?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===cT)return o===an?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===fT||s===hT||s===dT||s===pT||s===mT||s===gT||s===vT||s===yT||s===_T||s===xT||s===ST||s===wT||s===MT||s===TT)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===fT)return o===an?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===hT)return o===an?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===dT)return o===an?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===pT)return o===an?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===mT)return o===an?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===gT)return o===an?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===vT)return o===an?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===yT)return o===an?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===_T)return o===an?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===xT)return o===an?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===ST)return o===an?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===wT)return o===an?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===MT)return o===an?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===TT)return o===an?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===Iy)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===Iy)return o===an?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(s===nU||s===ET||s===bT||s===CT)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(s===Iy)return a.COMPRESSED_RED_RGTC1_EXT;if(s===ET)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===bT)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===CT)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===Wl?i?34042:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):n[s]!==void 0?n[s]:null}return{convert:r}}class SU extends Nn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class uh extends rn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const TX={type:"move"};class tw{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new uh,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new uh,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new N,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new N),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new uh,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new N,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new N),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,u=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(u&&e.hand){o=!0;for(const y of e.hand.values()){const x=t.getJointPose(y,i),v=this._getHandJoint(u,y);x!==null&&(v.matrix.fromArray(x.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.jointRadius=x.radius),v.visible=x!==null}const f=u.joints["index-finger-tip"],d=u.joints["thumb-tip"],p=f.position.distanceTo(d.position),m=.02,g=.005;u.inputState.pinching&&p>m+g?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&p<=m-g&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(TX)))}return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=s!==null),u!==null&&(u.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new uh;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class Rx extends bn{constructor(e,t,i,r,s,o,a,l,u,f){if(f=f!==void 0?f:jl,f!==jl&&f!==ru)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&f===jl&&(i=Ia),i===void 0&&f===ru&&(i=Wl),super(null,r,s,o,a,l,f,i,u),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:Ht,this.minFilter=l!==void 0?l:Ht,this.flipY=!1,this.generateMipmaps=!1}}class EX extends eo{constructor(e,t){super();const i=this;let r=null,s=1,o=null,a="local-floor",l=1,u=null,f=null,d=null,p=null,m=null,g=null;const y=t.getContextAttributes();let x=null,v=null;const w=[],S=[],T=new Set,b=new Map,P=new Nn;P.layers.enable(1),P.viewport=new Gt;const R=new Nn;R.layers.enable(2),R.viewport=new Gt;const D=[P,R],C=new SU;C.layers.enable(1),C.layers.enable(2);let L=null,F=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(se){let te=w[se];return te===void 0&&(te=new tw,w[se]=te),te.getTargetRaySpace()},this.getControllerGrip=function(se){let te=w[se];return te===void 0&&(te=new tw,w[se]=te),te.getGripSpace()},this.getHand=function(se){let te=w[se];return te===void 0&&(te=new tw,w[se]=te),te.getHandSpace()};function H(se){const te=S.indexOf(se.inputSource);if(te===-1)return;const Te=w[te];Te!==void 0&&Te.dispatchEvent({type:se.type,data:se.inputSource})}function G(){r.removeEventListener("select",H),r.removeEventListener("selectstart",H),r.removeEventListener("selectend",H),r.removeEventListener("squeeze",H),r.removeEventListener("squeezestart",H),r.removeEventListener("squeezeend",H),r.removeEventListener("end",G),r.removeEventListener("inputsourceschange",W);for(let se=0;se<w.length;se++){const te=S[se];te!==null&&(S[se]=null,w[se].disconnect(te))}L=null,F=null,e.setRenderTarget(x),m=null,p=null,d=null,r=null,v=null,oe.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(se){s=se,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(se){a=se,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||o},this.setReferenceSpace=function(se){u=se},this.getBaseLayer=function(){return p!==null?p:m},this.getBinding=function(){return d},this.getFrame=function(){return g},this.getSession=function(){return r},this.setSession=async function(se){if(r=se,r!==null){if(x=e.getRenderTarget(),r.addEventListener("select",H),r.addEventListener("selectstart",H),r.addEventListener("selectend",H),r.addEventListener("squeeze",H),r.addEventListener("squeezestart",H),r.addEventListener("squeezeend",H),r.addEventListener("end",G),r.addEventListener("inputsourceschange",W),y.xrCompatible!==!0&&await t.makeXRCompatible(),r.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const te={antialias:r.renderState.layers===void 0?y.antialias:!0,alpha:y.alpha,depth:y.depth,stencil:y.stencil,framebufferScaleFactor:s};m=new XRWebGLLayer(r,t,te),r.updateRenderState({baseLayer:m}),v=new qt(m.framebufferWidth,m.framebufferHeight,{format:Dn,type:xn,encoding:e.outputEncoding,stencilBuffer:y.stencil})}else{let te=null,Te=null,we=null;y.depth&&(we=y.stencil?35056:33190,te=y.stencil?ru:jl,Te=y.stencil?Wl:Ia);const J={colorFormat:32856,depthFormat:we,scaleFactor:s};d=new XRWebGLBinding(r,t),p=d.createProjectionLayer(J),r.updateRenderState({layers:[p]}),v=new qt(p.textureWidth,p.textureHeight,{format:Dn,type:xn,depthTexture:new Rx(p.textureWidth,p.textureHeight,Te,void 0,void 0,void 0,void 0,void 0,void 0,te),stencilBuffer:y.stencil,encoding:e.outputEncoding,samples:y.antialias?4:0});const Xe=e.properties.get(v);Xe.__ignoreDepthValues=p.ignoreDepthValues}v.isXRRenderTarget=!0,this.setFoveation(l),u=null,o=await r.requestReferenceSpace(a),oe.setContext(r),oe.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}};function W(se){for(let te=0;te<se.removed.length;te++){const Te=se.removed[te],we=S.indexOf(Te);we>=0&&(S[we]=null,w[we].disconnect(Te))}for(let te=0;te<se.added.length;te++){const Te=se.added[te];let we=S.indexOf(Te);if(we===-1){for(let Xe=0;Xe<w.length;Xe++)if(Xe>=S.length){S.push(Te),we=Xe;break}else if(S[Xe]===null){S[Xe]=Te,we=Xe;break}if(we===-1)break}const J=w[we];J&&J.connect(Te)}}const X=new N,re=new N;function Q(se,te,Te){X.setFromMatrixPosition(te.matrixWorld),re.setFromMatrixPosition(Te.matrixWorld);const we=X.distanceTo(re),J=te.projectionMatrix.elements,Xe=Te.projectionMatrix.elements,it=J[14]/(J[10]-1),Ee=J[14]/(J[10]+1),Ie=(J[9]+1)/J[5],ce=(J[9]-1)/J[5],ae=(J[8]-1)/J[0],Me=(Xe[8]+1)/Xe[0],ze=it*ae,Re=it*Me,$=we/(-ae+Me),et=$*-ae;te.matrixWorld.decompose(se.position,se.quaternion,se.scale),se.translateX(et),se.translateZ($),se.matrixWorld.compose(se.position,se.quaternion,se.scale),se.matrixWorldInverse.copy(se.matrixWorld).invert();const Ue=it+$,ft=Ee+$,Tt=ze-et,B=Re+(we-et),k=Ie*Ee/ft*Ue,fe=ce*Ee/ft*Ue;se.projectionMatrix.makePerspective(Tt,B,k,fe,Ue,ft),se.projectionMatrixInverse.copy(se.projectionMatrix).invert()}function z(se,te){te===null?se.matrixWorld.copy(se.matrix):se.matrixWorld.multiplyMatrices(te.matrixWorld,se.matrix),se.matrixWorldInverse.copy(se.matrixWorld).invert()}this.updateCamera=function(se){if(r===null)return;C.near=R.near=P.near=se.near,C.far=R.far=P.far=se.far,(L!==C.near||F!==C.far)&&(r.updateRenderState({depthNear:C.near,depthFar:C.far}),L=C.near,F=C.far);const te=se.parent,Te=C.cameras;z(C,te);for(let we=0;we<Te.length;we++)z(Te[we],te);Te.length===2?Q(C,P,R):C.projectionMatrix.copy(P.projectionMatrix),j(se,C,te)};function j(se,te,Te){Te===null?se.matrix.copy(te.matrixWorld):(se.matrix.copy(Te.matrixWorld),se.matrix.invert(),se.matrix.multiply(te.matrixWorld)),se.matrix.decompose(se.position,se.quaternion,se.scale),se.updateMatrixWorld(!0);const we=se.children;for(let J=0,Xe=we.length;J<Xe;J++)we[J].updateMatrixWorld(!0);se.projectionMatrix.copy(te.projectionMatrix),se.projectionMatrixInverse.copy(te.projectionMatrixInverse),se.isPerspectiveCamera&&(se.fov=Wh*2*Math.atan(1/se.projectionMatrix.elements[5]),se.zoom=1)}this.getCamera=function(){return C},this.getFoveation=function(){if(!(p===null&&m===null))return l},this.setFoveation=function(se){l=se,p!==null&&(p.fixedFoveation=se),m!==null&&m.fixedFoveation!==void 0&&(m.fixedFoveation=se)},this.getPlanes=function(){return T};let I=null;function ee(se,te){if(f=te.getViewerPose(u||o),g=te,f!==null){const Te=f.views;m!==null&&(e.setRenderTargetFramebuffer(v,m.framebuffer),e.setRenderTarget(v));let we=!1;Te.length!==C.cameras.length&&(C.cameras.length=0,we=!0);for(let J=0;J<Te.length;J++){const Xe=Te[J];let it=null;if(m!==null)it=m.getViewport(Xe);else{const Ie=d.getViewSubImage(p,Xe);it=Ie.viewport,J===0&&(e.setRenderTargetTextures(v,Ie.colorTexture,p.ignoreDepthValues?void 0:Ie.depthStencilTexture),e.setRenderTarget(v))}let Ee=D[J];Ee===void 0&&(Ee=new Nn,Ee.layers.enable(J),Ee.viewport=new Gt,D[J]=Ee),Ee.matrix.fromArray(Xe.transform.matrix),Ee.matrix.decompose(Ee.position,Ee.quaternion,Ee.scale),Ee.projectionMatrix.fromArray(Xe.projectionMatrix),Ee.projectionMatrixInverse.copy(Ee.projectionMatrix).invert(),Ee.viewport.set(it.x,it.y,it.width,it.height),J===0&&(C.matrix.copy(Ee.matrix),C.matrix.decompose(C.position,C.quaternion,C.scale)),we===!0&&C.cameras.push(Ee)}}for(let Te=0;Te<w.length;Te++){const we=S[Te],J=w[Te];we!==null&&J!==void 0&&J.update(we,te,u||o)}if(I&&I(se,te),te.detectedPlanes){i.dispatchEvent({type:"planesdetected",data:te.detectedPlanes});let Te=null;for(const we of T)te.detectedPlanes.has(we)||(Te===null&&(Te=[]),Te.push(we));if(Te!==null)for(const we of Te)T.delete(we),b.delete(we),i.dispatchEvent({type:"planeremoved",data:we});for(const we of te.detectedPlanes)if(!T.has(we))T.add(we),b.set(we,te.lastChangedTime),i.dispatchEvent({type:"planeadded",data:we});else{const J=b.get(we);we.lastChangedTime>J&&(b.set(we,we.lastChangedTime),i.dispatchEvent({type:"planechanged",data:we}))}}g=null}const oe=new mU;oe.setAnimationLoop(ee),this.setAnimationLoop=function(se){I=se},this.dispose=function(){}}}function bX(n,e){function t(x,v){x.matrixAutoUpdate===!0&&x.updateMatrix(),v.value.copy(x.matrix)}function i(x,v){v.color.getRGB(x.fogColor.value,dU(n)),v.isFog?(x.fogNear.value=v.near,x.fogFar.value=v.far):v.isFogExp2&&(x.fogDensity.value=v.density)}function r(x,v,w,S,T){v.isMeshBasicMaterial||v.isMeshLambertMaterial?s(x,v):v.isMeshToonMaterial?(s(x,v),d(x,v)):v.isMeshPhongMaterial?(s(x,v),f(x,v)):v.isMeshStandardMaterial?(s(x,v),p(x,v),v.isMeshPhysicalMaterial&&m(x,v,T)):v.isMeshMatcapMaterial?(s(x,v),g(x,v)):v.isMeshDepthMaterial?s(x,v):v.isMeshDistanceMaterial?(s(x,v),y(x,v)):v.isMeshNormalMaterial?s(x,v):v.isLineBasicMaterial?(o(x,v),v.isLineDashedMaterial&&a(x,v)):v.isPointsMaterial?l(x,v,w,S):v.isSpriteMaterial?u(x,v):v.isShadowMaterial?(x.color.value.copy(v.color),x.opacity.value=v.opacity):v.isShaderMaterial&&(v.uniformsNeedUpdate=!1)}function s(x,v){x.opacity.value=v.opacity,v.color&&x.diffuse.value.copy(v.color),v.emissive&&x.emissive.value.copy(v.emissive).multiplyScalar(v.emissiveIntensity),v.map&&(x.map.value=v.map,t(v.map,x.mapTransform)),v.alphaMap&&(x.alphaMap.value=v.alphaMap,t(v.alphaMap,x.alphaMapTransform)),v.bumpMap&&(x.bumpMap.value=v.bumpMap,t(v.bumpMap,x.bumpMapTransform),x.bumpScale.value=v.bumpScale,v.side===yi&&(x.bumpScale.value*=-1)),v.normalMap&&(x.normalMap.value=v.normalMap,t(v.normalMap,x.normalMapTransform),x.normalScale.value.copy(v.normalScale),v.side===yi&&x.normalScale.value.negate()),v.displacementMap&&(x.displacementMap.value=v.displacementMap,t(v.displacementMap,x.displacementMapTransform),x.displacementScale.value=v.displacementScale,x.displacementBias.value=v.displacementBias),v.emissiveMap&&(x.emissiveMap.value=v.emissiveMap,t(v.emissiveMap,x.emissiveMapTransform)),v.specularMap&&(x.specularMap.value=v.specularMap,t(v.specularMap,x.specularMapTransform)),v.alphaTest>0&&(x.alphaTest.value=v.alphaTest);const w=e.get(v).envMap;if(w&&(x.envMap.value=w,x.flipEnvMap.value=w.isCubeTexture&&w.isRenderTargetTexture===!1?-1:1,x.reflectivity.value=v.reflectivity,x.ior.value=v.ior,x.refractionRatio.value=v.refractionRatio),v.lightMap){x.lightMap.value=v.lightMap;const S=n.useLegacyLights===!0?Math.PI:1;x.lightMapIntensity.value=v.lightMapIntensity*S,t(v.lightMap,x.lightMapTransform)}v.aoMap&&(x.aoMap.value=v.aoMap,x.aoMapIntensity.value=v.aoMapIntensity,t(v.aoMap,x.aoMapTransform))}function o(x,v){x.diffuse.value.copy(v.color),x.opacity.value=v.opacity,v.map&&(x.map.value=v.map,t(v.map,x.mapTransform))}function a(x,v){x.dashSize.value=v.dashSize,x.totalSize.value=v.dashSize+v.gapSize,x.scale.value=v.scale}function l(x,v,w,S){x.diffuse.value.copy(v.color),x.opacity.value=v.opacity,x.size.value=v.size*w,x.scale.value=S*.5,v.map&&(x.map.value=v.map,t(v.map,x.uvTransform)),v.alphaMap&&(x.alphaMap.value=v.alphaMap),v.alphaTest>0&&(x.alphaTest.value=v.alphaTest)}function u(x,v){x.diffuse.value.copy(v.color),x.opacity.value=v.opacity,x.rotation.value=v.rotation,v.map&&(x.map.value=v.map,t(v.map,x.mapTransform)),v.alphaMap&&(x.alphaMap.value=v.alphaMap),v.alphaTest>0&&(x.alphaTest.value=v.alphaTest)}function f(x,v){x.specular.value.copy(v.specular),x.shininess.value=Math.max(v.shininess,1e-4)}function d(x,v){v.gradientMap&&(x.gradientMap.value=v.gradientMap)}function p(x,v){x.metalness.value=v.metalness,v.metalnessMap&&(x.metalnessMap.value=v.metalnessMap,t(v.metalnessMap,x.metalnessMapTransform)),x.roughness.value=v.roughness,v.roughnessMap&&(x.roughnessMap.value=v.roughnessMap,t(v.roughnessMap,x.roughnessMapTransform)),e.get(v).envMap&&(x.envMapIntensity.value=v.envMapIntensity)}function m(x,v,w){x.ior.value=v.ior,v.sheen>0&&(x.sheenColor.value.copy(v.sheenColor).multiplyScalar(v.sheen),x.sheenRoughness.value=v.sheenRoughness,v.sheenColorMap&&(x.sheenColorMap.value=v.sheenColorMap,t(v.sheenColorMap,x.sheenColorMapTransform)),v.sheenRoughnessMap&&(x.sheenRoughnessMap.value=v.sheenRoughnessMap,t(v.sheenRoughnessMap,x.sheenRoughnessMapTransform))),v.clearcoat>0&&(x.clearcoat.value=v.clearcoat,x.clearcoatRoughness.value=v.clearcoatRoughness,v.clearcoatMap&&(x.clearcoatMap.value=v.clearcoatMap,t(v.clearcoatMap,x.clearcoatMapTransform)),v.clearcoatRoughnessMap&&(x.clearcoatRoughnessMap.value=v.clearcoatRoughnessMap,t(v.clearcoatRoughnessMap,x.clearcoatRoughnessMapTransform)),v.clearcoatNormalMap&&(x.clearcoatNormalMap.value=v.clearcoatNormalMap,t(v.clearcoatNormalMap,x.clearcoatNormalMapTransform),x.clearcoatNormalScale.value.copy(v.clearcoatNormalScale),v.side===yi&&x.clearcoatNormalScale.value.negate())),v.iridescence>0&&(x.iridescence.value=v.iridescence,x.iridescenceIOR.value=v.iridescenceIOR,x.iridescenceThicknessMinimum.value=v.iridescenceThicknessRange[0],x.iridescenceThicknessMaximum.value=v.iridescenceThicknessRange[1],v.iridescenceMap&&(x.iridescenceMap.value=v.iridescenceMap,t(v.iridescenceMap,x.iridescenceMapTransform)),v.iridescenceThicknessMap&&(x.iridescenceThicknessMap.value=v.iridescenceThicknessMap,t(v.iridescenceThicknessMap,x.iridescenceThicknessMapTransform))),v.transmission>0&&(x.transmission.value=v.transmission,x.transmissionSamplerMap.value=w.texture,x.transmissionSamplerSize.value.set(w.width,w.height),v.transmissionMap&&(x.transmissionMap.value=v.transmissionMap,t(v.transmissionMap,x.transmissionMapTransform)),x.thickness.value=v.thickness,v.thicknessMap&&(x.thicknessMap.value=v.thicknessMap,t(v.thicknessMap,x.thicknessMapTransform)),x.attenuationDistance.value=v.attenuationDistance,x.attenuationColor.value.copy(v.attenuationColor)),x.specularIntensity.value=v.specularIntensity,x.specularColor.value.copy(v.specularColor),v.specularColorMap&&(x.specularColorMap.value=v.specularColorMap,t(v.specularColorMap,x.specularColorMapTransform)),v.specularIntensityMap&&(x.specularIntensityMap.value=v.specularIntensityMap,t(v.specularIntensityMap,x.specularIntensityMapTransform))}function g(x,v){v.matcap&&(x.matcap.value=v.matcap)}function y(x,v){const w=e.get(v).light;x.referencePosition.value.setFromMatrixPosition(w.matrixWorld),x.nearDistance.value=w.shadow.camera.near,x.farDistance.value=w.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function CX(n,e,t,i){let r={},s={},o=[];const a=t.isWebGL2?n.getParameter(35375):0;function l(w,S){const T=S.program;i.uniformBlockBinding(w,T)}function u(w,S){let T=r[w.id];T===void 0&&(g(w),T=f(w),r[w.id]=T,w.addEventListener("dispose",x));const b=S.program;i.updateUBOMapping(w,b);const P=e.render.frame;s[w.id]!==P&&(p(w),s[w.id]=P)}function f(w){const S=d();w.__bindingPointIndex=S;const T=n.createBuffer(),b=w.__size,P=w.usage;return n.bindBuffer(35345,T),n.bufferData(35345,b,P),n.bindBuffer(35345,null),n.bindBufferBase(35345,S,T),T}function d(){for(let w=0;w<a;w++)if(o.indexOf(w)===-1)return o.push(w),w;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function p(w){const S=r[w.id],T=w.uniforms,b=w.__cache;n.bindBuffer(35345,S);for(let P=0,R=T.length;P<R;P++){const D=T[P];if(m(D,P,b)===!0){const C=D.__offset,L=Array.isArray(D.value)?D.value:[D.value];let F=0;for(let H=0;H<L.length;H++){const G=L[H],W=y(G);typeof G=="number"?(D.__data[0]=G,n.bufferSubData(35345,C+F,D.__data)):G.isMatrix3?(D.__data[0]=G.elements[0],D.__data[1]=G.elements[1],D.__data[2]=G.elements[2],D.__data[3]=G.elements[0],D.__data[4]=G.elements[3],D.__data[5]=G.elements[4],D.__data[6]=G.elements[5],D.__data[7]=G.elements[0],D.__data[8]=G.elements[6],D.__data[9]=G.elements[7],D.__data[10]=G.elements[8],D.__data[11]=G.elements[0]):(G.toArray(D.__data,F),F+=W.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(35345,C,D.__data)}}n.bindBuffer(35345,null)}function m(w,S,T){const b=w.value;if(T[S]===void 0){if(typeof b=="number")T[S]=b;else{const P=Array.isArray(b)?b:[b],R=[];for(let D=0;D<P.length;D++)R.push(P[D].clone());T[S]=R}return!0}else if(typeof b=="number"){if(T[S]!==b)return T[S]=b,!0}else{const P=Array.isArray(T[S])?T[S]:[T[S]],R=Array.isArray(b)?b:[b];for(let D=0;D<P.length;D++){const C=P[D];if(C.equals(R[D])===!1)return C.copy(R[D]),!0}}return!1}function g(w){const S=w.uniforms;let T=0;const b=16;let P=0;for(let R=0,D=S.length;R<D;R++){const C=S[R],L={boundary:0,storage:0},F=Array.isArray(C.value)?C.value:[C.value];for(let H=0,G=F.length;H<G;H++){const W=F[H],X=y(W);L.boundary+=X.boundary,L.storage+=X.storage}if(C.__data=new Float32Array(L.storage/Float32Array.BYTES_PER_ELEMENT),C.__offset=T,R>0){P=T%b;const H=b-P;P!==0&&H-L.boundary<0&&(T+=b-P,C.__offset=T)}T+=L.storage}return P=T%b,P>0&&(T+=b-P),w.__size=T,w.__cache={},this}function y(w){const S={boundary:0,storage:0};return typeof w=="number"?(S.boundary=4,S.storage=4):w.isVector2?(S.boundary=8,S.storage=8):w.isVector3||w.isColor?(S.boundary=16,S.storage=12):w.isVector4?(S.boundary=16,S.storage=16):w.isMatrix3?(S.boundary=48,S.storage=48):w.isMatrix4?(S.boundary=64,S.storage=64):w.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",w),S}function x(w){const S=w.target;S.removeEventListener("dispose",x);const T=o.indexOf(S.__bindingPointIndex);o.splice(T,1),n.deleteBuffer(r[S.id]),delete r[S.id],delete s[S.id]}function v(){for(const w in r)n.deleteBuffer(r[w]);o=[],r={},s={}}return{bind:l,update:u,dispose:v}}function PX(){const n=Gm("canvas");return n.style.display="block",n}class sC{constructor(e={}){const{canvas:t=PX(),context:i=null,depth:r=!0,stencil:s=!0,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:u=!1,powerPreference:f="default",failIfMajorPerformanceCaveat:d=!1}=e;this.isWebGLRenderer=!0;let p;i!==null?p=i.getContextAttributes().alpha:p=o;let m=null,g=null;const y=[],x=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=na,this.useLegacyLights=!0,this.toneMapping=Eo,this.toneMappingExposure=1;const v=this;let w=!1,S=0,T=0,b=null,P=-1,R=null;const D=new Gt,C=new Gt;let L=null,F=t.width,H=t.height,G=1,W=null,X=null;const re=new Gt(0,0,F,H),Q=new Gt(0,0,F,H);let z=!1;const j=new Cx;let I=!1,ee=!1,oe=null;const se=new mt,te=new N,Te={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function we(){return b===null?G:1}let J=i;function Xe(U,ne){for(let me=0;me<U.length;me++){const Z=U[me],xe=t.getContext(Z,ne);if(xe!==null)return xe}return null}try{const U={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:f,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Wc}`),t.addEventListener("webglcontextlost",Ze,!1),t.addEventListener("webglcontextrestored",Ct,!1),t.addEventListener("webglcontextcreationerror",qe,!1),J===null){const ne=["webgl2","webgl","experimental-webgl"];if(v.isWebGL1Renderer===!0&&ne.shift(),J=Xe(ne,U),J===null)throw Xe(ne)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}J.getShaderPrecisionFormat===void 0&&(J.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(U){throw console.error("THREE.WebGLRenderer: "+U.message),U}let it,Ee,Ie,ce,ae,Me,ze,Re,$,et,Ue,ft,Tt,B,k,fe,ge,pe,_e,De,Fe,he,Pe,Ce;function je(){it=new W7(J),Ee=new F7(J,it,e),it.init(Ee),he=new xU(J,it,Ee),Ie=new wX(J,it,Ee),ce=new Y7,ae=new cX,Me=new MX(J,it,Ie,ae,Ee,he,ce),ze=new B7(v),Re=new G7(v),$=new s8(J,Ee),Pe=new N7(J,it,$,Ee),et=new j7(J,$,ce,Pe),Ue=new K7(J,et,$,ce),_e=new $7(J,Ee,Me),fe=new z7(ae),ft=new uX(v,ze,Re,it,Ee,Pe,fe),Tt=new bX(v,ae),B=new hX,k=new yX(it,Ee),pe=new O7(v,ze,Re,Ie,Ue,p,l),ge=new SX(v,Ue,Ee),Ce=new CX(J,ce,Ee,Ie),De=new U7(J,it,ce,Ee),Fe=new X7(J,it,ce,Ee),ce.programs=ft.programs,v.capabilities=Ee,v.extensions=it,v.properties=ae,v.renderLists=B,v.shadowMap=ge,v.state=Ie,v.info=ce}je();const Ve=new EX(v,J);this.xr=Ve,this.getContext=function(){return J},this.getContextAttributes=function(){return J.getContextAttributes()},this.forceContextLoss=function(){const U=it.get("WEBGL_lose_context");U&&U.loseContext()},this.forceContextRestore=function(){const U=it.get("WEBGL_lose_context");U&&U.restoreContext()},this.getPixelRatio=function(){return G},this.setPixelRatio=function(U){U!==void 0&&(G=U,this.setSize(F,H,!1))},this.getSize=function(U){return U.set(F,H)},this.setSize=function(U,ne,me=!0){if(Ve.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}F=U,H=ne,t.width=Math.floor(U*G),t.height=Math.floor(ne*G),me===!0&&(t.style.width=U+"px",t.style.height=ne+"px"),this.setViewport(0,0,U,ne)},this.getDrawingBufferSize=function(U){return U.set(F*G,H*G).floor()},this.setDrawingBufferSize=function(U,ne,me){F=U,H=ne,G=me,t.width=Math.floor(U*me),t.height=Math.floor(ne*me),this.setViewport(0,0,U,ne)},this.getCurrentViewport=function(U){return U.copy(D)},this.getViewport=function(U){return U.copy(re)},this.setViewport=function(U,ne,me,Z){U.isVector4?re.set(U.x,U.y,U.z,U.w):re.set(U,ne,me,Z),Ie.viewport(D.copy(re).multiplyScalar(G).floor())},this.getScissor=function(U){return U.copy(Q)},this.setScissor=function(U,ne,me,Z){U.isVector4?Q.set(U.x,U.y,U.z,U.w):Q.set(U,ne,me,Z),Ie.scissor(C.copy(Q).multiplyScalar(G).floor())},this.getScissorTest=function(){return z},this.setScissorTest=function(U){Ie.setScissorTest(z=U)},this.setOpaqueSort=function(U){W=U},this.setTransparentSort=function(U){X=U},this.getClearColor=function(U){return U.copy(pe.getClearColor())},this.setClearColor=function(){pe.setClearColor.apply(pe,arguments)},this.getClearAlpha=function(){return pe.getClearAlpha()},this.setClearAlpha=function(){pe.setClearAlpha.apply(pe,arguments)},this.clear=function(U=!0,ne=!0,me=!0){let Z=0;U&&(Z|=16384),ne&&(Z|=256),me&&(Z|=1024),J.clear(Z)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Ze,!1),t.removeEventListener("webglcontextrestored",Ct,!1),t.removeEventListener("webglcontextcreationerror",qe,!1),B.dispose(),k.dispose(),ae.dispose(),ze.dispose(),Re.dispose(),Ue.dispose(),Pe.dispose(),Ce.dispose(),ft.dispose(),Ve.dispose(),Ve.removeEventListener("sessionstart",tt),Ve.removeEventListener("sessionend",Xt),oe&&(oe.dispose(),oe=null),zt.stop()};function Ze(U){U.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),w=!0}function Ct(){console.log("THREE.WebGLRenderer: Context Restored."),w=!1;const U=ce.autoReset,ne=ge.enabled,me=ge.autoUpdate,Z=ge.needsUpdate,xe=ge.type;je(),ce.autoReset=U,ge.enabled=ne,ge.autoUpdate=me,ge.needsUpdate=Z,ge.type=xe}function qe(U){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",U.statusMessage)}function Zt(U){const ne=U.target;ne.removeEventListener("dispose",Zt),Y(ne)}function Y(U){ye(U),ae.remove(U)}function ye(U){const ne=ae.get(U).programs;ne!==void 0&&(ne.forEach(function(me){ft.releaseProgram(me)}),U.isShaderMaterial&&ft.releaseShaderCache(U))}this.renderBufferDirect=function(U,ne,me,Z,xe,Ye){ne===null&&(ne=Te);const Ke=xe.isMesh&&xe.matrixWorld.determinant()<0,$e=Ln(U,ne,me,Z,xe);Ie.setMaterial(Z,Ke);let at=me.index,Et=1;Z.wireframe===!0&&(at=et.getWireframeAttribute(me),Et=2);const Mt=me.drawRange,lt=me.attributes.position;let _t=Mt.start*Et,hn=(Mt.start+Mt.count)*Et;Ye!==null&&(_t=Math.max(_t,Ye.start*Et),hn=Math.min(hn,(Ye.start+Ye.count)*Et)),at!==null?(_t=Math.max(_t,0),hn=Math.min(hn,at.count)):lt!=null&&(_t=Math.max(_t,0),hn=Math.min(hn,lt.count));const Ui=hn-_t;if(Ui<0||Ui===1/0)return;Pe.setup(xe,Z,$e,me,at);let Cr,Jt=De;if(at!==null&&(Cr=$.get(at),Jt=Fe,Jt.setIndex(Cr)),xe.isMesh)Z.wireframe===!0?(Ie.setLineWidth(Z.wireframeLinewidth*we()),Jt.setMode(1)):Jt.setMode(4);else if(xe.isLine){let xt=Z.linewidth;xt===void 0&&(xt=1),Ie.setLineWidth(xt*we()),xe.isLineSegments?Jt.setMode(1):xe.isLineLoop?Jt.setMode(2):Jt.setMode(3)}else xe.isPoints?Jt.setMode(0):xe.isSprite&&Jt.setMode(4);if(xe.isInstancedMesh)Jt.renderInstances(_t,Ui,xe.count);else if(me.isInstancedBufferGeometry){const xt=me._maxInstanceCount!==void 0?me._maxInstanceCount:1/0,Kr=Math.min(me.instanceCount,xt);Jt.renderInstances(_t,Ui,Kr)}else Jt.render(_t,Ui)},this.compile=function(U,ne){function me(Z,xe,Ye){Z.transparent===!0&&Z.side===zr&&Z.forceSinglePass===!1?(Z.side=yi,Z.needsUpdate=!0,ht(Z,xe,Ye),Z.side=ta,Z.needsUpdate=!0,ht(Z,xe,Ye),Z.side=zr):ht(Z,xe,Ye)}g=k.get(U),g.init(),x.push(g),U.traverseVisible(function(Z){Z.isLight&&Z.layers.test(ne.layers)&&(g.pushLight(Z),Z.castShadow&&g.pushShadow(Z))}),g.setupLights(v.useLegacyLights),U.traverse(function(Z){const xe=Z.material;if(xe)if(Array.isArray(xe))for(let Ye=0;Ye<xe.length;Ye++){const Ke=xe[Ye];me(Ke,U,Z)}else me(xe,U,Z)}),x.pop(),g=null};let be=null;function Ne(U){be&&be(U)}function tt(){zt.stop()}function Xt(){zt.start()}const zt=new mU;zt.setAnimationLoop(Ne),typeof self<"u"&&zt.setContext(self),this.setAnimationLoop=function(U){be=U,Ve.setAnimationLoop(U),U===null?zt.stop():zt.start()},Ve.addEventListener("sessionstart",tt),Ve.addEventListener("sessionend",Xt),this.render=function(U,ne){if(ne!==void 0&&ne.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(w===!0)return;U.matrixWorldAutoUpdate===!0&&U.updateMatrixWorld(),ne.parent===null&&ne.matrixWorldAutoUpdate===!0&&ne.updateMatrixWorld(),Ve.enabled===!0&&Ve.isPresenting===!0&&(Ve.cameraAutoUpdate===!0&&Ve.updateCamera(ne),ne=Ve.getCamera()),U.isScene===!0&&U.onBeforeRender(v,U,ne,b),g=k.get(U,x.length),g.init(),x.push(g),se.multiplyMatrices(ne.projectionMatrix,ne.matrixWorldInverse),j.setFromProjectionMatrix(se),ee=this.localClippingEnabled,I=fe.init(this.clippingPlanes,ee),m=B.get(U,y.length),m.init(),y.push(m),Cn(U,ne,0,v.sortObjects),m.finish(),v.sortObjects===!0&&m.sort(W,X),I===!0&&fe.beginShadows();const me=g.state.shadowsArray;if(ge.render(me,U,ne),I===!0&&fe.endShadows(),this.info.autoReset===!0&&this.info.reset(),pe.render(m,U),g.setupLights(v.useLegacyLights),ne.isArrayCamera){const Z=ne.cameras;for(let xe=0,Ye=Z.length;xe<Ye;xe++){const Ke=Z[xe];dt(m,U,Ke,Ke.viewport)}}else dt(m,U,ne);b!==null&&(Me.updateMultisampleRenderTarget(b),Me.updateRenderTargetMipmap(b)),U.isScene===!0&&U.onAfterRender(v,U,ne),Pe.resetDefaultState(),P=-1,R=null,x.pop(),x.length>0?g=x[x.length-1]:g=null,y.pop(),y.length>0?m=y[y.length-1]:m=null};function Cn(U,ne,me,Z){if(U.visible===!1)return;if(U.layers.test(ne.layers)){if(U.isGroup)me=U.renderOrder;else if(U.isLOD)U.autoUpdate===!0&&U.update(ne);else if(U.isLight)g.pushLight(U),U.castShadow&&g.pushShadow(U);else if(U.isSprite){if(!U.frustumCulled||j.intersectsSprite(U)){Z&&te.setFromMatrixPosition(U.matrixWorld).applyMatrix4(se);const Ke=Ue.update(U),$e=U.material;$e.visible&&m.push(U,Ke,$e,me,te.z,null)}}else if((U.isMesh||U.isLine||U.isPoints)&&(U.isSkinnedMesh&&U.skeleton.frame!==ce.render.frame&&(U.skeleton.update(),U.skeleton.frame=ce.render.frame),!U.frustumCulled||j.intersectsObject(U))){Z&&te.setFromMatrixPosition(U.matrixWorld).applyMatrix4(se);const Ke=Ue.update(U),$e=U.material;if(Array.isArray($e)){const at=Ke.groups;for(let Et=0,Mt=at.length;Et<Mt;Et++){const lt=at[Et],_t=$e[lt.materialIndex];_t&&_t.visible&&m.push(U,Ke,_t,me,te.z,lt)}}else $e.visible&&m.push(U,Ke,$e,me,te.z,null)}}const Ye=U.children;for(let Ke=0,$e=Ye.length;Ke<$e;Ke++)Cn(Ye[Ke],ne,me,Z)}function dt(U,ne,me,Z){const xe=U.opaque,Ye=U.transmissive,Ke=U.transparent;g.setupLightsView(me),I===!0&&fe.setGlobalState(v.clippingPlanes,me),Ye.length>0&&He(xe,Ye,ne,me),Z&&Ie.viewport(D.copy(Z)),xe.length>0&&Ae(xe,ne,me),Ye.length>0&&Ae(Ye,ne,me),Ke.length>0&&Ae(Ke,ne,me),Ie.buffers.depth.setTest(!0),Ie.buffers.depth.setMask(!0),Ie.buffers.color.setMask(!0),Ie.setPolygonOffset(!1)}function He(U,ne,me,Z){if(oe===null){const $e=Ee.isWebGL2;oe=new qt(1024,1024,{generateMipmaps:!0,type:it.has("EXT_color_buffer_half_float")?ps:xn,minFilter:iu,samples:$e&&a===!0?4:0})}const xe=v.getRenderTarget();v.setRenderTarget(oe),v.clear();const Ye=v.toneMapping;v.toneMapping=Eo,Ae(U,me,Z),Me.updateMultisampleRenderTarget(oe),Me.updateRenderTargetMipmap(oe);let Ke=!1;for(let $e=0,at=ne.length;$e<at;$e++){const Et=ne[$e],Mt=Et.object,lt=Et.geometry,_t=Et.material,hn=Et.group;if(_t.side===zr&&Mt.layers.test(Z.layers)){const Ui=_t.side;_t.side=yi,_t.needsUpdate=!0,rt(Mt,me,Z,lt,_t,hn),_t.side=Ui,_t.needsUpdate=!0,Ke=!0}}Ke===!0&&(Me.updateMultisampleRenderTarget(oe),Me.updateRenderTargetMipmap(oe)),v.setRenderTarget(xe),v.toneMapping=Ye}function Ae(U,ne,me){const Z=ne.isScene===!0?ne.overrideMaterial:null;for(let xe=0,Ye=U.length;xe<Ye;xe++){const Ke=U[xe],$e=Ke.object,at=Ke.geometry,Et=Z===null?Ke.material:Z,Mt=Ke.group;$e.layers.test(me.layers)&&rt($e,ne,me,at,Et,Mt)}}function rt(U,ne,me,Z,xe,Ye){U.onBeforeRender(v,ne,me,Z,xe,Ye),U.modelViewMatrix.multiplyMatrices(me.matrixWorldInverse,U.matrixWorld),U.normalMatrix.getNormalMatrix(U.modelViewMatrix),xe.onBeforeRender(v,ne,me,Z,U,Ye),xe.transparent===!0&&xe.side===zr&&xe.forceSinglePass===!1?(xe.side=yi,xe.needsUpdate=!0,v.renderBufferDirect(me,ne,Z,xe,U,Ye),xe.side=ta,xe.needsUpdate=!0,v.renderBufferDirect(me,ne,Z,xe,U,Ye),xe.side=zr):v.renderBufferDirect(me,ne,Z,xe,U,Ye),U.onAfterRender(v,ne,me,Z,xe,Ye)}function ht(U,ne,me){ne.isScene!==!0&&(ne=Te);const Z=ae.get(U),xe=g.state.lights,Ye=g.state.shadowsArray,Ke=xe.state.version,$e=ft.getParameters(U,xe.state,Ye,ne,me),at=ft.getProgramCacheKey($e);let Et=Z.programs;Z.environment=U.isMeshStandardMaterial?ne.environment:null,Z.fog=ne.fog,Z.envMap=(U.isMeshStandardMaterial?Re:ze).get(U.envMap||Z.environment),Et===void 0&&(U.addEventListener("dispose",Zt),Et=new Map,Z.programs=Et);let Mt=Et.get(at);if(Mt!==void 0){if(Z.currentProgram===Mt&&Z.lightsStateVersion===Ke)return Pt(U,$e),Mt}else $e.uniforms=ft.getUniforms(U),U.onBuild(me,$e,v),U.onBeforeCompile($e,v),Mt=ft.acquireProgram($e,at),Et.set(at,Mt),Z.uniforms=$e.uniforms;const lt=Z.uniforms;(!U.isShaderMaterial&&!U.isRawShaderMaterial||U.clipping===!0)&&(lt.clippingPlanes=fe.uniform),Pt(U,$e),Z.needsLights=mn(U),Z.lightsStateVersion=Ke,Z.needsLights&&(lt.ambientLightColor.value=xe.state.ambient,lt.lightProbe.value=xe.state.probe,lt.directionalLights.value=xe.state.directional,lt.directionalLightShadows.value=xe.state.directionalShadow,lt.spotLights.value=xe.state.spot,lt.spotLightShadows.value=xe.state.spotShadow,lt.rectAreaLights.value=xe.state.rectArea,lt.ltc_1.value=xe.state.rectAreaLTC1,lt.ltc_2.value=xe.state.rectAreaLTC2,lt.pointLights.value=xe.state.point,lt.pointLightShadows.value=xe.state.pointShadow,lt.hemisphereLights.value=xe.state.hemi,lt.directionalShadowMap.value=xe.state.directionalShadowMap,lt.directionalShadowMatrix.value=xe.state.directionalShadowMatrix,lt.spotShadowMap.value=xe.state.spotShadowMap,lt.spotLightMatrix.value=xe.state.spotLightMatrix,lt.spotLightMap.value=xe.state.spotLightMap,lt.pointShadowMap.value=xe.state.pointShadowMap,lt.pointShadowMatrix.value=xe.state.pointShadowMatrix);const _t=Mt.getUniforms(),hn=Ny.seqWithValue(_t.seq,lt);return Z.currentProgram=Mt,Z.uniformsList=hn,Mt}function Pt(U,ne){const me=ae.get(U);me.outputEncoding=ne.outputEncoding,me.instancing=ne.instancing,me.skinning=ne.skinning,me.morphTargets=ne.morphTargets,me.morphNormals=ne.morphNormals,me.morphColors=ne.morphColors,me.morphTargetsCount=ne.morphTargetsCount,me.numClippingPlanes=ne.numClippingPlanes,me.numIntersection=ne.numClipIntersection,me.vertexAlphas=ne.vertexAlphas,me.vertexTangents=ne.vertexTangents,me.toneMapping=ne.toneMapping}function Ln(U,ne,me,Z,xe){ne.isScene!==!0&&(ne=Te),Me.resetTextureUnits();const Ye=ne.fog,Ke=Z.isMeshStandardMaterial?ne.environment:null,$e=b===null?v.outputEncoding:b.isXRRenderTarget===!0?b.texture.encoding:na,at=(Z.isMeshStandardMaterial?Re:ze).get(Z.envMap||Ke),Et=Z.vertexColors===!0&&!!me.attributes.color&&me.attributes.color.itemSize===4,Mt=!!Z.normalMap&&!!me.attributes.tangent,lt=!!me.morphAttributes.position,_t=!!me.morphAttributes.normal,hn=!!me.morphAttributes.color,Ui=Z.toneMapped?v.toneMapping:Eo,Cr=me.morphAttributes.position||me.morphAttributes.normal||me.morphAttributes.color,Jt=Cr!==void 0?Cr.length:0,xt=ae.get(Z),Kr=g.state.lights;if(I===!0&&(ee===!0||U!==R)){const dn=U===R&&Z.id===P;fe.setState(Z,U,dn)}let ei=!1;Z.version===xt.__version?(xt.needsLights&&xt.lightsStateVersion!==Kr.state.version||xt.outputEncoding!==$e||xe.isInstancedMesh&&xt.instancing===!1||!xe.isInstancedMesh&&xt.instancing===!0||xe.isSkinnedMesh&&xt.skinning===!1||!xe.isSkinnedMesh&&xt.skinning===!0||xt.envMap!==at||Z.fog===!0&&xt.fog!==Ye||xt.numClippingPlanes!==void 0&&(xt.numClippingPlanes!==fe.numPlanes||xt.numIntersection!==fe.numIntersection)||xt.vertexAlphas!==Et||xt.vertexTangents!==Mt||xt.morphTargets!==lt||xt.morphNormals!==_t||xt.morphColors!==hn||xt.toneMapping!==Ui||Ee.isWebGL2===!0&&xt.morphTargetsCount!==Jt)&&(ei=!0):(ei=!0,xt.__version=Z.version);let no=xt.currentProgram;ei===!0&&(no=ht(Z,ne,xe));let ua=!1,Pr=!1,cn=!1;const Dt=no.getUniforms(),Xi=xt.uniforms;if(Ie.useProgram(no.program)&&(ua=!0,Pr=!0,cn=!0),Z.id!==P&&(P=Z.id,Pr=!0),ua||R!==U){if(Dt.setValue(J,"projectionMatrix",U.projectionMatrix),Ee.logarithmicDepthBuffer&&Dt.setValue(J,"logDepthBufFC",2/(Math.log(U.far+1)/Math.LN2)),R!==U&&(R=U,Pr=!0,cn=!0),Z.isShaderMaterial||Z.isMeshPhongMaterial||Z.isMeshToonMaterial||Z.isMeshStandardMaterial||Z.envMap){const dn=Dt.map.cameraPosition;dn!==void 0&&dn.setValue(J,te.setFromMatrixPosition(U.matrixWorld))}(Z.isMeshPhongMaterial||Z.isMeshToonMaterial||Z.isMeshLambertMaterial||Z.isMeshBasicMaterial||Z.isMeshStandardMaterial||Z.isShaderMaterial)&&Dt.setValue(J,"isOrthographic",U.isOrthographicCamera===!0),(Z.isMeshPhongMaterial||Z.isMeshToonMaterial||Z.isMeshLambertMaterial||Z.isMeshBasicMaterial||Z.isMeshStandardMaterial||Z.isShaderMaterial||Z.isShadowMaterial||xe.isSkinnedMesh)&&Dt.setValue(J,"viewMatrix",U.matrixWorldInverse)}if(xe.isSkinnedMesh){Dt.setOptional(J,xe,"bindMatrix"),Dt.setOptional(J,xe,"bindMatrixInverse");const dn=xe.skeleton;dn&&(Ee.floatVertexTextures?(dn.boneTexture===null&&dn.computeBoneTexture(),Dt.setValue(J,"boneTexture",dn.boneTexture,Me),Dt.setValue(J,"boneTextureSize",dn.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const ti=me.morphAttributes;if((ti.position!==void 0||ti.normal!==void 0||ti.color!==void 0&&Ee.isWebGL2===!0)&&_e.update(xe,me,no),(Pr||xt.receiveShadow!==xe.receiveShadow)&&(xt.receiveShadow=xe.receiveShadow,Dt.setValue(J,"receiveShadow",xe.receiveShadow)),Z.isMeshGouraudMaterial&&Z.envMap!==null&&(Xi.envMap.value=at,Xi.flipEnvMap.value=at.isCubeTexture&&at.isRenderTargetTexture===!1?-1:1),Pr&&(Dt.setValue(J,"toneMappingExposure",v.toneMappingExposure),xt.needsLights&&Bt(Xi,cn),Ye&&Z.fog===!0&&Tt.refreshFogUniforms(Xi,Ye),Tt.refreshMaterialUniforms(Xi,Z,G,H,oe),Ny.upload(J,xt.uniformsList,Xi,Me)),Z.isShaderMaterial&&Z.uniformsNeedUpdate===!0&&(Ny.upload(J,xt.uniformsList,Xi,Me),Z.uniformsNeedUpdate=!1),Z.isSpriteMaterial&&Dt.setValue(J,"center",xe.center),Dt.setValue(J,"modelViewMatrix",xe.modelViewMatrix),Dt.setValue(J,"normalMatrix",xe.normalMatrix),Dt.setValue(J,"modelMatrix",xe.matrixWorld),Z.isShaderMaterial||Z.isRawShaderMaterial){const dn=Z.uniformsGroups;for(let io=0,el=dn.length;io<el;io++)if(Ee.isWebGL2){const Fi=dn[io];Ce.update(Fi,no),Ce.bind(Fi,no)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return no}function Bt(U,ne){U.ambientLightColor.needsUpdate=ne,U.lightProbe.needsUpdate=ne,U.directionalLights.needsUpdate=ne,U.directionalLightShadows.needsUpdate=ne,U.pointLights.needsUpdate=ne,U.pointLightShadows.needsUpdate=ne,U.spotLights.needsUpdate=ne,U.spotLightShadows.needsUpdate=ne,U.rectAreaLights.needsUpdate=ne,U.hemisphereLights.needsUpdate=ne}function mn(U){return U.isMeshLambertMaterial||U.isMeshToonMaterial||U.isMeshPhongMaterial||U.isMeshStandardMaterial||U.isShadowMaterial||U.isShaderMaterial&&U.lights===!0}this.getActiveCubeFace=function(){return S},this.getActiveMipmapLevel=function(){return T},this.getRenderTarget=function(){return b},this.setRenderTargetTextures=function(U,ne,me){ae.get(U.texture).__webglTexture=ne,ae.get(U.depthTexture).__webglTexture=me;const Z=ae.get(U);Z.__hasExternalTextures=!0,Z.__hasExternalTextures&&(Z.__autoAllocateDepthBuffer=me===void 0,Z.__autoAllocateDepthBuffer||it.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Z.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(U,ne){const me=ae.get(U);me.__webglFramebuffer=ne,me.__useDefaultFramebuffer=ne===void 0},this.setRenderTarget=function(U,ne=0,me=0){b=U,S=ne,T=me;let Z=!0,xe=null,Ye=!1,Ke=!1;if(U){const at=ae.get(U);at.__useDefaultFramebuffer!==void 0?(Ie.bindFramebuffer(36160,null),Z=!1):at.__webglFramebuffer===void 0?Me.setupRenderTarget(U):at.__hasExternalTextures&&Me.rebindTextures(U,ae.get(U.texture).__webglTexture,ae.get(U.depthTexture).__webglTexture);const Et=U.texture;(Et.isData3DTexture||Et.isDataArrayTexture||Et.isCompressedArrayTexture)&&(Ke=!0);const Mt=ae.get(U).__webglFramebuffer;U.isWebGLCubeRenderTarget?(xe=Mt[ne],Ye=!0):Ee.isWebGL2&&U.samples>0&&Me.useMultisampledRTT(U)===!1?xe=ae.get(U).__webglMultisampledFramebuffer:xe=Mt,D.copy(U.viewport),C.copy(U.scissor),L=U.scissorTest}else D.copy(re).multiplyScalar(G).floor(),C.copy(Q).multiplyScalar(G).floor(),L=z;if(Ie.bindFramebuffer(36160,xe)&&Ee.drawBuffers&&Z&&Ie.drawBuffers(U,xe),Ie.viewport(D),Ie.scissor(C),Ie.setScissorTest(L),Ye){const at=ae.get(U.texture);J.framebufferTexture2D(36160,36064,34069+ne,at.__webglTexture,me)}else if(Ke){const at=ae.get(U.texture),Et=ne||0;J.framebufferTextureLayer(36160,36064,at.__webglTexture,me||0,Et)}P=-1},this.readRenderTargetPixels=function(U,ne,me,Z,xe,Ye,Ke){if(!(U&&U.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let $e=ae.get(U).__webglFramebuffer;if(U.isWebGLCubeRenderTarget&&Ke!==void 0&&($e=$e[Ke]),$e){Ie.bindFramebuffer(36160,$e);try{const at=U.texture,Et=at.format,Mt=at.type;if(Et!==Dn&&he.convert(Et)!==J.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const lt=Mt===ps&&(it.has("EXT_color_buffer_half_float")||Ee.isWebGL2&&it.has("EXT_color_buffer_float"));if(Mt!==xn&&he.convert(Mt)!==J.getParameter(35738)&&!(Mt===Jn&&(Ee.isWebGL2||it.has("OES_texture_float")||it.has("WEBGL_color_buffer_float")))&&!lt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ne>=0&&ne<=U.width-Z&&me>=0&&me<=U.height-xe&&J.readPixels(ne,me,Z,xe,he.convert(Et),he.convert(Mt),Ye)}finally{const at=b!==null?ae.get(b).__webglFramebuffer:null;Ie.bindFramebuffer(36160,at)}}},this.copyFramebufferToTexture=function(U,ne,me=0){const Z=Math.pow(2,-me),xe=Math.floor(ne.image.width*Z),Ye=Math.floor(ne.image.height*Z);Me.setTexture2D(ne,0),J.copyTexSubImage2D(3553,me,0,0,U.x,U.y,xe,Ye),Ie.unbindTexture()},this.copyTextureToTexture=function(U,ne,me,Z=0){const xe=ne.image.width,Ye=ne.image.height,Ke=he.convert(me.format),$e=he.convert(me.type);Me.setTexture2D(me,0),J.pixelStorei(37440,me.flipY),J.pixelStorei(37441,me.premultiplyAlpha),J.pixelStorei(3317,me.unpackAlignment),ne.isDataTexture?J.texSubImage2D(3553,Z,U.x,U.y,xe,Ye,Ke,$e,ne.image.data):ne.isCompressedTexture?J.compressedTexSubImage2D(3553,Z,U.x,U.y,ne.mipmaps[0].width,ne.mipmaps[0].height,Ke,ne.mipmaps[0].data):J.texSubImage2D(3553,Z,U.x,U.y,Ke,$e,ne.image),Z===0&&me.generateMipmaps&&J.generateMipmap(3553),Ie.unbindTexture()},this.copyTextureToTexture3D=function(U,ne,me,Z,xe=0){if(v.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Ye=U.max.x-U.min.x+1,Ke=U.max.y-U.min.y+1,$e=U.max.z-U.min.z+1,at=he.convert(Z.format),Et=he.convert(Z.type);let Mt;if(Z.isData3DTexture)Me.setTexture3D(Z,0),Mt=32879;else if(Z.isDataArrayTexture)Me.setTexture2DArray(Z,0),Mt=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}J.pixelStorei(37440,Z.flipY),J.pixelStorei(37441,Z.premultiplyAlpha),J.pixelStorei(3317,Z.unpackAlignment);const lt=J.getParameter(3314),_t=J.getParameter(32878),hn=J.getParameter(3316),Ui=J.getParameter(3315),Cr=J.getParameter(32877),Jt=me.isCompressedTexture?me.mipmaps[0]:me.image;J.pixelStorei(3314,Jt.width),J.pixelStorei(32878,Jt.height),J.pixelStorei(3316,U.min.x),J.pixelStorei(3315,U.min.y),J.pixelStorei(32877,U.min.z),me.isDataTexture||me.isData3DTexture?J.texSubImage3D(Mt,xe,ne.x,ne.y,ne.z,Ye,Ke,$e,at,Et,Jt.data):me.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),J.compressedTexSubImage3D(Mt,xe,ne.x,ne.y,ne.z,Ye,Ke,$e,at,Jt.data)):J.texSubImage3D(Mt,xe,ne.x,ne.y,ne.z,Ye,Ke,$e,at,Et,Jt),J.pixelStorei(3314,lt),J.pixelStorei(32878,_t),J.pixelStorei(3316,hn),J.pixelStorei(3315,Ui),J.pixelStorei(32877,Cr),xe===0&&Z.generateMipmaps&&J.generateMipmap(Mt),Ie.unbindTexture()},this.initTexture=function(U){U.isCubeTexture?Me.setTextureCube(U,0):U.isData3DTexture?Me.setTexture3D(U,0):U.isDataArrayTexture||U.isCompressedArrayTexture?Me.setTexture2DArray(U,0):Me.setTexture2D(U,0),Ie.unbindTexture()},this.resetState=function(){S=0,T=0,b=null,Ie.reset(),Pe.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}}class wU extends sC{}wU.prototype.isWebGL1Renderer=!0;class Dx{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Oe(e),this.density=t}clone(){return new Dx(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class Lx{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new Oe(e),this.near=t,this.far=i}clone(){return new Lx(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class Lc extends rn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class Ix{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Hm,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=ms()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ms()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ms()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const pr=new N;class Ic{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)pr.fromBufferAttribute(this,t),pr.applyMatrix4(e),this.setXYZ(t,pr.x,pr.y,pr.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)pr.fromBufferAttribute(this,t),pr.applyNormalMatrix(e),this.setXYZ(t,pr.x,pr.y,pr.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)pr.fromBufferAttribute(this,t),pr.transformDirection(e),this.setXYZ(t,pr.x,pr.y,pr.z);return this}setX(e,t){return this.normalized&&(t=kt(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=kt(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=kt(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=kt(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=hs(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=hs(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=hs(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=hs(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=kt(t,this.array),i=kt(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=kt(t,this.array),i=kt(i,this.array),r=kt(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=kt(t,this.array),i=kt(i,this.array),r=kt(r,this.array),s=kt(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new sn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Ic(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class oC extends Ti{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Oe(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Rf;const ep=new N,Df=new N,Lf=new N,If=new le,tp=new le,MU=new mt,M0=new N,np=new N,T0=new N,f3=new le,nw=new le,h3=new le;class TU extends rn{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",Rf===void 0){Rf=new Lt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new Ix(t,5);Rf.setIndex([0,1,2,0,2,3]),Rf.setAttribute("position",new Ic(i,3,0,!1)),Rf.setAttribute("uv",new Ic(i,2,3,!1))}this.geometry=Rf,this.material=e!==void 0?e:new oC,this.center=new le(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Df.setFromMatrixScale(this.matrixWorld),MU.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Lf.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Df.multiplyScalar(-Lf.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const o=this.center;E0(M0.set(-.5,-.5,0),Lf,o,Df,r,s),E0(np.set(.5,-.5,0),Lf,o,Df,r,s),E0(T0.set(.5,.5,0),Lf,o,Df,r,s),f3.set(0,0),nw.set(1,0),h3.set(1,1);let a=e.ray.intersectTriangle(M0,np,T0,!1,ep);if(a===null&&(E0(np.set(-.5,.5,0),Lf,o,Df,r,s),nw.set(0,1),a=e.ray.intersectTriangle(M0,T0,np,!1,ep),a===null))return;const l=e.ray.origin.distanceTo(ep);l<e.near||l>e.far||t.push({distance:l,point:ep.clone(),uv:Fr.getInterpolation(ep,M0,np,T0,f3,nw,h3,new le),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function E0(n,e,t,i,r,s){If.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(tp.x=s*If.x-r*If.y,tp.y=r*If.x+s*If.y):tp.copy(If),n.copy(e),n.x+=tp.x,n.y+=tp.y,n.applyMatrix4(MU)}const b0=new N,d3=new N;class EU extends rn{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const s=t[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r;i++){let s=t[i].distance;if(t[i].object.visible&&(s-=s*t[i].hysteresis),e<s)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){b0.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(b0);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){b0.setFromMatrixPosition(e.matrixWorld),d3.setFromMatrixPosition(this.matrixWorld);const i=b0.distanceTo(d3)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let o=t[r].distance;if(t[r].object.visible&&(o-=o*t[r].hysteresis),i>=o)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const o=i[r];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const p3=new N,m3=new Gt,g3=new Gt,AX=new N,v3=new mt,kf=new N;class bU extends Ii{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new mt,this.bindMatrixInverse=new mt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new oa),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)kf.fromBufferAttribute(t,i),this.applyBoneTransform(i,kf),this.boundingBox.expandByPoint(kf)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new aa),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)kf.fromBufferAttribute(t,i),this.applyBoneTransform(i,kf),this.boundingSphere.expandByPoint(kf)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Gt,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;m3.fromBufferAttribute(r.attributes.skinIndex,e),g3.fromBufferAttribute(r.attributes.skinWeight,e),p3.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=g3.getComponent(s);if(o!==0){const a=m3.getComponent(s);v3.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(AX.copy(p3).applyMatrix4(v3),o)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class aC extends rn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Ua extends bn{constructor(e=null,t=1,i=1,r,s,o,a,l,u=Ht,f=Ht,d,p){super(null,o,a,l,u,f,r,s,d,p),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const y3=new mt,RX=new mt;class kx{constructor(e=[],t=[]){this.uuid=ms(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new mt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new mt;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:RX;y3.multiplyMatrices(a,t[s]),y3.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new kx(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=lU(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new Ua(t,e,e,Dn,Jn);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new aC),this.bones.push(o),this.boneInverses.push(new mt().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const o=t[r];e.bones.push(o.uuid);const a=i[r];e.boneInverses.push(a.toArray())}return e}}class Xh extends sn{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Of=new mt,_3=new mt,C0=[],x3=new oa,DX=new mt,ip=new Ii,rp=new aa;class CU extends Ii{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Xh(new Float32Array(i*16),16),this.instanceColor=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,DX)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new oa),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Of),x3.copy(e.boundingBox).applyMatrix4(Of),this.boundingBox.union(x3)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new aa),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Of),rp.copy(e.boundingSphere).applyMatrix4(Of),this.boundingSphere.union(rp)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const i=this.matrixWorld,r=this.count;if(ip.geometry=this.geometry,ip.material=this.material,ip.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),rp.copy(this.boundingSphere),rp.applyMatrix4(i),e.ray.intersectsSphere(rp)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,Of),_3.multiplyMatrices(i,Of),ip.matrixWorld=_3,ip.raycast(e,C0);for(let o=0,a=C0.length;o<a;o++){const l=C0[o];l.instanceId=s,l.object=this,t.push(l)}C0.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Xh(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class br extends Ti{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Oe(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const S3=new N,w3=new N,M3=new mt,iw=new vg,P0=new aa;class su extends rn{constructor(e=new Lt,t=new br){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)S3.fromBufferAttribute(t,r-1),w3.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=S3.distanceTo(w3);e.setAttribute("lineDistance",new st(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),P0.copy(i.boundingSphere),P0.applyMatrix4(r),P0.radius+=s,e.ray.intersectsSphere(P0)===!1)return;M3.copy(r).invert(),iw.copy(e.ray).applyMatrix4(M3);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=new N,f=new N,d=new N,p=new N,m=this.isLineSegments?2:1,g=i.index,x=i.attributes.position;if(g!==null){const v=Math.max(0,o.start),w=Math.min(g.count,o.start+o.count);for(let S=v,T=w-1;S<T;S+=m){const b=g.getX(S),P=g.getX(S+1);if(u.fromBufferAttribute(x,b),f.fromBufferAttribute(x,P),iw.distanceSqToSegment(u,f,p,d)>l)continue;p.applyMatrix4(this.matrixWorld);const D=e.ray.origin.distanceTo(p);D<e.near||D>e.far||t.push({distance:D,point:d.clone().applyMatrix4(this.matrixWorld),index:S,face:null,faceIndex:null,object:this})}}else{const v=Math.max(0,o.start),w=Math.min(x.count,o.start+o.count);for(let S=v,T=w-1;S<T;S+=m){if(u.fromBufferAttribute(x,S),f.fromBufferAttribute(x,S+1),iw.distanceSqToSegment(u,f,p,d)>l)continue;p.applyMatrix4(this.matrixWorld);const P=e.ray.origin.distanceTo(p);P<e.near||P>e.far||t.push({distance:P,point:d.clone().applyMatrix4(this.matrixWorld),index:S,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const T3=new N,E3=new N;class la extends su{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)T3.fromBufferAttribute(t,r),E3.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+T3.distanceTo(E3);e.setAttribute("lineDistance",new st(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class PU extends su{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class lC extends Ti{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Oe(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const b3=new mt,RT=new vg,A0=new aa,R0=new N;class AU extends rn{constructor(e=new Lt,t=new lC){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),A0.copy(i.boundingSphere),A0.applyMatrix4(r),A0.radius+=s,e.ray.intersectsSphere(A0)===!1)return;b3.copy(r).invert(),RT.copy(e.ray).applyMatrix4(b3);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=i.index,d=i.attributes.position;if(u!==null){const p=Math.max(0,o.start),m=Math.min(u.count,o.start+o.count);for(let g=p,y=m;g<y;g++){const x=u.getX(g);R0.fromBufferAttribute(d,x),C3(R0,x,l,r,e,t,this)}}else{const p=Math.max(0,o.start),m=Math.min(d.count,o.start+o.count);for(let g=p,y=m;g<y;g++)R0.fromBufferAttribute(d,g),C3(R0,g,l,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function C3(n,e,t,i,r,s,o){const a=RT.distanceSqToPoint(n);if(a<t){const l=new N;RT.closestPointToPoint(n,l),l.applyMatrix4(i);const u=r.ray.origin.distanceTo(l);if(u<r.near||u>r.far)return;s.push({distance:u,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class RU extends bn{constructor(e,t,i,r,s,o,a,l,u){super(e,t,i,r,s,o,a,l,u),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:vt,this.magFilter=s!==void 0?s:vt,this.generateMipmaps=!1;const f=this;function d(){f.needsUpdate=!0,e.requestVideoFrameCallback(d)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(d)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class DT extends bn{constructor(e,t,i){super({width:e,height:t}),this.isFramebufferTexture=!0,this.format=i,this.magFilter=Ht,this.minFilter=Ht,this.generateMipmaps=!1,this.needsUpdate=!0}}class uC extends bn{constructor(e,t,i,r,s,o,a,l,u,f,d,p){super(null,o,a,l,u,f,r,s,d,p),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class LX extends uC{constructor(e,t,i,r,s,o){super(e,t,i,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=mi}}class IX extends bn{constructor(e,t,i,r,s,o,a,l,u){super(e,t,i,r,s,o,a,l,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Ao{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const s=i.length;let o;t?o=t:o=e*i[s-1];let a=0,l=s-1,u;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),u=i[r]-o,u<0)a=r+1;else if(u>0)l=r-1;else{l=r;break}if(r=l,i[r]===o)return r/(s-1);const f=i[r],p=i[r+1]-f,m=(o-f)/p;return(r+m)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=t||(o.isVector2?new le:new N);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new N,r=[],s=[],o=[],a=new N,l=new mt;for(let m=0;m<=e;m++){const g=m/e;r[m]=this.getTangentAt(g,new N)}s[0]=new N,o[0]=new N;let u=Number.MAX_VALUE;const f=Math.abs(r[0].x),d=Math.abs(r[0].y),p=Math.abs(r[0].z);f<=u&&(u=f,i.set(1,0,0)),d<=u&&(u=d,i.set(0,1,0)),p<=u&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let m=1;m<=e;m++){if(s[m]=s[m-1].clone(),o[m]=o[m-1].clone(),a.crossVectors(r[m-1],r[m]),a.length()>Number.EPSILON){a.normalize();const g=Math.acos(Xn(r[m-1].dot(r[m]),-1,1));s[m].applyMatrix4(l.makeRotationAxis(a,g))}o[m].crossVectors(r[m],s[m])}if(t===!0){let m=Math.acos(Xn(s[0].dot(s[e]),-1,1));m/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(m=-m);for(let g=1;g<=e;g++)s[g].applyMatrix4(l.makeRotationAxis(r[g],m*g)),o[g].crossVectors(r[g],s[g])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Ox extends Ao{constructor(e=0,t=0,i=1,r=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t){const i=t||new le,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const f=Math.cos(this.aRotation),d=Math.sin(this.aRotation),p=l-this.aX,m=u-this.aY;l=p*f-m*d+this.aX,u=p*d+m*f+this.aY}return i.set(l,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class DU extends Ox{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function cC(){let n=0,e=0,t=0,i=0;function r(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,i=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,u){r(o,a,u*(a-s),u*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,u,f,d){let p=(o-s)/u-(a-s)/(u+f)+(a-o)/f,m=(a-o)/f-(l-o)/(f+d)+(l-a)/d;p*=f,m*=f,r(o,a,p,m)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+i*a}}}const D0=new N,rw=new cC,sw=new cC,ow=new cC;class LU extends Ao{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new N){const i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let u,f;this.closed||a>0?u=r[(a-1)%s]:(D0.subVectors(r[0],r[1]).add(r[0]),u=D0);const d=r[a%s],p=r[(a+1)%s];if(this.closed||a+2<s?f=r[(a+2)%s]:(D0.subVectors(r[s-1],r[s-2]).add(r[s-1]),f=D0),this.curveType==="centripetal"||this.curveType==="chordal"){const m=this.curveType==="chordal"?.5:.25;let g=Math.pow(u.distanceToSquared(d),m),y=Math.pow(d.distanceToSquared(p),m),x=Math.pow(p.distanceToSquared(f),m);y<1e-4&&(y=1),g<1e-4&&(g=y),x<1e-4&&(x=y),rw.initNonuniformCatmullRom(u.x,d.x,p.x,f.x,g,y,x),sw.initNonuniformCatmullRom(u.y,d.y,p.y,f.y,g,y,x),ow.initNonuniformCatmullRom(u.z,d.z,p.z,f.z,g,y,x)}else this.curveType==="catmullrom"&&(rw.initCatmullRom(u.x,d.x,p.x,f.x,this.tension),sw.initCatmullRom(u.y,d.y,p.y,f.y,this.tension),ow.initCatmullRom(u.z,d.z,p.z,f.z,this.tension));return i.set(rw.calc(l),sw.calc(l),ow.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new N().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function P3(n,e,t,i,r){const s=(i-e)*.5,o=(r-t)*.5,a=n*n,l=n*a;return(2*t-2*i+s+o)*l+(-3*t+3*i-2*s-o)*a+s*n+t}function kX(n,e){const t=1-n;return t*t*e}function OX(n,e){return 2*(1-n)*n*e}function NX(n,e){return n*n*e}function Yp(n,e,t,i){return kX(n,e)+OX(n,t)+NX(n,i)}function UX(n,e){const t=1-n;return t*t*t*e}function FX(n,e){const t=1-n;return 3*t*t*n*e}function zX(n,e){return 3*(1-n)*n*n*e}function BX(n,e){return n*n*n*e}function qp(n,e,t,i,r){return UX(n,e)+FX(n,t)+zX(n,i)+BX(n,r)}class fC extends Ao{constructor(e=new le,t=new le,i=new le,r=new le){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new le){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(qp(e,r.x,s.x,o.x,a.x),qp(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class IU extends Ao{constructor(e=new N,t=new N,i=new N,r=new N){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new N){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(qp(e,r.x,s.x,o.x,a.x),qp(e,r.y,s.y,o.y,a.y),qp(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Nx extends Ao{constructor(e=new le,t=new le){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new le){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new le){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class kU extends Ao{constructor(e=new N,t=new N){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new N){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new N){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class hC extends Ao{constructor(e=new le,t=new le,i=new le){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new le){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(Yp(e,r.x,s.x,o.x),Yp(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class dC extends Ao{constructor(e=new N,t=new N,i=new N){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new N){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(Yp(e,r.x,s.x,o.x),Yp(e,r.y,s.y,o.y),Yp(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class pC extends Ao{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new le){const i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,l=r[o===0?o:o-1],u=r[o],f=r[o>r.length-2?r.length-1:o+1],d=r[o>r.length-3?r.length-1:o+2];return i.set(P3(a,l.x,u.x,f.x,d.x),P3(a,l.y,u.y,f.y,d.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new le().fromArray(r))}return this}}var mC=Object.freeze({__proto__:null,ArcCurve:DU,CatmullRomCurve3:LU,CubicBezierCurve:fC,CubicBezierCurve3:IU,EllipseCurve:Ox,LineCurve:Nx,LineCurve3:kU,QuadraticBezierCurve:hC,QuadraticBezierCurve3:dC,SplineCurve:pC});class OU extends Ao{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Nx(t,e))}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,a=this.curves[s],l=a.getLength(),u=l===0?0:1-o/l;return a.getPointAt(u,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let u=0;u<l.length;u++){const f=l[u];i&&i.equals(f)||(t.push(f),i=f)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new mC[r.type]().fromJSON(r))}return this}}class Wm extends OU{constructor(e){super(),this.type="Path",this.currentPoint=new le,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new Nx(this.currentPoint.clone(),new le(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new hC(this.currentPoint.clone(),new le(e,t),new le(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,o){const a=new fC(this.currentPoint.clone(),new le(e,t),new le(i,r),new le(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new pC(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,i,r,s,o),this}absarc(e,t,i,r,s,o){return this.absellipse(e,t,i,i,r,s,o),this}ellipse(e,t,i,r,s,o,a,l){const u=this.currentPoint.x,f=this.currentPoint.y;return this.absellipse(e+u,t+f,i,r,s,o,a,l),this}absellipse(e,t,i,r,s,o,a,l){const u=new Ox(e,t,i,r,s,o,a,l);if(this.curves.length>0){const d=u.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(u);const f=u.getPoint(1);return this.currentPoint.copy(f),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class hd extends Lt{constructor(e=[new le(0,-.5),new le(.5,0),new le(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=Xn(r,0,Math.PI*2);const s=[],o=[],a=[],l=[],u=[],f=1/t,d=new N,p=new le,m=new N,g=new N,y=new N;let x=0,v=0;for(let w=0;w<=e.length-1;w++)switch(w){case 0:x=e[w+1].x-e[w].x,v=e[w+1].y-e[w].y,m.x=v*1,m.y=-x,m.z=v*0,y.copy(m),m.normalize(),l.push(m.x,m.y,m.z);break;case e.length-1:l.push(y.x,y.y,y.z);break;default:x=e[w+1].x-e[w].x,v=e[w+1].y-e[w].y,m.x=v*1,m.y=-x,m.z=v*0,g.copy(m),m.x+=y.x,m.y+=y.y,m.z+=y.z,m.normalize(),l.push(m.x,m.y,m.z),y.copy(g)}for(let w=0;w<=t;w++){const S=i+w*f*r,T=Math.sin(S),b=Math.cos(S);for(let P=0;P<=e.length-1;P++){d.x=e[P].x*T,d.y=e[P].y,d.z=e[P].x*b,o.push(d.x,d.y,d.z),p.x=w/t,p.y=P/(e.length-1),a.push(p.x,p.y);const R=l[3*P+0]*T,D=l[3*P+1],C=l[3*P+0]*b;u.push(R,D,C)}}for(let w=0;w<t;w++)for(let S=0;S<e.length-1;S++){const T=S+w*e.length,b=T,P=T+e.length,R=T+e.length+1,D=T+1;s.push(b,P,D),s.push(R,D,P)}this.setIndex(s),this.setAttribute("position",new st(o,3)),this.setAttribute("uv",new st(a,2)),this.setAttribute("normal",new st(u,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new hd(e.points,e.segments,e.phiStart,e.phiLength)}}class Sg extends hd{constructor(e=1,t=1,i=4,r=8){const s=new Wm;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:i,radialSegments:r}}static fromJSON(e){return new Sg(e.radius,e.length,e.capSegments,e.radialSegments)}}class wg extends Lt{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const s=[],o=[],a=[],l=[],u=new N,f=new le;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let d=0,p=3;d<=t;d++,p+=3){const m=i+d/t*r;u.x=e*Math.cos(m),u.y=e*Math.sin(m),o.push(u.x,u.y,u.z),a.push(0,0,1),f.x=(o[p]/e+1)/2,f.y=(o[p+1]/e+1)/2,l.push(f.x,f.y)}for(let d=1;d<=t;d++)s.push(d,d+1,0);this.setIndex(s),this.setAttribute("position",new st(o,3)),this.setAttribute("normal",new st(a,3)),this.setAttribute("uv",new st(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new wg(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class jc extends Lt{constructor(e=1,t=1,i=1,r=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const u=this;r=Math.floor(r),s=Math.floor(s);const f=[],d=[],p=[],m=[];let g=0;const y=[],x=i/2;let v=0;w(),o===!1&&(e>0&&S(!0),t>0&&S(!1)),this.setIndex(f),this.setAttribute("position",new st(d,3)),this.setAttribute("normal",new st(p,3)),this.setAttribute("uv",new st(m,2));function w(){const T=new N,b=new N;let P=0;const R=(t-e)/i;for(let D=0;D<=s;D++){const C=[],L=D/s,F=L*(t-e)+e;for(let H=0;H<=r;H++){const G=H/r,W=G*l+a,X=Math.sin(W),re=Math.cos(W);b.x=F*X,b.y=-L*i+x,b.z=F*re,d.push(b.x,b.y,b.z),T.set(X,R,re).normalize(),p.push(T.x,T.y,T.z),m.push(G,1-L),C.push(g++)}y.push(C)}for(let D=0;D<r;D++)for(let C=0;C<s;C++){const L=y[C][D],F=y[C+1][D],H=y[C+1][D+1],G=y[C][D+1];f.push(L,F,G),f.push(F,H,G),P+=6}u.addGroup(v,P,0),v+=P}function S(T){const b=g,P=new le,R=new N;let D=0;const C=T===!0?e:t,L=T===!0?1:-1;for(let H=1;H<=r;H++)d.push(0,x*L,0),p.push(0,L,0),m.push(.5,.5),g++;const F=g;for(let H=0;H<=r;H++){const W=H/r*l+a,X=Math.cos(W),re=Math.sin(W);R.x=C*re,R.y=x*L,R.z=C*X,d.push(R.x,R.y,R.z),p.push(0,L,0),P.x=X*.5+.5,P.y=re*.5*L+.5,m.push(P.x,P.y),g++}for(let H=0;H<r;H++){const G=b+H,W=F+H;T===!0?f.push(W,W+1,G):f.push(W+1,W,G),D+=3}u.addGroup(v,D,T===!0?1:2),v+=D}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new jc(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Mg extends jc{constructor(e=1,t=1,i=32,r=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,i,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new Mg(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Qa extends Lt{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const s=[],o=[];a(r),u(i),f(),this.setAttribute("position",new st(s,3)),this.setAttribute("normal",new st(s.slice(),3)),this.setAttribute("uv",new st(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(w){const S=new N,T=new N,b=new N;for(let P=0;P<t.length;P+=3)m(t[P+0],S),m(t[P+1],T),m(t[P+2],b),l(S,T,b,w)}function l(w,S,T,b){const P=b+1,R=[];for(let D=0;D<=P;D++){R[D]=[];const C=w.clone().lerp(T,D/P),L=S.clone().lerp(T,D/P),F=P-D;for(let H=0;H<=F;H++)H===0&&D===P?R[D][H]=C:R[D][H]=C.clone().lerp(L,H/F)}for(let D=0;D<P;D++)for(let C=0;C<2*(P-D)-1;C++){const L=Math.floor(C/2);C%2===0?(p(R[D][L+1]),p(R[D+1][L]),p(R[D][L])):(p(R[D][L+1]),p(R[D+1][L+1]),p(R[D+1][L]))}}function u(w){const S=new N;for(let T=0;T<s.length;T+=3)S.x=s[T+0],S.y=s[T+1],S.z=s[T+2],S.normalize().multiplyScalar(w),s[T+0]=S.x,s[T+1]=S.y,s[T+2]=S.z}function f(){const w=new N;for(let S=0;S<s.length;S+=3){w.x=s[S+0],w.y=s[S+1],w.z=s[S+2];const T=x(w)/2/Math.PI+.5,b=v(w)/Math.PI+.5;o.push(T,1-b)}g(),d()}function d(){for(let w=0;w<o.length;w+=6){const S=o[w+0],T=o[w+2],b=o[w+4],P=Math.max(S,T,b),R=Math.min(S,T,b);P>.9&&R<.1&&(S<.2&&(o[w+0]+=1),T<.2&&(o[w+2]+=1),b<.2&&(o[w+4]+=1))}}function p(w){s.push(w.x,w.y,w.z)}function m(w,S){const T=w*3;S.x=e[T+0],S.y=e[T+1],S.z=e[T+2]}function g(){const w=new N,S=new N,T=new N,b=new N,P=new le,R=new le,D=new le;for(let C=0,L=0;C<s.length;C+=9,L+=6){w.set(s[C+0],s[C+1],s[C+2]),S.set(s[C+3],s[C+4],s[C+5]),T.set(s[C+6],s[C+7],s[C+8]),P.set(o[L+0],o[L+1]),R.set(o[L+2],o[L+3]),D.set(o[L+4],o[L+5]),b.copy(w).add(S).add(T).divideScalar(3);const F=x(b);y(P,L+0,w,F),y(R,L+2,S,F),y(D,L+4,T,F)}}function y(w,S,T,b){b<0&&w.x===1&&(o[S]=w.x-1),T.x===0&&T.z===0&&(o[S]=b/2/Math.PI+.5)}function x(w){return Math.atan2(w.z,-w.x)}function v(w){return Math.atan2(-w.y,Math.sqrt(w.x*w.x+w.z*w.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Qa(e.vertices,e.indices,e.radius,e.details)}}class Tg extends Qa{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Tg(e.radius,e.detail)}}const L0=new N,I0=new N,aw=new N,k0=new Fr;class NU extends Lt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(vc*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,u=[0,0,0],f=["a","b","c"],d=new Array(3),p={},m=[];for(let g=0;g<l;g+=3){o?(u[0]=o.getX(g),u[1]=o.getX(g+1),u[2]=o.getX(g+2)):(u[0]=g,u[1]=g+1,u[2]=g+2);const{a:y,b:x,c:v}=k0;if(y.fromBufferAttribute(a,u[0]),x.fromBufferAttribute(a,u[1]),v.fromBufferAttribute(a,u[2]),k0.getNormal(aw),d[0]=`${Math.round(y.x*r)},${Math.round(y.y*r)},${Math.round(y.z*r)}`,d[1]=`${Math.round(x.x*r)},${Math.round(x.y*r)},${Math.round(x.z*r)}`,d[2]=`${Math.round(v.x*r)},${Math.round(v.y*r)},${Math.round(v.z*r)}`,!(d[0]===d[1]||d[1]===d[2]||d[2]===d[0]))for(let w=0;w<3;w++){const S=(w+1)%3,T=d[w],b=d[S],P=k0[f[w]],R=k0[f[S]],D=`${T}_${b}`,C=`${b}_${T}`;C in p&&p[C]?(aw.dot(p[C].normal)<=s&&(m.push(P.x,P.y,P.z),m.push(R.x,R.y,R.z)),p[C]=null):D in p||(p[D]={index0:u[w],index1:u[S],normal:aw.clone()})}}for(const g in p)if(p[g]){const{index0:y,index1:x}=p[g];L0.fromBufferAttribute(a,y),I0.fromBufferAttribute(a,x),m.push(L0.x,L0.y,L0.z),m.push(I0.x,I0.y,I0.z)}this.setAttribute("position",new st(m,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class xc extends Wm{constructor(e){super(e),this.uuid=ms(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new Wm().fromJSON(r))}return this}}const VX={triangulate:function(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=UU(n,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,u,f,d,p,m;if(i&&(s=XX(n,e,s,t)),n.length>80*t){a=u=n[0],l=f=n[1];for(let g=t;g<r;g+=t)d=n[g],p=n[g+1],d<a&&(a=d),p<l&&(l=p),d>u&&(u=d),p>f&&(f=p);m=Math.max(u-a,f-l),m=m!==0?32767/m:0}return jm(s,o,t,a,l,m,0),o}};function UU(n,e,t,i,r){let s,o;if(r===iY(n,e,t,i)>0)for(s=e;s<t;s+=i)o=A3(s,n[s],n[s+1],o);else for(s=t-i;s>=e;s-=i)o=A3(s,n[s],n[s+1],o);return o&&Ux(o,o.next)&&(Ym(o),o=o.next),o}function kc(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(Ux(t,t.next)||Un(t.prev,t,t.next)===0)){if(Ym(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function jm(n,e,t,i,r,s,o){if(!n)return;!o&&s&&KX(n,i,r,s);let a=n,l,u;for(;n.prev!==n.next;){if(l=n.prev,u=n.next,s?GX(n,i,r,s):HX(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(u.i/t|0),Ym(n),n=u.next,a=u.next;continue}if(n=u,n===a){o?o===1?(n=WX(kc(n),e,t),jm(n,e,t,i,r,s,2)):o===2&&jX(n,e,t,i,r,s):jm(kc(n),e,t,i,r,s,1);break}}}function HX(n){const e=n.prev,t=n,i=n.next;if(Un(e,t,i)>=0)return!1;const r=e.x,s=t.x,o=i.x,a=e.y,l=t.y,u=i.y,f=r<s?r<o?r:o:s<o?s:o,d=a<l?a<u?a:u:l<u?l:u,p=r>s?r>o?r:o:s>o?s:o,m=a>l?a>u?a:u:l>u?l:u;let g=i.next;for(;g!==e;){if(g.x>=f&&g.x<=p&&g.y>=d&&g.y<=m&&ch(r,a,s,l,o,u,g.x,g.y)&&Un(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function GX(n,e,t,i){const r=n.prev,s=n,o=n.next;if(Un(r,s,o)>=0)return!1;const a=r.x,l=s.x,u=o.x,f=r.y,d=s.y,p=o.y,m=a<l?a<u?a:u:l<u?l:u,g=f<d?f<p?f:p:d<p?d:p,y=a>l?a>u?a:u:l>u?l:u,x=f>d?f>p?f:p:d>p?d:p,v=LT(m,g,e,t,i),w=LT(y,x,e,t,i);let S=n.prevZ,T=n.nextZ;for(;S&&S.z>=v&&T&&T.z<=w;){if(S.x>=m&&S.x<=y&&S.y>=g&&S.y<=x&&S!==r&&S!==o&&ch(a,f,l,d,u,p,S.x,S.y)&&Un(S.prev,S,S.next)>=0||(S=S.prevZ,T.x>=m&&T.x<=y&&T.y>=g&&T.y<=x&&T!==r&&T!==o&&ch(a,f,l,d,u,p,T.x,T.y)&&Un(T.prev,T,T.next)>=0))return!1;T=T.nextZ}for(;S&&S.z>=v;){if(S.x>=m&&S.x<=y&&S.y>=g&&S.y<=x&&S!==r&&S!==o&&ch(a,f,l,d,u,p,S.x,S.y)&&Un(S.prev,S,S.next)>=0)return!1;S=S.prevZ}for(;T&&T.z<=w;){if(T.x>=m&&T.x<=y&&T.y>=g&&T.y<=x&&T!==r&&T!==o&&ch(a,f,l,d,u,p,T.x,T.y)&&Un(T.prev,T,T.next)>=0)return!1;T=T.nextZ}return!0}function WX(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!Ux(r,s)&&FU(r,i,i.next,s)&&Xm(r,s)&&Xm(s,r)&&(e.push(r.i/t|0),e.push(i.i/t|0),e.push(s.i/t|0),Ym(i),Ym(i.next),i=n=s),i=i.next}while(i!==n);return kc(i)}function jX(n,e,t,i,r,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&eY(o,a)){let l=zU(o,a);o=kc(o,o.next),l=kc(l,l.next),jm(o,e,t,i,r,s,0),jm(l,e,t,i,r,s,0);return}a=a.next}o=o.next}while(o!==n)}function XX(n,e,t,i){const r=[];let s,o,a,l,u;for(s=0,o=e.length;s<o;s++)a=e[s]*i,l=s<o-1?e[s+1]*i:n.length,u=UU(n,a,l,i,!1),u===u.next&&(u.steiner=!0),r.push(QX(u));for(r.sort(YX),s=0;s<r.length;s++)t=qX(r[s],t);return t}function YX(n,e){return n.x-e.x}function qX(n,e){const t=ZX(n,e);if(!t)return e;const i=zU(t,n);return kc(i,i.next),kc(t,t.next)}function ZX(n,e){let t=e,i=-1/0,r;const s=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const p=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(p<=s&&p>i&&(i=p,r=t.x<t.next.x?t:t.next,p===s))return r}t=t.next}while(t!==e);if(!r)return null;const a=r,l=r.x,u=r.y;let f=1/0,d;t=r;do s>=t.x&&t.x>=l&&s!==t.x&&ch(o<u?s:i,o,l,u,o<u?i:s,o,t.x,t.y)&&(d=Math.abs(o-t.y)/(s-t.x),Xm(t,n)&&(d<f||d===f&&(t.x>r.x||t.x===r.x&&$X(r,t)))&&(r=t,f=d)),t=t.next;while(t!==a);return r}function $X(n,e){return Un(n.prev,n,e.prev)<0&&Un(e.next,n,n.next)<0}function KX(n,e,t,i){let r=n;do r.z===0&&(r.z=LT(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,JX(r)}function JX(n){let e,t,i,r,s,o,a,l,u=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,i=t,a=0,e=0;e<u&&(a++,i=i.nextZ,!!i);e++);for(l=u;a>0||l>0&&i;)a!==0&&(l===0||!i||t.z<=i.z)?(r=t,t=t.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,u*=2}while(o>1);return n}function LT(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function QX(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function ch(n,e,t,i,r,s,o,a){return(r-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(i-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(r-o)*(i-a)}function eY(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!tY(n,e)&&(Xm(n,e)&&Xm(e,n)&&nY(n,e)&&(Un(n.prev,n,e.prev)||Un(n,e.prev,e))||Ux(n,e)&&Un(n.prev,n,n.next)>0&&Un(e.prev,e,e.next)>0)}function Un(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function Ux(n,e){return n.x===e.x&&n.y===e.y}function FU(n,e,t,i){const r=N0(Un(n,e,t)),s=N0(Un(n,e,i)),o=N0(Un(t,i,n)),a=N0(Un(t,i,e));return!!(r!==s&&o!==a||r===0&&O0(n,t,e)||s===0&&O0(n,i,e)||o===0&&O0(t,n,i)||a===0&&O0(t,e,i))}function O0(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function N0(n){return n>0?1:n<0?-1:0}function tY(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&FU(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Xm(n,e){return Un(n.prev,n,n.next)<0?Un(n,e,n.next)>=0&&Un(n,n.prev,e)>=0:Un(n,e,n.prev)<0||Un(n,n.next,e)<0}function nY(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function zU(n,e){const t=new IT(n.i,n.x,n.y),i=new IT(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function A3(n,e,t,i){const r=new IT(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Ym(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function IT(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function iY(n,e,t,i){let r=0;for(let s=e,o=t-i;s<t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}class Ko{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return Ko.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];R3(e),D3(i,e);let o=e.length;t.forEach(R3);for(let l=0;l<t.length;l++)r.push(o),o+=t[l].length,D3(i,t[l]);const a=VX.triangulate(i,r);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function R3(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function D3(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class Eg extends Lt{constructor(e=new xc([new le(.5,.5),new le(-.5,.5),new le(-.5,-.5),new le(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let a=0,l=e.length;a<l;a++){const u=e[a];o(u)}this.setAttribute("position",new st(r,3)),this.setAttribute("uv",new st(s,2)),this.computeVertexNormals();function o(a){const l=[],u=t.curveSegments!==void 0?t.curveSegments:12,f=t.steps!==void 0?t.steps:1,d=t.depth!==void 0?t.depth:1;let p=t.bevelEnabled!==void 0?t.bevelEnabled:!0,m=t.bevelThickness!==void 0?t.bevelThickness:.2,g=t.bevelSize!==void 0?t.bevelSize:m-.1,y=t.bevelOffset!==void 0?t.bevelOffset:0,x=t.bevelSegments!==void 0?t.bevelSegments:3;const v=t.extrudePath,w=t.UVGenerator!==void 0?t.UVGenerator:rY;let S,T=!1,b,P,R,D;v&&(S=v.getSpacedPoints(f),T=!0,p=!1,b=v.computeFrenetFrames(f,!1),P=new N,R=new N,D=new N),p||(x=0,m=0,g=0,y=0);const C=a.extractPoints(u);let L=C.shape;const F=C.holes;if(!Ko.isClockWise(L)){L=L.reverse();for(let ce=0,ae=F.length;ce<ae;ce++){const Me=F[ce];Ko.isClockWise(Me)&&(F[ce]=Me.reverse())}}const G=Ko.triangulateShape(L,F),W=L;for(let ce=0,ae=F.length;ce<ae;ce++){const Me=F[ce];L=L.concat(Me)}function X(ce,ae,Me){return ae||console.error("THREE.ExtrudeGeometry: vec does not exist"),ce.clone().addScaledVector(ae,Me)}const re=L.length,Q=G.length;function z(ce,ae,Me){let ze,Re,$;const et=ce.x-ae.x,Ue=ce.y-ae.y,ft=Me.x-ce.x,Tt=Me.y-ce.y,B=et*et+Ue*Ue,k=et*Tt-Ue*ft;if(Math.abs(k)>Number.EPSILON){const fe=Math.sqrt(B),ge=Math.sqrt(ft*ft+Tt*Tt),pe=ae.x-Ue/fe,_e=ae.y+et/fe,De=Me.x-Tt/ge,Fe=Me.y+ft/ge,he=((De-pe)*Tt-(Fe-_e)*ft)/(et*Tt-Ue*ft);ze=pe+et*he-ce.x,Re=_e+Ue*he-ce.y;const Pe=ze*ze+Re*Re;if(Pe<=2)return new le(ze,Re);$=Math.sqrt(Pe/2)}else{let fe=!1;et>Number.EPSILON?ft>Number.EPSILON&&(fe=!0):et<-Number.EPSILON?ft<-Number.EPSILON&&(fe=!0):Math.sign(Ue)===Math.sign(Tt)&&(fe=!0),fe?(ze=-Ue,Re=et,$=Math.sqrt(B)):(ze=et,Re=Ue,$=Math.sqrt(B/2))}return new le(ze/$,Re/$)}const j=[];for(let ce=0,ae=W.length,Me=ae-1,ze=ce+1;ce<ae;ce++,Me++,ze++)Me===ae&&(Me=0),ze===ae&&(ze=0),j[ce]=z(W[ce],W[Me],W[ze]);const I=[];let ee,oe=j.concat();for(let ce=0,ae=F.length;ce<ae;ce++){const Me=F[ce];ee=[];for(let ze=0,Re=Me.length,$=Re-1,et=ze+1;ze<Re;ze++,$++,et++)$===Re&&($=0),et===Re&&(et=0),ee[ze]=z(Me[ze],Me[$],Me[et]);I.push(ee),oe=oe.concat(ee)}for(let ce=0;ce<x;ce++){const ae=ce/x,Me=m*Math.cos(ae*Math.PI/2),ze=g*Math.sin(ae*Math.PI/2)+y;for(let Re=0,$=W.length;Re<$;Re++){const et=X(W[Re],j[Re],ze);J(et.x,et.y,-Me)}for(let Re=0,$=F.length;Re<$;Re++){const et=F[Re];ee=I[Re];for(let Ue=0,ft=et.length;Ue<ft;Ue++){const Tt=X(et[Ue],ee[Ue],ze);J(Tt.x,Tt.y,-Me)}}}const se=g+y;for(let ce=0;ce<re;ce++){const ae=p?X(L[ce],oe[ce],se):L[ce];T?(R.copy(b.normals[0]).multiplyScalar(ae.x),P.copy(b.binormals[0]).multiplyScalar(ae.y),D.copy(S[0]).add(R).add(P),J(D.x,D.y,D.z)):J(ae.x,ae.y,0)}for(let ce=1;ce<=f;ce++)for(let ae=0;ae<re;ae++){const Me=p?X(L[ae],oe[ae],se):L[ae];T?(R.copy(b.normals[ce]).multiplyScalar(Me.x),P.copy(b.binormals[ce]).multiplyScalar(Me.y),D.copy(S[ce]).add(R).add(P),J(D.x,D.y,D.z)):J(Me.x,Me.y,d/f*ce)}for(let ce=x-1;ce>=0;ce--){const ae=ce/x,Me=m*Math.cos(ae*Math.PI/2),ze=g*Math.sin(ae*Math.PI/2)+y;for(let Re=0,$=W.length;Re<$;Re++){const et=X(W[Re],j[Re],ze);J(et.x,et.y,d+Me)}for(let Re=0,$=F.length;Re<$;Re++){const et=F[Re];ee=I[Re];for(let Ue=0,ft=et.length;Ue<ft;Ue++){const Tt=X(et[Ue],ee[Ue],ze);T?J(Tt.x,Tt.y+S[f-1].y,S[f-1].x+Me):J(Tt.x,Tt.y,d+Me)}}}te(),Te();function te(){const ce=r.length/3;if(p){let ae=0,Me=re*ae;for(let ze=0;ze<Q;ze++){const Re=G[ze];Xe(Re[2]+Me,Re[1]+Me,Re[0]+Me)}ae=f+x*2,Me=re*ae;for(let ze=0;ze<Q;ze++){const Re=G[ze];Xe(Re[0]+Me,Re[1]+Me,Re[2]+Me)}}else{for(let ae=0;ae<Q;ae++){const Me=G[ae];Xe(Me[2],Me[1],Me[0])}for(let ae=0;ae<Q;ae++){const Me=G[ae];Xe(Me[0]+re*f,Me[1]+re*f,Me[2]+re*f)}}i.addGroup(ce,r.length/3-ce,0)}function Te(){const ce=r.length/3;let ae=0;we(W,ae),ae+=W.length;for(let Me=0,ze=F.length;Me<ze;Me++){const Re=F[Me];we(Re,ae),ae+=Re.length}i.addGroup(ce,r.length/3-ce,1)}function we(ce,ae){let Me=ce.length;for(;--Me>=0;){const ze=Me;let Re=Me-1;Re<0&&(Re=ce.length-1);for(let $=0,et=f+x*2;$<et;$++){const Ue=re*$,ft=re*($+1),Tt=ae+ze+Ue,B=ae+Re+Ue,k=ae+Re+ft,fe=ae+ze+ft;it(Tt,B,k,fe)}}}function J(ce,ae,Me){l.push(ce),l.push(ae),l.push(Me)}function Xe(ce,ae,Me){Ee(ce),Ee(ae),Ee(Me);const ze=r.length/3,Re=w.generateTopUV(i,r,ze-3,ze-2,ze-1);Ie(Re[0]),Ie(Re[1]),Ie(Re[2])}function it(ce,ae,Me,ze){Ee(ce),Ee(ae),Ee(ze),Ee(ae),Ee(Me),Ee(ze);const Re=r.length/3,$=w.generateSideWallUV(i,r,Re-6,Re-3,Re-2,Re-1);Ie($[0]),Ie($[1]),Ie($[3]),Ie($[1]),Ie($[2]),Ie($[3])}function Ee(ce){r.push(l[ce*3+0]),r.push(l[ce*3+1]),r.push(l[ce*3+2])}function Ie(ce){s.push(ce.x),s.push(ce.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return sY(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];i.push(a)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new mC[r.type]().fromJSON(r)),new Eg(i,e.options)}}const rY={generateTopUV:function(n,e,t,i,r){const s=e[t*3],o=e[t*3+1],a=e[i*3],l=e[i*3+1],u=e[r*3],f=e[r*3+1];return[new le(s,o),new le(a,l),new le(u,f)]},generateSideWallUV:function(n,e,t,i,r,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],u=e[i*3],f=e[i*3+1],d=e[i*3+2],p=e[r*3],m=e[r*3+1],g=e[r*3+2],y=e[s*3],x=e[s*3+1],v=e[s*3+2];return Math.abs(a-f)<Math.abs(o-u)?[new le(o,1-l),new le(u,1-d),new le(p,1-g),new le(y,1-v)]:[new le(a,1-l),new le(f,1-d),new le(m,1-g),new le(x,1-v)]}};function sY(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class bg extends Qa{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new bg(e.radius,e.detail)}}class dd extends Qa{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new dd(e.radius,e.detail)}}class Cg extends Lt{constructor(e=.5,t=1,i=32,r=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:o},i=Math.max(3,i),r=Math.max(1,r);const a=[],l=[],u=[],f=[];let d=e;const p=(t-e)/r,m=new N,g=new le;for(let y=0;y<=r;y++){for(let x=0;x<=i;x++){const v=s+x/i*o;m.x=d*Math.cos(v),m.y=d*Math.sin(v),l.push(m.x,m.y,m.z),u.push(0,0,1),g.x=(m.x/t+1)/2,g.y=(m.y/t+1)/2,f.push(g.x,g.y)}d+=p}for(let y=0;y<r;y++){const x=y*(i+1);for(let v=0;v<i;v++){const w=v+x,S=w,T=w+i+1,b=w+i+2,P=w+1;a.push(S,T,P),a.push(T,b,P)}}this.setIndex(a),this.setAttribute("position",new st(l,3)),this.setAttribute("normal",new st(u,3)),this.setAttribute("uv",new st(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Cg(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Pg extends Lt{constructor(e=new xc([new le(0,.5),new le(-.5,-.5),new le(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)u(e);else for(let f=0;f<e.length;f++)u(e[f]),this.addGroup(a,l,f),a+=l,l=0;this.setIndex(i),this.setAttribute("position",new st(r,3)),this.setAttribute("normal",new st(s,3)),this.setAttribute("uv",new st(o,2));function u(f){const d=r.length/3,p=f.extractPoints(t);let m=p.shape;const g=p.holes;Ko.isClockWise(m)===!1&&(m=m.reverse());for(let x=0,v=g.length;x<v;x++){const w=g[x];Ko.isClockWise(w)===!0&&(g[x]=w.reverse())}const y=Ko.triangulateShape(m,g);for(let x=0,v=g.length;x<v;x++){const w=g[x];m=m.concat(w)}for(let x=0,v=m.length;x<v;x++){const w=m[x];r.push(w.x,w.y,0),s.push(0,0,1),o.push(w.x,w.y)}for(let x=0,v=y.length;x<v;x++){const w=y[x],S=w[0]+d,T=w[1]+d,b=w[2]+d;i.push(S,T,b),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return oY(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=t[e.shapes[r]];i.push(o)}return new Pg(i,e.curveSegments)}}function oY(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class pd extends Lt{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const l=Math.min(o+a,Math.PI);let u=0;const f=[],d=new N,p=new N,m=[],g=[],y=[],x=[];for(let v=0;v<=i;v++){const w=[],S=v/i;let T=0;v===0&&o===0?T=.5/t:v===i&&l===Math.PI&&(T=-.5/t);for(let b=0;b<=t;b++){const P=b/t;d.x=-e*Math.cos(r+P*s)*Math.sin(o+S*a),d.y=e*Math.cos(o+S*a),d.z=e*Math.sin(r+P*s)*Math.sin(o+S*a),g.push(d.x,d.y,d.z),p.copy(d).normalize(),y.push(p.x,p.y,p.z),x.push(P+T,1-S),w.push(u++)}f.push(w)}for(let v=0;v<i;v++)for(let w=0;w<t;w++){const S=f[v][w+1],T=f[v][w],b=f[v+1][w],P=f[v+1][w+1];(v!==0||o>0)&&m.push(S,T,P),(v!==i-1||l<Math.PI)&&m.push(T,b,P)}this.setIndex(m),this.setAttribute("position",new st(g,3)),this.setAttribute("normal",new st(y,3)),this.setAttribute("uv",new st(x,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new pd(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Ag extends Qa{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Ag(e.radius,e.detail)}}class Rg extends Lt{constructor(e=1,t=.4,i=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const o=[],a=[],l=[],u=[],f=new N,d=new N,p=new N;for(let m=0;m<=i;m++)for(let g=0;g<=r;g++){const y=g/r*s,x=m/i*Math.PI*2;d.x=(e+t*Math.cos(x))*Math.cos(y),d.y=(e+t*Math.cos(x))*Math.sin(y),d.z=t*Math.sin(x),a.push(d.x,d.y,d.z),f.x=e*Math.cos(y),f.y=e*Math.sin(y),p.subVectors(d,f).normalize(),l.push(p.x,p.y,p.z),u.push(g/r),u.push(m/i)}for(let m=1;m<=i;m++)for(let g=1;g<=r;g++){const y=(r+1)*m+g-1,x=(r+1)*(m-1)+g-1,v=(r+1)*(m-1)+g,w=(r+1)*m+g;o.push(y,x,w),o.push(x,v,w)}this.setIndex(o),this.setAttribute("position",new st(a,3)),this.setAttribute("normal",new st(l,3)),this.setAttribute("uv",new st(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Rg(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Dg extends Lt{constructor(e=1,t=.4,i=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:s,q:o},i=Math.floor(i),r=Math.floor(r);const a=[],l=[],u=[],f=[],d=new N,p=new N,m=new N,g=new N,y=new N,x=new N,v=new N;for(let S=0;S<=i;++S){const T=S/i*s*Math.PI*2;w(T,s,o,e,m),w(T+.01,s,o,e,g),x.subVectors(g,m),v.addVectors(g,m),y.crossVectors(x,v),v.crossVectors(y,x),y.normalize(),v.normalize();for(let b=0;b<=r;++b){const P=b/r*Math.PI*2,R=-t*Math.cos(P),D=t*Math.sin(P);d.x=m.x+(R*v.x+D*y.x),d.y=m.y+(R*v.y+D*y.y),d.z=m.z+(R*v.z+D*y.z),l.push(d.x,d.y,d.z),p.subVectors(d,m).normalize(),u.push(p.x,p.y,p.z),f.push(S/i),f.push(b/r)}}for(let S=1;S<=i;S++)for(let T=1;T<=r;T++){const b=(r+1)*(S-1)+(T-1),P=(r+1)*S+(T-1),R=(r+1)*S+T,D=(r+1)*(S-1)+T;a.push(b,P,D),a.push(P,R,D)}this.setIndex(a),this.setAttribute("position",new st(l,3)),this.setAttribute("normal",new st(u,3)),this.setAttribute("uv",new st(f,2));function w(S,T,b,P,R){const D=Math.cos(S),C=Math.sin(S),L=b/T*S,F=Math.cos(L);R.x=P*(2+F)*.5*D,R.y=P*(2+F)*C*.5,R.z=P*Math.sin(L)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Dg(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Lg extends Lt{constructor(e=new dC(new N(-1,-1,0),new N(-1,1,0),new N(1,1,0)),t=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new N,l=new N,u=new le;let f=new N;const d=[],p=[],m=[],g=[];y(),this.setIndex(g),this.setAttribute("position",new st(d,3)),this.setAttribute("normal",new st(p,3)),this.setAttribute("uv",new st(m,2));function y(){for(let S=0;S<t;S++)x(S);x(s===!1?t:0),w(),v()}function x(S){f=e.getPointAt(S/t,f);const T=o.normals[S],b=o.binormals[S];for(let P=0;P<=r;P++){const R=P/r*Math.PI*2,D=Math.sin(R),C=-Math.cos(R);l.x=C*T.x+D*b.x,l.y=C*T.y+D*b.y,l.z=C*T.z+D*b.z,l.normalize(),p.push(l.x,l.y,l.z),a.x=f.x+i*l.x,a.y=f.y+i*l.y,a.z=f.z+i*l.z,d.push(a.x,a.y,a.z)}}function v(){for(let S=1;S<=t;S++)for(let T=1;T<=r;T++){const b=(r+1)*(S-1)+(T-1),P=(r+1)*S+(T-1),R=(r+1)*S+T,D=(r+1)*(S-1)+T;g.push(b,P,D),g.push(P,R,D)}}function w(){for(let S=0;S<=t;S++)for(let T=0;T<=r;T++)u.x=S/t,u.y=T/r,m.push(u.x,u.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Lg(new mC[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class BU extends Lt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new N,s=new N;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let u=0,f=l.length;u<f;++u){const d=l[u],p=d.start,m=d.count;for(let g=p,y=p+m;g<y;g+=3)for(let x=0;x<3;x++){const v=a.getX(g+x),w=a.getX(g+(x+1)%3);r.fromBufferAttribute(o,v),s.fromBufferAttribute(o,w),L3(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let u=0;u<3;u++){const f=3*a+u,d=3*a+(u+1)%3;r.fromBufferAttribute(o,f),s.fromBufferAttribute(o,d),L3(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new st(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function L3(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var I3=Object.freeze({__proto__:null,BoxGeometry:pu,CapsuleGeometry:Sg,CircleGeometry:wg,ConeGeometry:Mg,CylinderGeometry:jc,DodecahedronGeometry:Tg,EdgesGeometry:NU,ExtrudeGeometry:Eg,IcosahedronGeometry:bg,LatheGeometry:hd,OctahedronGeometry:dd,PlaneGeometry:cd,PolyhedronGeometry:Qa,RingGeometry:Cg,ShapeGeometry:Pg,SphereGeometry:pd,TetrahedronGeometry:Ag,TorusGeometry:Rg,TorusKnotGeometry:Dg,TubeGeometry:Lg,WireframeGeometry:BU});class VU extends Ti{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Oe(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class HU extends on{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class gC extends Ti{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Oe(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Oe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ja,this.normalScale=new le(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class GU extends gC{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new le(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Xn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Oe(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Oe(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Oe(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class WU extends Ti{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Oe(16777215),this.specular=new Oe(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Oe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ja,this.normalScale=new le(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=gg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class jU extends Ti{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Oe(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Oe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ja,this.normalScale=new le(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class vC extends Ti{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ja,this.normalScale=new le(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class XU extends Ti{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Oe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Oe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ja,this.normalScale=new le(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=gg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class YU extends Ti{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Oe(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ja,this.normalScale=new le(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class qU extends br{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function zs(n,e,t){return yC(n)?new n.constructor(n.subarray(e,t!==void 0?t:n.length)):n.slice(e,t)}function ac(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function yC(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function ZU(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function kT(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const a=t[s]*e;for(let l=0;l!==e;++l)r[o++]=n[a+l]}return r}function _C(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(e.push(s.time),t.push(o)),s=n[r++];while(s!==void 0)}function aY(n,e,t,i,r=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const u=s.tracks[l],f=u.getValueSize(),d=[],p=[];for(let m=0;m<u.times.length;++m){const g=u.times[m]*r;if(!(g<t||g>=i)){d.push(u.times[m]);for(let y=0;y<f;++y)p.push(u.values[m*f+y])}}d.length!==0&&(u.times=ac(d,u.times.constructor),u.values=ac(p,u.values.constructor),o.push(u))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function lY(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let o=0;o<r;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const u=n.tracks.find(function(v){return v.name===a.name&&v.ValueTypeName===l});if(u===void 0)continue;let f=0;const d=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(f=d/3);let p=0;const m=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=m/3);const g=a.times.length-1;let y;if(s<=a.times[0]){const v=f,w=d-f;y=zs(a.values,v,w)}else if(s>=a.times[g]){const v=g*d+f,w=v+d-f;y=zs(a.values,v,w)}else{const v=a.createInterpolant(),w=f,S=d-f;v.evaluate(s),y=zs(v.resultBuffer,w,S)}l==="quaternion"&&new Si().fromArray(y).normalize().conjugate().toArray(y);const x=u.times.length;for(let v=0;v<x;++v){const w=v*m+p;if(l==="quaternion")Si.multiplyQuaternionsFlat(u.values,w,y,0,u.values,w);else{const S=m-p*2;for(let T=0;T<S;++T)u.values[w+T]-=y[T]}}}return n.blendMode=Kb,n}const uY={arraySlice:zs,convertArray:ac,isTypedArray:yC,getKeyframeOrder:ZU,sortedArray:kT,flattenJSON:_C,subclip:aY,makeClipAdditive:lY};class Ig{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(i=2,s=a);for(let l=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0;break n}break e}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class $U extends Ig{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:rc,endingEnd:rc}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case sc:s=e,a=2*t-i;break;case Vm:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(l===void 0)switch(this.getSettings_().endingEnd){case sc:o=e,l=2*i-t;break;case Vm:o=1,l=i+r[1]-r[0];break;default:o=e-1,l=t}const u=(i-t)*.5,f=this.valueSize;this._weightPrev=u/(t-a),this._weightNext=u/(l-i),this._offsetPrev=s*f,this._offsetNext=o*f}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,f=this._offsetPrev,d=this._offsetNext,p=this._weightPrev,m=this._weightNext,g=(i-t)/(r-t),y=g*g,x=y*g,v=-p*x+2*p*y-p*g,w=(1+p)*x+(-1.5-2*p)*y+(-.5+p)*g+1,S=(-1-m)*x+(1.5+m)*y+.5*g,T=m*x-m*y;for(let b=0;b!==a;++b)s[b]=v*o[f+b]+w*o[u+b]+S*o[l+b]+T*o[d+b];return s}}class xC extends Ig{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,f=(i-t)/(r-t),d=1-f;for(let p=0;p!==a;++p)s[p]=o[u+p]*d+o[l+p]*f;return s}}class KU extends Ig{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Ro{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=ac(t,this.TimeBufferType),this.values=ac(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:ac(e.times,Array),values:ac(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new KU(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new xC(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new $U(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case zm:t=this.InterpolantFactoryMethodDiscrete;break;case Bm:t=this.InterpolantFactoryMethodLinear;break;case ky:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return zm;case this.InterpolantFactoryMethodLinear:return Bm;case this.InterpolantFactoryMethodSmooth:return ky}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;o!==-1&&i[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=zs(i,s,o),this.values=zs(this.values,s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=i[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(r!==void 0&&yC(r))for(let a=0,l=r.length;a!==l;++a){const u=r[a];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,u),e=!1;break}}return e}optimize(){const e=zs(this.times),t=zs(this.values),i=this.getValueSize(),r=this.getInterpolation()===ky,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const u=e[a],f=e[a+1];if(u!==f&&(a!==1||u!==e[0]))if(r)l=!0;else{const d=a*i,p=d-i,m=d+i;for(let g=0;g!==i;++g){const y=t[d+g];if(y!==t[p+g]||y!==t[m+g]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const d=a*i,p=o*i;for(let m=0;m!==i;++m)t[p+m]=t[d+m]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,l=o*i,u=0;u!==i;++u)t[l+u]=t[a+u];++o}return o!==e.length?(this.times=zs(e,0,o),this.values=zs(t,0,o*i)):(this.times=e,this.values=t),this}clone(){const e=zs(this.times,0),t=zs(this.values,0),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}Ro.prototype.TimeBufferType=Float32Array;Ro.prototype.ValueBufferType=Float32Array;Ro.prototype.DefaultInterpolation=Bm;class Xc extends Ro{}Xc.prototype.ValueTypeName="bool";Xc.prototype.ValueBufferType=Array;Xc.prototype.DefaultInterpolation=zm;Xc.prototype.InterpolantFactoryMethodLinear=void 0;Xc.prototype.InterpolantFactoryMethodSmooth=void 0;class SC extends Ro{}SC.prototype.ValueTypeName="color";class qm extends Ro{}qm.prototype.ValueTypeName="number";class JU extends Ig{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-t)/(r-t);let u=e*a;for(let f=u+a;u!==f;u+=4)Si.slerpFlat(s,0,o,u-a,o,u,l);return s}}class md extends Ro{InterpolantFactoryMethodLinear(e){return new JU(this.times,this.values,this.getValueSize(),e)}}md.prototype.ValueTypeName="quaternion";md.prototype.DefaultInterpolation=Bm;md.prototype.InterpolantFactoryMethodSmooth=void 0;class Yc extends Ro{}Yc.prototype.ValueTypeName="string";Yc.prototype.ValueBufferType=Array;Yc.prototype.DefaultInterpolation=zm;Yc.prototype.InterpolantFactoryMethodLinear=void 0;Yc.prototype.InterpolantFactoryMethodSmooth=void 0;class Zm extends Ro{}Zm.prototype.ValueTypeName="vector";class $m{constructor(e,t=-1,i,r=Tx){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=ms(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(fY(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push(Ro.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],u=[];l.push((a+s-1)%s,a,(a+1)%s),u.push(0,1,0);const f=ZU(l);l=kT(l,1,f),u=kT(u,1,f),!r&&l[0]===0&&(l.push(s),u.push(u[0])),o.push(new qm(".morphTargetInfluences["+t[a].name+"]",l,u).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const u=e[a],f=u.name.match(s);if(f&&f.length>1){const d=f[1];let p=r[d];p||(r[d]=p=[]),p.push(u)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(d,p,m,g,y){if(m.length!==0){const x=[],v=[];_C(m,x,v,g),x.length!==0&&y.push(new d(p,x,v))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const u=e.hierarchy||[];for(let d=0;d<u.length;d++){const p=u[d].keys;if(!(!p||p.length===0))if(p[0].morphTargets){const m={};let g;for(g=0;g<p.length;g++)if(p[g].morphTargets)for(let y=0;y<p[g].morphTargets.length;y++)m[p[g].morphTargets[y]]=-1;for(const y in m){const x=[],v=[];for(let w=0;w!==p[g].morphTargets.length;++w){const S=p[g];x.push(S.time),v.push(S.morphTarget===y?1:0)}r.push(new qm(".morphTargetInfluence["+y+"]",x,v))}l=m.length*o}else{const m=".bones["+t[d].name+"]";i(Zm,m+".position",p,"pos",r),i(md,m+".quaternion",p,"rot",r),i(Zm,m+".scale",p,"scl",r)}}return r.length===0?null:new this(s,l,r,a)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function cY(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return qm;case"vector":case"vector2":case"vector3":case"vector4":return Zm;case"color":return SC;case"quaternion":return md;case"bool":case"boolean":return Xc;case"string":return Yc}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function fY(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=cY(n.type);if(n.times===void 0){const t=[],i=[];_C(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Oc={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class wC{constructor(e,t,i){const r=this;let s=!1,o=0,a=0,l;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(f){a++,s===!1&&r.onStart!==void 0&&r.onStart(f,o,a),s=!0},this.itemEnd=function(f){o++,r.onProgress!==void 0&&r.onProgress(f,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(f){r.onError!==void 0&&r.onError(f)},this.resolveURL=function(f){return l?l(f):f},this.setURLModifier=function(f){return l=f,this},this.addHandler=function(f,d){return u.push(f,d),this},this.removeHandler=function(f){const d=u.indexOf(f);return d!==-1&&u.splice(d,2),this},this.getHandler=function(f){for(let d=0,p=u.length;d<p;d+=2){const m=u[d],g=u[d+1];if(m.global&&(m.lastIndex=0),m.test(f))return g}return null}}}const QU=new wC;class ws{constructor(e){this.manager=e!==void 0?e:QU,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const wa={};class hY extends Error{constructor(e,t){super(e),this.response=t}}class Ya extends ws{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Oc.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(wa[e]!==void 0){wa[e].push({onLoad:t,onProgress:i,onError:r});return}wa[e]=[],wa[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const f=wa[e],d=u.body.getReader(),p=u.headers.get("Content-Length")||u.headers.get("X-File-Size"),m=p?parseInt(p):0,g=m!==0;let y=0;const x=new ReadableStream({start(v){w();function w(){d.read().then(({done:S,value:T})=>{if(S)v.close();else{y+=T.byteLength;const b=new ProgressEvent("progress",{lengthComputable:g,loaded:y,total:m});for(let P=0,R=f.length;P<R;P++){const D=f[P];D.onProgress&&D.onProgress(b)}v.enqueue(T),w()}})}}});return new Response(x)}else throw new hY(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(l){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(f=>new DOMParser().parseFromString(f,a));case"json":return u.json();default:if(a===void 0)return u.text();{const d=/charset="?([^;"\s]*)"?/i.exec(a),p=d&&d[1]?d[1].toLowerCase():void 0,m=new TextDecoder(p);return u.arrayBuffer().then(g=>m.decode(g))}}}).then(u=>{Oc.add(e,u);const f=wa[e];delete wa[e];for(let d=0,p=f.length;d<p;d++){const m=f[d];m.onLoad&&m.onLoad(u)}}).catch(u=>{const f=wa[e];if(f===void 0)throw this.manager.itemError(e),u;delete wa[e];for(let d=0,p=f.length;d<p;d++){const m=f[d];m.onError&&m.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class dY extends ws{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Ya(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=$m.parse(e[i]);t.push(r)}return t}}class pY extends ws{constructor(e){super(e)}load(e,t,i,r){const s=this,o=[],a=new uC,l=new Ya(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let u=0;function f(d){l.load(e[d],function(p){const m=s.parse(p,!0);o[d]={width:m.width,height:m.height,format:m.format,mipmaps:m.mipmaps},u+=1,u===6&&(m.mipmapCount===1&&(a.minFilter=vt),a.image=o,a.format=m.format,a.needsUpdate=!0,t&&t(a))},i,r)}if(Array.isArray(e))for(let d=0,p=e.length;d<p;++d)f(d);else l.load(e,function(d){const p=s.parse(d,!0);if(p.isCubemap){const m=p.mipmaps.length/p.mipmapCount;for(let g=0;g<m;g++){o[g]={mipmaps:[]};for(let y=0;y<p.mipmapCount;y++)o[g].mipmaps.push(p.mipmaps[g*p.mipmapCount+y]),o[g].format=p.format,o[g].width=p.width,o[g].height=p.height}a.image=o}else a.image.width=p.width,a.image.height=p.height,a.mipmaps=p.mipmaps;p.mipmapCount===1&&(a.minFilter=vt),a.format=p.format,a.needsUpdate=!0,t&&t(a)},i,r);return a}}class Km extends ws{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Oc.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=Gm("img");function l(){f(),Oc.add(e,this),t&&t(this),s.manager.itemEnd(e)}function u(d){f(),r&&r(d),s.manager.itemError(e),s.manager.itemEnd(e)}function f(){a.removeEventListener("load",l,!1),a.removeEventListener("error",u,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class mY extends ws{constructor(e){super(e)}load(e,t,i,r){const s=new yg,o=new Km(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(u){o.load(e[u],function(f){s.images[u]=f,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let u=0;u<e.length;++u)l(u);return s}}class gY extends ws{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Ua,a=new Ya(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){const u=s.parse(l);u&&(u.image!==void 0?o.image=u.image:u.data!==void 0&&(o.image.width=u.width,o.image.height=u.height,o.image.data=u.data),o.wrapS=u.wrapS!==void 0?u.wrapS:mi,o.wrapT=u.wrapT!==void 0?u.wrapT:mi,o.magFilter=u.magFilter!==void 0?u.magFilter:vt,o.minFilter=u.minFilter!==void 0?u.minFilter:vt,o.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.encoding!==void 0&&(o.encoding=u.encoding),u.flipY!==void 0&&(o.flipY=u.flipY),u.format!==void 0&&(o.format=u.format),u.type!==void 0&&(o.type=u.type),u.mipmaps!==void 0&&(o.mipmaps=u.mipmaps,o.minFilter=iu),u.mipmapCount===1&&(o.minFilter=vt),u.generateMipmaps!==void 0&&(o.generateMipmaps=u.generateMipmaps),o.needsUpdate=!0,t&&t(o,u))},i,r),o}}class kg extends ws{constructor(e){super(e)}load(e,t,i,r){const s=new bn,o=new Km(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}class mu extends rn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Oe(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class eF extends mu{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(rn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Oe(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const lw=new mt,k3=new N,O3=new N;class MC{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new le(512,512),this.map=null,this.mapPass=null,this.matrix=new mt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Cx,this._frameExtents=new le(1,1),this._viewportCount=1,this._viewports=[new Gt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;k3.setFromMatrixPosition(e.matrixWorld),t.position.copy(k3),O3.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(O3),t.updateMatrixWorld(),lw.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(lw),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(lw)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class vY extends MC{constructor(){super(new Nn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=Wh*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class tF extends mu{constructor(e,t,i=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(rn.DEFAULT_UP),this.updateMatrix(),this.target=new rn,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new vY}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const N3=new mt,sp=new N,uw=new N;class yY extends MC{constructor(){super(new Nn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new le(4,2),this._viewportCount=6,this._viewports=[new Gt(2,1,1,1),new Gt(0,1,1,1),new Gt(3,1,1,1),new Gt(1,1,1,1),new Gt(3,0,1,1),new Gt(1,0,1,1)],this._cubeDirections=[new N(1,0,0),new N(-1,0,0),new N(0,0,1),new N(0,0,-1),new N(0,1,0),new N(0,-1,0)],this._cubeUps=[new N(0,1,0),new N(0,1,0),new N(0,1,0),new N(0,1,0),new N(0,0,1),new N(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),sp.setFromMatrixPosition(e.matrixWorld),i.position.copy(sp),uw.copy(i.position),uw.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(uw),i.updateMatrixWorld(),r.makeTranslation(-sp.x,-sp.y,-sp.z),N3.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(N3)}}class nF extends mu{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new yY}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class _Y extends MC{constructor(){super(new xg(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class iF extends mu{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(rn.DEFAULT_UP),this.updateMatrix(),this.target=new rn,this.shadow=new _Y}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class rF extends mu{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class sF extends mu{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class oF{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new N)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*i),t.addScaledVector(o[4],1.092548*(i*r)),t.addScaledVector(o[5],1.092548*(r*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(i*s)),t.addScaledVector(o[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*i),t.addScaledVector(o[4],2*.429043*i*r),t.addScaledVector(o[5],2*.429043*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*i*s),t.addScaledVector(o[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}class Fx extends mu{constructor(e=new oF,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class zx extends ws{constructor(e){super(e),this.textures={}}load(e,t,i,r){const s=this,o=new Ya(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=zx.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new Oe().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==1&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=i(o.value);break;case"c":r.uniforms[s].value=new Oe().setHex(o.value);break;case"v2":r.uniforms[s].value=new le().fromArray(o.value);break;case"v3":r.uniforms[s].value=new N().fromArray(o.value);break;case"v4":r.uniforms[s].value=new Gt().fromArray(o.value);break;case"m3":r.uniforms[s].value=new Ut().fromArray(o.value);break;case"m4":r.uniforms[s].value=new mt().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new le().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new le().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:VU,SpriteMaterial:oC,RawShaderMaterial:HU,ShaderMaterial:on,PointsMaterial:lC,MeshPhysicalMaterial:GU,MeshStandardMaterial:gC,MeshPhongMaterial:WU,MeshToonMaterial:jU,MeshNormalMaterial:vC,MeshLambertMaterial:XU,MeshDepthMaterial:Ax,MeshDistanceMaterial:rC,MeshBasicMaterial:du,MeshMatcapMaterial:YU,LineDashedMaterial:qU,LineBasicMaterial:br,Material:Ti};return new t[e]}}class OT{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class aF extends Lt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class lF extends ws{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Ya(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(m,g){if(t[g]!==void 0)return t[g];const x=m.interleavedBuffers[g],v=s(m,x.buffer),w=ah(x.type,v),S=new Ix(w,x.stride);return S.uuid=x.uuid,t[g]=S,S}function s(m,g){if(i[g]!==void 0)return i[g];const x=m.arrayBuffers[g],v=new Uint32Array(x).buffer;return i[g]=v,v}const o=e.isInstancedBufferGeometry?new aF:new Lt,a=e.data.index;if(a!==void 0){const m=ah(a.type,a.array);o.setIndex(new sn(m,1))}const l=e.data.attributes;for(const m in l){const g=l[m];let y;if(g.isInterleavedBufferAttribute){const x=r(e.data,g.data);y=new Ic(x,g.itemSize,g.offset,g.normalized)}else{const x=ah(g.type,g.array),v=g.isInstancedBufferAttribute?Xh:sn;y=new v(x,g.itemSize,g.normalized)}g.name!==void 0&&(y.name=g.name),g.usage!==void 0&&y.setUsage(g.usage),g.updateRange!==void 0&&(y.updateRange.offset=g.updateRange.offset,y.updateRange.count=g.updateRange.count),o.setAttribute(m,y)}const u=e.data.morphAttributes;if(u)for(const m in u){const g=u[m],y=[];for(let x=0,v=g.length;x<v;x++){const w=g[x];let S;if(w.isInterleavedBufferAttribute){const T=r(e.data,w.data);S=new Ic(T,w.itemSize,w.offset,w.normalized)}else{const T=ah(w.type,w.array);S=new sn(T,w.itemSize,w.normalized)}w.name!==void 0&&(S.name=w.name),y.push(S)}o.morphAttributes[m]=y}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const d=e.data.groups||e.data.drawcalls||e.data.offsets;if(d!==void 0)for(let m=0,g=d.length;m!==g;++m){const y=d[m];o.addGroup(y.start,y.count,y.materialIndex)}const p=e.data.boundingSphere;if(p!==void 0){const m=new N;p.center!==void 0&&m.fromArray(p.center),o.boundingSphere=new aa(m,p.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class xY extends ws{constructor(e){super(e)}load(e,t,i,r){const s=this,o=this.path===""?OT.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new Ya(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let u=null;try{u=JSON.parse(l)}catch(d){r!==void 0&&r(d),console.error("THREE:ObjectLoader: Can't parse "+e+".",d.message);return}const f=u.metadata;if(f===void 0||f.type===void 0||f.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(u,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?OT.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new Ya(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(a)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){t!==void 0&&t(u)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),u=this.parseObject(e.object,s,l,a,i),f=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,f),t!==void 0){let d=!1;for(const p in o)if(o[p].data instanceof HTMLImageElement){d=!0;break}d===!1&&t(u)}return u}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,r,a,o,t),u=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,u),l}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new xc().fromJSON(e[i]);t[s.uuid]=s}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new kx().fromJSON(e[s],r);i[a.uuid]=a}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new lF;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(l);break;default:l.type in I3?a=I3[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),i[l.uuid]=a}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const s=new zx;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];i[l.uuid]===void 0&&(i[l.uuid]=s.parse(l)),r[l.uuid]=i[l.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=$m.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const i=this,r={};let s;function o(l){return i.manager.itemStart(l),s.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const u=l,f=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:i.resourcePath+u;return o(f)}else return l.data?{data:ah(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new wC(t);s=new Km(l),s.setCrossOrigin(this.crossOrigin);for(let u=0,f=e.length;u<f;u++){const d=e[u],p=d.url;if(Array.isArray(p)){const m=[];for(let g=0,y=p.length;g<y;g++){const x=p[g],v=a(x);v!==null&&(v instanceof HTMLImageElement?m.push(v):m.push(new Ua(v.data,v.width,v.height)))}r[d.uuid]=new oc(m)}else{const m=a(d.url);r[d.uuid]=new oc(m)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await r.loadAsync(l)}else return o.data?{data:ah(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new Km(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],u=l.url;if(Array.isArray(u)){const f=[];for(let d=0,p=u.length;d<p;d++){const m=u[d],g=await s(m);g!==null&&(g instanceof HTMLImageElement?f.push(g):f.push(new Ua(g.data,g.width,g.height)))}i[l.uuid]=new oc(f)}else{const f=await s(l.url);i[l.uuid]=new oc(f)}}}return i}parseTextures(e,t){function i(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],u=l.data;let f;Array.isArray(u)?(f=new yg,u.length===6&&(f.needsUpdate=!0)):(u&&u.data?f=new Ua:f=new bn,u&&(f.needsUpdate=!0)),f.source=l,f.uuid=a.uuid,a.name!==void 0&&(f.name=a.name),a.mapping!==void 0&&(f.mapping=i(a.mapping,SY)),a.channel!==void 0&&(f.channel=a.channel),a.offset!==void 0&&f.offset.fromArray(a.offset),a.repeat!==void 0&&f.repeat.fromArray(a.repeat),a.center!==void 0&&f.center.fromArray(a.center),a.rotation!==void 0&&(f.rotation=a.rotation),a.wrap!==void 0&&(f.wrapS=i(a.wrap[0],U3),f.wrapT=i(a.wrap[1],U3)),a.format!==void 0&&(f.format=a.format),a.internalFormat!==void 0&&(f.internalFormat=a.internalFormat),a.type!==void 0&&(f.type=a.type),a.encoding!==void 0&&(f.encoding=a.encoding),a.minFilter!==void 0&&(f.minFilter=i(a.minFilter,F3)),a.magFilter!==void 0&&(f.magFilter=i(a.magFilter,F3)),a.anisotropy!==void 0&&(f.anisotropy=a.anisotropy),a.flipY!==void 0&&(f.flipY=a.flipY),a.generateMipmaps!==void 0&&(f.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(f.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(f.unpackAlignment=a.unpackAlignment),a.userData!==void 0&&(f.userData=a.userData),r[a.uuid]=f}return r}parseObject(e,t,i,r,s){let o;function a(p){return t[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",p),t[p]}function l(p){if(p!==void 0){if(Array.isArray(p)){const m=[];for(let g=0,y=p.length;g<y;g++){const x=p[g];i[x]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",x),m.push(i[x])}return m}return i[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",p),i[p]}}function u(p){return r[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",p),r[p]}let f,d;switch(e.type){case"Scene":o=new Lc,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new Oe(e.background):o.background=u(e.background)),e.environment!==void 0&&(o.environment=u(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new Lx(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new Dx(e.fog.color,e.fog.density))),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":o=new Nn(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new xg(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new rF(e.color,e.intensity);break;case"DirectionalLight":o=new iF(e.color,e.intensity);break;case"PointLight":o=new nF(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new sF(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new tF(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new eF(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new Fx().fromJSON(e);break;case"SkinnedMesh":f=a(e.geometry),d=l(e.material),o=new bU(f,d),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":f=a(e.geometry),d=l(e.material),o=new Ii(f,d);break;case"InstancedMesh":f=a(e.geometry),d=l(e.material);const p=e.count,m=e.instanceMatrix,g=e.instanceColor;o=new CU(f,d,p),o.instanceMatrix=new Xh(new Float32Array(m.array),16),g!==void 0&&(o.instanceColor=new Xh(new Float32Array(g.array),g.itemSize));break;case"LOD":o=new EU;break;case"Line":o=new su(a(e.geometry),l(e.material));break;case"LineLoop":o=new PU(a(e.geometry),l(e.material));break;case"LineSegments":o=new la(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new AU(a(e.geometry),l(e.material));break;case"Sprite":o=new TU(l(e.material));break;case"Group":o=new uh;break;case"Bone":o=new aC;break;default:o=new rn}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const p=e.children;for(let m=0;m<p.length;m++)o.add(this.parseObject(p[m],t,i,r,s))}if(e.animations!==void 0){const p=e.animations;for(let m=0;m<p.length;m++){const g=p[m];o.animations.push(s[g])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const p=e.levels;for(let m=0;m<p.length;m++){const g=p[m],y=o.getObjectByProperty("uuid",g.object);y!==void 0&&o.addLevel(y,g.distance,g.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}}const SY={UVMapping:wx,CubeReflectionMapping:tu,CubeRefractionMapping:nu,EquirectangularReflectionMapping:Nm,EquirectangularRefractionMapping:Um,CubeUVReflectionMapping:ad},U3={RepeatWrapping:Xa,ClampToEdgeWrapping:mi,MirroredRepeatWrapping:Fm},F3={NearestFilter:Ht,NearestMipmapNearestFilter:b_,NearestMipmapLinearFilter:jp,LinearFilter:vt,LinearMipmapNearestFilter:Yb,LinearMipmapLinearFilter:iu};class wY extends ws{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Oc.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){Oc.add(e,l),t&&t(l),s.manager.itemEnd(e)}).catch(function(l){r&&r(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}let U0;class TC{static getContext(){return U0===void 0&&(U0=new(window.AudioContext||window.webkitAudioContext)),U0}static setContext(e){U0=e}}class MY extends ws{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Ya(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{const l=a.slice(0);TC.getContext().decodeAudioData(l,function(f){t(f)})}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}}class TY extends Fx{constructor(e,t,i=1){super(void 0,i),this.isHemisphereLightProbe=!0;const r=new Oe().set(e),s=new Oe().set(t),o=new N(r.r,r.g,r.b),a=new N(s.r,s.g,s.b),l=Math.sqrt(Math.PI),u=l*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(l),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(u)}}class EY extends Fx{constructor(e,t=1){super(void 0,t),this.isAmbientLightProbe=!0;const i=new Oe().set(e);this.sh.coefficients[0].set(i.r,i.g,i.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const z3=new mt,B3=new mt,Iu=new mt;class bY{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Nn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Nn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Iu.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,o=t.near*Math.tan(vc*t.fov*.5)/t.zoom;let a,l;B3.elements[12]=-r,z3.elements[12]=r,a=-o*t.aspect+s,l=o*t.aspect+s,Iu.elements[0]=2*t.near/(l-a),Iu.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(Iu),a=-o*t.aspect-s,l=o*t.aspect-s,Iu.elements[0]=2*t.near/(l-a),Iu.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(Iu)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(B3),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(z3)}}class EC{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=V3(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=V3();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function V3(){return(typeof performance>"u"?Date:performance).now()}const ku=new N,H3=new Si,CY=new N,Ou=new N;class PY extends rn{constructor(){super(),this.type="AudioListener",this.context=TC.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new EC}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(ku,H3,CY),Ou.set(0,0,-1).applyQuaternion(H3),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(ku.x,r),t.positionY.linearRampToValueAtTime(ku.y,r),t.positionZ.linearRampToValueAtTime(ku.z,r),t.forwardX.linearRampToValueAtTime(Ou.x,r),t.forwardY.linearRampToValueAtTime(Ou.y,r),t.forwardZ.linearRampToValueAtTime(Ou.z,r),t.upX.linearRampToValueAtTime(i.x,r),t.upY.linearRampToValueAtTime(i.y,r),t.upZ.linearRampToValueAtTime(i.z,r)}else t.setPosition(ku.x,ku.y,ku.z),t.setOrientation(Ou.x,Ou.y,Ou.z,i.x,i.y,i.z)}}class uF extends rn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Nu=new N,G3=new Si,AY=new N,Uu=new N;class RY extends uF{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Nu,G3,AY),Uu.set(0,0,1).applyQuaternion(G3);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Nu.x,i),t.positionY.linearRampToValueAtTime(Nu.y,i),t.positionZ.linearRampToValueAtTime(Nu.z,i),t.orientationX.linearRampToValueAtTime(Uu.x,i),t.orientationY.linearRampToValueAtTime(Uu.y,i),t.orientationZ.linearRampToValueAtTime(Uu.z,i)}else t.setPosition(Nu.x,Nu.y,Nu.z),t.setOrientation(Uu.x,Uu.y,Uu.z)}}class DY{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class cF{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,o;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==r;++a)i[s+a]=i[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(i,s,0,a,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(i,r,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let l=t,u=t+t;l!==u;++l)if(i[l]!==i[l+t]){a.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,o=r;s!==o;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[i+o]}_slerp(e,t,i,r){Si.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const o=this._workIndex*s;Si.multiplyQuaternionsFlat(e,o,e,t,e,i),Si.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,i,r,s){const o=1-r;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[i+a]*r}}_lerpAdditive(e,t,i,r,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[i+o]*r}}}const bC="\\[\\]\\.:\\/",LY=new RegExp("["+bC+"]","g"),CC="[^"+bC+"]",IY="[^"+bC.replace("\\.","")+"]",kY=/((?:WC+[\/:])*)/.source.replace("WC",CC),OY=/(WCOD+)?/.source.replace("WCOD",IY),NY=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",CC),UY=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",CC),FY=new RegExp("^"+kY+OY+NY+UY+"$"),zY=["material","materials","bones","map"];class BY{constructor(e,t,i){const r=i||$t.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class $t{constructor(e,t,i){this.path=t,this.parsedPath=i||$t.parseTrackName(t),this.node=$t.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new $t.Composite(e,t,i):new $t(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(LY,"")}static parseTrackName(e){const t=FY.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);zY.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=i(a.children);if(l)return l}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=$t.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(i){let u=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let f=0;f<e.length;f++)if(e[f].name===u){u=f;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(u!==void 0){if(e[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const o=e[r];if(o===void 0){const u=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+r+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}$t.Composite=BY;$t.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};$t.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};$t.prototype.GetterByBindingType=[$t.prototype._getValue_direct,$t.prototype._getValue_array,$t.prototype._getValue_arrayElement,$t.prototype._getValue_toArray];$t.prototype.SetterByBindingTypeAndVersioning=[[$t.prototype._setValue_direct,$t.prototype._setValue_direct_setNeedsUpdate,$t.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[$t.prototype._setValue_array,$t.prototype._setValue_array_setNeedsUpdate,$t.prototype._setValue_array_setMatrixWorldNeedsUpdate],[$t.prototype._setValue_arrayElement,$t.prototype._setValue_arrayElement_setNeedsUpdate,$t.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[$t.prototype._setValue_fromArray,$t.prototype._setValue_fromArray_setNeedsUpdate,$t.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class VY{constructor(){this.isAnimationObjectGroup=!0,this.uuid=ms(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,u=this.nCachedObjects_;for(let f=0,d=arguments.length;f!==d;++f){const p=arguments[f],m=p.uuid;let g=t[m];if(g===void 0){g=l++,t[m]=g,e.push(p);for(let y=0,x=o;y!==x;++y)s[y].push(new $t(p,i[y],r[y]))}else if(g<u){a=e[g];const y=--u,x=e[y];t[x.uuid]=g,e[g]=x,t[m]=y,e[y]=p;for(let v=0,w=o;v!==w;++v){const S=s[v],T=S[y];let b=S[g];S[g]=T,b===void 0&&(b=new $t(p,i[v],r[v])),S[y]=b}}else e[g]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],u=l.uuid,f=t[u];if(f!==void 0&&f>=s){const d=s++,p=e[d];t[p.uuid]=f,e[f]=p,t[u]=d,e[d]=l;for(let m=0,g=r;m!==g;++m){const y=i[m],x=y[d],v=y[f];y[f]=x,y[d]=v}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const u=arguments[a],f=u.uuid,d=t[f];if(d!==void 0)if(delete t[f],d<s){const p=--s,m=e[p],g=--o,y=e[g];t[m.uuid]=d,e[d]=m,t[y.uuid]=p,e[p]=y,e.pop();for(let x=0,v=r;x!==v;++x){const w=i[x],S=w[p],T=w[g];w[d]=S,w[p]=T,w.pop()}}else{const p=--o,m=e[p];p>0&&(t[m.uuid]=d),e[d]=m,e.pop();for(let g=0,y=r;g!==y;++g){const x=i[g];x[d]=x[p],x.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,a=this._parsedPaths,l=this._objects,u=l.length,f=this.nCachedObjects_,d=new Array(u);r=s.length,i[e]=r,o.push(e),a.push(t),s.push(d);for(let p=f,m=l.length;p!==m;++p){const g=l[p];d[p]=new $t(g,e,t)}return d}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],u=e[a];t[u]=i,o[i]=l,o.pop(),s[i]=s[a],s.pop(),r[i]=r[a],r.pop()}}}class fF{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:rc,endingEnd:rc};for(let u=0;u!==o;++u){const f=s[u].createInterpolant(null);a[u]=f,f.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=rU,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,s=e._clip.duration,o=s/r,a=r/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,u=a.sampleValues;return l[0]=s,l[1]=s+i,u[0]=e/o,u[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*i;l<0||i===0?t=0:(this._startTime=null,t=i*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case Kb:for(let f=0,d=l.length;f!==d;++f)l[f].evaluate(o),u[f].accumulateAdditive(a);break;case Tx:default:for(let f=0,d=l.length;f!==d;++f)l[f].evaluate(o),u[f].accumulate(r,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=i===sU;if(e===0)return s===-1?r:o&&(s&1)===1?t-r:r;if(i===iU){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=t||r<0){const a=Math.floor(r/t);r-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const u=e<0;this._setEndings(u,!u,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&(s&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=sc,r.endingEnd=sc):(e?r.endingStart=this.zeroSlopeAtStart?sc:rc:r.endingStart=Vm,t?r.endingEnd=this.zeroSlopeAtEnd?sc:rc:r.endingEnd=Vm)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=i,this}}const HY=new Float32Array(1);class GY extends eo{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,l=i.uuid,u=this._bindingsByRootAndName;let f=u[l];f===void 0&&(f={},u[l]=f);for(let d=0;d!==s;++d){const p=r[d],m=p.name;let g=f[m];if(g!==void 0)++g.referenceCount,o[d]=g;else{if(g=o[d],g!==void 0){g._cacheIndex===null&&(++g.referenceCount,this._addInactiveBinding(g,l,m));continue}const y=t&&t._propertyBindings[d].binding.parsedPath;g=new cF($t.create(i,m,y),p.ValueTypeName,p.getValueSize()),++g.referenceCount,this._addInactiveBinding(g,l,m),o[d]=g}a[d].resultBuffer=g.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,u=l[l.length-1],f=e._byClipCacheIndex;u._byClipCacheIndex=f,l[f]=u,l.pop(),e._byClipCacheIndex=null;const d=a.actionByRoot,p=(e._localRoot||this._root).uuid;delete d[p],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];o===void 0&&(o={},r[t]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,a=o[r],l=t[t.length-1],u=e._cacheIndex;l._cacheIndex=u,t[u]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new xC(new Float32Array(2),new Float32Array(2),1,HY),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let o=typeof e=="string"?$m.findByName(r,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let u=null;if(i===void 0&&(o!==null?i=o.blendMode:i=Tx),l!==void 0){const d=l.actionByRoot[s];if(d!==void 0&&d.blendMode===i)return d;u=l.knownActions[0],o===null&&(o=u._clip)}if(o===null)return null;const f=new fF(this,o,t,i);return this._bindAction(f,u),this._addInactiveAction(f,a,s),f}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e=="string"?$m.findByName(i,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let u=0;u!==i;++u)t[u]._update(r,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let u=0;u!==l;++u)a[u].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const u=o[a];this._deactivateAction(u);const f=u._cacheIndex,d=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,d._cacheIndex=f,t[f]=d,t.pop(),this._removeInactiveBindingsForAction(u)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const a=i[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class ie{constructor(e){this.value=e}clone(){return new ie(this.value.clone===void 0?this.value:this.value.clone())}}let WY=0;class jY extends eo{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:WY++}),this.name="",this.usage=Hm,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i<r;i++)this.uniforms.push(t[i].clone());return this}clone(){return new this.constructor().copy(this)}}class XY extends Ix{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class YY{constructor(e,t,i,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class PC{constructor(e,t,i=0,r=1/0){this.ray=new vg(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new _c,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,i=[]){return NT(e,this,i,t),i.sort(W3),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)NT(e[r],this,i,t);return i.sort(W3),i}}function W3(n,e){return n.distance-e.distance}function NT(n,e,t,i){if(n.layers.test(e.layers)&&n.raycast(e,t),i===!0){const r=n.children;for(let s=0,o=r.length;s<o;s++)NT(r[s],e,t,!0)}}class hF{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Xn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class qY{constructor(e=1,t=0,i=0){return this.radius=e,this.theta=t,this.y=i,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}const j3=new le;class ZY{constructor(e=new le(1/0,1/0),t=new le(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=j3.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,j3).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const X3=new N,F0=new N;class $Y{constructor(e=new N,t=new N){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){X3.subVectors(e,this.start),F0.subVectors(this.end,this.start);const i=F0.dot(F0);let s=F0.dot(X3)/i;return t&&(s=Xn(s,0,1)),s}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const Y3=new N;class KY extends rn{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new Lt,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const u=o/l*Math.PI*2,f=a/l*Math.PI*2;r.push(Math.cos(u),Math.sin(u),1,Math.cos(f),Math.sin(f),1)}i.setAttribute("position",new st(r,3));const s=new br({fog:!1,toneMapped:!1});this.cone=new la(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),Y3.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Y3),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const pl=new N,z0=new mt,cw=new mt;class JY extends la{constructor(e){const t=dF(e),i=new Lt,r=[],s=[],o=new Oe(0,0,1),a=new Oe(0,1,0);for(let u=0;u<t.length;u++){const f=t[u];f.parent&&f.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}i.setAttribute("position",new st(r,3)),i.setAttribute("color",new st(s,3));const l=new br({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");cw.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(z0.multiplyMatrices(cw,a.matrixWorld),pl.setFromMatrixPosition(z0),r.setXYZ(o,pl.x,pl.y,pl.z),z0.multiplyMatrices(cw,a.parent.matrixWorld),pl.setFromMatrixPosition(z0),r.setXYZ(o+1,pl.x,pl.y,pl.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function dF(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,dF(n.children[t]));return e}class QY extends Ii{constructor(e,t,i){const r=new pd(t,4,2),s=new du({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const eq=new N,q3=new Oe,Z3=new Oe;class tq extends rn{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new dd(t);r.rotateY(Math.PI*.5),this.material=new du({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new sn(o,3)),this.add(new Ii(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");q3.copy(this.light.color),Z3.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const s=i<r/2?q3:Z3;t.setXYZ(i,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(eq.setFromMatrixPosition(this.light.matrixWorld).negate())}}class nq extends la{constructor(e=10,t=10,i=4473924,r=8947848){i=new Oe(i),r=new Oe(r);const s=t/2,o=e/t,a=e/2,l=[],u=[];for(let p=0,m=0,g=-a;p<=t;p++,g+=o){l.push(-a,0,g,a,0,g),l.push(g,0,-a,g,0,a);const y=p===s?i:r;y.toArray(u,m),m+=3,y.toArray(u,m),m+=3,y.toArray(u,m),m+=3,y.toArray(u,m),m+=3}const f=new Lt;f.setAttribute("position",new st(l,3)),f.setAttribute("color",new st(u,3));const d=new br({vertexColors:!0,toneMapped:!1});super(f,d),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class iq extends la{constructor(e=10,t=16,i=8,r=64,s=4473924,o=8947848){s=new Oe(s),o=new Oe(o);const a=[],l=[];if(t>1)for(let d=0;d<t;d++){const p=d/t*(Math.PI*2),m=Math.sin(p)*e,g=Math.cos(p)*e;a.push(0,0,0),a.push(m,0,g);const y=d&1?s:o;l.push(y.r,y.g,y.b),l.push(y.r,y.g,y.b)}for(let d=0;d<i;d++){const p=d&1?s:o,m=e-e/i*d;for(let g=0;g<r;g++){let y=g/r*(Math.PI*2),x=Math.sin(y)*m,v=Math.cos(y)*m;a.push(x,0,v),l.push(p.r,p.g,p.b),y=(g+1)/r*(Math.PI*2),x=Math.sin(y)*m,v=Math.cos(y)*m,a.push(x,0,v),l.push(p.r,p.g,p.b)}}const u=new Lt;u.setAttribute("position",new st(a,3)),u.setAttribute("color",new st(l,3));const f=new br({vertexColors:!0,toneMapped:!1});super(u,f),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const $3=new N,B0=new N,K3=new N;class rq extends rn{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new Lt;r.setAttribute("position",new st([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new br({fog:!1,toneMapped:!1});this.lightPlane=new su(r,s),this.add(this.lightPlane),r=new Lt,r.setAttribute("position",new st([0,0,0,0,0,1],3)),this.targetLine=new su(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),$3.setFromMatrixPosition(this.light.matrixWorld),B0.setFromMatrixPosition(this.light.target.matrixWorld),K3.subVectors(B0,$3),this.lightPlane.lookAt(B0),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(B0),this.targetLine.scale.z=K3.length()}}const V0=new N,Gn=new ud;class sq extends la{constructor(e){const t=new Lt,i=new br({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(g,y){l(g),l(y)}function l(g){r.push(0,0,0),s.push(0,0,0),o[g]===void 0&&(o[g]=[]),o[g].push(r.length/3-1)}t.setAttribute("position",new st(r,3)),t.setAttribute("color",new st(s,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const u=new Oe(16755200),f=new Oe(16711680),d=new Oe(43775),p=new Oe(16777215),m=new Oe(3355443);this.setColors(u,f,d,p,m)}setColors(e,t,i,r,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,i.r,i.g,i.b),a.setXYZ(33,i.r,i.g,i.b),a.setXYZ(34,i.r,i.g,i.b),a.setXYZ(35,i.r,i.g,i.b),a.setXYZ(36,i.r,i.g,i.b),a.setXYZ(37,i.r,i.g,i.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;Gn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Zn("c",t,e,Gn,0,0,-1),Zn("t",t,e,Gn,0,0,1),Zn("n1",t,e,Gn,-i,-r,-1),Zn("n2",t,e,Gn,i,-r,-1),Zn("n3",t,e,Gn,-i,r,-1),Zn("n4",t,e,Gn,i,r,-1),Zn("f1",t,e,Gn,-i,-r,1),Zn("f2",t,e,Gn,i,-r,1),Zn("f3",t,e,Gn,-i,r,1),Zn("f4",t,e,Gn,i,r,1),Zn("u1",t,e,Gn,i*.7,r*1.1,-1),Zn("u2",t,e,Gn,-i*.7,r*1.1,-1),Zn("u3",t,e,Gn,0,r*2,-1),Zn("cf1",t,e,Gn,-i,0,1),Zn("cf2",t,e,Gn,i,0,1),Zn("cf3",t,e,Gn,0,-r,1),Zn("cf4",t,e,Gn,0,r,1),Zn("cn1",t,e,Gn,-i,0,-1),Zn("cn2",t,e,Gn,i,0,-1),Zn("cn3",t,e,Gn,0,-r,-1),Zn("cn4",t,e,Gn,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Zn(n,e,t,i,r,s,o){V0.set(r,s,o).unproject(i);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let u=0,f=a.length;u<f;u++)l.setXYZ(a[u],V0.x,V0.y,V0.z)}}const H0=new oa;class oq extends la{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new Lt;s.setIndex(new sn(i,1)),s.setAttribute("position",new sn(r,3)),super(s,new br({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&H0.setFromObject(this.object),H0.isEmpty())return;const t=H0.min,i=H0.max,r=this.geometry.attributes.position,s=r.array;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=t.x,s[4]=i.y,s[5]=i.z,s[6]=t.x,s[7]=t.y,s[8]=i.z,s[9]=i.x,s[10]=t.y,s[11]=i.z,s[12]=i.x,s[13]=i.y,s[14]=t.z,s[15]=t.x,s[16]=i.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=i.x,s[22]=t.y,s[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class aq extends la{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Lt;s.setIndex(new sn(i,1)),s.setAttribute("position",new st(r,3)),super(s,new br({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class lq extends su{constructor(e,t=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new Lt;o.setAttribute("position",new st(s,3)),o.computeBoundingSphere(),super(o,new br({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new Lt;l.setAttribute("position",new st(a,3)),l.computeBoundingSphere(),this.add(new Ii(l,new du({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const J3=new N;let G0,fw;class uq extends rn{constructor(e=new N(0,0,1),t=new N(0,0,0),i=1,r=16776960,s=i*.2,o=s*.2){super(),this.type="ArrowHelper",G0===void 0&&(G0=new Lt,G0.setAttribute("position",new st([0,0,0,0,1,0],3)),fw=new jc(0,.5,1,5,1),fw.translate(0,-.5,0)),this.position.copy(t),this.line=new su(G0,new br({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Ii(fw,new du({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{J3.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(J3,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class cq extends la{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new Lt;r.setAttribute("position",new st(t,3)),r.setAttribute("color",new st(i,3));const s=new br({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,i){const r=new Oe,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class fq{constructor(){this.type="ShapePath",this.color=new Oe,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Wm,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,s,o){return this.currentPath.bezierCurveTo(e,t,i,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(v){const w=[];for(let S=0,T=v.length;S<T;S++){const b=v[S],P=new xc;P.curves=b.curves,w.push(P)}return w}function i(v,w){const S=w.length;let T=!1;for(let b=S-1,P=0;P<S;b=P++){let R=w[b],D=w[P],C=D.x-R.x,L=D.y-R.y;if(Math.abs(L)>Number.EPSILON){if(L<0&&(R=w[P],C=-C,D=w[b],L=-L),v.y<R.y||v.y>D.y)continue;if(v.y===R.y){if(v.x===R.x)return!0}else{const F=L*(v.x-R.x)-C*(v.y-R.y);if(F===0)return!0;if(F<0)continue;T=!T}}else{if(v.y!==R.y)continue;if(D.x<=v.x&&v.x<=R.x||R.x<=v.x&&v.x<=D.x)return!0}}return T}const r=Ko.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const u=[];if(s.length===1)return a=s[0],l=new xc,l.curves=a.curves,u.push(l),u;let f=!r(s[0].getPoints());f=e?!f:f;const d=[],p=[];let m=[],g=0,y;p[g]=void 0,m[g]=[];for(let v=0,w=s.length;v<w;v++)a=s[v],y=a.getPoints(),o=r(y),o=e?!o:o,o?(!f&&p[g]&&g++,p[g]={s:new xc,p:y},p[g].s.curves=a.curves,f&&g++,m[g]=[]):m[g].push({h:a,p:y[0]});if(!p[0])return t(s);if(p.length>1){let v=!1,w=0;for(let S=0,T=p.length;S<T;S++)d[S]=[];for(let S=0,T=p.length;S<T;S++){const b=m[S];for(let P=0;P<b.length;P++){const R=b[P];let D=!0;for(let C=0;C<p.length;C++)i(R.p,p[C].p)&&(S!==C&&w++,D?(D=!1,d[C].push(R)):v=!0);D&&d[S].push(R)}}w>0&&v===!1&&(m=d)}let x;for(let v=0,w=p.length;v<w;v++){l=p[v].s,u.push(l),x=m[v];for(let S=0,T=x.length;S<T;S++)l.holes.push(x[S].h)}return u}}class hq extends pu{constructor(e,t,i,r,s,o){console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),super(e,t,i,r,s,o)}}class dq extends Sg{constructor(e,t,i,r){console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),super(e,t,i,r)}}class pq extends wg{constructor(e,t,i,r){console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),super(e,t,i,r)}}class mq extends Mg{constructor(e,t,i,r,s,o,a){console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),super(e,t,i,r,s,o,a)}}class gq extends jc{constructor(e,t,i,r,s,o,a,l){console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),super(e,t,i,r,s,o,a,l)}}class vq extends Tg{constructor(e,t){console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),super(e,t)}}class yq extends Eg{constructor(e,t){console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),super(e,t)}}class _q extends bg{constructor(e,t){console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),super(e,t)}}class xq extends hd{constructor(e,t,i,r){console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),super(e,t,i,r)}}class Sq extends dd{constructor(e,t){console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),super(e,t)}}class wq extends cd{constructor(e,t,i,r){console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),super(e,t,i,r)}}class Mq extends Qa{constructor(e,t,i,r){console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),super(e,t,i,r)}}class Tq extends Cg{constructor(e,t,i,r,s,o){console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),super(e,t,i,r,s,o)}}class Eq extends Pg{constructor(e,t){console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),super(e,t)}}class bq extends pd{constructor(e,t,i,r,s,o,a){console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),super(e,t,i,r,s,o,a)}}class Cq extends Ag{constructor(e,t){console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),super(e,t)}}class Pq extends Rg{constructor(e,t,i,r,s){console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),super(e,t,i,r,s)}}class Aq extends Dg{constructor(e,t,i,r,s,o){console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),super(e,t,i,r,s,o)}}class Rq extends Lg{constructor(e,t,i,r,s){console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),super(e,t,i,r,s)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Wc}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Wc);const Dq=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:Xb,AddEquation:Ku,AddOperation:BN,AdditiveAnimationBlendMode:Kb,AdditiveBlending:eT,AlphaFormat:$N,AlwaysDepth:Gb,AlwaysStencilFunc:aU,AmbientLight:rF,AmbientLightProbe:EY,AnimationAction:fF,AnimationClip:$m,AnimationLoader:dY,AnimationMixer:GY,AnimationObjectGroup:VY,AnimationUtils:uY,ArcCurve:DU,ArrayCamera:SU,ArrowHelper:uq,Audio:uF,AudioAnalyser:DY,AudioContext:TC,AudioListener:PY,AudioLoader:MY,AxesHelper:cq,BackSide:yi,BasicDepthPacking:Oi,BasicShadowMap:bN,Bone:aC,BooleanKeyframeTrack:Xc,Box2:ZY,Box3:oa,Box3Helper:aq,BoxBufferGeometry:hq,BoxGeometry:pu,BoxHelper:oq,BufferAttribute:sn,BufferGeometry:Lt,BufferGeometryLoader:lF,ByteType:jN,Cache:Oc,Camera:ud,CameraHelper:sq,CanvasTexture:IX,CapsuleBufferGeometry:dq,CapsuleGeometry:Sg,CatmullRomCurve3:LU,CineonToneMapping:GN,CircleBufferGeometry:pq,CircleGeometry:wg,ClampToEdgeWrapping:mi,Clock:EC,Color:Oe,ColorKeyframeTrack:SC,ColorManagement:kr,CompressedArrayTexture:LX,CompressedTexture:uC,CompressedTextureLoader:pY,ConeBufferGeometry:mq,ConeGeometry:Mg,CubeCamera:bx,CubeReflectionMapping:tu,CubeRefractionMapping:nu,CubeTexture:yg,CubeTextureLoader:mY,CubeUVReflectionMapping:ad,CubicBezierCurve:fC,CubicBezierCurve3:IU,CubicInterpolant:$U,CullFaceBack:QM,CullFaceFront:EN,CullFaceFrontBack:LG,CullFaceNone:TN,Curve:Ao,CurvePath:OU,CustomBlending:CN,CustomToneMapping:WN,CylinderBufferGeometry:gq,CylinderGeometry:jc,Cylindrical:qY,Data3DTexture:yc,DataArrayTexture:Ex,DataTexture:Ua,DataTextureLoader:gY,DataUtils:WW,DecrementStencilOp:jG,DecrementWrapStencilOp:YG,DefaultLoadingManager:QU,DepthFormat:jl,DepthStencilFormat:ru,DepthTexture:Rx,DirectionalLight:iF,DirectionalLightHelper:rq,DiscreteInterpolant:KU,DisplayP3ColorSpace:Jb,DodecahedronBufferGeometry:vq,DodecahedronGeometry:Tg,DoubleSide:zr,DstAlphaFactor:kN,DstColorFactor:NN,DynamicCopyUsage:lW,DynamicDrawUsage:nW,DynamicReadUsage:sW,EdgesGeometry:NU,EllipseCurve:Ox,EqualDepth:Om,EqualStencilFunc:KG,EquirectangularReflectionMapping:Nm,EquirectangularRefractionMapping:Um,Euler:ld,EventDispatcher:eo,ExtrudeBufferGeometry:yq,ExtrudeGeometry:Eg,FileLoader:Ya,Float16BufferAttribute:$W,Float32BufferAttribute:st,Float64BufferAttribute:KW,FloatType:Jn,Fog:Lx,FogExp2:Dx,FramebufferTexture:DT,FrontSide:ta,Frustum:Cx,GLBufferAttribute:YY,GLSL1:cW,GLSL3:C_,GreaterDepth:jb,GreaterEqualDepth:Wb,GreaterEqualStencilFunc:tW,GreaterStencilFunc:QG,GridHelper:nq,Group:uh,HalfFloatType:ps,HemisphereLight:eF,HemisphereLightHelper:tq,HemisphereLightProbe:TY,IcosahedronBufferGeometry:_q,IcosahedronGeometry:bg,ImageBitmapLoader:wY,ImageLoader:Km,ImageUtils:eC,IncrementStencilOp:WG,IncrementWrapStencilOp:XG,InstancedBufferAttribute:Xh,InstancedBufferGeometry:aF,InstancedInterleavedBuffer:XY,InstancedMesh:CU,Int16BufferAttribute:qW,Int32BufferAttribute:ZW,Int8BufferAttribute:jW,IntType:YN,InterleavedBuffer:Ix,InterleavedBufferAttribute:Ic,Interpolant:Ig,InterpolateDiscrete:zm,InterpolateLinear:Bm,InterpolateSmooth:ky,InvertStencilOp:qG,KeepStencilOp:Oy,KeyframeTrack:Ro,LOD:EU,LatheBufferGeometry:xq,LatheGeometry:hd,Layers:_c,LessDepth:E_,LessEqualDepth:km,LessEqualStencilFunc:JG,LessStencilFunc:$G,Light:mu,LightProbe:Fx,Line:su,Line3:$Y,LineBasicMaterial:br,LineCurve:Nx,LineCurve3:kU,LineDashedMaterial:qU,LineLoop:PU,LineSegments:la,LinearEncoding:na,LinearFilter:vt,LinearInterpolant:xC,LinearMipMapLinearFilter:UG,LinearMipMapNearestFilter:NG,LinearMipmapLinearFilter:iu,LinearMipmapNearestFilter:Yb,LinearSRGBColorSpace:Gh,LinearToneMapping:VN,Loader:ws,LoaderUtils:OT,LoadingManager:wC,LoopOnce:iU,LoopPingPong:sU,LoopRepeat:rU,LuminanceAlphaFormat:KN,LuminanceFormat:Mx,MOUSE:RG,Material:Ti,MaterialLoader:zx,MathUtils:TW,Matrix3:Ut,Matrix4:mt,MaxEquation:rT,Mesh:Ii,MeshBasicMaterial:du,MeshDepthMaterial:Ax,MeshDistanceMaterial:rC,MeshLambertMaterial:XU,MeshMatcapMaterial:YU,MeshNormalMaterial:vC,MeshPhongMaterial:WU,MeshPhysicalMaterial:GU,MeshStandardMaterial:gC,MeshToonMaterial:jU,MinEquation:iT,MirroredRepeatWrapping:Fm,MixOperation:zN,MultiplyBlending:nT,MultiplyOperation:gg,NearestFilter:Ht,NearestMipMapLinearFilter:OG,NearestMipMapNearestFilter:kG,NearestMipmapLinearFilter:jp,NearestMipmapNearestFilter:b_,NeverDepth:Hb,NeverStencilFunc:ZG,NoBlending:En,NoColorSpace:VG,NoToneMapping:Eo,NormalAnimationBlendMode:Tx,NormalBlending:gc,NotEqualDepth:Sx,NotEqualStencilFunc:eW,NumberKeyframeTrack:qm,Object3D:rn,ObjectLoader:xY,ObjectSpaceNormalMap:oU,OctahedronBufferGeometry:Sq,OctahedronGeometry:dd,OneFactor:DN,OneMinusDstAlphaFactor:ON,OneMinusDstColorFactor:UN,OneMinusSrcAlphaFactor:Vb,OneMinusSrcColorFactor:IN,OrthographicCamera:xg,PCFShadowMap:xx,PCFSoftShadowMap:Wp,PMREMGenerator:A_,Path:Wm,PerspectiveCamera:Nn,Plane:wl,PlaneBufferGeometry:wq,PlaneGeometry:cd,PlaneHelper:lq,PointLight:nF,PointLightHelper:QY,Points:AU,PointsMaterial:lC,PolarGridHelper:iq,PolyhedronBufferGeometry:Mq,PolyhedronGeometry:Qa,PositionalAudio:RY,PropertyBinding:$t,PropertyMixer:cF,QuadraticBezierCurve:hC,QuadraticBezierCurve3:dC,Quaternion:Si,QuaternionKeyframeTrack:md,QuaternionLinearInterpolant:JU,RED_GREEN_RGTC2_Format:bT,RED_RGTC1_Format:nU,REVISION:Wc,RGBADepthPacking:ia,RGBAFormat:Dn,RGBAIntegerFormat:eU,RGBA_ASTC_10x10_Format:wT,RGBA_ASTC_10x5_Format:_T,RGBA_ASTC_10x6_Format:xT,RGBA_ASTC_10x8_Format:ST,RGBA_ASTC_12x10_Format:MT,RGBA_ASTC_12x12_Format:TT,RGBA_ASTC_4x4_Format:fT,RGBA_ASTC_5x4_Format:hT,RGBA_ASTC_5x5_Format:dT,RGBA_ASTC_6x5_Format:pT,RGBA_ASTC_6x6_Format:mT,RGBA_ASTC_8x5_Format:gT,RGBA_ASTC_8x6_Format:vT,RGBA_ASTC_8x8_Format:yT,RGBA_BPTC_Format:Iy,RGBA_ETC2_EAC_Format:cT,RGBA_PVRTC_2BPPV1_Format:lT,RGBA_PVRTC_4BPPV1_Format:aT,RGBA_S3TC_DXT1_Format:Ry,RGBA_S3TC_DXT3_Format:Dy,RGBA_S3TC_DXT5_Format:Ly,RGB_ETC1_Format:tU,RGB_ETC2_Format:uT,RGB_PVRTC_2BPPV1_Format:oT,RGB_PVRTC_4BPPV1_Format:sT,RGB_S3TC_DXT1_Format:Ay,RGFormat:$b,RGIntegerFormat:QN,RawShaderMaterial:HU,Ray:vg,Raycaster:PC,RectAreaLight:sF,RedFormat:Zb,RedIntegerFormat:JN,ReinhardToneMapping:HN,RepeatWrapping:Xa,ReplaceStencilOp:GG,ReverseSubtractEquation:AN,RingBufferGeometry:Tq,RingGeometry:Cg,SIGNED_RED_GREEN_RGTC2_Format:CT,SIGNED_RED_RGTC1_Format:ET,SRGBColorSpace:vo,Scene:Lc,ShaderChunk:pt,ShaderLib:_o,ShaderMaterial:on,ShadowMaterial:VU,Shape:xc,ShapeBufferGeometry:Eq,ShapeGeometry:Pg,ShapePath:fq,ShapeUtils:Ko,ShortType:XN,Skeleton:kx,SkeletonHelper:JY,SkinnedMesh:bU,Source:oc,Sphere:aa,SphereBufferGeometry:bq,SphereGeometry:pd,Spherical:hF,SphericalHarmonics3:oF,SplineCurve:pC,SpotLight:tF,SpotLightHelper:KY,Sprite:TU,SpriteMaterial:oC,SrcAlphaFactor:Bb,SrcAlphaSaturateFactor:FN,SrcColorFactor:LN,StaticCopyUsage:aW,StaticDrawUsage:Hm,StaticReadUsage:rW,StereoCamera:bY,StreamCopyUsage:uW,StreamDrawUsage:iW,StreamReadUsage:oW,StringKeyframeTrack:Yc,SubtractEquation:PN,SubtractiveBlending:tT,TOUCH:DG,TangentSpaceNormalMap:Ja,TetrahedronBufferGeometry:Cq,TetrahedronGeometry:Ag,Texture:bn,TextureLoader:kg,TorusBufferGeometry:Pq,TorusGeometry:Rg,TorusKnotBufferGeometry:Aq,TorusKnotGeometry:Dg,Triangle:Fr,TriangleFanDrawMode:BG,TriangleStripDrawMode:zG,TrianglesDrawMode:FG,TubeBufferGeometry:Rq,TubeGeometry:Lg,TwoPassDoubleSide:IG,UVMapping:wx,Uint16BufferAttribute:tC,Uint32BufferAttribute:nC,Uint8BufferAttribute:XW,Uint8ClampedBufferAttribute:YW,Uniform:ie,UniformsGroup:jY,UniformsLib:Be,UniformsUtils:pU,UnsignedByteType:xn,UnsignedInt248Type:Wl,UnsignedIntType:Ia,UnsignedShort4444Type:qN,UnsignedShort5551Type:ZN,UnsignedShortType:qb,VSMShadowMap:ic,Vector2:le,Vector3:N,Vector4:Gt,VectorKeyframeTrack:Zm,VideoTexture:RU,WebGL1Renderer:wU,WebGL3DRenderTarget:kW,WebGLArrayRenderTarget:IW,WebGLCubeRenderTarget:_g,WebGLMultipleRenderTargets:fU,WebGLRenderTarget:qt,WebGLRenderer:sC,WebGLUtils:xU,WireframeGeometry:BU,WrapAroundEnding:Vm,ZeroCurvatureEnding:rc,ZeroFactor:RN,ZeroSlopeEnding:sc,ZeroStencilOp:HG,_SRGBAFormat:P_,sRGBEncoding:an},Symbol.toStringTag,{value:"Module"}));var pF={exports:{}},qc={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */qc.ConcurrentRoot=1;qc.ContinuousEventPriority=4;qc.DefaultEventPriority=16;qc.DiscreteEventPriority=1;qc.IdleEventPriority=536870912;qc.LegacyRoot=0;pF.exports=qc;var fh=pF.exports;function Lq(n){let e;const t=new Set,i=(u,f)=>{const d=typeof u=="function"?u(e):u;if(d!==e){const p=e;e=f?d:Object.assign({},e,d),t.forEach(m=>m(e,p))}},r=()=>e,s=(u,f=r,d=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=f(e);function m(){const g=f(e);if(!d(p,g)){const y=p;u(p=g,y)}}return t.add(m),()=>t.delete(m)},l={setState:i,getState:r,subscribe:(u,f,d)=>f||d?s(u,f,d):(t.add(u),()=>t.delete(u)),destroy:()=>t.clear()};return e=n(i,r,l),l}const Iq=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),Q3=Iq?O.useEffect:O.useLayoutEffect;function mF(n){const e=typeof n=="function"?Lq(n):n,t=(i=e.getState,r=Object.is)=>{const[,s]=O.useReducer(x=>x+1,0),o=e.getState(),a=O.useRef(o),l=O.useRef(i),u=O.useRef(r),f=O.useRef(!1),d=O.useRef();d.current===void 0&&(d.current=i(o));let p,m=!1;(a.current!==o||l.current!==i||u.current!==r||f.current)&&(p=i(o),m=!r(d.current,p)),Q3(()=>{m&&(d.current=p),a.current=o,l.current=i,u.current=r,f.current=!1});const g=O.useRef(o);Q3(()=>{const x=()=>{try{const w=e.getState(),S=l.current(w);u.current(d.current,S)||(a.current=w,d.current=S,s())}catch{f.current=!0,s()}},v=e.subscribe(x);return e.getState()!==g.current&&x(),v},[]);const y=m?p:d.current;return O.useDebugValue(y),y};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[t,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},t}var gF={exports:{}},vF={exports:{}},yF={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(z,j){var I=z.length;z.push(j);e:for(;0<I;){var ee=I-1>>>1,oe=z[ee];if(0<r(oe,j))z[ee]=j,z[I]=oe,I=ee;else break e}}function t(z){return z.length===0?null:z[0]}function i(z){if(z.length===0)return null;var j=z[0],I=z.pop();if(I!==j){z[0]=I;e:for(var ee=0,oe=z.length,se=oe>>>1;ee<se;){var te=2*(ee+1)-1,Te=z[te],we=te+1,J=z[we];if(0>r(Te,I))we<oe&&0>r(J,Te)?(z[ee]=J,z[we]=I,ee=we):(z[ee]=Te,z[te]=I,ee=te);else if(we<oe&&0>r(J,I))z[ee]=J,z[we]=I,ee=we;else break e}}return j}function r(z,j){var I=z.sortIndex-j.sortIndex;return I!==0?I:z.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],f=1,d=null,p=3,m=!1,g=!1,y=!1,x=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(z){for(var j=t(u);j!==null;){if(j.callback===null)i(u);else if(j.startTime<=z)i(u),j.sortIndex=j.expirationTime,e(l,j);else break;j=t(u)}}function T(z){if(y=!1,S(z),!g)if(t(l)!==null)g=!0,re(b);else{var j=t(u);j!==null&&Q(T,j.startTime-z)}}function b(z,j){g=!1,y&&(y=!1,v(D),D=-1),m=!0;var I=p;try{for(S(j),d=t(l);d!==null&&(!(d.expirationTime>j)||z&&!F());){var ee=d.callback;if(typeof ee=="function"){d.callback=null,p=d.priorityLevel;var oe=ee(d.expirationTime<=j);j=n.unstable_now(),typeof oe=="function"?d.callback=oe:d===t(l)&&i(l),S(j)}else i(l);d=t(l)}if(d!==null)var se=!0;else{var te=t(u);te!==null&&Q(T,te.startTime-j),se=!1}return se}finally{d=null,p=I,m=!1}}var P=!1,R=null,D=-1,C=5,L=-1;function F(){return!(n.unstable_now()-L<C)}function H(){if(R!==null){var z=n.unstable_now();L=z;var j=!0;try{j=R(!0,z)}finally{j?G():(P=!1,R=null)}}else P=!1}var G;if(typeof w=="function")G=function(){w(H)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,X=W.port2;W.port1.onmessage=H,G=function(){X.postMessage(null)}}else G=function(){x(H,0)};function re(z){R=z,P||(P=!0,G())}function Q(z,j){D=x(function(){z(n.unstable_now())},j)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(z){z.callback=null},n.unstable_continueExecution=function(){g||m||(g=!0,re(b))},n.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<z?Math.floor(1e3/z):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(z){switch(p){case 1:case 2:case 3:var j=3;break;default:j=p}var I=p;p=j;try{return z()}finally{p=I}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(z,j){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var I=p;p=z;try{return j()}finally{p=I}},n.unstable_scheduleCallback=function(z,j,I){var ee=n.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?ee+I:ee):I=ee,z){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=I+oe,z={id:f++,callback:j,priorityLevel:z,startTime:I,expirationTime:oe,sortIndex:-1},I>ee?(z.sortIndex=I,e(u,z),t(l)===null&&z===t(u)&&(y?(v(D),D=-1):y=!0,Q(T,I-ee))):(z.sortIndex=oe,e(l,z),g||m||(g=!0,re(b))),z},n.unstable_shouldYield=F,n.unstable_wrapCallback=function(z){var j=p;return function(){var I=p;p=j;try{return z.apply(this,arguments)}finally{p=I}}}})(yF);vF.exports=yF;var UT=vF.exports;/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kq=function(e){var t={},i=O,r=UT,s=Object.assign;function o(c){for(var h="https://reactjs.org/docs/error-decoder.html?invariant="+c,_=1;_<arguments.length;_++)h+="&args[]="+encodeURIComponent(arguments[_]);return"Minified React error #"+c+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),u=Symbol.for("react.portal"),f=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),g=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),v=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),T=Symbol.for("react.offscreen"),b=Symbol.iterator;function P(c){return c===null||typeof c!="object"?null:(c=b&&c[b]||c["@@iterator"],typeof c=="function"?c:null)}function R(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case f:return"Fragment";case u:return"Portal";case p:return"Profiler";case d:return"StrictMode";case x:return"Suspense";case v:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case g:return(c.displayName||"Context")+".Consumer";case m:return(c._context.displayName||"Context")+".Provider";case y:var h=c.render;return c=c.displayName,c||(c=h.displayName||h.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case w:return h=c.displayName||null,h!==null?h:R(c.type)||"Memo";case S:h=c._payload,c=c._init;try{return R(c(h))}catch{}}return null}function D(c){var h=c.type;switch(c.tag){case 24:return"Cache";case 9:return(h.displayName||"Context")+".Consumer";case 10:return(h._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=h.render,c=c.displayName||c.name||"",h.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return h;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return R(h);case 8:return h===d?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h}return null}function C(c){var h=c,_=c;if(c.alternate)for(;h.return;)h=h.return;else{c=h;do h=c,h.flags&4098&&(_=h.return),c=h.return;while(c)}return h.tag===3?_:null}function L(c){if(C(c)!==c)throw Error(o(188))}function F(c){var h=c.alternate;if(!h){if(h=C(c),h===null)throw Error(o(188));return h!==c?null:c}for(var _=c,M=h;;){var E=_.return;if(E===null)break;var A=E.alternate;if(A===null){if(M=E.return,M!==null){_=M;continue}break}if(E.child===A.child){for(A=E.child;A;){if(A===_)return L(E),c;if(A===M)return L(E),h;A=A.sibling}throw Error(o(188))}if(_.return!==M.return)_=E,M=A;else{for(var V=!1,q=E.child;q;){if(q===_){V=!0,_=E,M=A;break}if(q===M){V=!0,M=E,_=A;break}q=q.sibling}if(!V){for(q=A.child;q;){if(q===_){V=!0,_=A,M=E;break}if(q===M){V=!0,M=A,_=E;break}q=q.sibling}if(!V)throw Error(o(189))}}if(_.alternate!==M)throw Error(o(190))}if(_.tag!==3)throw Error(o(188));return _.stateNode.current===_?c:h}function H(c){return c=F(c),c!==null?G(c):null}function G(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var h=G(c);if(h!==null)return h;c=c.sibling}return null}function W(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){if(c.tag!==4){var h=W(c);if(h!==null)return h}c=c.sibling}return null}var X=Array.isArray,re=e.getPublicInstance,Q=e.getRootHostContext,z=e.getChildHostContext,j=e.prepareForCommit,I=e.resetAfterCommit,ee=e.createInstance,oe=e.appendInitialChild,se=e.finalizeInitialChildren,te=e.prepareUpdate,Te=e.shouldSetTextContent,we=e.createTextInstance,J=e.scheduleTimeout,Xe=e.cancelTimeout,it=e.noTimeout,Ee=e.isPrimaryRenderer,Ie=e.supportsMutation,ce=e.supportsPersistence,ae=e.supportsHydration,Me=e.getInstanceFromNode,ze=e.preparePortalMount,Re=e.getCurrentEventPriority,$=e.detachDeletedInstance,et=e.supportsMicrotasks,Ue=e.scheduleMicrotask,ft=e.supportsTestSelectors,Tt=e.findFiberRoot,B=e.getBoundingRect,k=e.getTextContent,fe=e.isHiddenSubtree,ge=e.matchAccessibilityRole,pe=e.setFocusIfFocusable,_e=e.setupIntersectionObserver,De=e.appendChild,Fe=e.appendChildToContainer,he=e.commitTextUpdate,Pe=e.commitMount,Ce=e.commitUpdate,je=e.insertBefore,Ve=e.insertInContainerBefore,Ze=e.removeChild,Ct=e.removeChildFromContainer,qe=e.resetTextContent,Zt=e.hideInstance,Y=e.hideTextInstance,ye=e.unhideInstance,be=e.unhideTextInstance,Ne=e.clearContainer,tt=e.cloneInstance,Xt=e.createContainerChildSet,zt=e.appendChildToContainerChildSet,Cn=e.finalizeContainerChildren,dt=e.replaceContainerChildren,He=e.cloneHiddenInstance,Ae=e.cloneHiddenTextInstance,rt=e.canHydrateInstance,ht=e.canHydrateTextInstance,Pt=e.canHydrateSuspenseInstance,Ln=e.isSuspenseInstancePending,Bt=e.isSuspenseInstanceFallback,mn=e.registerSuspenseInstanceRetry,U=e.getNextHydratableSibling,ne=e.getFirstHydratableChild,me=e.getFirstHydratableChildWithinContainer,Z=e.getFirstHydratableChildWithinSuspenseInstance,xe=e.hydrateInstance,Ye=e.hydrateTextInstance,Ke=e.hydrateSuspenseInstance,$e=e.getNextHydratableInstanceAfterSuspenseInstance,at=e.commitHydratedContainer,Et=e.commitHydratedSuspenseInstance,Mt=e.clearSuspenseBoundary,lt=e.clearSuspenseBoundaryFromContainer,_t=e.shouldDeleteUnhydratedTailInstances,hn=e.didNotMatchHydratedContainerTextInstance,Ui=e.didNotMatchHydratedTextInstance,Cr;function Jt(c){if(Cr===void 0)try{throw Error()}catch(_){var h=_.stack.trim().match(/\n( *(at )?)/);Cr=h&&h[1]||""}return`
`+Cr+c}var xt=!1;function Kr(c,h){if(!c||xt)return"";xt=!0;var _=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(h)if(h=function(){throw Error()},Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(ke){var M=ke}Reflect.construct(c,[],h)}else{try{h.call()}catch(ke){M=ke}c.call(h.prototype)}else{try{throw Error()}catch(ke){M=ke}c()}}catch(ke){if(ke&&M&&typeof ke.stack=="string"){for(var E=ke.stack.split(`
`),A=M.stack.split(`
`),V=E.length-1,q=A.length-1;1<=V&&0<=q&&E[V]!==A[q];)q--;for(;1<=V&&0<=q;V--,q--)if(E[V]!==A[q]){if(V!==1||q!==1)do if(V--,q--,0>q||E[V]!==A[q]){var Se=`
`+E[V].replace(" at new "," at ");return c.displayName&&Se.includes("<anonymous>")&&(Se=Se.replace("<anonymous>",c.displayName)),Se}while(1<=V&&0<=q);break}}}finally{xt=!1,Error.prepareStackTrace=_}return(c=c?c.displayName||c.name:"")?Jt(c):""}var ei=Object.prototype.hasOwnProperty,no=[],ua=-1;function Pr(c){return{current:c}}function cn(c){0>ua||(c.current=no[ua],no[ua]=null,ua--)}function Dt(c,h){ua++,no[ua]=c.current,c.current=h}var Xi={},ti=Pr(Xi),dn=Pr(!1),io=Xi;function el(c,h){var _=c.type.contextTypes;if(!_)return Xi;var M=c.stateNode;if(M&&M.__reactInternalMemoizedUnmaskedChildContext===h)return M.__reactInternalMemoizedMaskedChildContext;var E={},A;for(A in _)E[A]=h[A];return M&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=h,c.__reactInternalMemoizedMaskedChildContext=E),E}function Fi(c){return c=c.childContextTypes,c!=null}function Xg(){cn(dn),cn(ti)}function BP(c,h,_){if(ti.current!==Xi)throw Error(o(168));Dt(ti,h),Dt(dn,_)}function VP(c,h,_){var M=c.stateNode;if(h=h.childContextTypes,typeof M.getChildContext!="function")return _;M=M.getChildContext();for(var E in M)if(!(E in h))throw Error(o(108,D(c)||"Unknown",E));return s({},_,M)}function Yg(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||Xi,io=ti.current,Dt(ti,c),Dt(dn,dn.current),!0}function HP(c,h,_){var M=c.stateNode;if(!M)throw Error(o(169));_?(c=VP(c,h,io),M.__reactInternalMemoizedMergedChildContext=c,cn(dn),cn(ti),Dt(ti,c)):cn(dn),Dt(dn,_)}var ro=Math.clz32?Math.clz32:d5,f5=Math.log,h5=Math.LN2;function d5(c){return c>>>=0,c===0?32:31-(f5(c)/h5|0)|0}var qg=64,Zg=4194304;function Md(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function $g(c,h){var _=c.pendingLanes;if(_===0)return 0;var M=0,E=c.suspendedLanes,A=c.pingedLanes,V=_&268435455;if(V!==0){var q=V&~E;q!==0?M=Md(q):(A&=V,A!==0&&(M=Md(A)))}else V=_&~E,V!==0?M=Md(V):A!==0&&(M=Md(A));if(M===0)return 0;if(h!==0&&h!==M&&!(h&E)&&(E=M&-M,A=h&-h,E>=A||E===16&&(A&4194240)!==0))return h;if(M&4&&(M|=_&16),h=c.entangledLanes,h!==0)for(c=c.entanglements,h&=M;0<h;)_=31-ro(h),E=1<<_,M|=c[_],h&=~E;return M}function p5(c,h){switch(c){case 1:case 2:case 4:return h+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function m5(c,h){for(var _=c.suspendedLanes,M=c.pingedLanes,E=c.expirationTimes,A=c.pendingLanes;0<A;){var V=31-ro(A),q=1<<V,Se=E[V];Se===-1?(!(q&_)||q&M)&&(E[V]=p5(q,h)):Se<=h&&(c.expiredLanes|=q),A&=~q}}function s1(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function o1(c){for(var h=[],_=0;31>_;_++)h.push(c);return h}function Td(c,h,_){c.pendingLanes|=h,h!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,h=31-ro(h),c[h]=_}function g5(c,h){var _=c.pendingLanes&~h;c.pendingLanes=h,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=h,c.mutableReadLanes&=h,c.entangledLanes&=h,h=c.entanglements;var M=c.eventTimes;for(c=c.expirationTimes;0<_;){var E=31-ro(_),A=1<<E;h[E]=0,M[E]=-1,c[E]=-1,_&=~A}}function a1(c,h){var _=c.entangledLanes|=h;for(c=c.entanglements;_;){var M=31-ro(_),E=1<<M;E&h|c[M]&h&&(c[M]|=h),_&=~E}}var Qt=0;function GP(c){return c&=-c,1<c?4<c?c&268435455?16:536870912:4:1}var l1=r.unstable_scheduleCallback,WP=r.unstable_cancelCallback,v5=r.unstable_shouldYield,y5=r.unstable_requestPaint,bi=r.unstable_now,u1=r.unstable_ImmediatePriority,_5=r.unstable_UserBlockingPriority,c1=r.unstable_NormalPriority,x5=r.unstable_IdlePriority,Kg=null,Do=null;function S5(c){if(Do&&typeof Do.onCommitFiberRoot=="function")try{Do.onCommitFiberRoot(Kg,c,void 0,(c.current.flags&128)===128)}catch{}}function w5(c,h){return c===h&&(c!==0||1/c===1/h)||c!==c&&h!==h}var Lo=typeof Object.is=="function"?Object.is:w5,ca=null,Jg=!1,f1=!1;function jP(c){ca===null?ca=[c]:ca.push(c)}function M5(c){Jg=!0,jP(c)}function Io(){if(!f1&&ca!==null){f1=!0;var c=0,h=Qt;try{var _=ca;for(Qt=1;c<_.length;c++){var M=_[c];do M=M(!0);while(M!==null)}ca=null,Jg=!1}catch(E){throw ca!==null&&(ca=ca.slice(c+1)),l1(u1,Io),E}finally{Qt=h,f1=!1}}return null}var T5=a.ReactCurrentBatchConfig;function Qg(c,h){if(Lo(c,h))return!0;if(typeof c!="object"||c===null||typeof h!="object"||h===null)return!1;var _=Object.keys(c),M=Object.keys(h);if(_.length!==M.length)return!1;for(M=0;M<_.length;M++){var E=_[M];if(!ei.call(h,E)||!Lo(c[E],h[E]))return!1}return!0}function E5(c){switch(c.tag){case 5:return Jt(c.type);case 16:return Jt("Lazy");case 13:return Jt("Suspense");case 19:return Jt("SuspenseList");case 0:case 2:case 15:return c=Kr(c.type,!1),c;case 11:return c=Kr(c.type.render,!1),c;case 1:return c=Kr(c.type,!0),c;default:return""}}function so(c,h){if(c&&c.defaultProps){h=s({},h),c=c.defaultProps;for(var _ in c)h[_]===void 0&&(h[_]=c[_]);return h}return h}var ev=Pr(null),tv=null,ef=null,h1=null;function d1(){h1=ef=tv=null}function XP(c,h,_){Ee?(Dt(ev,h._currentValue),h._currentValue=_):(Dt(ev,h._currentValue2),h._currentValue2=_)}function p1(c){var h=ev.current;cn(ev),Ee?c._currentValue=h:c._currentValue2=h}function m1(c,h,_){for(;c!==null;){var M=c.alternate;if((c.childLanes&h)!==h?(c.childLanes|=h,M!==null&&(M.childLanes|=h)):M!==null&&(M.childLanes&h)!==h&&(M.childLanes|=h),c===_)break;c=c.return}}function tf(c,h){tv=c,h1=ef=null,c=c.dependencies,c!==null&&c.firstContext!==null&&(c.lanes&h&&(es=!0),c.firstContext=null)}function Ts(c){var h=Ee?c._currentValue:c._currentValue2;if(h1!==c)if(c={context:c,memoizedValue:h,next:null},ef===null){if(tv===null)throw Error(o(308));ef=c,tv.dependencies={lanes:0,firstContext:c}}else ef=ef.next=c;return h}var ko=null,tl=!1;function g1(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function YP(c,h){c=c.updateQueue,h.updateQueue===c&&(h.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function fa(c,h){return{eventTime:c,lane:h,tag:0,payload:null,callback:null,next:null}}function nl(c,h){var _=c.updateQueue;_!==null&&(_=_.shared,ni!==null&&c.mode&1&&!(Ot&2)?(c=_.interleaved,c===null?(h.next=h,ko===null?ko=[_]:ko.push(_)):(h.next=c.next,c.next=h),_.interleaved=h):(c=_.pending,c===null?h.next=h:(h.next=c.next,c.next=h),_.pending=h))}function nv(c,h,_){if(h=h.updateQueue,h!==null&&(h=h.shared,(_&4194240)!==0)){var M=h.lanes;M&=c.pendingLanes,_|=M,h.lanes=_,a1(c,_)}}function qP(c,h){var _=c.updateQueue,M=c.alternate;if(M!==null&&(M=M.updateQueue,_===M)){var E=null,A=null;if(_=_.firstBaseUpdate,_!==null){do{var V={eventTime:_.eventTime,lane:_.lane,tag:_.tag,payload:_.payload,callback:_.callback,next:null};A===null?E=A=V:A=A.next=V,_=_.next}while(_!==null);A===null?E=A=h:A=A.next=h}else E=A=h;_={baseState:M.baseState,firstBaseUpdate:E,lastBaseUpdate:A,shared:M.shared,effects:M.effects},c.updateQueue=_;return}c=_.lastBaseUpdate,c===null?_.firstBaseUpdate=h:c.next=h,_.lastBaseUpdate=h}function iv(c,h,_,M){var E=c.updateQueue;tl=!1;var A=E.firstBaseUpdate,V=E.lastBaseUpdate,q=E.shared.pending;if(q!==null){E.shared.pending=null;var Se=q,ke=Se.next;Se.next=null,V===null?A=ke:V.next=ke,V=Se;var nt=c.alternate;nt!==null&&(nt=nt.updateQueue,q=nt.lastBaseUpdate,q!==V&&(q===null?nt.firstBaseUpdate=ke:q.next=ke,nt.lastBaseUpdate=Se))}if(A!==null){var At=E.baseState;V=0,nt=ke=Se=null,q=A;do{var gt=q.lane,gn=q.eventTime;if((M&gt)===gt){nt!==null&&(nt=nt.next={eventTime:gn,lane:0,tag:q.tag,payload:q.payload,callback:q.callback,next:null});e:{var ct=c,$i=q;switch(gt=h,gn=_,$i.tag){case 1:if(ct=$i.payload,typeof ct=="function"){At=ct.call(gn,At,gt);break e}At=ct;break e;case 3:ct.flags=ct.flags&-65537|128;case 0:if(ct=$i.payload,gt=typeof ct=="function"?ct.call(gn,At,gt):ct,gt==null)break e;At=s({},At,gt);break e;case 2:tl=!0}}q.callback!==null&&q.lane!==0&&(c.flags|=64,gt=E.effects,gt===null?E.effects=[q]:gt.push(q))}else gn={eventTime:gn,lane:gt,tag:q.tag,payload:q.payload,callback:q.callback,next:null},nt===null?(ke=nt=gn,Se=At):nt=nt.next=gn,V|=gt;if(q=q.next,q===null){if(q=E.shared.pending,q===null)break;gt=q,q=gt.next,gt.next=null,E.lastBaseUpdate=gt,E.shared.pending=null}}while(1);if(nt===null&&(Se=At),E.baseState=Se,E.firstBaseUpdate=ke,E.lastBaseUpdate=nt,h=E.shared.interleaved,h!==null){E=h;do V|=E.lane,E=E.next;while(E!==h)}else A===null&&(E.shared.lanes=0);ff|=V,c.lanes=V,c.memoizedState=At}}function ZP(c,h,_){if(c=h.effects,h.effects=null,c!==null)for(h=0;h<c.length;h++){var M=c[h],E=M.callback;if(E!==null){if(M.callback=null,M=_,typeof E!="function")throw Error(o(191,E));E.call(M)}}}var $P=new i.Component().refs;function v1(c,h,_,M){h=c.memoizedState,_=_(M,h),_=_==null?h:s({},h,_),c.memoizedState=_,c.lanes===0&&(c.updateQueue.baseState=_)}var rv={isMounted:function(c){return(c=c._reactInternals)?C(c)===c:!1},enqueueSetState:function(c,h,_){c=c._reactInternals;var M=dr(),E=sl(c),A=fa(M,E);A.payload=h,_!=null&&(A.callback=_),nl(c,A),h=As(c,E,M),h!==null&&nv(h,c,E)},enqueueReplaceState:function(c,h,_){c=c._reactInternals;var M=dr(),E=sl(c),A=fa(M,E);A.tag=1,A.payload=h,_!=null&&(A.callback=_),nl(c,A),h=As(c,E,M),h!==null&&nv(h,c,E)},enqueueForceUpdate:function(c,h){c=c._reactInternals;var _=dr(),M=sl(c),E=fa(_,M);E.tag=2,h!=null&&(E.callback=h),nl(c,E),h=As(c,M,_),h!==null&&nv(h,c,M)}};function KP(c,h,_,M,E,A,V){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(M,A,V):h.prototype&&h.prototype.isPureReactComponent?!Qg(_,M)||!Qg(E,A):!0}function JP(c,h,_){var M=!1,E=Xi,A=h.contextType;return typeof A=="object"&&A!==null?A=Ts(A):(E=Fi(h)?io:ti.current,M=h.contextTypes,A=(M=M!=null)?el(c,E):Xi),h=new h(_,A),c.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=rv,c.stateNode=h,h._reactInternals=c,M&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=E,c.__reactInternalMemoizedMaskedChildContext=A),h}function QP(c,h,_,M){c=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(_,M),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(_,M),h.state!==c&&rv.enqueueReplaceState(h,h.state,null)}function y1(c,h,_,M){var E=c.stateNode;E.props=_,E.state=c.memoizedState,E.refs=$P,g1(c);var A=h.contextType;typeof A=="object"&&A!==null?E.context=Ts(A):(A=Fi(h)?io:ti.current,E.context=el(c,A)),E.state=c.memoizedState,A=h.getDerivedStateFromProps,typeof A=="function"&&(v1(c,h,A,_),E.state=c.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(h=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),h!==E.state&&rv.enqueueReplaceState(E,E.state,null),iv(c,_,E,M),E.state=c.memoizedState),typeof E.componentDidMount=="function"&&(c.flags|=4194308)}var nf=[],rf=0,sv=null,ov=0,Es=[],bs=0,Su=null,ha=1,da="";function wu(c,h){nf[rf++]=ov,nf[rf++]=sv,sv=c,ov=h}function e2(c,h,_){Es[bs++]=ha,Es[bs++]=da,Es[bs++]=Su,Su=c;var M=ha;c=da;var E=32-ro(M)-1;M&=~(1<<E),_+=1;var A=32-ro(h)+E;if(30<A){var V=E-E%5;A=(M&(1<<V)-1).toString(32),M>>=V,E-=V,ha=1<<32-ro(h)+E|_<<E|M,da=A+c}else ha=1<<A|_<<E|M,da=c}function _1(c){c.return!==null&&(wu(c,1),e2(c,1,0))}function x1(c){for(;c===sv;)sv=nf[--rf],nf[rf]=null,ov=nf[--rf],nf[rf]=null;for(;c===Su;)Su=Es[--bs],Es[bs]=null,da=Es[--bs],Es[bs]=null,ha=Es[--bs],Es[bs]=null}var Jr=null,Qr=null,Pn=!1,Ed=!1,oo=null;function t2(c,h){var _=Rs(5,null,null,0);_.elementType="DELETED",_.stateNode=h,_.return=c,h=c.deletions,h===null?(c.deletions=[_],c.flags|=16):h.push(_)}function n2(c,h){switch(c.tag){case 5:return h=rt(h,c.type,c.pendingProps),h!==null?(c.stateNode=h,Jr=c,Qr=ne(h),!0):!1;case 6:return h=ht(h,c.pendingProps),h!==null?(c.stateNode=h,Jr=c,Qr=null,!0):!1;case 13:if(h=Pt(h),h!==null){var _=Su!==null?{id:ha,overflow:da}:null;return c.memoizedState={dehydrated:h,treeContext:_,retryLane:1073741824},_=Rs(18,null,null,0),_.stateNode=h,_.return=c,c.child=_,Jr=c,Qr=null,!0}return!1;default:return!1}}function S1(c){return(c.mode&1)!==0&&(c.flags&128)===0}function w1(c){if(Pn){var h=Qr;if(h){var _=h;if(!n2(c,h)){if(S1(c))throw Error(o(418));h=U(_);var M=Jr;h&&n2(c,h)?t2(M,_):(c.flags=c.flags&-4097|2,Pn=!1,Jr=c)}}else{if(S1(c))throw Error(o(418));c.flags=c.flags&-4097|2,Pn=!1,Jr=c}}}function i2(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;Jr=c}function bd(c){if(!ae||c!==Jr)return!1;if(!Pn)return i2(c),Pn=!0,!1;if(c.tag!==3&&(c.tag!==5||_t(c.type)&&!Te(c.type,c.memoizedProps))){var h=Qr;if(h){if(S1(c)){for(c=Qr;c;)c=U(c);throw Error(o(418))}for(;h;)t2(c,h),h=U(h)}}if(i2(c),c.tag===13){if(!ae)throw Error(o(316));if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(o(317));Qr=$e(c)}else Qr=Jr?U(c.stateNode):null;return!0}function sf(){ae&&(Qr=Jr=null,Ed=Pn=!1)}function M1(c){oo===null?oo=[c]:oo.push(c)}function Cd(c,h,_){if(c=_.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(_._owner){if(_=_._owner,_){if(_.tag!==1)throw Error(o(309));var M=_.stateNode}if(!M)throw Error(o(147,c));var E=M,A=""+c;return h!==null&&h.ref!==null&&typeof h.ref=="function"&&h.ref._stringRef===A?h.ref:(h=function(V){var q=E.refs;q===$P&&(q=E.refs={}),V===null?delete q[A]:q[A]=V},h._stringRef=A,h)}if(typeof c!="string")throw Error(o(284));if(!_._owner)throw Error(o(290,c))}return c}function av(c,h){throw c=Object.prototype.toString.call(h),Error(o(31,c==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":c))}function r2(c){var h=c._init;return h(c._payload)}function s2(c){function h(ue,K){if(c){var ve=ue.deletions;ve===null?(ue.deletions=[K],ue.flags|=16):ve.push(K)}}function _(ue,K){if(!c)return null;for(;K!==null;)h(ue,K),K=K.sibling;return null}function M(ue,K){for(ue=new Map;K!==null;)K.key!==null?ue.set(K.key,K):ue.set(K.index,K),K=K.sibling;return ue}function E(ue,K){return ue=al(ue,K),ue.index=0,ue.sibling=null,ue}function A(ue,K,ve){return ue.index=ve,c?(ve=ue.alternate,ve!==null?(ve=ve.index,ve<K?(ue.flags|=2,K):ve):(ue.flags|=2,K)):(ue.flags|=1048576,K)}function V(ue){return c&&ue.alternate===null&&(ue.flags|=2),ue}function q(ue,K,ve,We){return K===null||K.tag!==6?(K=oS(ve,ue.mode,We),K.return=ue,K):(K=E(K,ve),K.return=ue,K)}function Se(ue,K,ve,We){var ut=ve.type;return ut===f?nt(ue,K,ve.props.children,We,ve.key):K!==null&&(K.elementType===ut||typeof ut=="object"&&ut!==null&&ut.$$typeof===S&&r2(ut)===K.type)?(We=E(K,ve.props),We.ref=Cd(ue,K,ve),We.return=ue,We):(We=Fv(ve.type,ve.key,ve.props,null,ue.mode,We),We.ref=Cd(ue,K,ve),We.return=ue,We)}function ke(ue,K,ve,We){return K===null||K.tag!==4||K.stateNode.containerInfo!==ve.containerInfo||K.stateNode.implementation!==ve.implementation?(K=aS(ve,ue.mode,We),K.return=ue,K):(K=E(K,ve.children||[]),K.return=ue,K)}function nt(ue,K,ve,We,ut){return K===null||K.tag!==7?(K=Au(ve,ue.mode,We,ut),K.return=ue,K):(K=E(K,ve),K.return=ue,K)}function At(ue,K,ve){if(typeof K=="string"&&K!==""||typeof K=="number")return K=oS(""+K,ue.mode,ve),K.return=ue,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case l:return ve=Fv(K.type,K.key,K.props,null,ue.mode,ve),ve.ref=Cd(ue,null,K),ve.return=ue,ve;case u:return K=aS(K,ue.mode,ve),K.return=ue,K;case S:var We=K._init;return At(ue,We(K._payload),ve)}if(X(K)||P(K))return K=Au(K,ue.mode,ve,null),K.return=ue,K;av(ue,K)}return null}function gt(ue,K,ve,We){var ut=K!==null?K.key:null;if(typeof ve=="string"&&ve!==""||typeof ve=="number")return ut!==null?null:q(ue,K,""+ve,We);if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case l:return ve.key===ut?Se(ue,K,ve,We):null;case u:return ve.key===ut?ke(ue,K,ve,We):null;case S:return ut=ve._init,gt(ue,K,ut(ve._payload),We)}if(X(ve)||P(ve))return ut!==null?null:nt(ue,K,ve,We,null);av(ue,ve)}return null}function gn(ue,K,ve,We,ut){if(typeof We=="string"&&We!==""||typeof We=="number")return ue=ue.get(ve)||null,q(K,ue,""+We,ut);if(typeof We=="object"&&We!==null){switch(We.$$typeof){case l:return ue=ue.get(We.key===null?ve:We.key)||null,Se(K,ue,We,ut);case u:return ue=ue.get(We.key===null?ve:We.key)||null,ke(K,ue,We,ut);case S:var It=We._init;return gn(ue,K,ve,It(We._payload),ut)}if(X(We)||P(We))return ue=ue.get(ve)||null,nt(K,ue,We,ut,null);av(K,We)}return null}function ct(ue,K,ve,We){for(var ut=null,It=null,Rt=K,en=K=0,Pi=null;Rt!==null&&en<ve.length;en++){Rt.index>en?(Pi=Rt,Rt=null):Pi=Rt.sibling;var tn=gt(ue,Rt,ve[en],We);if(tn===null){Rt===null&&(Rt=Pi);break}c&&Rt&&tn.alternate===null&&h(ue,Rt),K=A(tn,K,en),It===null?ut=tn:It.sibling=tn,It=tn,Rt=Pi}if(en===ve.length)return _(ue,Rt),Pn&&wu(ue,en),ut;if(Rt===null){for(;en<ve.length;en++)Rt=At(ue,ve[en],We),Rt!==null&&(K=A(Rt,K,en),It===null?ut=Rt:It.sibling=Rt,It=Rt);return Pn&&wu(ue,en),ut}for(Rt=M(ue,Rt);en<ve.length;en++)Pi=gn(Rt,ue,en,ve[en],We),Pi!==null&&(c&&Pi.alternate!==null&&Rt.delete(Pi.key===null?en:Pi.key),K=A(Pi,K,en),It===null?ut=Pi:It.sibling=Pi,It=Pi);return c&&Rt.forEach(function(ll){return h(ue,ll)}),Pn&&wu(ue,en),ut}function $i(ue,K,ve,We){var ut=P(ve);if(typeof ut!="function")throw Error(o(150));if(ve=ut.call(ve),ve==null)throw Error(o(151));for(var It=ut=null,Rt=K,en=K=0,Pi=null,tn=ve.next();Rt!==null&&!tn.done;en++,tn=ve.next()){Rt.index>en?(Pi=Rt,Rt=null):Pi=Rt.sibling;var ll=gt(ue,Rt,tn.value,We);if(ll===null){Rt===null&&(Rt=Pi);break}c&&Rt&&ll.alternate===null&&h(ue,Rt),K=A(ll,K,en),It===null?ut=ll:It.sibling=ll,It=ll,Rt=Pi}if(tn.done)return _(ue,Rt),Pn&&wu(ue,en),ut;if(Rt===null){for(;!tn.done;en++,tn=ve.next())tn=At(ue,tn.value,We),tn!==null&&(K=A(tn,K,en),It===null?ut=tn:It.sibling=tn,It=tn);return Pn&&wu(ue,en),ut}for(Rt=M(ue,Rt);!tn.done;en++,tn=ve.next())tn=gn(Rt,ue,en,tn.value,We),tn!==null&&(c&&tn.alternate!==null&&Rt.delete(tn.key===null?en:tn.key),K=A(tn,K,en),It===null?ut=tn:It.sibling=tn,It=tn);return c&&Rt.forEach(function(tH){return h(ue,tH)}),Pn&&wu(ue,en),ut}function Ds(ue,K,ve,We){if(typeof ve=="object"&&ve!==null&&ve.type===f&&ve.key===null&&(ve=ve.props.children),typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case l:e:{for(var ut=ve.key,It=K;It!==null;){if(It.key===ut){if(ut=ve.type,ut===f){if(It.tag===7){_(ue,It.sibling),K=E(It,ve.props.children),K.return=ue,ue=K;break e}}else if(It.elementType===ut||typeof ut=="object"&&ut!==null&&ut.$$typeof===S&&r2(ut)===It.type){_(ue,It.sibling),K=E(It,ve.props),K.ref=Cd(ue,It,ve),K.return=ue,ue=K;break e}_(ue,It);break}else h(ue,It);It=It.sibling}ve.type===f?(K=Au(ve.props.children,ue.mode,We,ve.key),K.return=ue,ue=K):(We=Fv(ve.type,ve.key,ve.props,null,ue.mode,We),We.ref=Cd(ue,K,ve),We.return=ue,ue=We)}return V(ue);case u:e:{for(It=ve.key;K!==null;){if(K.key===It)if(K.tag===4&&K.stateNode.containerInfo===ve.containerInfo&&K.stateNode.implementation===ve.implementation){_(ue,K.sibling),K=E(K,ve.children||[]),K.return=ue,ue=K;break e}else{_(ue,K);break}else h(ue,K);K=K.sibling}K=aS(ve,ue.mode,We),K.return=ue,ue=K}return V(ue);case S:return It=ve._init,Ds(ue,K,It(ve._payload),We)}if(X(ve))return ct(ue,K,ve,We);if(P(ve))return $i(ue,K,ve,We);av(ue,ve)}return typeof ve=="string"&&ve!==""||typeof ve=="number"?(ve=""+ve,K!==null&&K.tag===6?(_(ue,K.sibling),K=E(K,ve),K.return=ue,ue=K):(_(ue,K),K=oS(ve,ue.mode,We),K.return=ue,ue=K),V(ue)):_(ue,K)}return Ds}var of=s2(!0),o2=s2(!1),Pd={},Cs=Pr(Pd),Ad=Pr(Pd),af=Pr(Pd);function Oo(c){if(c===Pd)throw Error(o(174));return c}function T1(c,h){Dt(af,h),Dt(Ad,c),Dt(Cs,Pd),c=Q(h),cn(Cs),Dt(Cs,c)}function lf(){cn(Cs),cn(Ad),cn(af)}function a2(c){var h=Oo(af.current),_=Oo(Cs.current);h=z(_,c.type,h),_!==h&&(Dt(Ad,c),Dt(Cs,h))}function E1(c){Ad.current===c&&(cn(Cs),cn(Ad))}var In=Pr(0);function lv(c){for(var h=c;h!==null;){if(h.tag===13){var _=h.memoizedState;if(_!==null&&(_=_.dehydrated,_===null||Ln(_)||Bt(_)))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if(h.flags&128)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var b1=[];function C1(){for(var c=0;c<b1.length;c++){var h=b1[c];Ee?h._workInProgressVersionPrimary=null:h._workInProgressVersionSecondary=null}b1.length=0}var uv=a.ReactCurrentDispatcher,Ps=a.ReactCurrentBatchConfig,uf=0,Hn=null,Yi=null,Ci=null,cv=!1,Rd=!1,Dd=0,b5=0;function qi(){throw Error(o(321))}function P1(c,h){if(h===null)return!1;for(var _=0;_<h.length&&_<c.length;_++)if(!Lo(c[_],h[_]))return!1;return!0}function A1(c,h,_,M,E,A){if(uf=A,Hn=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,uv.current=c===null||c.memoizedState===null?R5:D5,c=_(M,E),Rd){A=0;do{if(Rd=!1,Dd=0,25<=A)throw Error(o(301));A+=1,Ci=Yi=null,h.updateQueue=null,uv.current=L5,c=_(M,E)}while(Rd)}if(uv.current=mv,h=Yi!==null&&Yi.next!==null,uf=0,Ci=Yi=Hn=null,cv=!1,h)throw Error(o(300));return c}function R1(){var c=Dd!==0;return Dd=0,c}function pa(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ci===null?Hn.memoizedState=Ci=c:Ci=Ci.next=c,Ci}function No(){if(Yi===null){var c=Hn.alternate;c=c!==null?c.memoizedState:null}else c=Yi.next;var h=Ci===null?Hn.memoizedState:Ci.next;if(h!==null)Ci=h,Yi=c;else{if(c===null)throw Error(o(310));Yi=c,c={memoizedState:Yi.memoizedState,baseState:Yi.baseState,baseQueue:Yi.baseQueue,queue:Yi.queue,next:null},Ci===null?Hn.memoizedState=Ci=c:Ci=Ci.next=c}return Ci}function Mu(c,h){return typeof h=="function"?h(c):h}function fv(c){var h=No(),_=h.queue;if(_===null)throw Error(o(311));_.lastRenderedReducer=c;var M=Yi,E=M.baseQueue,A=_.pending;if(A!==null){if(E!==null){var V=E.next;E.next=A.next,A.next=V}M.baseQueue=E=A,_.pending=null}if(E!==null){A=E.next,M=M.baseState;var q=V=null,Se=null,ke=A;do{var nt=ke.lane;if((uf&nt)===nt)Se!==null&&(Se=Se.next={lane:0,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null}),M=ke.hasEagerState?ke.eagerState:c(M,ke.action);else{var At={lane:nt,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null};Se===null?(q=Se=At,V=M):Se=Se.next=At,Hn.lanes|=nt,ff|=nt}ke=ke.next}while(ke!==null&&ke!==A);Se===null?V=M:Se.next=q,Lo(M,h.memoizedState)||(es=!0),h.memoizedState=M,h.baseState=V,h.baseQueue=Se,_.lastRenderedState=M}if(c=_.interleaved,c!==null){E=c;do A=E.lane,Hn.lanes|=A,ff|=A,E=E.next;while(E!==c)}else E===null&&(_.lanes=0);return[h.memoizedState,_.dispatch]}function hv(c){var h=No(),_=h.queue;if(_===null)throw Error(o(311));_.lastRenderedReducer=c;var M=_.dispatch,E=_.pending,A=h.memoizedState;if(E!==null){_.pending=null;var V=E=E.next;do A=c(A,V.action),V=V.next;while(V!==E);Lo(A,h.memoizedState)||(es=!0),h.memoizedState=A,h.baseQueue===null&&(h.baseState=A),_.lastRenderedState=A}return[A,M]}function l2(){}function u2(c,h){var _=Hn,M=No(),E=h(),A=!Lo(M.memoizedState,E);if(A&&(M.memoizedState=E,es=!0),M=M.queue,Id(h2.bind(null,_,M,c),[c]),M.getSnapshot!==h||A||Ci!==null&&Ci.memoizedState.tag&1){if(_.flags|=2048,Ld(9,f2.bind(null,_,M,E,h),void 0,null),ni===null)throw Error(o(349));uf&30||c2(_,h,E)}return E}function c2(c,h,_){c.flags|=16384,c={getSnapshot:h,value:_},h=Hn.updateQueue,h===null?(h={lastEffect:null,stores:null},Hn.updateQueue=h,h.stores=[c]):(_=h.stores,_===null?h.stores=[c]:_.push(c))}function f2(c,h,_,M){h.value=_,h.getSnapshot=M,d2(h)&&As(c,1,-1)}function h2(c,h,_){return _(function(){d2(h)&&As(c,1,-1)})}function d2(c){var h=c.getSnapshot;c=c.value;try{var _=h();return!Lo(c,_)}catch{return!0}}function D1(c){var h=pa();return typeof c=="function"&&(c=c()),h.memoizedState=h.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Mu,lastRenderedState:c},h.queue=c,c=c.dispatch=A5.bind(null,Hn,c),[h.memoizedState,c]}function Ld(c,h,_,M){return c={tag:c,create:h,destroy:_,deps:M,next:null},h=Hn.updateQueue,h===null?(h={lastEffect:null,stores:null},Hn.updateQueue=h,h.lastEffect=c.next=c):(_=h.lastEffect,_===null?h.lastEffect=c.next=c:(M=_.next,_.next=c,c.next=M,h.lastEffect=c)),c}function p2(){return No().memoizedState}function dv(c,h,_,M){var E=pa();Hn.flags|=c,E.memoizedState=Ld(1|h,_,void 0,M===void 0?null:M)}function pv(c,h,_,M){var E=No();M=M===void 0?null:M;var A=void 0;if(Yi!==null){var V=Yi.memoizedState;if(A=V.destroy,M!==null&&P1(M,V.deps)){E.memoizedState=Ld(h,_,A,M);return}}Hn.flags|=c,E.memoizedState=Ld(1|h,_,A,M)}function L1(c,h){return dv(8390656,8,c,h)}function Id(c,h){return pv(2048,8,c,h)}function m2(c,h){return pv(4,2,c,h)}function g2(c,h){return pv(4,4,c,h)}function v2(c,h){if(typeof h=="function")return c=c(),h(c),function(){h(null)};if(h!=null)return c=c(),h.current=c,function(){h.current=null}}function y2(c,h,_){return _=_!=null?_.concat([c]):null,pv(4,4,v2.bind(null,h,c),_)}function I1(){}function _2(c,h){var _=No();h=h===void 0?null:h;var M=_.memoizedState;return M!==null&&h!==null&&P1(h,M[1])?M[0]:(_.memoizedState=[c,h],c)}function x2(c,h){var _=No();h=h===void 0?null:h;var M=_.memoizedState;return M!==null&&h!==null&&P1(h,M[1])?M[0]:(c=c(),_.memoizedState=[c,h],c)}function C5(c,h){var _=Qt;Qt=_!==0&&4>_?_:4,c(!0);var M=Ps.transition;Ps.transition={};try{c(!1),h()}finally{Qt=_,Ps.transition=M}}function S2(){return No().memoizedState}function P5(c,h,_){var M=sl(c);_={lane:M,action:_,hasEagerState:!1,eagerState:null,next:null},w2(c)?M2(h,_):(T2(c,h,_),_=dr(),c=As(c,M,_),c!==null&&E2(c,h,M))}function A5(c,h,_){var M=sl(c),E={lane:M,action:_,hasEagerState:!1,eagerState:null,next:null};if(w2(c))M2(h,E);else{T2(c,h,E);var A=c.alternate;if(c.lanes===0&&(A===null||A.lanes===0)&&(A=h.lastRenderedReducer,A!==null))try{var V=h.lastRenderedState,q=A(V,_);if(E.hasEagerState=!0,E.eagerState=q,Lo(q,V))return}catch{}finally{}_=dr(),c=As(c,M,_),c!==null&&E2(c,h,M)}}function w2(c){var h=c.alternate;return c===Hn||h!==null&&h===Hn}function M2(c,h){Rd=cv=!0;var _=c.pending;_===null?h.next=h:(h.next=_.next,_.next=h),c.pending=h}function T2(c,h,_){ni!==null&&c.mode&1&&!(Ot&2)?(c=h.interleaved,c===null?(_.next=_,ko===null?ko=[h]:ko.push(h)):(_.next=c.next,c.next=_),h.interleaved=_):(c=h.pending,c===null?_.next=_:(_.next=c.next,c.next=_),h.pending=_)}function E2(c,h,_){if(_&4194240){var M=h.lanes;M&=c.pendingLanes,_|=M,h.lanes=_,a1(c,_)}}var mv={readContext:Ts,useCallback:qi,useContext:qi,useEffect:qi,useImperativeHandle:qi,useInsertionEffect:qi,useLayoutEffect:qi,useMemo:qi,useReducer:qi,useRef:qi,useState:qi,useDebugValue:qi,useDeferredValue:qi,useTransition:qi,useMutableSource:qi,useSyncExternalStore:qi,useId:qi,unstable_isNewReconciler:!1},R5={readContext:Ts,useCallback:function(c,h){return pa().memoizedState=[c,h===void 0?null:h],c},useContext:Ts,useEffect:L1,useImperativeHandle:function(c,h,_){return _=_!=null?_.concat([c]):null,dv(4194308,4,v2.bind(null,h,c),_)},useLayoutEffect:function(c,h){return dv(4194308,4,c,h)},useInsertionEffect:function(c,h){return dv(4,2,c,h)},useMemo:function(c,h){var _=pa();return h=h===void 0?null:h,c=c(),_.memoizedState=[c,h],c},useReducer:function(c,h,_){var M=pa();return h=_!==void 0?_(h):h,M.memoizedState=M.baseState=h,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:h},M.queue=c,c=c.dispatch=P5.bind(null,Hn,c),[M.memoizedState,c]},useRef:function(c){var h=pa();return c={current:c},h.memoizedState=c},useState:D1,useDebugValue:I1,useDeferredValue:function(c){var h=D1(c),_=h[0],M=h[1];return L1(function(){var E=Ps.transition;Ps.transition={};try{M(c)}finally{Ps.transition=E}},[c]),_},useTransition:function(){var c=D1(!1),h=c[0];return c=C5.bind(null,c[1]),pa().memoizedState=c,[h,c]},useMutableSource:function(){},useSyncExternalStore:function(c,h,_){var M=Hn,E=pa();if(Pn){if(_===void 0)throw Error(o(407));_=_()}else{if(_=h(),ni===null)throw Error(o(349));uf&30||c2(M,h,_)}E.memoizedState=_;var A={value:_,getSnapshot:h};return E.queue=A,L1(h2.bind(null,M,A,c),[c]),M.flags|=2048,Ld(9,f2.bind(null,M,A,_,h),void 0,null),_},useId:function(){var c=pa(),h=ni.identifierPrefix;if(Pn){var _=da,M=ha;_=(M&~(1<<32-ro(M)-1)).toString(32)+_,h=":"+h+"R"+_,_=Dd++,0<_&&(h+="H"+_.toString(32)),h+=":"}else _=b5++,h=":"+h+"r"+_.toString(32)+":";return c.memoizedState=h},unstable_isNewReconciler:!1},D5={readContext:Ts,useCallback:_2,useContext:Ts,useEffect:Id,useImperativeHandle:y2,useInsertionEffect:m2,useLayoutEffect:g2,useMemo:x2,useReducer:fv,useRef:p2,useState:function(){return fv(Mu)},useDebugValue:I1,useDeferredValue:function(c){var h=fv(Mu),_=h[0],M=h[1];return Id(function(){var E=Ps.transition;Ps.transition={};try{M(c)}finally{Ps.transition=E}},[c]),_},useTransition:function(){var c=fv(Mu)[0],h=No().memoizedState;return[c,h]},useMutableSource:l2,useSyncExternalStore:u2,useId:S2,unstable_isNewReconciler:!1},L5={readContext:Ts,useCallback:_2,useContext:Ts,useEffect:Id,useImperativeHandle:y2,useInsertionEffect:m2,useLayoutEffect:g2,useMemo:x2,useReducer:hv,useRef:p2,useState:function(){return hv(Mu)},useDebugValue:I1,useDeferredValue:function(c){var h=hv(Mu),_=h[0],M=h[1];return Id(function(){var E=Ps.transition;Ps.transition={};try{M(c)}finally{Ps.transition=E}},[c]),_},useTransition:function(){var c=hv(Mu)[0],h=No().memoizedState;return[c,h]},useMutableSource:l2,useSyncExternalStore:u2,useId:S2,unstable_isNewReconciler:!1};function k1(c,h){try{var _="",M=h;do _+=E5(M),M=M.return;while(M);var E=_}catch(A){E=`
Error generating stack: `+A.message+`
`+A.stack}return{value:c,source:h,stack:E}}function O1(c,h){try{console.error(h.value)}catch(_){setTimeout(function(){throw _})}}var I5=typeof WeakMap=="function"?WeakMap:Map;function b2(c,h,_){_=fa(-1,_),_.tag=3,_.payload={element:null};var M=h.value;return _.callback=function(){Dv||(Dv=!0,Q1=M),O1(c,h)},_}function C2(c,h,_){_=fa(-1,_),_.tag=3;var M=c.type.getDerivedStateFromError;if(typeof M=="function"){var E=h.value;_.payload=function(){return M(E)},_.callback=function(){O1(c,h)}}var A=c.stateNode;return A!==null&&typeof A.componentDidCatch=="function"&&(_.callback=function(){O1(c,h),typeof M!="function"&&(il===null?il=new Set([this]):il.add(this));var V=h.stack;this.componentDidCatch(h.value,{componentStack:V!==null?V:""})}),_}function P2(c,h,_){var M=c.pingCache;if(M===null){M=c.pingCache=new I5;var E=new Set;M.set(h,E)}else E=M.get(h),E===void 0&&(E=new Set,M.set(h,E));E.has(_)||(E.add(_),c=Y5.bind(null,c,h,_),h.then(c,c))}function A2(c){do{var h;if((h=c.tag===13)&&(h=c.memoizedState,h=h!==null?h.dehydrated!==null:!0),h)return c;c=c.return}while(c!==null);return null}function R2(c,h,_,M,E){return c.mode&1?(c.flags|=65536,c.lanes=E,c):(c===h?c.flags|=65536:(c.flags|=128,_.flags|=131072,_.flags&=-52805,_.tag===1&&(_.alternate===null?_.tag=17:(h=fa(-1,1),h.tag=2,nl(_,h))),_.lanes|=1),c)}function Uo(c){c.flags|=4}function D2(c,h){if(c!==null&&c.child===h.child)return!0;if(h.flags&16)return!1;for(c=h.child;c!==null;){if(c.flags&12854||c.subtreeFlags&12854)return!1;c=c.sibling}return!0}var kd,Od,gv,vv;if(Ie)kd=function(c,h){for(var _=h.child;_!==null;){if(_.tag===5||_.tag===6)oe(c,_.stateNode);else if(_.tag!==4&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===h)break;for(;_.sibling===null;){if(_.return===null||_.return===h)return;_=_.return}_.sibling.return=_.return,_=_.sibling}},Od=function(){},gv=function(c,h,_,M,E){if(c=c.memoizedProps,c!==M){var A=h.stateNode,V=Oo(Cs.current);_=te(A,_,c,M,E,V),(h.updateQueue=_)&&Uo(h)}},vv=function(c,h,_,M){_!==M&&Uo(h)};else if(ce){kd=function(c,h,_,M){for(var E=h.child;E!==null;){if(E.tag===5){var A=E.stateNode;_&&M&&(A=He(A,E.type,E.memoizedProps,E)),oe(c,A)}else if(E.tag===6)A=E.stateNode,_&&M&&(A=Ae(A,E.memoizedProps,E)),oe(c,A);else if(E.tag!==4){if(E.tag===22&&E.memoizedState!==null)A=E.child,A!==null&&(A.return=E),kd(c,E,!0,!0);else if(E.child!==null){E.child.return=E,E=E.child;continue}}if(E===h)break;for(;E.sibling===null;){if(E.return===null||E.return===h)return;E=E.return}E.sibling.return=E.return,E=E.sibling}};var L2=function(c,h,_,M){for(var E=h.child;E!==null;){if(E.tag===5){var A=E.stateNode;_&&M&&(A=He(A,E.type,E.memoizedProps,E)),zt(c,A)}else if(E.tag===6)A=E.stateNode,_&&M&&(A=Ae(A,E.memoizedProps,E)),zt(c,A);else if(E.tag!==4){if(E.tag===22&&E.memoizedState!==null)A=E.child,A!==null&&(A.return=E),L2(c,E,!0,!0);else if(E.child!==null){E.child.return=E,E=E.child;continue}}if(E===h)break;for(;E.sibling===null;){if(E.return===null||E.return===h)return;E=E.return}E.sibling.return=E.return,E=E.sibling}};Od=function(c,h){var _=h.stateNode;if(!D2(c,h)){c=_.containerInfo;var M=Xt(c);L2(M,h,!1,!1),_.pendingChildren=M,Uo(h),Cn(c,M)}},gv=function(c,h,_,M,E){var A=c.stateNode,V=c.memoizedProps;if((c=D2(c,h))&&V===M)h.stateNode=A;else{var q=h.stateNode,Se=Oo(Cs.current),ke=null;V!==M&&(ke=te(q,_,V,M,E,Se)),c&&ke===null?h.stateNode=A:(A=tt(A,ke,_,V,M,h,c,q),se(A,_,M,E,Se)&&Uo(h),h.stateNode=A,c?Uo(h):kd(A,h,!1,!1))}},vv=function(c,h,_,M){_!==M?(c=Oo(af.current),_=Oo(Cs.current),h.stateNode=we(M,c,_,h),Uo(h)):h.stateNode=c.stateNode}}else Od=function(){},gv=function(){},vv=function(){};function Nd(c,h){if(!Pn)switch(c.tailMode){case"hidden":h=c.tail;for(var _=null;h!==null;)h.alternate!==null&&(_=h),h=h.sibling;_===null?c.tail=null:_.sibling=null;break;case"collapsed":_=c.tail;for(var M=null;_!==null;)_.alternate!==null&&(M=_),_=_.sibling;M===null?h||c.tail===null?c.tail=null:c.tail.sibling=null:M.sibling=null}}function Zi(c){var h=c.alternate!==null&&c.alternate.child===c.child,_=0,M=0;if(h)for(var E=c.child;E!==null;)_|=E.lanes|E.childLanes,M|=E.subtreeFlags&14680064,M|=E.flags&14680064,E.return=c,E=E.sibling;else for(E=c.child;E!==null;)_|=E.lanes|E.childLanes,M|=E.subtreeFlags,M|=E.flags,E.return=c,E=E.sibling;return c.subtreeFlags|=M,c.childLanes=_,h}function k5(c,h,_){var M=h.pendingProps;switch(x1(h),h.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zi(h),null;case 1:return Fi(h.type)&&Xg(),Zi(h),null;case 3:return M=h.stateNode,lf(),cn(dn),cn(ti),C1(),M.pendingContext&&(M.context=M.pendingContext,M.pendingContext=null),(c===null||c.child===null)&&(bd(h)?Uo(h):c===null||c.memoizedState.isDehydrated&&!(h.flags&256)||(h.flags|=1024,oo!==null&&(nS(oo),oo=null))),Od(c,h),Zi(h),null;case 5:E1(h),_=Oo(af.current);var E=h.type;if(c!==null&&h.stateNode!=null)gv(c,h,E,M,_),c.ref!==h.ref&&(h.flags|=512,h.flags|=2097152);else{if(!M){if(h.stateNode===null)throw Error(o(166));return Zi(h),null}if(c=Oo(Cs.current),bd(h)){if(!ae)throw Error(o(175));c=xe(h.stateNode,h.type,h.memoizedProps,_,c,h,!Ed),h.updateQueue=c,c!==null&&Uo(h)}else{var A=ee(E,M,_,c,h);kd(A,h,!1,!1),h.stateNode=A,se(A,E,M,_,c)&&Uo(h)}h.ref!==null&&(h.flags|=512,h.flags|=2097152)}return Zi(h),null;case 6:if(c&&h.stateNode!=null)vv(c,h,c.memoizedProps,M);else{if(typeof M!="string"&&h.stateNode===null)throw Error(o(166));if(c=Oo(af.current),_=Oo(Cs.current),bd(h)){if(!ae)throw Error(o(176));if(c=h.stateNode,M=h.memoizedProps,(_=Ye(c,M,h,!Ed))&&(E=Jr,E!==null))switch(A=(E.mode&1)!==0,E.tag){case 3:hn(E.stateNode.containerInfo,c,M,A);break;case 5:Ui(E.type,E.memoizedProps,E.stateNode,c,M,A)}_&&Uo(h)}else h.stateNode=we(M,c,_,h)}return Zi(h),null;case 13:if(cn(In),M=h.memoizedState,Pn&&Qr!==null&&h.mode&1&&!(h.flags&128)){for(c=Qr;c;)c=U(c);return sf(),h.flags|=98560,h}if(M!==null&&M.dehydrated!==null){if(M=bd(h),c===null){if(!M)throw Error(o(318));if(!ae)throw Error(o(344));if(c=h.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(o(317));Ke(c,h)}else sf(),!(h.flags&128)&&(h.memoizedState=null),h.flags|=4;return Zi(h),null}return oo!==null&&(nS(oo),oo=null),h.flags&128?(h.lanes=_,h):(M=M!==null,_=!1,c===null?bd(h):_=c.memoizedState!==null,M&&!_&&(h.child.flags|=8192,h.mode&1&&(c===null||In.current&1?ci===0&&(ci=3):rS())),h.updateQueue!==null&&(h.flags|=4),Zi(h),null);case 4:return lf(),Od(c,h),c===null&&ze(h.stateNode.containerInfo),Zi(h),null;case 10:return p1(h.type._context),Zi(h),null;case 17:return Fi(h.type)&&Xg(),Zi(h),null;case 19:if(cn(In),E=h.memoizedState,E===null)return Zi(h),null;if(M=(h.flags&128)!==0,A=E.rendering,A===null)if(M)Nd(E,!1);else{if(ci!==0||c!==null&&c.flags&128)for(c=h.child;c!==null;){if(A=lv(c),A!==null){for(h.flags|=128,Nd(E,!1),c=A.updateQueue,c!==null&&(h.updateQueue=c,h.flags|=4),h.subtreeFlags=0,c=_,M=h.child;M!==null;)_=M,E=c,_.flags&=14680066,A=_.alternate,A===null?(_.childLanes=0,_.lanes=E,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=A.childLanes,_.lanes=A.lanes,_.child=A.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=A.memoizedProps,_.memoizedState=A.memoizedState,_.updateQueue=A.updateQueue,_.type=A.type,E=A.dependencies,_.dependencies=E===null?null:{lanes:E.lanes,firstContext:E.firstContext}),M=M.sibling;return Dt(In,In.current&1|2),h.child}c=c.sibling}E.tail!==null&&bi()>J1&&(h.flags|=128,M=!0,Nd(E,!1),h.lanes=4194304)}else{if(!M)if(c=lv(A),c!==null){if(h.flags|=128,M=!0,c=c.updateQueue,c!==null&&(h.updateQueue=c,h.flags|=4),Nd(E,!0),E.tail===null&&E.tailMode==="hidden"&&!A.alternate&&!Pn)return Zi(h),null}else 2*bi()-E.renderingStartTime>J1&&_!==1073741824&&(h.flags|=128,M=!0,Nd(E,!1),h.lanes=4194304);E.isBackwards?(A.sibling=h.child,h.child=A):(c=E.last,c!==null?c.sibling=A:h.child=A,E.last=A)}return E.tail!==null?(h=E.tail,E.rendering=h,E.tail=h.sibling,E.renderingStartTime=bi(),h.sibling=null,c=In.current,Dt(In,M?c&1|2:c&1),h):(Zi(h),null);case 22:case 23:return iS(),M=h.memoizedState!==null,c!==null&&c.memoizedState!==null!==M&&(h.flags|=8192),M&&h.mode&1?ts&1073741824&&(Zi(h),Ie&&h.subtreeFlags&6&&(h.flags|=8192)):Zi(h),null;case 24:return null;case 25:return null}throw Error(o(156,h.tag))}var O5=a.ReactCurrentOwner,es=!1;function hr(c,h,_,M){h.child=c===null?o2(h,null,_,M):of(h,c.child,_,M)}function I2(c,h,_,M,E){_=_.render;var A=h.ref;return tf(h,E),M=A1(c,h,_,M,A,E),_=R1(),c!==null&&!es?(h.updateQueue=c.updateQueue,h.flags&=-2053,c.lanes&=~E,ma(c,h,E)):(Pn&&_&&_1(h),h.flags|=1,hr(c,h,M,E),h.child)}function k2(c,h,_,M,E){if(c===null){var A=_.type;return typeof A=="function"&&!sS(A)&&A.defaultProps===void 0&&_.compare===null&&_.defaultProps===void 0?(h.tag=15,h.type=A,O2(c,h,A,M,E)):(c=Fv(_.type,null,M,h,h.mode,E),c.ref=h.ref,c.return=h,h.child=c)}if(A=c.child,!(c.lanes&E)){var V=A.memoizedProps;if(_=_.compare,_=_!==null?_:Qg,_(V,M)&&c.ref===h.ref)return ma(c,h,E)}return h.flags|=1,c=al(A,M),c.ref=h.ref,c.return=h,h.child=c}function O2(c,h,_,M,E){if(c!==null&&Qg(c.memoizedProps,M)&&c.ref===h.ref)if(es=!1,(c.lanes&E)!==0)c.flags&131072&&(es=!0);else return h.lanes=c.lanes,ma(c,h,E);return N1(c,h,_,M,E)}function N2(c,h,_){var M=h.pendingProps,E=M.children,A=c!==null?c.memoizedState:null;if(M.mode==="hidden")if(!(h.mode&1))h.memoizedState={baseLanes:0,cachePool:null},Dt(cf,ts),ts|=_;else if(_&1073741824)h.memoizedState={baseLanes:0,cachePool:null},M=A!==null?A.baseLanes:_,Dt(cf,ts),ts|=M;else return c=A!==null?A.baseLanes|_:_,h.lanes=h.childLanes=1073741824,h.memoizedState={baseLanes:c,cachePool:null},h.updateQueue=null,Dt(cf,ts),ts|=c,null;else A!==null?(M=A.baseLanes|_,h.memoizedState=null):M=_,Dt(cf,ts),ts|=M;return hr(c,h,E,_),h.child}function U2(c,h){var _=h.ref;(c===null&&_!==null||c!==null&&c.ref!==_)&&(h.flags|=512,h.flags|=2097152)}function N1(c,h,_,M,E){var A=Fi(_)?io:ti.current;return A=el(h,A),tf(h,E),_=A1(c,h,_,M,A,E),M=R1(),c!==null&&!es?(h.updateQueue=c.updateQueue,h.flags&=-2053,c.lanes&=~E,ma(c,h,E)):(Pn&&M&&_1(h),h.flags|=1,hr(c,h,_,E),h.child)}function F2(c,h,_,M,E){if(Fi(_)){var A=!0;Yg(h)}else A=!1;if(tf(h,E),h.stateNode===null)c!==null&&(c.alternate=null,h.alternate=null,h.flags|=2),JP(h,_,M),y1(h,_,M,E),M=!0;else if(c===null){var V=h.stateNode,q=h.memoizedProps;V.props=q;var Se=V.context,ke=_.contextType;typeof ke=="object"&&ke!==null?ke=Ts(ke):(ke=Fi(_)?io:ti.current,ke=el(h,ke));var nt=_.getDerivedStateFromProps,At=typeof nt=="function"||typeof V.getSnapshotBeforeUpdate=="function";At||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(q!==M||Se!==ke)&&QP(h,V,M,ke),tl=!1;var gt=h.memoizedState;V.state=gt,iv(h,M,V,E),Se=h.memoizedState,q!==M||gt!==Se||dn.current||tl?(typeof nt=="function"&&(v1(h,_,nt,M),Se=h.memoizedState),(q=tl||KP(h,_,q,M,gt,Se,ke))?(At||typeof V.UNSAFE_componentWillMount!="function"&&typeof V.componentWillMount!="function"||(typeof V.componentWillMount=="function"&&V.componentWillMount(),typeof V.UNSAFE_componentWillMount=="function"&&V.UNSAFE_componentWillMount()),typeof V.componentDidMount=="function"&&(h.flags|=4194308)):(typeof V.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=M,h.memoizedState=Se),V.props=M,V.state=Se,V.context=ke,M=q):(typeof V.componentDidMount=="function"&&(h.flags|=4194308),M=!1)}else{V=h.stateNode,YP(c,h),q=h.memoizedProps,ke=h.type===h.elementType?q:so(h.type,q),V.props=ke,At=h.pendingProps,gt=V.context,Se=_.contextType,typeof Se=="object"&&Se!==null?Se=Ts(Se):(Se=Fi(_)?io:ti.current,Se=el(h,Se));var gn=_.getDerivedStateFromProps;(nt=typeof gn=="function"||typeof V.getSnapshotBeforeUpdate=="function")||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(q!==At||gt!==Se)&&QP(h,V,M,Se),tl=!1,gt=h.memoizedState,V.state=gt,iv(h,M,V,E);var ct=h.memoizedState;q!==At||gt!==ct||dn.current||tl?(typeof gn=="function"&&(v1(h,_,gn,M),ct=h.memoizedState),(ke=tl||KP(h,_,ke,M,gt,ct,Se)||!1)?(nt||typeof V.UNSAFE_componentWillUpdate!="function"&&typeof V.componentWillUpdate!="function"||(typeof V.componentWillUpdate=="function"&&V.componentWillUpdate(M,ct,Se),typeof V.UNSAFE_componentWillUpdate=="function"&&V.UNSAFE_componentWillUpdate(M,ct,Se)),typeof V.componentDidUpdate=="function"&&(h.flags|=4),typeof V.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof V.componentDidUpdate!="function"||q===c.memoizedProps&&gt===c.memoizedState||(h.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||q===c.memoizedProps&&gt===c.memoizedState||(h.flags|=1024),h.memoizedProps=M,h.memoizedState=ct),V.props=M,V.state=ct,V.context=Se,M=ke):(typeof V.componentDidUpdate!="function"||q===c.memoizedProps&&gt===c.memoizedState||(h.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||q===c.memoizedProps&&gt===c.memoizedState||(h.flags|=1024),M=!1)}return U1(c,h,_,M,A,E)}function U1(c,h,_,M,E,A){U2(c,h);var V=(h.flags&128)!==0;if(!M&&!V)return E&&HP(h,_,!1),ma(c,h,A);M=h.stateNode,O5.current=h;var q=V&&typeof _.getDerivedStateFromError!="function"?null:M.render();return h.flags|=1,c!==null&&V?(h.child=of(h,c.child,null,A),h.child=of(h,null,q,A)):hr(c,h,q,A),h.memoizedState=M.state,E&&HP(h,_,!0),h.child}function z2(c){var h=c.stateNode;h.pendingContext?BP(c,h.pendingContext,h.pendingContext!==h.context):h.context&&BP(c,h.context,!1),T1(c,h.containerInfo)}function B2(c,h,_,M,E){return sf(),M1(E),h.flags|=256,hr(c,h,_,M),h.child}var yv={dehydrated:null,treeContext:null,retryLane:0};function _v(c){return{baseLanes:c,cachePool:null}}function V2(c,h,_){var M=h.pendingProps,E=In.current,A=!1,V=(h.flags&128)!==0,q;if((q=V)||(q=c!==null&&c.memoizedState===null?!1:(E&2)!==0),q?(A=!0,h.flags&=-129):(c===null||c.memoizedState!==null)&&(E|=1),Dt(In,E&1),c===null)return w1(h),c=h.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?(h.mode&1?Bt(c)?h.lanes=8:h.lanes=1073741824:h.lanes=1,null):(E=M.children,c=M.fallback,A?(M=h.mode,A=h.child,E={mode:"hidden",children:E},!(M&1)&&A!==null?(A.childLanes=0,A.pendingProps=E):A=zv(E,M,0,null),c=Au(c,M,_,null),A.return=h,c.return=h,A.sibling=c,h.child=A,h.child.memoizedState=_v(_),h.memoizedState=yv,c):F1(h,E));if(E=c.memoizedState,E!==null){if(q=E.dehydrated,q!==null){if(V)return h.flags&256?(h.flags&=-257,xv(c,h,_,Error(o(422)))):h.memoizedState!==null?(h.child=c.child,h.flags|=128,null):(A=M.fallback,E=h.mode,M=zv({mode:"visible",children:M.children},E,0,null),A=Au(A,E,_,null),A.flags|=2,M.return=h,A.return=h,M.sibling=A,h.child=M,h.mode&1&&of(h,c.child,null,_),h.child.memoizedState=_v(_),h.memoizedState=yv,A);if(!(h.mode&1))h=xv(c,h,_,null);else if(Bt(q))h=xv(c,h,_,Error(o(419)));else if(M=(_&c.childLanes)!==0,es||M){if(M=ni,M!==null){switch(_&-_){case 4:A=2;break;case 16:A=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:A=32;break;case 536870912:A=268435456;break;default:A=0}M=A&(M.suspendedLanes|_)?0:A,M!==0&&M!==E.retryLane&&(E.retryLane=M,As(c,M,-1))}rS(),h=xv(c,h,_,Error(o(421)))}else Ln(q)?(h.flags|=128,h.child=c.child,h=q5.bind(null,c),mn(q,h),h=null):(_=E.treeContext,ae&&(Qr=Z(q),Jr=h,Pn=!0,oo=null,Ed=!1,_!==null&&(Es[bs++]=ha,Es[bs++]=da,Es[bs++]=Su,ha=_.id,da=_.overflow,Su=h)),h=F1(h,h.pendingProps.children),h.flags|=4096);return h}return A?(M=G2(c,h,M.children,M.fallback,_),A=h.child,E=c.child.memoizedState,A.memoizedState=E===null?_v(_):{baseLanes:E.baseLanes|_,cachePool:null},A.childLanes=c.childLanes&~_,h.memoizedState=yv,M):(_=H2(c,h,M.children,_),h.memoizedState=null,_)}return A?(M=G2(c,h,M.children,M.fallback,_),A=h.child,E=c.child.memoizedState,A.memoizedState=E===null?_v(_):{baseLanes:E.baseLanes|_,cachePool:null},A.childLanes=c.childLanes&~_,h.memoizedState=yv,M):(_=H2(c,h,M.children,_),h.memoizedState=null,_)}function F1(c,h){return h=zv({mode:"visible",children:h},c.mode,0,null),h.return=c,c.child=h}function H2(c,h,_,M){var E=c.child;return c=E.sibling,_=al(E,{mode:"visible",children:_}),!(h.mode&1)&&(_.lanes=M),_.return=h,_.sibling=null,c!==null&&(M=h.deletions,M===null?(h.deletions=[c],h.flags|=16):M.push(c)),h.child=_}function G2(c,h,_,M,E){var A=h.mode;c=c.child;var V=c.sibling,q={mode:"hidden",children:_};return!(A&1)&&h.child!==c?(_=h.child,_.childLanes=0,_.pendingProps=q,h.deletions=null):(_=al(c,q),_.subtreeFlags=c.subtreeFlags&14680064),V!==null?M=al(V,M):(M=Au(M,A,E,null),M.flags|=2),M.return=h,_.return=h,_.sibling=M,h.child=_,M}function xv(c,h,_,M){return M!==null&&M1(M),of(h,c.child,null,_),c=F1(h,h.pendingProps.children),c.flags|=2,h.memoizedState=null,c}function W2(c,h,_){c.lanes|=h;var M=c.alternate;M!==null&&(M.lanes|=h),m1(c.return,h,_)}function z1(c,h,_,M,E){var A=c.memoizedState;A===null?c.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:M,tail:_,tailMode:E}:(A.isBackwards=h,A.rendering=null,A.renderingStartTime=0,A.last=M,A.tail=_,A.tailMode=E)}function j2(c,h,_){var M=h.pendingProps,E=M.revealOrder,A=M.tail;if(hr(c,h,M.children,_),M=In.current,M&2)M=M&1|2,h.flags|=128;else{if(c!==null&&c.flags&128)e:for(c=h.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&W2(c,_,h);else if(c.tag===19)W2(c,_,h);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===h)break e;for(;c.sibling===null;){if(c.return===null||c.return===h)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}M&=1}if(Dt(In,M),!(h.mode&1))h.memoizedState=null;else switch(E){case"forwards":for(_=h.child,E=null;_!==null;)c=_.alternate,c!==null&&lv(c)===null&&(E=_),_=_.sibling;_=E,_===null?(E=h.child,h.child=null):(E=_.sibling,_.sibling=null),z1(h,!1,E,_,A);break;case"backwards":for(_=null,E=h.child,h.child=null;E!==null;){if(c=E.alternate,c!==null&&lv(c)===null){h.child=E;break}c=E.sibling,E.sibling=_,_=E,E=c}z1(h,!0,_,null,A);break;case"together":z1(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function ma(c,h,_){if(c!==null&&(h.dependencies=c.dependencies),ff|=h.lanes,!(_&h.childLanes))return null;if(c!==null&&h.child!==c.child)throw Error(o(153));if(h.child!==null){for(c=h.child,_=al(c,c.pendingProps),h.child=_,_.return=h;c.sibling!==null;)c=c.sibling,_=_.sibling=al(c,c.pendingProps),_.return=h;_.sibling=null}return h.child}function N5(c,h,_){switch(h.tag){case 3:z2(h),sf();break;case 5:a2(h);break;case 1:Fi(h.type)&&Yg(h);break;case 4:T1(h,h.stateNode.containerInfo);break;case 10:XP(h,h.type._context,h.memoizedProps.value);break;case 13:var M=h.memoizedState;if(M!==null)return M.dehydrated!==null?(Dt(In,In.current&1),h.flags|=128,null):_&h.child.childLanes?V2(c,h,_):(Dt(In,In.current&1),c=ma(c,h,_),c!==null?c.sibling:null);Dt(In,In.current&1);break;case 19:if(M=(_&h.childLanes)!==0,c.flags&128){if(M)return j2(c,h,_);h.flags|=128}var E=h.memoizedState;if(E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),Dt(In,In.current),M)break;return null;case 22:case 23:return h.lanes=0,N2(c,h,_)}return ma(c,h,_)}function U5(c,h){switch(x1(h),h.tag){case 1:return Fi(h.type)&&Xg(),c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 3:return lf(),cn(dn),cn(ti),C1(),c=h.flags,c&65536&&!(c&128)?(h.flags=c&-65537|128,h):null;case 5:return E1(h),null;case 13:if(cn(In),c=h.memoizedState,c!==null&&c.dehydrated!==null){if(h.alternate===null)throw Error(o(340));sf()}return c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 19:return cn(In),null;case 4:return lf(),null;case 10:return p1(h.type._context),null;case 22:case 23:return iS(),null;case 24:return null;default:return null}}var Sv=!1,Tu=!1,F5=typeof WeakSet=="function"?WeakSet:Set,Ge=null;function wv(c,h){var _=c.ref;if(_!==null)if(typeof _=="function")try{_(null)}catch(M){Dr(c,h,M)}else _.current=null}function B1(c,h,_){try{_()}catch(M){Dr(c,h,M)}}var X2=!1;function z5(c,h){for(j(c.containerInfo),Ge=h;Ge!==null;)if(c=Ge,h=c.child,(c.subtreeFlags&1028)!==0&&h!==null)h.return=c,Ge=h;else for(;Ge!==null;){c=Ge;try{var _=c.alternate;if(c.flags&1024)switch(c.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var M=_.memoizedProps,E=_.memoizedState,A=c.stateNode,V=A.getSnapshotBeforeUpdate(c.elementType===c.type?M:so(c.type,M),E);A.__reactInternalSnapshotBeforeUpdate=V}break;case 3:Ie&&Ne(c.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(q){Dr(c,c.return,q)}if(h=c.sibling,h!==null){h.return=c.return,Ge=h;break}Ge=c.return}return _=X2,X2=!1,_}function Eu(c,h,_){var M=h.updateQueue;if(M=M!==null?M.lastEffect:null,M!==null){var E=M=M.next;do{if((E.tag&c)===c){var A=E.destroy;E.destroy=void 0,A!==void 0&&B1(h,_,A)}E=E.next}while(E!==M)}}function Ud(c,h){if(h=h.updateQueue,h=h!==null?h.lastEffect:null,h!==null){var _=h=h.next;do{if((_.tag&c)===c){var M=_.create;_.destroy=M()}_=_.next}while(_!==h)}}function V1(c){var h=c.ref;if(h!==null){var _=c.stateNode;switch(c.tag){case 5:c=re(_);break;default:c=_}typeof h=="function"?h(c):h.current=c}}function Y2(c,h,_){if(Do&&typeof Do.onCommitFiberUnmount=="function")try{Do.onCommitFiberUnmount(Kg,h)}catch{}switch(h.tag){case 0:case 11:case 14:case 15:if(c=h.updateQueue,c!==null&&(c=c.lastEffect,c!==null)){var M=c=c.next;do{var E=M,A=E.destroy;E=E.tag,A!==void 0&&(E&2||E&4)&&B1(h,_,A),M=M.next}while(M!==c)}break;case 1:if(wv(h,_),c=h.stateNode,typeof c.componentWillUnmount=="function")try{c.props=h.memoizedProps,c.state=h.memoizedState,c.componentWillUnmount()}catch(V){Dr(h,_,V)}break;case 5:wv(h,_);break;case 4:Ie?Q2(c,h,_):ce&&ce&&(h=h.stateNode.containerInfo,_=Xt(h),dt(h,_))}}function q2(c,h,_){for(var M=h;;)if(Y2(c,M,_),M.child===null||Ie&&M.tag===4){if(M===h)break;for(;M.sibling===null;){if(M.return===null||M.return===h)return;M=M.return}M.sibling.return=M.return,M=M.sibling}else M.child.return=M,M=M.child}function Z2(c){var h=c.alternate;h!==null&&(c.alternate=null,Z2(h)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(h=c.stateNode,h!==null&&$(h)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function $2(c){return c.tag===5||c.tag===3||c.tag===4}function K2(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||$2(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function J2(c){if(Ie){e:{for(var h=c.return;h!==null;){if($2(h))break e;h=h.return}throw Error(o(160))}var _=h;switch(_.tag){case 5:h=_.stateNode,_.flags&32&&(qe(h),_.flags&=-33),_=K2(c),G1(c,_,h);break;case 3:case 4:h=_.stateNode.containerInfo,_=K2(c),H1(c,_,h);break;default:throw Error(o(161))}}}function H1(c,h,_){var M=c.tag;if(M===5||M===6)c=c.stateNode,h?Ve(_,c,h):Fe(_,c);else if(M!==4&&(c=c.child,c!==null))for(H1(c,h,_),c=c.sibling;c!==null;)H1(c,h,_),c=c.sibling}function G1(c,h,_){var M=c.tag;if(M===5||M===6)c=c.stateNode,h?je(_,c,h):De(_,c);else if(M!==4&&(c=c.child,c!==null))for(G1(c,h,_),c=c.sibling;c!==null;)G1(c,h,_),c=c.sibling}function Q2(c,h,_){for(var M=h,E=!1,A,V;;){if(!E){E=M.return;e:for(;;){if(E===null)throw Error(o(160));switch(A=E.stateNode,E.tag){case 5:V=!1;break e;case 3:A=A.containerInfo,V=!0;break e;case 4:A=A.containerInfo,V=!0;break e}E=E.return}E=!0}if(M.tag===5||M.tag===6)q2(c,M,_),V?Ct(A,M.stateNode):Ze(A,M.stateNode);else if(M.tag===18)V?lt(A,M.stateNode):Mt(A,M.stateNode);else if(M.tag===4){if(M.child!==null){A=M.stateNode.containerInfo,V=!0,M.child.return=M,M=M.child;continue}}else if(Y2(c,M,_),M.child!==null){M.child.return=M,M=M.child;continue}if(M===h)break;for(;M.sibling===null;){if(M.return===null||M.return===h)return;M=M.return,M.tag===4&&(E=!1)}M.sibling.return=M.return,M=M.sibling}}function W1(c,h){if(Ie){switch(h.tag){case 0:case 11:case 14:case 15:Eu(3,h,h.return),Ud(3,h),Eu(5,h,h.return);return;case 1:return;case 5:var _=h.stateNode;if(_!=null){var M=h.memoizedProps;c=c!==null?c.memoizedProps:M;var E=h.type,A=h.updateQueue;h.updateQueue=null,A!==null&&Ce(_,A,E,c,M,h)}return;case 6:if(h.stateNode===null)throw Error(o(162));_=h.memoizedProps,he(h.stateNode,c!==null?c.memoizedProps:_,_);return;case 3:ae&&c!==null&&c.memoizedState.isDehydrated&&at(h.stateNode.containerInfo);return;case 12:return;case 13:Mv(h);return;case 19:Mv(h);return;case 17:return}throw Error(o(163))}switch(h.tag){case 0:case 11:case 14:case 15:Eu(3,h,h.return),Ud(3,h),Eu(5,h,h.return);return;case 12:return;case 13:Mv(h);return;case 19:Mv(h);return;case 3:ae&&c!==null&&c.memoizedState.isDehydrated&&at(h.stateNode.containerInfo);break;case 22:case 23:return}e:if(ce){switch(h.tag){case 1:case 5:case 6:break e;case 3:case 4:h=h.stateNode,dt(h.containerInfo,h.pendingChildren);break e}throw Error(o(163))}}function Mv(c){var h=c.updateQueue;if(h!==null){c.updateQueue=null;var _=c.stateNode;_===null&&(_=c.stateNode=new F5),h.forEach(function(M){var E=Z5.bind(null,c,M);_.has(M)||(_.add(M),M.then(E,E))})}}function B5(c,h){for(Ge=h;Ge!==null;){h=Ge;var _=h.deletions;if(_!==null)for(var M=0;M<_.length;M++){var E=_[M];try{var A=c;Ie?Q2(A,E,h):q2(A,E,h);var V=E.alternate;V!==null&&(V.return=null),E.return=null}catch(ut){Dr(E,h,ut)}}if(_=h.child,h.subtreeFlags&12854&&_!==null)_.return=h,Ge=_;else for(;Ge!==null;){h=Ge;try{var q=h.flags;if(q&32&&Ie&&qe(h.stateNode),q&512){var Se=h.alternate;if(Se!==null){var ke=Se.ref;ke!==null&&(typeof ke=="function"?ke(null):ke.current=null)}}if(q&8192)switch(h.tag){case 13:if(h.memoizedState!==null){var nt=h.alternate;(nt===null||nt.memoizedState===null)&&(K1=bi())}break;case 22:var At=h.memoizedState!==null,gt=h.alternate,gn=gt!==null&&gt.memoizedState!==null;if(_=h,Ie){e:if(M=_,E=At,A=null,Ie)for(var ct=M;;){if(ct.tag===5){if(A===null){A=ct;var $i=ct.stateNode;E?Zt($i):ye(ct.stateNode,ct.memoizedProps)}}else if(ct.tag===6){if(A===null){var Ds=ct.stateNode;E?Y(Ds):be(Ds,ct.memoizedProps)}}else if((ct.tag!==22&&ct.tag!==23||ct.memoizedState===null||ct===M)&&ct.child!==null){ct.child.return=ct,ct=ct.child;continue}if(ct===M)break;for(;ct.sibling===null;){if(ct.return===null||ct.return===M)break e;A===ct&&(A=null),ct=ct.return}A===ct&&(A=null),ct.sibling.return=ct.return,ct=ct.sibling}}if(At&&!gn&&_.mode&1){Ge=_;for(var ue=_.child;ue!==null;){for(_=Ge=ue;Ge!==null;){M=Ge;var K=M.child;switch(M.tag){case 0:case 11:case 14:case 15:Eu(4,M,M.return);break;case 1:wv(M,M.return);var ve=M.stateNode;if(typeof ve.componentWillUnmount=="function"){var We=M.return;try{ve.props=M.memoizedProps,ve.state=M.memoizedState,ve.componentWillUnmount()}catch(ut){Dr(M,We,ut)}}break;case 5:wv(M,M.return);break;case 22:if(M.memoizedState!==null){nA(_);continue}}K!==null?(K.return=M,Ge=K):nA(_)}ue=ue.sibling}}}switch(q&4102){case 2:J2(h),h.flags&=-3;break;case 6:J2(h),h.flags&=-3,W1(h.alternate,h);break;case 4096:h.flags&=-4097;break;case 4100:h.flags&=-4097,W1(h.alternate,h);break;case 4:W1(h.alternate,h)}}catch(ut){Dr(h,h.return,ut)}if(_=h.sibling,_!==null){_.return=h.return,Ge=_;break}Ge=h.return}}}function V5(c,h,_){Ge=c,eA(c)}function eA(c,h,_){for(var M=(c.mode&1)!==0;Ge!==null;){var E=Ge,A=E.child;if(E.tag===22&&M){var V=E.memoizedState!==null||Sv;if(!V){var q=E.alternate,Se=q!==null&&q.memoizedState!==null||Tu;q=Sv;var ke=Tu;if(Sv=V,(Tu=Se)&&!ke)for(Ge=E;Ge!==null;)V=Ge,Se=V.child,V.tag===22&&V.memoizedState!==null?iA(E):Se!==null?(Se.return=V,Ge=Se):iA(E);for(;A!==null;)Ge=A,eA(A),A=A.sibling;Ge=E,Sv=q,Tu=ke}tA(c)}else E.subtreeFlags&8772&&A!==null?(A.return=E,Ge=A):tA(c)}}function tA(c){for(;Ge!==null;){var h=Ge;if(h.flags&8772){var _=h.alternate;try{if(h.flags&8772)switch(h.tag){case 0:case 11:case 15:Tu||Ud(5,h);break;case 1:var M=h.stateNode;if(h.flags&4&&!Tu)if(_===null)M.componentDidMount();else{var E=h.elementType===h.type?_.memoizedProps:so(h.type,_.memoizedProps);M.componentDidUpdate(E,_.memoizedState,M.__reactInternalSnapshotBeforeUpdate)}var A=h.updateQueue;A!==null&&ZP(h,A,M);break;case 3:var V=h.updateQueue;if(V!==null){if(_=null,h.child!==null)switch(h.child.tag){case 5:_=re(h.child.stateNode);break;case 1:_=h.child.stateNode}ZP(h,V,_)}break;case 5:var q=h.stateNode;_===null&&h.flags&4&&Pe(q,h.type,h.memoizedProps,h);break;case 6:break;case 4:break;case 12:break;case 13:if(ae&&h.memoizedState===null){var Se=h.alternate;if(Se!==null){var ke=Se.memoizedState;if(ke!==null){var nt=ke.dehydrated;nt!==null&&Et(nt)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}Tu||h.flags&512&&V1(h)}catch(At){Dr(h,h.return,At)}}if(h===c){Ge=null;break}if(_=h.sibling,_!==null){_.return=h.return,Ge=_;break}Ge=h.return}}function nA(c){for(;Ge!==null;){var h=Ge;if(h===c){Ge=null;break}var _=h.sibling;if(_!==null){_.return=h.return,Ge=_;break}Ge=h.return}}function iA(c){for(;Ge!==null;){var h=Ge;try{switch(h.tag){case 0:case 11:case 15:var _=h.return;try{Ud(4,h)}catch(Se){Dr(h,_,Se)}break;case 1:var M=h.stateNode;if(typeof M.componentDidMount=="function"){var E=h.return;try{M.componentDidMount()}catch(Se){Dr(h,E,Se)}}var A=h.return;try{V1(h)}catch(Se){Dr(h,A,Se)}break;case 5:var V=h.return;try{V1(h)}catch(Se){Dr(h,V,Se)}}}catch(Se){Dr(h,h.return,Se)}if(h===c){Ge=null;break}var q=h.sibling;if(q!==null){q.return=h.return,Ge=q;break}Ge=h.return}}var Tv=0,Ev=1,bv=2,Cv=3,Pv=4;if(typeof Symbol=="function"&&Symbol.for){var Fd=Symbol.for;Tv=Fd("selector.component"),Ev=Fd("selector.has_pseudo_class"),bv=Fd("selector.role"),Cv=Fd("selector.test_id"),Pv=Fd("selector.text")}function j1(c){var h=Me(c);if(h!=null){if(typeof h.memoizedProps["data-testname"]!="string")throw Error(o(364));return h}if(c=Tt(c),c===null)throw Error(o(362));return c.stateNode.current}function X1(c,h){switch(h.$$typeof){case Tv:if(c.type===h.value)return!0;break;case Ev:e:{h=h.value,c=[c,0];for(var _=0;_<c.length;){var M=c[_++],E=c[_++],A=h[E];if(M.tag!==5||!fe(M)){for(;A!=null&&X1(M,A);)E++,A=h[E];if(E===h.length){h=!0;break e}else for(M=M.child;M!==null;)c.push(M,E),M=M.sibling}}h=!1}return h;case bv:if(c.tag===5&&ge(c.stateNode,h.value))return!0;break;case Pv:if((c.tag===5||c.tag===6)&&(c=k(c),c!==null&&0<=c.indexOf(h.value)))return!0;break;case Cv:if(c.tag===5&&(c=c.memoizedProps["data-testname"],typeof c=="string"&&c.toLowerCase()===h.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function Y1(c){switch(c.$$typeof){case Tv:return"<"+(R(c.value)||"Unknown")+">";case Ev:return":has("+(Y1(c)||"")+")";case bv:return'[role="'+c.value+'"]';case Pv:return'"'+c.value+'"';case Cv:return'[data-testname="'+c.value+'"]';default:throw Error(o(365))}}function rA(c,h){var _=[];c=[c,0];for(var M=0;M<c.length;){var E=c[M++],A=c[M++],V=h[A];if(E.tag!==5||!fe(E)){for(;V!=null&&X1(E,V);)A++,V=h[A];if(A===h.length)_.push(E);else for(E=E.child;E!==null;)c.push(E,A),E=E.sibling}}return _}function q1(c,h){if(!ft)throw Error(o(363));c=j1(c),c=rA(c,h),h=[],c=Array.from(c);for(var _=0;_<c.length;){var M=c[_++];if(M.tag===5)fe(M)||h.push(M.stateNode);else for(M=M.child;M!==null;)c.push(M),M=M.sibling}return h}var H5=Math.ceil,Av=a.ReactCurrentDispatcher,Z1=a.ReactCurrentOwner,qn=a.ReactCurrentBatchConfig,Ot=0,ni=null,ii=null,zi=0,ts=0,cf=Pr(0),ci=0,zd=null,ff=0,Rv=0,$1=0,Bd=null,Ar=null,K1=0,J1=1/0;function hf(){J1=bi()+500}var Dv=!1,Q1=null,il=null,Lv=!1,rl=null,Iv=0,Vd=0,eS=null,kv=-1,Ov=0;function dr(){return Ot&6?bi():kv!==-1?kv:kv=bi()}function sl(c){return c.mode&1?Ot&2&&zi!==0?zi&-zi:T5.transition!==null?(Ov===0&&(c=qg,qg<<=1,!(qg&4194240)&&(qg=64),Ov=c),Ov):(c=Qt,c!==0?c:Re()):1}function As(c,h,_){if(50<Vd)throw Vd=0,eS=null,Error(o(185));var M=Nv(c,h);return M===null?null:(Td(M,h,_),(!(Ot&2)||M!==ni)&&(M===ni&&(!(Ot&2)&&(Rv|=h),ci===4&&ol(M,zi)),Rr(M,_),h===1&&Ot===0&&!(c.mode&1)&&(hf(),Jg&&Io())),M)}function Nv(c,h){c.lanes|=h;var _=c.alternate;for(_!==null&&(_.lanes|=h),_=c,c=c.return;c!==null;)c.childLanes|=h,_=c.alternate,_!==null&&(_.childLanes|=h),_=c,c=c.return;return _.tag===3?_.stateNode:null}function Rr(c,h){var _=c.callbackNode;m5(c,h);var M=$g(c,c===ni?zi:0);if(M===0)_!==null&&WP(_),c.callbackNode=null,c.callbackPriority=0;else if(h=M&-M,c.callbackPriority!==h){if(_!=null&&WP(_),h===1)c.tag===0?M5(oA.bind(null,c)):jP(oA.bind(null,c)),et?Ue(function(){Ot===0&&Io()}):l1(u1,Io),_=null;else{switch(GP(M)){case 1:_=u1;break;case 4:_=_5;break;case 16:_=c1;break;case 536870912:_=x5;break;default:_=c1}_=mA(_,sA.bind(null,c))}c.callbackPriority=h,c.callbackNode=_}}function sA(c,h){if(kv=-1,Ov=0,Ot&6)throw Error(o(327));var _=c.callbackNode;if(Pu()&&c.callbackNode!==_)return null;var M=$g(c,c===ni?zi:0);if(M===0)return null;if(M&30||M&c.expiredLanes||h)h=Uv(c,M);else{h=M;var E=Ot;Ot|=2;var A=uA();(ni!==c||zi!==h)&&(hf(),bu(c,h));do try{j5();break}catch(q){lA(c,q)}while(1);d1(),Av.current=A,Ot=E,ii!==null?h=0:(ni=null,zi=0,h=ci)}if(h!==0){if(h===2&&(E=s1(c),E!==0&&(M=E,h=tS(c,E))),h===1)throw _=zd,bu(c,0),ol(c,M),Rr(c,bi()),_;if(h===6)ol(c,M);else{if(E=c.current.alternate,!(M&30)&&!G5(E)&&(h=Uv(c,M),h===2&&(A=s1(c),A!==0&&(M=A,h=tS(c,A))),h===1))throw _=zd,bu(c,0),ol(c,M),Rr(c,bi()),_;switch(c.finishedWork=E,c.finishedLanes=M,h){case 0:case 1:throw Error(o(345));case 2:Cu(c,Ar);break;case 3:if(ol(c,M),(M&130023424)===M&&(h=K1+500-bi(),10<h)){if($g(c,0)!==0)break;if(E=c.suspendedLanes,(E&M)!==M){dr(),c.pingedLanes|=c.suspendedLanes&E;break}c.timeoutHandle=J(Cu.bind(null,c,Ar),h);break}Cu(c,Ar);break;case 4:if(ol(c,M),(M&4194240)===M)break;for(h=c.eventTimes,E=-1;0<M;){var V=31-ro(M);A=1<<V,V=h[V],V>E&&(E=V),M&=~A}if(M=E,M=bi()-M,M=(120>M?120:480>M?480:1080>M?1080:1920>M?1920:3e3>M?3e3:4320>M?4320:1960*H5(M/1960))-M,10<M){c.timeoutHandle=J(Cu.bind(null,c,Ar),M);break}Cu(c,Ar);break;case 5:Cu(c,Ar);break;default:throw Error(o(329))}}}return Rr(c,bi()),c.callbackNode===_?sA.bind(null,c):null}function tS(c,h){var _=Bd;return c.current.memoizedState.isDehydrated&&(bu(c,h).flags|=256),c=Uv(c,h),c!==2&&(h=Ar,Ar=_,h!==null&&nS(h)),c}function nS(c){Ar===null?Ar=c:Ar.push.apply(Ar,c)}function G5(c){for(var h=c;;){if(h.flags&16384){var _=h.updateQueue;if(_!==null&&(_=_.stores,_!==null))for(var M=0;M<_.length;M++){var E=_[M],A=E.getSnapshot;E=E.value;try{if(!Lo(A(),E))return!1}catch{return!1}}}if(_=h.child,h.subtreeFlags&16384&&_!==null)_.return=h,h=_;else{if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function ol(c,h){for(h&=~$1,h&=~Rv,c.suspendedLanes|=h,c.pingedLanes&=~h,c=c.expirationTimes;0<h;){var _=31-ro(h),M=1<<_;c[_]=-1,h&=~M}}function oA(c){if(Ot&6)throw Error(o(327));Pu();var h=$g(c,0);if(!(h&1))return Rr(c,bi()),null;var _=Uv(c,h);if(c.tag!==0&&_===2){var M=s1(c);M!==0&&(h=M,_=tS(c,M))}if(_===1)throw _=zd,bu(c,0),ol(c,h),Rr(c,bi()),_;if(_===6)throw Error(o(345));return c.finishedWork=c.current.alternate,c.finishedLanes=h,Cu(c,Ar),Rr(c,bi()),null}function aA(c){rl!==null&&rl.tag===0&&!(Ot&6)&&Pu();var h=Ot;Ot|=1;var _=qn.transition,M=Qt;try{if(qn.transition=null,Qt=1,c)return c()}finally{Qt=M,qn.transition=_,Ot=h,!(Ot&6)&&Io()}}function iS(){ts=cf.current,cn(cf)}function bu(c,h){c.finishedWork=null,c.finishedLanes=0;var _=c.timeoutHandle;if(_!==it&&(c.timeoutHandle=it,Xe(_)),ii!==null)for(_=ii.return;_!==null;){var M=_;switch(x1(M),M.tag){case 1:M=M.type.childContextTypes,M!=null&&Xg();break;case 3:lf(),cn(dn),cn(ti),C1();break;case 5:E1(M);break;case 4:lf();break;case 13:cn(In);break;case 19:cn(In);break;case 10:p1(M.type._context);break;case 22:case 23:iS()}_=_.return}if(ni=c,ii=c=al(c.current,null),zi=ts=h,ci=0,zd=null,$1=Rv=ff=0,Ar=Bd=null,ko!==null){for(h=0;h<ko.length;h++)if(_=ko[h],M=_.interleaved,M!==null){_.interleaved=null;var E=M.next,A=_.pending;if(A!==null){var V=A.next;A.next=E,M.next=V}_.pending=M}ko=null}return c}function lA(c,h){do{var _=ii;try{if(d1(),uv.current=mv,cv){for(var M=Hn.memoizedState;M!==null;){var E=M.queue;E!==null&&(E.pending=null),M=M.next}cv=!1}if(uf=0,Ci=Yi=Hn=null,Rd=!1,Dd=0,Z1.current=null,_===null||_.return===null){ci=1,zd=h,ii=null;break}e:{var A=c,V=_.return,q=_,Se=h;if(h=zi,q.flags|=32768,Se!==null&&typeof Se=="object"&&typeof Se.then=="function"){var ke=Se,nt=q,At=nt.tag;if(!(nt.mode&1)&&(At===0||At===11||At===15)){var gt=nt.alternate;gt?(nt.updateQueue=gt.updateQueue,nt.memoizedState=gt.memoizedState,nt.lanes=gt.lanes):(nt.updateQueue=null,nt.memoizedState=null)}var gn=A2(V);if(gn!==null){gn.flags&=-257,R2(gn,V,q,A,h),gn.mode&1&&P2(A,ke,h),h=gn,Se=ke;var ct=h.updateQueue;if(ct===null){var $i=new Set;$i.add(Se),h.updateQueue=$i}else ct.add(Se);break e}else{if(!(h&1)){P2(A,ke,h),rS();break e}Se=Error(o(426))}}else if(Pn&&q.mode&1){var Ds=A2(V);if(Ds!==null){!(Ds.flags&65536)&&(Ds.flags|=256),R2(Ds,V,q,A,h),M1(Se);break e}}A=Se,ci!==4&&(ci=2),Bd===null?Bd=[A]:Bd.push(A),Se=k1(Se,q),q=V;do{switch(q.tag){case 3:q.flags|=65536,h&=-h,q.lanes|=h;var ue=b2(q,Se,h);qP(q,ue);break e;case 1:A=Se;var K=q.type,ve=q.stateNode;if(!(q.flags&128)&&(typeof K.getDerivedStateFromError=="function"||ve!==null&&typeof ve.componentDidCatch=="function"&&(il===null||!il.has(ve)))){q.flags|=65536,h&=-h,q.lanes|=h;var We=C2(q,A,h);qP(q,We);break e}}q=q.return}while(q!==null)}fA(_)}catch(ut){h=ut,ii===_&&_!==null&&(ii=_=_.return);continue}break}while(1)}function uA(){var c=Av.current;return Av.current=mv,c===null?mv:c}function rS(){(ci===0||ci===3||ci===2)&&(ci=4),ni===null||!(ff&268435455)&&!(Rv&268435455)||ol(ni,zi)}function Uv(c,h){var _=Ot;Ot|=2;var M=uA();ni===c&&zi===h||bu(c,h);do try{W5();break}catch(E){lA(c,E)}while(1);if(d1(),Ot=_,Av.current=M,ii!==null)throw Error(o(261));return ni=null,zi=0,ci}function W5(){for(;ii!==null;)cA(ii)}function j5(){for(;ii!==null&&!v5();)cA(ii)}function cA(c){var h=pA(c.alternate,c,ts);c.memoizedProps=c.pendingProps,h===null?fA(c):ii=h,Z1.current=null}function fA(c){var h=c;do{var _=h.alternate;if(c=h.return,h.flags&32768){if(_=U5(_,h),_!==null){_.flags&=32767,ii=_;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{ci=6,ii=null;return}}else if(_=k5(_,h,ts),_!==null){ii=_;return}if(h=h.sibling,h!==null){ii=h;return}ii=h=c}while(h!==null);ci===0&&(ci=5)}function Cu(c,h){var _=Qt,M=qn.transition;try{qn.transition=null,Qt=1,X5(c,h,_)}finally{qn.transition=M,Qt=_}return null}function X5(c,h,_){do Pu();while(rl!==null);if(Ot&6)throw Error(o(327));var M=c.finishedWork,E=c.finishedLanes;if(M===null)return null;if(c.finishedWork=null,c.finishedLanes=0,M===c.current)throw Error(o(177));c.callbackNode=null,c.callbackPriority=0;var A=M.lanes|M.childLanes;if(g5(c,A),c===ni&&(ii=ni=null,zi=0),!(M.subtreeFlags&2064)&&!(M.flags&2064)||Lv||(Lv=!0,mA(c1,function(){return Pu(),null})),A=(M.flags&15990)!==0,M.subtreeFlags&15990||A){A=qn.transition,qn.transition=null;var V=Qt;Qt=1;var q=Ot;Ot|=4,Z1.current=null,z5(c,M),B5(c,M),I(c.containerInfo),c.current=M,V5(M),y5(),Ot=q,Qt=V,qn.transition=A}else c.current=M;if(Lv&&(Lv=!1,rl=c,Iv=E),A=c.pendingLanes,A===0&&(il=null),S5(M.stateNode),Rr(c,bi()),h!==null)for(_=c.onRecoverableError,M=0;M<h.length;M++)_(h[M]);if(Dv)throw Dv=!1,c=Q1,Q1=null,c;return Iv&1&&c.tag!==0&&Pu(),A=c.pendingLanes,A&1?c===eS?Vd++:(Vd=0,eS=c):Vd=0,Io(),null}function Pu(){if(rl!==null){var c=GP(Iv),h=qn.transition,_=Qt;try{if(qn.transition=null,Qt=16>c?16:c,rl===null)var M=!1;else{if(c=rl,rl=null,Iv=0,Ot&6)throw Error(o(331));var E=Ot;for(Ot|=4,Ge=c.current;Ge!==null;){var A=Ge,V=A.child;if(Ge.flags&16){var q=A.deletions;if(q!==null){for(var Se=0;Se<q.length;Se++){var ke=q[Se];for(Ge=ke;Ge!==null;){var nt=Ge;switch(nt.tag){case 0:case 11:case 15:Eu(8,nt,A)}var At=nt.child;if(At!==null)At.return=nt,Ge=At;else for(;Ge!==null;){nt=Ge;var gt=nt.sibling,gn=nt.return;if(Z2(nt),nt===ke){Ge=null;break}if(gt!==null){gt.return=gn,Ge=gt;break}Ge=gn}}}var ct=A.alternate;if(ct!==null){var $i=ct.child;if($i!==null){ct.child=null;do{var Ds=$i.sibling;$i.sibling=null,$i=Ds}while($i!==null)}}Ge=A}}if(A.subtreeFlags&2064&&V!==null)V.return=A,Ge=V;else e:for(;Ge!==null;){if(A=Ge,A.flags&2048)switch(A.tag){case 0:case 11:case 15:Eu(9,A,A.return)}var ue=A.sibling;if(ue!==null){ue.return=A.return,Ge=ue;break e}Ge=A.return}}var K=c.current;for(Ge=K;Ge!==null;){V=Ge;var ve=V.child;if(V.subtreeFlags&2064&&ve!==null)ve.return=V,Ge=ve;else e:for(V=K;Ge!==null;){if(q=Ge,q.flags&2048)try{switch(q.tag){case 0:case 11:case 15:Ud(9,q)}}catch(ut){Dr(q,q.return,ut)}if(q===V){Ge=null;break e}var We=q.sibling;if(We!==null){We.return=q.return,Ge=We;break e}Ge=q.return}}if(Ot=E,Io(),Do&&typeof Do.onPostCommitFiberRoot=="function")try{Do.onPostCommitFiberRoot(Kg,c)}catch{}M=!0}return M}finally{Qt=_,qn.transition=h}}return!1}function hA(c,h,_){h=k1(_,h),h=b2(c,h,1),nl(c,h),h=dr(),c=Nv(c,1),c!==null&&(Td(c,1,h),Rr(c,h))}function Dr(c,h,_){if(c.tag===3)hA(c,c,_);else for(;h!==null;){if(h.tag===3){hA(h,c,_);break}else if(h.tag===1){var M=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof M.componentDidCatch=="function"&&(il===null||!il.has(M))){c=k1(_,c),c=C2(h,c,1),nl(h,c),c=dr(),h=Nv(h,1),h!==null&&(Td(h,1,c),Rr(h,c));break}}h=h.return}}function Y5(c,h,_){var M=c.pingCache;M!==null&&M.delete(h),h=dr(),c.pingedLanes|=c.suspendedLanes&_,ni===c&&(zi&_)===_&&(ci===4||ci===3&&(zi&130023424)===zi&&500>bi()-K1?bu(c,0):$1|=_),Rr(c,h)}function dA(c,h){h===0&&(c.mode&1?(h=Zg,Zg<<=1,!(Zg&130023424)&&(Zg=4194304)):h=1);var _=dr();c=Nv(c,h),c!==null&&(Td(c,h,_),Rr(c,_))}function q5(c){var h=c.memoizedState,_=0;h!==null&&(_=h.retryLane),dA(c,_)}function Z5(c,h){var _=0;switch(c.tag){case 13:var M=c.stateNode,E=c.memoizedState;E!==null&&(_=E.retryLane);break;case 19:M=c.stateNode;break;default:throw Error(o(314))}M!==null&&M.delete(h),dA(c,_)}var pA;pA=function(c,h,_){if(c!==null)if(c.memoizedProps!==h.pendingProps||dn.current)es=!0;else{if(!(c.lanes&_)&&!(h.flags&128))return es=!1,N5(c,h,_);es=!!(c.flags&131072)}else es=!1,Pn&&h.flags&1048576&&e2(h,ov,h.index);switch(h.lanes=0,h.tag){case 2:var M=h.type;c!==null&&(c.alternate=null,h.alternate=null,h.flags|=2),c=h.pendingProps;var E=el(h,ti.current);tf(h,_),E=A1(null,h,M,c,E,_);var A=R1();return h.flags|=1,typeof E=="object"&&E!==null&&typeof E.render=="function"&&E.$$typeof===void 0?(h.tag=1,h.memoizedState=null,h.updateQueue=null,Fi(M)?(A=!0,Yg(h)):A=!1,h.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,g1(h),E.updater=rv,h.stateNode=E,E._reactInternals=h,y1(h,M,c,_),h=U1(null,h,M,!0,A,_)):(h.tag=0,Pn&&A&&_1(h),hr(null,h,E,_),h=h.child),h;case 16:M=h.elementType;e:{switch(c!==null&&(c.alternate=null,h.alternate=null,h.flags|=2),c=h.pendingProps,E=M._init,M=E(M._payload),h.type=M,E=h.tag=K5(M),c=so(M,c),E){case 0:h=N1(null,h,M,c,_);break e;case 1:h=F2(null,h,M,c,_);break e;case 11:h=I2(null,h,M,c,_);break e;case 14:h=k2(null,h,M,so(M.type,c),_);break e}throw Error(o(306,M,""))}return h;case 0:return M=h.type,E=h.pendingProps,E=h.elementType===M?E:so(M,E),N1(c,h,M,E,_);case 1:return M=h.type,E=h.pendingProps,E=h.elementType===M?E:so(M,E),F2(c,h,M,E,_);case 3:e:{if(z2(h),c===null)throw Error(o(387));M=h.pendingProps,A=h.memoizedState,E=A.element,YP(c,h),iv(h,M,null,_);var V=h.memoizedState;if(M=V.element,ae&&A.isDehydrated)if(A={element:M,isDehydrated:!1,cache:V.cache,transitions:V.transitions},h.updateQueue.baseState=A,h.memoizedState=A,h.flags&256){E=Error(o(423)),h=B2(c,h,M,_,E);break e}else if(M!==E){E=Error(o(424)),h=B2(c,h,M,_,E);break e}else for(ae&&(Qr=me(h.stateNode.containerInfo),Jr=h,Pn=!0,oo=null,Ed=!1),_=o2(h,null,M,_),h.child=_;_;)_.flags=_.flags&-3|4096,_=_.sibling;else{if(sf(),M===E){h=ma(c,h,_);break e}hr(c,h,M,_)}h=h.child}return h;case 5:return a2(h),c===null&&w1(h),M=h.type,E=h.pendingProps,A=c!==null?c.memoizedProps:null,V=E.children,Te(M,E)?V=null:A!==null&&Te(M,A)&&(h.flags|=32),U2(c,h),hr(c,h,V,_),h.child;case 6:return c===null&&w1(h),null;case 13:return V2(c,h,_);case 4:return T1(h,h.stateNode.containerInfo),M=h.pendingProps,c===null?h.child=of(h,null,M,_):hr(c,h,M,_),h.child;case 11:return M=h.type,E=h.pendingProps,E=h.elementType===M?E:so(M,E),I2(c,h,M,E,_);case 7:return hr(c,h,h.pendingProps,_),h.child;case 8:return hr(c,h,h.pendingProps.children,_),h.child;case 12:return hr(c,h,h.pendingProps.children,_),h.child;case 10:e:{if(M=h.type._context,E=h.pendingProps,A=h.memoizedProps,V=E.value,XP(h,M,V),A!==null)if(Lo(A.value,V)){if(A.children===E.children&&!dn.current){h=ma(c,h,_);break e}}else for(A=h.child,A!==null&&(A.return=h);A!==null;){var q=A.dependencies;if(q!==null){V=A.child;for(var Se=q.firstContext;Se!==null;){if(Se.context===M){if(A.tag===1){Se=fa(-1,_&-_),Se.tag=2;var ke=A.updateQueue;if(ke!==null){ke=ke.shared;var nt=ke.pending;nt===null?Se.next=Se:(Se.next=nt.next,nt.next=Se),ke.pending=Se}}A.lanes|=_,Se=A.alternate,Se!==null&&(Se.lanes|=_),m1(A.return,_,h),q.lanes|=_;break}Se=Se.next}}else if(A.tag===10)V=A.type===h.type?null:A.child;else if(A.tag===18){if(V=A.return,V===null)throw Error(o(341));V.lanes|=_,q=V.alternate,q!==null&&(q.lanes|=_),m1(V,_,h),V=A.sibling}else V=A.child;if(V!==null)V.return=A;else for(V=A;V!==null;){if(V===h){V=null;break}if(A=V.sibling,A!==null){A.return=V.return,V=A;break}V=V.return}A=V}hr(c,h,E.children,_),h=h.child}return h;case 9:return E=h.type,M=h.pendingProps.children,tf(h,_),E=Ts(E),M=M(E),h.flags|=1,hr(c,h,M,_),h.child;case 14:return M=h.type,E=so(M,h.pendingProps),E=so(M.type,E),k2(c,h,M,E,_);case 15:return O2(c,h,h.type,h.pendingProps,_);case 17:return M=h.type,E=h.pendingProps,E=h.elementType===M?E:so(M,E),c!==null&&(c.alternate=null,h.alternate=null,h.flags|=2),h.tag=1,Fi(M)?(c=!0,Yg(h)):c=!1,tf(h,_),JP(h,M,E),y1(h,M,E,_),U1(null,h,M,!0,c,_);case 19:return j2(c,h,_);case 22:return N2(c,h,_)}throw Error(o(156,h.tag))};function mA(c,h){return l1(c,h)}function $5(c,h,_,M){this.tag=c,this.key=_,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=M,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rs(c,h,_,M){return new $5(c,h,_,M)}function sS(c){return c=c.prototype,!(!c||!c.isReactComponent)}function K5(c){if(typeof c=="function")return sS(c)?1:0;if(c!=null){if(c=c.$$typeof,c===y)return 11;if(c===w)return 14}return 2}function al(c,h){var _=c.alternate;return _===null?(_=Rs(c.tag,h,c.key,c.mode),_.elementType=c.elementType,_.type=c.type,_.stateNode=c.stateNode,_.alternate=c,c.alternate=_):(_.pendingProps=h,_.type=c.type,_.flags=0,_.subtreeFlags=0,_.deletions=null),_.flags=c.flags&14680064,_.childLanes=c.childLanes,_.lanes=c.lanes,_.child=c.child,_.memoizedProps=c.memoizedProps,_.memoizedState=c.memoizedState,_.updateQueue=c.updateQueue,h=c.dependencies,_.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},_.sibling=c.sibling,_.index=c.index,_.ref=c.ref,_}function Fv(c,h,_,M,E,A){var V=2;if(M=c,typeof c=="function")sS(c)&&(V=1);else if(typeof c=="string")V=5;else e:switch(c){case f:return Au(_.children,E,A,h);case d:V=8,E|=8;break;case p:return c=Rs(12,_,h,E|2),c.elementType=p,c.lanes=A,c;case x:return c=Rs(13,_,h,E),c.elementType=x,c.lanes=A,c;case v:return c=Rs(19,_,h,E),c.elementType=v,c.lanes=A,c;case T:return zv(_,E,A,h);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case m:V=10;break e;case g:V=9;break e;case y:V=11;break e;case w:V=14;break e;case S:V=16,M=null;break e}throw Error(o(130,c==null?c:typeof c,""))}return h=Rs(V,_,h,E),h.elementType=c,h.type=M,h.lanes=A,h}function Au(c,h,_,M){return c=Rs(7,c,M,h),c.lanes=_,c}function zv(c,h,_,M){return c=Rs(22,c,M,h),c.elementType=T,c.lanes=_,c.stateNode={},c}function oS(c,h,_){return c=Rs(6,c,null,h),c.lanes=_,c}function aS(c,h,_){return h=Rs(4,c.children!==null?c.children:[],c.key,h),h.lanes=_,h.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},h}function J5(c,h,_,M,E){this.tag=h,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=it,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=o1(0),this.expirationTimes=o1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=o1(0),this.identifierPrefix=M,this.onRecoverableError=E,ae&&(this.mutableSourceEagerHydrationData=null)}function gA(c,h,_,M,E,A,V,q,Se){return c=new J5(c,h,_,q,Se),h===1?(h=1,A===!0&&(h|=8)):h=0,A=Rs(3,null,null,h),c.current=A,A.stateNode=c,A.memoizedState={element:M,isDehydrated:_,cache:null,transitions:null},g1(A),c}function vA(c){if(!c)return Xi;c=c._reactInternals;e:{if(C(c)!==c||c.tag!==1)throw Error(o(170));var h=c;do{switch(h.tag){case 3:h=h.stateNode.context;break e;case 1:if(Fi(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break e}}h=h.return}while(h!==null);throw Error(o(171))}if(c.tag===1){var _=c.type;if(Fi(_))return VP(c,_,h)}return h}function yA(c){var h=c._reactInternals;if(h===void 0)throw typeof c.render=="function"?Error(o(188)):(c=Object.keys(c).join(","),Error(o(268,c)));return c=H(h),c===null?null:c.stateNode}function _A(c,h){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var _=c.retryLane;c.retryLane=_!==0&&_<h?_:h}}function lS(c,h){_A(c,h),(c=c.alternate)&&_A(c,h)}function Q5(c){return c=H(c),c===null?null:c.stateNode}function eH(){return null}return t.attemptContinuousHydration=function(c){if(c.tag===13){var h=dr();As(c,134217728,h),lS(c,134217728)}},t.attemptHydrationAtCurrentPriority=function(c){if(c.tag===13){var h=dr(),_=sl(c);As(c,_,h),lS(c,_)}},t.attemptSynchronousHydration=function(c){switch(c.tag){case 3:var h=c.stateNode;if(h.current.memoizedState.isDehydrated){var _=Md(h.pendingLanes);_!==0&&(a1(h,_|1),Rr(h,bi()),!(Ot&6)&&(hf(),Io()))}break;case 13:var M=dr();aA(function(){return As(c,1,M)}),lS(c,1)}},t.batchedUpdates=function(c,h){var _=Ot;Ot|=1;try{return c(h)}finally{Ot=_,Ot===0&&(hf(),Jg&&Io())}},t.createComponentSelector=function(c){return{$$typeof:Tv,value:c}},t.createContainer=function(c,h,_,M,E,A,V){return gA(c,h,!1,null,_,M,E,A,V)},t.createHasPseudoClassSelector=function(c){return{$$typeof:Ev,value:c}},t.createHydrationContainer=function(c,h,_,M,E,A,V,q,Se){return c=gA(_,M,!0,c,E,A,V,q,Se),c.context=vA(null),_=c.current,M=dr(),E=sl(_),A=fa(M,E),A.callback=h??null,nl(_,A),c.current.lanes=E,Td(c,E,M),Rr(c,M),c},t.createPortal=function(c,h,_){var M=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:M==null?null:""+M,children:c,containerInfo:h,implementation:_}},t.createRoleSelector=function(c){return{$$typeof:bv,value:c}},t.createTestNameSelector=function(c){return{$$typeof:Cv,value:c}},t.createTextSelector=function(c){return{$$typeof:Pv,value:c}},t.deferredUpdates=function(c){var h=Qt,_=qn.transition;try{return qn.transition=null,Qt=16,c()}finally{Qt=h,qn.transition=_}},t.discreteUpdates=function(c,h,_,M,E){var A=Qt,V=qn.transition;try{return qn.transition=null,Qt=1,c(h,_,M,E)}finally{Qt=A,qn.transition=V,Ot===0&&hf()}},t.findAllNodes=q1,t.findBoundingRects=function(c,h){if(!ft)throw Error(o(363));h=q1(c,h),c=[];for(var _=0;_<h.length;_++)c.push(B(h[_]));for(h=c.length-1;0<h;h--){_=c[h];for(var M=_.x,E=M+_.width,A=_.y,V=A+_.height,q=h-1;0<=q;q--)if(h!==q){var Se=c[q],ke=Se.x,nt=ke+Se.width,At=Se.y,gt=At+Se.height;if(M>=ke&&A>=At&&E<=nt&&V<=gt){c.splice(h,1);break}else if(M!==ke||_.width!==Se.width||gt<A||At>V){if(!(A!==At||_.height!==Se.height||nt<M||ke>E)){ke>M&&(Se.width+=ke-M,Se.x=M),nt<E&&(Se.width=E-ke),c.splice(h,1);break}}else{At>A&&(Se.height+=At-A,Se.y=A),gt<V&&(Se.height=V-At),c.splice(h,1);break}}}return c},t.findHostInstance=yA,t.findHostInstanceWithNoPortals=function(c){return c=F(c),c=c!==null?W(c):null,c===null?null:c.stateNode},t.findHostInstanceWithWarning=function(c){return yA(c)},t.flushControlled=function(c){var h=Ot;Ot|=1;var _=qn.transition,M=Qt;try{qn.transition=null,Qt=1,c()}finally{Qt=M,qn.transition=_,Ot=h,Ot===0&&(hf(),Io())}},t.flushPassiveEffects=Pu,t.flushSync=aA,t.focusWithin=function(c,h){if(!ft)throw Error(o(363));for(c=j1(c),h=rA(c,h),h=Array.from(h),c=0;c<h.length;){var _=h[c++];if(!fe(_)){if(_.tag===5&&pe(_.stateNode))return!0;for(_=_.child;_!==null;)h.push(_),_=_.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Qt},t.getFindAllNodesFailureDescription=function(c,h){if(!ft)throw Error(o(363));var _=0,M=[];c=[j1(c),0];for(var E=0;E<c.length;){var A=c[E++],V=c[E++],q=h[V];if((A.tag!==5||!fe(A))&&(X1(A,q)&&(M.push(Y1(q)),V++,V>_&&(_=V)),V<h.length))for(A=A.child;A!==null;)c.push(A,V),A=A.sibling}if(_<h.length){for(c=[];_<h.length;_++)c.push(Y1(h[_]));return`findAllNodes was able to match part of the selector:
  `+(M.join(" > ")+`

No matching component was found for:
  `)+c.join(" > ")}return null},t.getPublicRootInstance=function(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return re(c.child.stateNode);default:return c.child.stateNode}},t.injectIntoDevTools=function(c){if(c={bundleType:c.bundleType,version:c.version,rendererPackageName:c.rendererPackageName,rendererConfig:c.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:Q5,findFiberByHostInstance:c.findFiberByHostInstance||eH,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")c=!1;else{var h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(h.isDisabled||!h.supportsFiber)c=!0;else{try{Kg=h.inject(c),Do=h}catch{}c=!!h.checkDCE}}return c},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(c,h,_,M){if(!ft)throw Error(o(363));c=q1(c,h);var E=_e(c,_,M).disconnect;return{disconnect:function(){E()}}},t.registerMutableSourceForHydration=function(c,h){var _=h._getVersion;_=_(h._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[h,_]:c.mutableSourceEagerHydrationData.push(h,_)},t.runWithPriority=function(c,h){var _=Qt;try{return Qt=c,h()}finally{Qt=_}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(c,h,_,M){var E=h.current,A=dr(),V=sl(E);return _=vA(_),h.context===null?h.context=_:h.pendingContext=_,h=fa(A,V),h.payload={element:c},M=M===void 0?null:M,M!==null&&(h.callback=M),nl(E,h),c=As(E,V,A),c!==null&&nv(c,E,V),V},t};gF.exports=kq;var Oq=gF.exports;const Nq=WE(Oq);function _F(n,e,t=(i,r)=>i===r){if(n===e)return!0;if(!n||!e)return!1;const i=n.length;if(e.length!==i)return!1;for(let r=0;r<i;r++)if(!t(n[r],e[r]))return!1;return!0}const Aa=[];function xF(n,e,t=!1,i={}){for(const s of Aa)if(_F(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return s.response;if(!t)throw s.promise}const r={keys:e,equal:i.equal,promise:n(...e).then(s=>r.response=s).then(()=>{i.lifespan&&i.lifespan>0&&setTimeout(()=>{const s=Aa.indexOf(r);s!==-1&&Aa.splice(s,1)},i.lifespan)}).catch(s=>r.error=s)};if(Aa.push(r),!t)throw r.promise}const Uq=(n,e,t)=>xF(n,e,!1,t),Fq=(n,e,t)=>void xF(n,e,!0,t),zq=n=>{if(n===void 0||n.length===0)Aa.splice(0,Aa.length);else{const e=Aa.find(t=>_F(n,t.keys,t.equal));if(e){const t=Aa.indexOf(e);t!==-1&&Aa.splice(t,1)}}},AC={},SF=n=>void Object.assign(AC,n);function Bq(n,e){function t(f,{args:d=[],attach:p,...m},g){let y=`${f[0].toUpperCase()}${f.slice(1)}`,x;if(f==="primitive"){if(m.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const v=m.object;x=Wf(v,{type:f,root:g,attach:p,primitive:!0})}else{const v=AC[y];if(!v)throw new Error(`R3F: ${y} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(d))throw new Error("R3F: The args prop must be an array!");x=Wf(new v(...d),{type:f,root:g,attach:p,memoizedProps:{args:d}})}return x.__r3f.attach===void 0&&(x instanceof Lt?x.__r3f.attach="geometry":x instanceof Ti&&(x.__r3f.attach="material")),y!=="inject"&&pw(x,m),x}function i(f,d){let p=!1;if(d){var m,g;(m=d.__r3f)!=null&&m.attach?dw(f,d,d.__r3f.attach):d.isObject3D&&f.isObject3D&&(f.add(d),p=!0),p||(g=f.__r3f)==null||g.objects.push(d),d.__r3f||Wf(d,{}),d.__r3f.parent=f,zT(d),jf(d)}}function r(f,d,p){let m=!1;if(d){var g,y;if((g=d.__r3f)!=null&&g.attach)dw(f,d,d.__r3f.attach);else if(d.isObject3D&&f.isObject3D){d.parent=f,d.dispatchEvent({type:"added"});const x=f.children.filter(w=>w!==d),v=x.indexOf(p);f.children=[...x.slice(0,v),d,...x.slice(v)],m=!0}m||(y=f.__r3f)==null||y.objects.push(d),d.__r3f||Wf(d,{}),d.__r3f.parent=f,zT(d),jf(d)}}function s(f,d,p=!1){f&&[...f].forEach(m=>o(d,m,p))}function o(f,d,p){if(d){var m,g,y;if(d.__r3f&&(d.__r3f.parent=null),(m=f.__r3f)!=null&&m.objects&&(f.__r3f.objects=f.__r3f.objects.filter(T=>T!==d)),(g=d.__r3f)!=null&&g.attach)rD(f,d,d.__r3f.attach);else if(d.isObject3D&&f.isObject3D){var x;f.remove(d),(x=d.__r3f)!=null&&x.root&&Yq(d.__r3f.root,d)}const w=(y=d.__r3f)==null?void 0:y.primitive,S=p===void 0?d.dispose!==null&&!w:p;if(!w){var v;s((v=d.__r3f)==null?void 0:v.objects,d,S),s(d.children,d,S)}d.__r3f&&(delete d.__r3f.root,delete d.__r3f.objects,delete d.__r3f.handlers,delete d.__r3f.memoizedProps,w||delete d.__r3f),S&&d.dispose&&d.type!=="Scene"&&UT.unstable_scheduleCallback(UT.unstable_IdlePriority,()=>{try{d.dispose()}catch{}}),jf(f)}}function a(f,d,p,m){var g;const y=(g=f.__r3f)==null?void 0:g.parent;if(!y)return;const x=t(d,p,f.__r3f.root);if(f.children){for(const v of f.children)v.__r3f&&i(x,v);f.children=f.children.filter(v=>!v.__r3f)}f.__r3f.objects.forEach(v=>i(x,v)),f.__r3f.objects=[],f.__r3f.autoRemovedBeforeAppend||o(y,f),x.parent&&(x.__r3f.autoRemovedBeforeAppend=!0),i(y,x),x.raycast&&x.__r3f.eventCount&&x.__r3f.root.getState().internal.interaction.push(x),[m,m.alternate].forEach(v=>{v!==null&&(v.stateNode=x,v.ref&&(typeof v.ref=="function"?v.ref(x):v.ref.current=x))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:Nq({createInstance:t,removeChild:o,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(f,d)=>{if(!d)return;const p=f.getState().scene;p.__r3f&&(p.__r3f.root=f,i(p,d))},removeChildFromContainer:(f,d)=>{d&&o(f.getState().scene,d)},insertInContainerBefore:(f,d,p)=>{if(!d||!p)return;const m=f.getState().scene;m.__r3f&&r(m,d,p)},getRootHostContext:()=>null,getChildHostContext:f=>f,finalizeInitialChildren(f){var d;return!!((d=f==null?void 0:f.__r3f)!=null?d:{}).handlers},prepareUpdate(f,d,p,m){if(f.__r3f.primitive&&m.object&&m.object!==f)return[!0];{const{args:g=[],children:y,...x}=m,{args:v=[],children:w,...S}=p;if(!Array.isArray(g))throw new Error("R3F: the args prop must be an array!");if(g.some((b,P)=>b!==v[P]))return[!0];const T=PF(f,x,S,!0);return T.changes.length?[!1,T]:null}},commitUpdate(f,[d,p],m,g,y,x){d?a(f,m,y,x):pw(f,p)},commitMount(f,d,p,m){var g;const y=(g=f.__r3f)!=null?g:{};f.raycast&&y.handlers&&y.eventCount&&f.__r3f.root.getState().internal.interaction.push(f)},getPublicInstance:f=>f,prepareForCommit:()=>null,preparePortalMount:f=>Wf(f.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(f){var d;const{attach:p,parent:m}=(d=f.__r3f)!=null?d:{};p&&m&&rD(m,f,p),f.isObject3D&&(f.visible=!1),jf(f)},unhideInstance(f,d){var p;const{attach:m,parent:g}=(p=f.__r3f)!=null?p:{};m&&g&&dw(g,f,m),(f.isObject3D&&d.visible==null||d.visible)&&(f.visible=!0),jf(f)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():fh.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Mn.fun(performance.now)?performance.now:Mn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Mn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Mn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:pw}}var eD,tD;const hw=n=>"colorSpace"in n||"outputColorSpace"in n,wF=()=>{var n;return(n=AC.ColorManagement)!=null?n:null},MF=n=>n&&n.isOrthographicCamera,Vq=n=>n&&n.hasOwnProperty("current"),gd=typeof window<"u"&&((eD=window.document)!=null&&eD.createElement||((tD=window.navigator)==null?void 0:tD.product)==="ReactNative")?O.useLayoutEffect:O.useEffect;function TF(n){const e=O.useRef(n);return gd(()=>void(e.current=n),[n]),e}function Hq({set:n}){return gd(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class EF extends O.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}EF.getDerivedStateFromError=()=>({error:!0});const bF="__default",nD=new Map,Gq=n=>n&&!!n.memoized&&!!n.changes;function CF(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const op=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()},Mn={obj:n=>n===Object(n)&&!Mn.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:r=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(Mn.str(n)||Mn.num(n))return n===e;const s=Mn.obj(n);if(s&&i==="reference")return n===e;const o=Mn.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(s&&t==="shallow"&&i==="shallow"){for(a in r?e:n)if(!Mn.equ(n[a],e[a],{strict:r,objects:"reference"}))return!1}else for(a in r?e:n)if(n[a]!==e[a])return!1;if(Mn.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function Wq(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function jq(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function Wf(n,e){const t=n;return(e!=null&&e.primitive||!t.__r3f)&&(t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e}),n}function FT(n,e){let t=n;if(e.includes("-")){const i=e.split("-"),r=i.pop();return t=i.reduce((s,o)=>s[o],n),{target:t,key:r}}else return{target:t,key:e}}const iD=/-\d+$/;function dw(n,e,t){if(Mn.str(t)){if(iD.test(t)){const s=t.replace(iD,""),{target:o,key:a}=FT(n,s);Array.isArray(o[a])||(o[a]=[])}const{target:i,key:r}=FT(n,t);e.__r3f.previousAttach=i[r],i[r]=e}else e.__r3f.previousAttach=t(n,e)}function rD(n,e,t){var i,r;if(Mn.str(t)){const{target:s,key:o}=FT(n,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(n,e);(r=e.__r3f)==null||delete r.previousAttach}function PF(n,{children:e,key:t,ref:i,...r},{children:s,key:o,ref:a,...l}={},u=!1){var f;const d=(f=n==null?void 0:n.__r3f)!=null?f:{},p=Object.entries(r),m=[];if(u){const y=Object.keys(l);for(let x=0;x<y.length;x++)r.hasOwnProperty(y[x])||p.unshift([y[x],bF+"remove"])}p.forEach(([y,x])=>{var v;if((v=n.__r3f)!=null&&v.primitive&&y==="object"||Mn.equ(x,l[y]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(y))return m.push([y,x,!0,[]]);let w=[];y.includes("-")&&(w=y.split("-")),m.push([y,x,!1,w]);for(const S in r){const T=r[S];S.startsWith(`${y}-`)&&m.push([S,T,!1,S.split("-")])}});const g={...r};return d.memoizedProps&&d.memoizedProps.args&&(g.args=d.memoizedProps.args),d.memoizedProps&&d.memoizedProps.attach&&(g.attach=d.memoizedProps.attach),{memoized:g,changes:m}}function pw(n,e){var t,i,r;const s=(t=n.__r3f)!=null?t:{},o=s.root,a=(i=o==null||o.getState==null?void 0:o.getState())!=null?i:{},{memoized:l,changes:u}=Gq(e)?e:PF(n,e),f=s.eventCount;n.__r3f&&(n.__r3f.memoizedProps=l);for(let p=0;p<u.length;p++){let[m,g,y,x]=u[p];if(hw(n)){const T="srgb",b="srgb-linear";m==="encoding"?(m="colorSpace",g=g===3001?T:b):m==="outputEncoding"&&(m="outputColorSpace",g=g===3001?T:b)}let v=n,w=v[m];if(x.length&&(w=x.reduce((S,T)=>S[T],n),!(w&&w.set))){const[S,...T]=x.reverse();v=T.reverse().reduce((b,P)=>b[P],n),m=S}if(g===bF+"remove")if(v.constructor){let S=nD.get(v.constructor);S||(S=new v.constructor,nD.set(v.constructor,S)),g=S[m]}else g=0;if(y)g?s.handlers[m]=g:delete s.handlers[m],s.eventCount=Object.keys(s.handlers).length;else if(w&&w.set&&(w.copy||w instanceof _c)){if(Array.isArray(g))w.fromArray?w.fromArray(g):w.set(...g);else if(w.copy&&g&&g.constructor&&w.constructor===g.constructor)w.copy(g);else if(g!==void 0){const S=w instanceof Oe;!S&&w.setScalar?w.setScalar(g):w instanceof _c&&g instanceof _c?w.mask=g.mask:w.set(g),!wF()&&!a.linear&&S&&w.convertSRGBToLinear()}}else if(v[m]=g,v[m]instanceof bn&&v[m].format===Dn&&v[m].type===xn){const S=v[m];hw(S)&&hw(a.gl)?S.colorSpace=a.gl.outputColorSpace:S.encoding=a.gl.outputEncoding}jf(n)}if(s.parent&&a.internal&&n.raycast&&f!==s.eventCount){const p=a.internal.interaction.indexOf(n);p>-1&&a.internal.interaction.splice(p,1),s.eventCount&&a.internal.interaction.push(n)}return!(u.length===1&&u[0][0]==="onUpdate")&&u.length&&(r=n.__r3f)!=null&&r.parent&&zT(n),n}function jf(n){var e,t;const i=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();i&&i.internal.frames===0&&i.invalidate()}function zT(n){n.onUpdate==null||n.onUpdate(n)}function AF(n,e){n.manual||(MF(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function W0(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function Xq(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return fh.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return fh.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return fh.ContinuousEventPriority;default:return fh.DefaultEventPriority}}function RF(n,e,t,i){const r=t.get(e);r&&(t.delete(e),t.size===0&&(n.delete(i),r.target.releasePointerCapture(i)))}function Yq(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((i,r)=>{RF(t.capturedMap,e,i,r)})}function qq(n){function e(l){const{internal:u}=n.getState(),f=l.offsetX-u.initialClick[0],d=l.offsetY-u.initialClick[1];return Math.round(Math.sqrt(f*f+d*d))}function t(l){return l.filter(u=>["Move","Over","Enter","Out","Leave"].some(f=>{var d;return(d=u.__r3f)==null?void 0:d.handlers["onPointer"+f]}))}function i(l,u){const f=n.getState(),d=new Set,p=[],m=u?u(f.internal.interaction):f.internal.interaction;for(let v=0;v<m.length;v++){const w=op(m[v]);w&&(w.raycaster.camera=void 0)}f.previousRoot||f.events.compute==null||f.events.compute(l,f);function g(v){const w=op(v);if(!w||!w.events.enabled||w.raycaster.camera===null)return[];if(w.raycaster.camera===void 0){var S;w.events.compute==null||w.events.compute(l,w,(S=w.previousRoot)==null?void 0:S.getState()),w.raycaster.camera===void 0&&(w.raycaster.camera=null)}return w.raycaster.camera?w.raycaster.intersectObject(v,!0):[]}let y=m.flatMap(g).sort((v,w)=>{const S=op(v.object),T=op(w.object);return!S||!T?v.distance-w.distance:T.events.priority-S.events.priority||v.distance-w.distance}).filter(v=>{const w=W0(v);return d.has(w)?!1:(d.add(w),!0)});f.events.filter&&(y=f.events.filter(y,f));for(const v of y){let w=v.object;for(;w;){var x;(x=w.__r3f)!=null&&x.eventCount&&p.push({...v,eventObject:w}),w=w.parent}}if("pointerId"in l&&f.internal.capturedMap.has(l.pointerId))for(let v of f.internal.capturedMap.get(l.pointerId).values())d.has(W0(v.intersection))||p.push(v.intersection);return p}function r(l,u,f,d){const p=n.getState();if(l.length){const m={stopped:!1};for(const g of l){const y=op(g.object)||p,{raycaster:x,pointer:v,camera:w,internal:S}=y,T=new N(v.x,v.y,0).unproject(w),b=L=>{var F,H;return(F=(H=S.capturedMap.get(L))==null?void 0:H.has(g.eventObject))!=null?F:!1},P=L=>{const F={intersection:g,target:u.target};S.capturedMap.has(L)?S.capturedMap.get(L).set(g.eventObject,F):S.capturedMap.set(L,new Map([[g.eventObject,F]])),u.target.setPointerCapture(L)},R=L=>{const F=S.capturedMap.get(L);F&&RF(S.capturedMap,g.eventObject,F,L)};let D={};for(let L in u){let F=u[L];typeof F!="function"&&(D[L]=F)}let C={...g,...D,pointer:v,intersections:l,stopped:m.stopped,delta:f,unprojectedPoint:T,ray:x.ray,camera:w,stopPropagation(){const L="pointerId"in u&&S.capturedMap.get(u.pointerId);if((!L||L.has(g.eventObject))&&(C.stopped=m.stopped=!0,S.hovered.size&&Array.from(S.hovered.values()).find(F=>F.eventObject===g.eventObject))){const F=l.slice(0,l.indexOf(g));s([...F,g])}},target:{hasPointerCapture:b,setPointerCapture:P,releasePointerCapture:R},currentTarget:{hasPointerCapture:b,setPointerCapture:P,releasePointerCapture:R},nativeEvent:u};if(d(C),m.stopped===!0)break}}return l}function s(l){const{internal:u}=n.getState();for(const f of u.hovered.values())if(!l.length||!l.find(d=>d.object===f.object&&d.index===f.index&&d.instanceId===f.instanceId)){const p=f.eventObject.__r3f,m=p==null?void 0:p.handlers;if(u.hovered.delete(W0(f)),p!=null&&p.eventCount){const g={...f,intersections:l};m.onPointerOut==null||m.onPointerOut(g),m.onPointerLeave==null||m.onPointerLeave(g)}}}function o(l,u){for(let f=0;f<u.length;f++){const d=u[f].__r3f;d==null||d.handlers.onPointerMissed==null||d.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return u=>{const{internal:f}=n.getState();"pointerId"in u&&f.capturedMap.has(u.pointerId)&&requestAnimationFrame(()=>{f.capturedMap.has(u.pointerId)&&(f.capturedMap.delete(u.pointerId),s([]))})}}return function(f){const{onPointerMissed:d,internal:p}=n.getState();p.lastEvent.current=f;const m=l==="onPointerMove",g=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",x=i(f,m?t:void 0),v=g?e(f):0;l==="onPointerDown"&&(p.initialClick=[f.offsetX,f.offsetY],p.initialHits=x.map(S=>S.eventObject)),g&&!x.length&&v<=2&&(o(f,p.interaction),d&&d(f)),m&&s(x);function w(S){const T=S.eventObject,b=T.__r3f,P=b==null?void 0:b.handlers;if(b!=null&&b.eventCount)if(m){if(P.onPointerOver||P.onPointerEnter||P.onPointerOut||P.onPointerLeave){const R=W0(S),D=p.hovered.get(R);D?D.stopped&&S.stopPropagation():(p.hovered.set(R,S),P.onPointerOver==null||P.onPointerOver(S),P.onPointerEnter==null||P.onPointerEnter(S))}P.onPointerMove==null||P.onPointerMove(S)}else{const R=P[l];R?(!g||p.initialHits.includes(T))&&(o(f,p.interaction.filter(D=>!p.initialHits.includes(D))),R(S)):g&&p.initialHits.includes(T)&&o(f,p.interaction.filter(D=>!p.initialHits.includes(D)))}}r(x,f,v,w)}}return{handlePointer:a}}const Zq=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],DF=n=>!!(n!=null&&n.render),RC=O.createContext(null),$q=(n,e)=>{const t=mF((a,l)=>{const u=new N,f=new N,d=new N;function p(v=l().camera,w=f,S=l().size){const{width:T,height:b,top:P,left:R}=S,D=T/b;w instanceof N?d.copy(w):d.set(...w);const C=v.getWorldPosition(u).distanceTo(d);if(MF(v))return{width:T/v.zoom,height:b/v.zoom,top:P,left:R,factor:1,distance:C,aspect:D};{const L=v.fov*Math.PI/180,F=2*Math.tan(L/2)*C,H=F*(T/b);return{width:H,height:F,top:P,left:R,factor:T/H,distance:C,aspect:D}}}let m;const g=v=>a(w=>({performance:{...w.performance,current:v}})),y=new le;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(v=1)=>n(l(),v),advance:(v,w)=>e(v,w,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new EC,pointer:y,mouse:y,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const v=l();m&&clearTimeout(m),v.performance.current!==v.performance.min&&g(v.performance.min),m=setTimeout(()=>g(l().performance.max),v.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:p},setEvents:v=>a(w=>({...w,events:{...w.events,...v}})),setSize:(v,w,S,T,b)=>{const P=l().camera,R={width:v,height:w,top:T||0,left:b||0,updateStyle:S};a(D=>({size:R,viewport:{...D.viewport,...p(P,f,R)}}))},setDpr:v=>a(w=>{const S=CF(v);return{viewport:{...w.viewport,dpr:S,initialDpr:w.viewport.initialDpr||S}}}),setFrameloop:(v="always")=>{const w=l().clock;w.stop(),w.elapsedTime=0,v!=="never"&&(w.start(),w.elapsedTime=0),a(()=>({frameloop:v}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:O.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(v,w,S)=>{const T=l().internal;return T.priority=T.priority+(w>0?1:0),T.subscribers.push({ref:v,priority:w,store:S}),T.subscribers=T.subscribers.sort((b,P)=>b.priority-P.priority),()=>{const b=l().internal;b!=null&&b.subscribers&&(b.priority=b.priority-(w>0?1:0),b.subscribers=b.subscribers.filter(P=>P.ref!==v))}}}}}),i=t.getState();let r=i.size,s=i.viewport.dpr,o=i.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:u,gl:f,set:d}=t.getState();if(l!==r||u.dpr!==s){var p;r=l,s=u.dpr,AF(a,l),f.setPixelRatio(u.dpr);const m=(p=l.updateStyle)!=null?p:typeof HTMLCanvasElement<"u"&&f.domElement instanceof HTMLCanvasElement;f.setSize(l.width,l.height,m)}a!==o&&(o=a,d(m=>({viewport:{...m.viewport,...m.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};let j0,Kq=new Set,Jq=new Set,Qq=new Set;function mw(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function ap(n,e){switch(n){case"before":return mw(Kq,e);case"after":return mw(Jq,e);case"tail":return mw(Qq,e)}}let gw,vw;function yw(n,e,t){let i=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),gw=e.internal.subscribers,j0=0;j0<gw.length;j0++)vw=gw[j0],vw.ref.current(vw.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function eZ(n){let e=!1,t,i,r;function s(l){i=requestAnimationFrame(s),e=!0,t=0,ap("before",l);for(const f of n.values()){var u;r=f.store.getState(),r.internal.active&&(r.frameloop==="always"||r.internal.frames>0)&&!((u=r.gl.xr)!=null&&u.isPresenting)&&(t+=yw(l,r))}if(ap("after",l),t===0)return ap("tail",l),e=!1,cancelAnimationFrame(i)}function o(l,u=1){var f;if(!l)return n.forEach(d=>o(d.store.getState()),u);(f=l.gl.xr)!=null&&f.isPresenting||!l.internal.active||l.frameloop==="never"||(l.internal.frames=Math.min(60,l.internal.frames+u),e||(e=!0,requestAnimationFrame(s)))}function a(l,u=!0,f,d){if(u&&ap("before",l),f)yw(l,f,d);else for(const p of n.values())yw(l,p.store.getState());u&&ap("after",l)}return{loop:s,invalidate:o,advance:a}}function tZ(n){const e=O.useRef(null);return gd(()=>void(e.current=n.current.__r3f),[n]),e}function DC(){const n=O.useContext(RC);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function sr(n=t=>t,e){return DC()(n,e)}function LC(n,e=0){const t=DC(),i=t.getState().internal.subscribe,r=TF(n);return gd(()=>i(r,e,t),[e,i,t]),null}function LF(n,e){return function(t,...i){const r=new t;return n&&n(r),Promise.all(i.map(s=>new Promise((o,a)=>r.load(s,l=>{l.scene&&Object.assign(l,Wq(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${s}: ${l.message})`))))))}}function vd(n,e,t,i){const r=Array.isArray(e)?e:[e],s=Uq(LF(t,i),[n,...r],{equal:Mn.equ});return Array.isArray(e)?s:s[0]}vd.preload=function(n,e,t){const i=Array.isArray(e)?e:[e];return Fq(LF(t),[n,...i])};vd.clear=function(n,e){const t=Array.isArray(e)?e:[e];return zq([n,...t])};const Yh=new Map,{invalidate:sD,advance:oD}=eZ(Yh),{reconciler:Jm,applyProps:Nf}=Bq(Yh,Xq),Uf={objects:"shallow",strict:!1},nZ=(n,e)=>{const t=typeof n=="function"?n(e):n;return DF(t)?t:new sC({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function iZ(n,e){if(e)return e;if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:t,height:i,top:r,left:s}=n.parentElement.getBoundingClientRect();return{width:t,height:i,top:r,left:s}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0};return{width:0,height:0,top:0,left:0}}function rZ(n){const e=Yh.get(n),t=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=i||$q(sD,oD),o=t||Jm.createContainer(s,fh.ConcurrentRoot,null,!1,null,"",r,null);e||Yh.set(n,{fiber:o,store:s});let a,l=!1,u;return{configure(f={}){let{gl:d,size:p,scene:m,events:g,onCreated:y,shadows:x=!1,linear:v=!1,flat:w=!1,legacy:S=!1,orthographic:T=!1,frameloop:b="always",dpr:P=[1,2],performance:R,raycaster:D,camera:C,onPointerMissed:L}=f,F=s.getState(),H=F.gl;F.gl||F.set({gl:H=nZ(d,n)});let G=F.raycaster;G||F.set({raycaster:G=new PC});const{params:W,...X}=D||{};if(Mn.equ(X,G,Uf)||Nf(G,{...X}),Mn.equ(W,G.params,Uf)||Nf(G,{params:{...G.params,...W}}),!F.camera||F.camera===u&&!Mn.equ(u,C,Uf)){u=C;const ee=C instanceof ud,oe=ee?C:T?new xg(0,0,0,0,.1,1e3):new Nn(75,0,.1,1e3);ee||(oe.position.z=5,C&&Nf(oe,C),!F.camera&&!(C!=null&&C.rotation)&&oe.lookAt(0,0,0)),F.set({camera:oe})}if(!F.scene){let ee;m instanceof Lc?ee=m:(ee=new Lc,m&&Nf(ee,m)),F.set({scene:Wf(ee)})}if(!F.xr){const ee=(te,Te)=>{const we=s.getState();we.frameloop!=="never"&&oD(te,!0,we,Te)},oe=()=>{const te=s.getState();te.gl.xr.enabled=te.gl.xr.isPresenting,te.gl.xr.setAnimationLoop(te.gl.xr.isPresenting?ee:null),te.gl.xr.isPresenting||sD(te)},se={connect(){const te=s.getState().gl;te.xr.addEventListener("sessionstart",oe),te.xr.addEventListener("sessionend",oe)},disconnect(){const te=s.getState().gl;te.xr.removeEventListener("sessionstart",oe),te.xr.removeEventListener("sessionend",oe)}};H.xr&&se.connect(),F.set({xr:se})}if(H.shadowMap){const ee=H.shadowMap.enabled,oe=H.shadowMap.type;if(H.shadowMap.enabled=!!x,Mn.boo(x))H.shadowMap.type=Wp;else if(Mn.str(x)){var re;const se={basic:bN,percentage:xx,soft:Wp,variance:ic};H.shadowMap.type=(re=se[x])!=null?re:Wp}else Mn.obj(x)&&Object.assign(H.shadowMap,x);(ee!==H.shadowMap.enabled||oe!==H.shadowMap.type)&&(H.shadowMap.needsUpdate=!0)}const Q=wF();Q&&("enabled"in Q?Q.enabled=!S:"legacyMode"in Q&&(Q.legacyMode=S)),Nf(H,{outputEncoding:v?3e3:3001,toneMapping:w?Eo:Xb}),F.legacy!==S&&F.set(()=>({legacy:S})),F.linear!==v&&F.set(()=>({linear:v})),F.flat!==w&&F.set(()=>({flat:w})),d&&!Mn.fun(d)&&!DF(d)&&!Mn.equ(d,H,Uf)&&Nf(H,d),g&&!F.events.handlers&&F.set({events:g(s)});const I=iZ(n,p);return Mn.equ(I,F.size,Uf)||F.setSize(I.width,I.height,I.updateStyle,I.top,I.left),P&&F.viewport.dpr!==CF(P)&&F.setDpr(P),F.frameloop!==b&&F.setFrameloop(b),F.onPointerMissed||F.set({onPointerMissed:L}),R&&!Mn.equ(R,F.performance,Uf)&&F.set(ee=>({performance:{...ee.performance,...R}})),a=y,l=!0,this},render(f){return l||this.configure(),Jm.updateContainer(O.createElement(sZ,{store:s,children:f,onCreated:a,rootElement:n}),o,null,()=>{}),s},unmount(){IF(n)}}}function sZ({store:n,children:e,onCreated:t,rootElement:i}){return gd(()=>{const r=n.getState();r.set(s=>({internal:{...s.internal,active:!0}})),t&&t(r),n.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),O.createElement(RC.Provider,{value:n},e)}function IF(n,e){const t=Yh.get(n),i=t==null?void 0:t.fiber;if(i){const r=t==null?void 0:t.store.getState();r&&(r.internal.active=!1),Jm.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var s,o,a,l;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=r.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=r.gl)!=null&&l.xr&&r.xr.disconnect(),jq(r),Yh.delete(n),e&&e(n)}catch{}},500)})}}function oZ(n,e,t){return O.createElement(aZ,{key:e.uuid,children:n,container:e,state:t})}function aZ({state:n={},children:e,container:t}){const{events:i,size:r,...s}=n,o=DC(),[a]=O.useState(()=>new PC),[l]=O.useState(()=>new le),u=O.useCallback((d,p)=>{const m={...d};Object.keys(d).forEach(y=>{(Zq.includes(y)||d[y]!==p[y]&&p[y])&&delete m[y]});let g;if(p&&r){const y=p.camera;g=d.viewport.getCurrentViewport(y,new N,r),y!==d.camera&&AF(y,r)}return{...m,scene:t,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...d.events,...p==null?void 0:p.events,...i},size:{...d.size,...r},viewport:{...d.viewport,...g},...s}},[n]),[f]=O.useState(()=>{const d=o.getState();return mF((m,g)=>({...d,scene:t,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...d.events,...i},size:{...d.size,...r},...s,set:m,get:g,setEvents:y=>m(x=>({...x,events:{...x.events,...y}}))}))});return O.useEffect(()=>{const d=o.subscribe(p=>f.setState(m=>u(p,m)));return()=>{d(),f.destroy()}},[]),O.useEffect(()=>{f.setState(d=>u(o.getState(),d))},[u]),O.createElement(O.Fragment,null,Jm.createPortal(O.createElement(RC.Provider,{value:f},e),f,null))}Jm.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:O.version});function BT(n,e,t){var i,r,s,o,a;e==null&&(e=100);function l(){var f=Date.now()-o;f<e&&f>=0?i=setTimeout(l,e-f):(i=null,t||(a=n.apply(s,r),s=r=null))}var u=function(){s=this,r=arguments,o=Date.now();var f=t&&!i;return i||(i=setTimeout(l,e)),f&&(a=n.apply(s,r),s=r=null),a};return u.clear=function(){i&&(clearTimeout(i),i=null)},u.flush=function(){i&&(a=n.apply(s,r),s=r=null,clearTimeout(i),i=null)},u}BT.debounce=BT;var lZ=BT;const aD=WE(lZ);function uZ(n){let{debounce:e,scroll:t,polyfill:i,offsetSize:r}=n===void 0?{debounce:0,scroll:!1,offsetSize:!1}:n;const s=i||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,a]=O.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=O.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),u=e?typeof e=="number"?e:e.scroll:null,f=e?typeof e=="number"?e:e.resize:null,d=O.useRef(!1);O.useEffect(()=>(d.current=!0,()=>void(d.current=!1)));const[p,m,g]=O.useMemo(()=>{const w=()=>{if(!l.current.element)return;const{left:S,top:T,width:b,height:P,bottom:R,right:D,x:C,y:L}=l.current.element.getBoundingClientRect(),F={left:S,top:T,width:b,height:P,bottom:R,right:D,x:C,y:L};l.current.element instanceof HTMLElement&&r&&(F.height=l.current.element.offsetHeight,F.width=l.current.element.offsetWidth),Object.freeze(F),d.current&&!dZ(l.current.lastBounds,F)&&a(l.current.lastBounds=F)};return[w,f?aD(w,f):w,u?aD(w,u):w]},[a,r,u,f]);function y(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(w=>w.removeEventListener("scroll",g,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function x(){l.current.element&&(l.current.resizeObserver=new s(g),l.current.resizeObserver.observe(l.current.element),t&&l.current.scrollContainers&&l.current.scrollContainers.forEach(w=>w.addEventListener("scroll",g,{capture:!0,passive:!0})))}const v=w=>{!w||w===l.current.element||(y(),l.current.element=w,l.current.scrollContainers=kF(w),x())};return fZ(g,!!t),cZ(m),O.useEffect(()=>{y(),x()},[t,g,m]),O.useEffect(()=>y,[]),[v,o,p]}function cZ(n){O.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function fZ(n,e){O.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function kF(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:r}=window.getComputedStyle(n);return[t,i,r].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...kF(n.parentElement)]}const hZ=["x","y","top","bottom","left","right","width","height"],dZ=(n,e)=>hZ.every(t=>n[t]===e[t]);var pZ=Object.defineProperty,mZ=Object.defineProperties,gZ=Object.getOwnPropertyDescriptors,lD=Object.getOwnPropertySymbols,vZ=Object.prototype.hasOwnProperty,yZ=Object.prototype.propertyIsEnumerable,uD=(n,e,t)=>e in n?pZ(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,cD=(n,e)=>{for(var t in e||(e={}))vZ.call(e,t)&&uD(n,t,e[t]);if(lD)for(var t of lD(e))yZ.call(e,t)&&uD(n,t,e[t]);return n},_Z=(n,e)=>mZ(n,gZ(e));function OF(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=e?n.return:n.child;for(;i;){const r=OF(i,e,t);if(r)return r;i=e?null:i.sibling}}function NF(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const IC=NF(O.createContext(null));class UF extends O.Component{render(){return O.createElement(IC.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:fD,ReactCurrentDispatcher:hD}=O.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function xZ(){const n=O.useContext(IC);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=O.useId();return O.useMemo(()=>{for(const i of[fD==null?void 0:fD.current,n,n==null?void 0:n.alternate]){if(!i)continue;const r=OF(i,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(r)return r}},[n,e])}function SZ(){var n,e;const t=xZ(),[i]=O.useState(()=>new Map);i.clear();let r=t;for(;r;){const s=(n=r.type)==null?void 0:n._context;s&&s!==IC&&!i.has(s)&&i.set(s,(e=hD==null?void 0:hD.current)==null?void 0:e.readContext(NF(s))),r=r.return}return i}function wZ(){const n=SZ();return O.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>O.createElement(e,null,O.createElement(t.Provider,_Z(cD({},i),{value:n.get(t)}))),e=>O.createElement(UF,cD({},e))),[n])}const _w={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function MZ(n){const{handlePointer:e}=qq(n);return{priority:1,enabled:!0,compute(t,i,r){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(_w).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:r}=n.getState();(t=r.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{var i;const{set:r,events:s}=n.getState();s.disconnect==null||s.disconnect(),r(o=>({events:{...o.events,connected:t}})),Object.entries((i=s.handlers)!=null?i:[]).forEach(([o,a])=>{const[l,u]=_w[o];t.addEventListener(l,a,{passive:u})})},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){var r;Object.entries((r=i.handlers)!=null?r:[]).forEach(([s,o])=>{if(i&&i.connected instanceof HTMLElement){const[a]=_w[s];i.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}const TZ=O.forwardRef(function({children:e,fallback:t,resize:i,style:r,gl:s,events:o=MZ,eventSource:a,eventPrefix:l,shadows:u,linear:f,flat:d,legacy:p,orthographic:m,frameloop:g,dpr:y,performance:x,raycaster:v,camera:w,onPointerMissed:S,onCreated:T,...b},P){O.useMemo(()=>SF(Dq),[]);const R=wZ(),[D,C]=uZ({scroll:!0,debounce:{scroll:50,resize:0},...i}),L=O.useRef(null),F=O.useRef(null);O.useImperativeHandle(P,()=>L.current);const H=TF(S),[G,W]=O.useState(!1),[X,re]=O.useState(!1);if(G)throw G;if(X)throw X;const Q=O.useRef(null);gd(()=>{const j=L.current;C.width>0&&C.height>0&&j&&(Q.current||(Q.current=rZ(j)),Q.current.configure({gl:s,events:o,shadows:u,linear:f,flat:d,legacy:p,orthographic:m,frameloop:g,dpr:y,performance:x,raycaster:v,camera:w,size:C,onPointerMissed:(...I)=>H.current==null?void 0:H.current(...I),onCreated:I=>{I.events.connect==null||I.events.connect(a?Vq(a)?a.current:a:F.current),l&&I.setEvents({compute:(ee,oe)=>{const se=ee[l+"X"],te=ee[l+"Y"];oe.pointer.set(se/oe.size.width*2-1,-(te/oe.size.height)*2+1),oe.raycaster.setFromCamera(oe.pointer,oe.camera)}}),T==null||T(I)}}),Q.current.render(O.createElement(R,null,O.createElement(EF,{set:re},O.createElement(O.Suspense,{fallback:O.createElement(Hq,{set:W})},e)))))}),O.useEffect(()=>{const j=L.current;if(j)return()=>IF(j)},[]);const z=a?"none":"auto";return O.createElement("div",Im({ref:F,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:z,...r}},b),O.createElement("div",{ref:D,style:{width:"100%",height:"100%"}},O.createElement("canvas",{ref:L,style:{display:"block"}},t)))}),EZ=O.forwardRef(function(e,t){return O.createElement(UF,null,O.createElement(TZ,Im({},e,{ref:t})))});function Zp(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function VT(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function bZ(n,e){if(n){if(typeof n=="string")return VT(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return VT(n,e)}}function CZ(n){if(Array.isArray(n))return VT(n)}function PZ(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function AZ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RZ(n){return CZ(n)||PZ(n)||bZ(n)||AZ()}new le;new le;function DZ(n,e,t){return Math.max(e,Math.min(t,n))}function LZ(n,e){return DZ(n-Math.floor(n/e)*e,0,e)}function IZ(n,e){var t=LZ(e-n,Math.PI*2);return t>Math.PI&&(t-=Math.PI*2),t}function FF(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var Is=function n(e,t,i){var r=this;FF(this,n),Zp(this,"dot2",function(s,o){return r.x*s+r.y*o}),Zp(this,"dot3",function(s,o,a){return r.x*s+r.y*o+r.z*a}),this.x=e,this.y=t,this.z=i},kZ=[new Is(1,1,0),new Is(-1,1,0),new Is(1,-1,0),new Is(-1,-1,0),new Is(1,0,1),new Is(-1,0,1),new Is(1,0,-1),new Is(-1,0,-1),new Is(0,1,1),new Is(0,-1,1),new Is(0,1,-1),new Is(0,-1,-1)],dD=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],pD=new Array(512),mD=new Array(512),OZ=function(e){e>0&&e<1&&(e*=65536),e=Math.floor(e),e<256&&(e|=e<<8);for(var t=0;t<256;t++){var i;t&1?i=dD[t]^e&255:i=dD[t]^e>>8&255,pD[t]=pD[t+256]=i,mD[t]=mD[t+256]=kZ[i%12]}};OZ(0);function NZ(n){if(typeof n=="number")n=Math.abs(n);else if(typeof n=="string"){var e=n;n=0;for(var t=0;t<e.length;t++)n=(n+(t+1)*(e.charCodeAt(t)%96))%2147483647}return n===0&&(n=311),n}function gD(n){var e=NZ(n);return function(){var t=e*48271%2147483647;return e=t,t/2147483647}}var UZ=function n(e){var t=this;FF(this,n),Zp(this,"seed",0),Zp(this,"init",function(i){t.seed=i,t.value=gD(i)}),Zp(this,"value",gD(this.seed)),this.init(e)};new UZ(Math.random());var FZ=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.01,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1/(2*Math.PI);return i/Math.atan(1/t)*Math.atan(Math.sin(2*Math.PI*e*r)/t)},zF=function(e){return 1/(1+e+.48*e*e+.235*e*e*e)};function _i(n,e,t){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:.25,r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:.01,s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:1/0,o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:zF,a=arguments.length>7&&arguments[7]!==void 0?arguments[7]:.001,l="velocity_"+e;if(n.__damp===void 0&&(n.__damp={}),n.__damp[l]===void 0&&(n.__damp[l]=0),Math.abs(n[e]-t)<=a)return n[e]=t,!1;i=Math.max(1e-4,i);var u=2/i,f=o(u*r),d=n[e]-t,p=t,m=s*i;d=Math.min(Math.max(d,-m),m),t=n[e]-d;var g=(n.__damp[l]+u*d)*r;n.__damp[l]=(n.__damp[l]-u*g)*f;var y=t+(d+g)*f;return p-n[e]>0==y>p&&(y=p,n.__damp[l]=(y-p)/r),n[e]=y,!0}function Ph(n,e,t,i,r,s,o,a){return _i(n,e,n[e]+IZ(n[e],t),i,r,s,o,a)}var lp=new le,vD,yD;function zZ(n,e,t,i,r,s,o){return typeof e=="number"?lp.setScalar(e):Array.isArray(e)?lp.set(e[0],e[1]):lp.copy(e),vD=_i(n,"x",lp.x,t,i,r,s,o),yD=_i(n,"y",lp.y,t,i,r,s,o),vD||yD}var Ff=new N,_D,xD,SD;function HT(n,e,t,i,r,s,o){return typeof e=="number"?Ff.setScalar(e):Array.isArray(e)?Ff.set(e[0],e[1],e[2]):Ff.copy(e),_D=_i(n,"x",Ff.x,t,i,r,s,o),xD=_i(n,"y",Ff.y,t,i,r,s,o),SD=_i(n,"z",Ff.z,t,i,r,s,o),_D||xD||SD}var Fu=new Gt,wD,MD,TD,ED;function BZ(n,e,t,i,r,s,o){return typeof e=="number"?Fu.setScalar(e):Array.isArray(e)?Fu.set(e[0],e[1],e[2],e[3]):Fu.copy(e),wD=_i(n,"x",Fu.x,t,i,r,s,o),MD=_i(n,"y",Fu.y,t,i,r,s,o),TD=_i(n,"z",Fu.z,t,i,r,s,o),ED=_i(n,"w",Fu.w,t,i,r,s,o),wD||MD||TD||ED}var up=new ld,bD,CD,PD;function VZ(n,e,t,i,r,s,o){return Array.isArray(e)?up.set(e[0],e[1],e[2],e[3]):up.copy(e),bD=Ph(n,"x",up.x,t,i,r,s,o),CD=Ph(n,"y",up.y,t,i,r,s,o),PD=Ph(n,"z",up.z,t,i,r,s,o),bD||CD||PD}var zf=new Oe,AD,RD,DD;function HZ(n,e,t,i,r,s,o){return e instanceof Oe?zf.copy(e):Array.isArray(e)?zf.setRGB(e[0],e[1],e[2]):zf.set(e),AD=_i(n,"r",zf.r,t,i,r,s,o),RD=_i(n,"g",zf.g,t,i,r,s,o),DD=_i(n,"b",zf.b,t,i,r,s,o),AD||RD||DD}var fo=new Si,Ma=new Gt,LD=new Gt,cp=new Gt,ID,kD,OD,ND;function BF(n,e,t,i,r,s,o){var a=n;Array.isArray(e)?fo.set(e[0],e[1],e[2],e[3]):fo.copy(e);var l=n.dot(fo)>0?1:-1;return fo.x*=l,fo.y*=l,fo.z*=l,fo.w*=l,ID=_i(n,"x",fo.x,t,i,r,s,o),kD=_i(n,"y",fo.y,t,i,r,s,o),OD=_i(n,"z",fo.z,t,i,r,s,o),ND=_i(n,"w",fo.w,t,i,r,s,o),Ma.set(n.x,n.y,n.z,n.w).normalize(),LD.set(a.__damp.velocity_x,a.__damp.velocity_y,a.__damp.velocity_z,a.__damp.velocity_w),cp.copy(Ma).multiplyScalar(LD.dot(Ma)/Ma.dot(Ma)),a.__damp.velocity_x-=cp.x,a.__damp.velocity_y-=cp.y,a.__damp.velocity_z-=cp.z,a.__damp.velocity_w-=cp.w,n.set(Ma.x,Ma.y,Ma.z,Ma.w),ID||kD||OD||ND}var fp=new hF,UD,FD,zD;function GZ(n,e,t,i,r,s,o){return Array.isArray(e)?fp.set(e[0],e[1],e[2]):fp.copy(e),UD=_i(n,"radius",fp.radius,t,i,r,s,o),FD=Ph(n,"phi",fp.phi,t,i,r,s,o),zD=Ph(n,"theta",fp.theta,t,i,r,s,o),UD||FD||zD}var X0=new mt,BD=new N,VD=new Si,HD=new N,GD,WD,jD;function WZ(n,e,t,i,r,s,o){var a=n;return a.__damp===void 0&&(a.__damp={position:new N,rotation:new Si,scale:new N},n.decompose(a.__damp.position,a.__damp.rotation,a.__damp.scale)),Array.isArray(e)?X0.set.apply(X0,RZ(e)):X0.copy(e),X0.decompose(BD,VD,HD),GD=HT(a.__damp.position,BD,t,i,r,s,o),WD=BF(a.__damp.rotation,VD,t,i,r,s,o),jD=HT(a.__damp.scale,HD,t,i,r,s,o),n.compose(a.__damp.position,a.__damp.rotation,a.__damp.scale),GD||WD||jD}var Uy=Object.freeze({__proto__:null,rsqw:FZ,exp:zF,damp:_i,dampAngle:Ph,damp2:zZ,damp3:HT,damp4:BZ,dampE:VZ,dampC:HZ,dampQ:BF,dampS:GZ,dampM:WZ});let hp;function jZ(){if(hp!==void 0)return hp;try{var n;let e;const t=document.createElement("canvas");return hp=!!(window.WebGL2RenderingContext&&(e=t.getContext("webgl2"))),e&&((n=e.getExtension("WEBGL_lose_context"))===null||n===void 0||n.loseContext()),hp}catch{return hp=!1}}const XD=n=>n===Object(n)&&!Array.isArray(n)&&typeof n!="function";function R_(n,e){const t=sr(r=>r.gl),i=vd(kg,XD(n)?Object.values(n):n);if(O.useLayoutEffect(()=>{e==null||e(i)},[e]),O.useEffect(()=>{(Array.isArray(i)?i:[i]).forEach(t.initTexture)},[t,i]),XD(n)){const r=Object.keys(n),s={};return r.forEach(o=>Object.assign(s,{[o]:i[r.indexOf(o)]})),s}else return i}R_.preload=n=>vd.preload(kg,n);R_.clear=n=>vd.clear(kg,n);function XZ(n,e){const t=n+"Geometry";return O.forwardRef(({args:i,children:r,...s},o)=>{const a=O.useRef(null);return O.useImperativeHandle(o,()=>a.current),O.useLayoutEffect(()=>void(e==null?void 0:e(a.current))),O.createElement("mesh",Im({ref:a},s),O.createElement(t,{attach:"geometry",args:i}),r)})}const YZ=XZ("plane");function qZ({all:n,scene:e,camera:t}){const i=sr(({gl:o})=>o),r=sr(({camera:o})=>o),s=sr(({scene:o})=>o);return O.useLayoutEffect(()=>{const o=[];n&&(e||s).traverse(u=>{u.visible===!1&&(o.push(u),u.visible=!0)}),i.compile(e||s,t||r);const a=new _g(128);new bx(.01,1e5,a).update(i,e||s),a.dispose(),o.forEach(u=>u.visible=!1)},[]),null}/**
 * postprocessing v6.31.0 build Sun May 07 2023
 * https://github.com/pmndrs/postprocessing
 * Copyright 2015-2023 Raoul van Rschen
 * @license Zlib
 */var Zc="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",ZZ=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if PASS == 1
uniform vec4 kernel64[32];
#else
uniform vec4 kernel16[8];
#endif
uniform lowp sampler2D cocBuffer;uniform vec2 texelSize;uniform float scale;varying vec2 vUv;void main(){
#ifdef FOREGROUND
vec2 CoCNearFar=texture2D(cocBuffer,vUv).rg;float CoC=CoCNearFar.r*scale;
#else
float CoC=texture2D(cocBuffer,vUv).g*scale;
#endif
if(CoC==0.0){gl_FragColor=texture2D(inputBuffer,vUv);}else{
#ifdef FOREGROUND
vec2 step=texelSize*max(CoC,CoCNearFar.g*scale);
#else
vec2 step=texelSize*CoC;
#endif
#if PASS == 1
vec4 acc=vec4(0.0);for(int i=0;i<32;++i){vec4 kernel=kernel64[i];vec2 uv=step*kernel.xy+vUv;acc+=texture2D(inputBuffer,uv);uv=step*kernel.zw+vUv;acc+=texture2D(inputBuffer,uv);}gl_FragColor=acc/64.0;
#else
vec4 maxValue=texture2D(inputBuffer,vUv);for(int i=0;i<8;++i){vec4 kernel=kernel16[i];vec2 uv=step*kernel.xy+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);uv=step*kernel.zw+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);}gl_FragColor=maxValue;
#endif
}}`,Y0=class extends on{constructor(n=!1,e=!1){super({name:"BokehMaterial",defines:{PASS:n?"2":"1"},uniforms:{inputBuffer:new ie(null),cocBuffer:new ie(null),texelSize:new ie(new le),kernel64:new ie(null),kernel16:new ie(null),scale:new ie(1)},blending:En,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:ZZ,vertexShader:Zc}),e&&(this.defines.FOREGROUND="1"),this.generateKernel()}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}set cocBuffer(n){this.uniforms.cocBuffer.value=n}setCoCBuffer(n){this.uniforms.cocBuffer.value=n}get scale(){return this.uniforms.scale.value}set scale(n){this.uniforms.scale.value=n}getScale(n){return this.scale}setScale(n){this.scale=n}generateKernel(){const n=2.39996323,e=new Float64Array(128),t=new Float64Array(32);let i=0,r=0;for(let s=0,o=Math.sqrt(80);s<80;++s){const a=s*n,l=Math.sqrt(s)/o,u=l*Math.cos(a),f=l*Math.sin(a);s%5===0?(t[r++]=u,t[r++]=f):(e[i++]=u,e[i++]=f)}this.uniforms.kernel64.value=e,this.uniforms.kernel16.value=t}setTexelSize(n,e){this.uniforms.texelSize.value.set(n,e)}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},VF="",ln="srgb",qh="srgb-linear",$Z=Number(Wc.replace(/\D+/g,"")),kC=$Z>=152,HF=new Map([[na,qh],[an,ln]]),KZ=new Map([[qh,na],[ln,an]]);function qa(n){return n===null?null:kC?n.outputColorSpace:HF.get(n.outputEncoding)}function xi(n,e){n!==null&&(kC?n.colorSpace=e:n.encoding=KZ.get(e))}function xw(n,e){n===null||e===null||(kC?e.colorSpace=n.colorSpace:e.encoding=n.encoding)}function hh(n,e,t){return n*(e-t)-e}function lc(n,e,t){return Math.min(Math.max((n+e)/(e-t),0),1)}var JZ=`#include <common>
#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform float focusDistance;uniform float focusRange;uniform float cameraNear;uniform float cameraFar;varying vec2 vUv;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}void main(){float depth=readDepth(vUv);
#ifdef PERSPECTIVE_CAMERA
float viewZ=perspectiveDepthToViewZ(depth,cameraNear,cameraFar);float linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);
#else
float linearDepth=depth;
#endif
float signedDistance=linearDepth-focusDistance;float magnitude=smoothstep(0.0,focusRange,abs(signedDistance));gl_FragColor.rg=magnitude*vec2(step(signedDistance,0.0),step(0.0,signedDistance));}`,QZ=class extends on{constructor(n){super({name:"CircleOfConfusionMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new ie(null),focusDistance:new ie(0),focusRange:new ie(0),cameraNear:new ie(.3),cameraFar:new ie(1e3)},blending:En,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:JZ,vertexShader:Zc}),this.uniforms.focalLength=this.uniforms.focusRange,this.copyCameraSettings(n)}get near(){return this.uniforms.cameraNear.value}get far(){return this.uniforms.cameraFar.value}set depthBuffer(n){this.uniforms.depthBuffer.value=n}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=Oi){this.depthBuffer=n,this.depthPacking=e}get focusDistance(){return this.uniforms.focusDistance.value}set focusDistance(n){this.uniforms.focusDistance.value=n}get worldFocusDistance(){return-hh(this.focusDistance,this.near,this.far)}set worldFocusDistance(n){this.focusDistance=lc(-n,this.near,this.far)}getFocusDistance(n){this.uniforms.focusDistance.value=n}setFocusDistance(n){this.uniforms.focusDistance.value=n}get focalLength(){return this.focusRange}set focalLength(n){this.focusRange=n}get focusRange(){return this.uniforms.focusRange.value}set focusRange(n){this.uniforms.focusRange.value=n}get worldFocusRange(){return-hh(this.focusRange,this.near,this.far)}set worldFocusRange(n){this.focusRange=lc(-n,this.near,this.far)}getFocalLength(n){return this.focusRange}setFocalLength(n){this.focusRange=n}adoptCameraSettings(n){this.copyCameraSettings(n)}copyCameraSettings(n){n&&(this.uniforms.cameraNear.value=n.near,this.uniforms.cameraFar.value=n.far,n instanceof Nn?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},wt={SKIP:9,SET:30,ADD:0,ALPHA:1,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32},dh={RED:0,GREEN:1,BLUE:2,ALPHA:3},bp={FULL:0,SINGLE:1},$p={DEFAULT:0,KEEP_MAX_DEPTH:1,DISCARD_MAX_DEPTH:2},qs={NONE:0,DEPTH:1,CONVOLUTION:2},nn={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},Qu={DISABLED:0,SPORADIC:1,CONSTANT_MILD:2,CONSTANT_WILD:3},yd={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},e$={SCALE_UP:"lut.scaleup"},Kp={DISCARD:0,MULTIPLY:1,MULTIPLY_RGB_SET_ALPHA:2},q0={DEFAULT:0,ESKIL:1},t$=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <encodings_fragment>
}`,n$="uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",i$=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],r$=class extends on{constructor(n=new Gt){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new ie(null),texelSize:new ie(new Gt),scale:new ie(1),kernel:new ie(0)},blending:En,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:t$,vertexShader:n$}),this.setTexelSize(n.x,n.y),this.kernelSize=yd.MEDIUM}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.inputBuffer=n}get kernelSequence(){return i$[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(n){this.uniforms.scale.value=n}getScale(){return this.uniforms.scale.value}setScale(n){this.uniforms.scale.value=n}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(n){this.uniforms.kernel.value=n}setKernel(n){this.kernel=n}setTexelSize(n,e){this.uniforms.texelSize.value.set(n,e,n*.5,e*.5)}setSize(n,e){const t=1/n,i=1/e;this.uniforms.texelSize.value.set(t,i,t*.5,i*.5)}},s$=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <encodings_fragment>
#include <dithering_fragment>
}`,GF=class extends on{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new ie(null),opacity:new ie(1)},blending:En,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:s$,vertexShader:Zc})}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}getOpacity(n){return this.uniforms.opacity.value}setOpacity(n){this.uniforms.opacity.value=n}},o$=`#include <packing>
#include <clipping_planes_pars_fragment>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform float cameraNear;uniform float cameraFar;varying float vViewZ;varying vec4 vProjTexCoord;void main(){
#include <clipping_planes_fragment>
vec2 projTexCoord=(vProjTexCoord.xy/vProjTexCoord.w)*0.5+0.5;projTexCoord=clamp(projTexCoord,0.002,0.998);
#if DEPTH_PACKING == 3201
float fragCoordZ=unpackRGBAToDepth(texture2D(depthBuffer,projTexCoord));
#else
float fragCoordZ=texture2D(depthBuffer,projTexCoord).r;
#endif
#ifdef PERSPECTIVE_CAMERA
float viewZ=perspectiveDepthToViewZ(fragCoordZ,cameraNear,cameraFar);
#else
float viewZ=orthographicDepthToViewZ(fragCoordZ,cameraNear,cameraFar);
#endif
float depthTest=(-vViewZ>-viewZ)?1.0:0.0;gl_FragColor.rg=vec2(0.0,depthTest);}`,a$=`#include <common>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
varying float vViewZ;varying vec4 vProjTexCoord;void main(){
#include <skinbase_vertex>
#include <begin_vertex>
#include <morphtarget_vertex>
#include <skinning_vertex>
#include <project_vertex>
vViewZ=mvPosition.z;vProjTexCoord=gl_Position;
#include <clipping_planes_vertex>
}`,l$=class extends on{constructor(n=null,e){super({name:"DepthComparisonMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new ie(null),cameraNear:new ie(.3),cameraFar:new ie(1e3)},blending:En,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:o$,vertexShader:a$}),this.depthBuffer=n,this.depthPacking=ia,this.copyCameraSettings(e)}set depthBuffer(n){this.uniforms.depthBuffer.value=n}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=ia){this.depthBuffer=n,this.depthPacking=e}adoptCameraSettings(n){this.copyCameraSettings(n)}copyCameraSettings(n){n&&(this.uniforms.cameraNear.value=n.near,this.uniforms.cameraFar.value=n.far,n instanceof Nn?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},u$=`#include <packing>
varying vec2 vUv;
#ifdef NORMAL_DEPTH
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D normalDepthBuffer;
#else
uniform mediump sampler2D normalDepthBuffer;
#endif
float readDepth(const in vec2 uv){return texture2D(normalDepthBuffer,uv).a;}
#else
#if INPUT_DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
float readDepth(const in vec2 uv){
#if INPUT_DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}
#endif
void main(){
#if INPUT_DEPTH_PACKING == OUTPUT_DEPTH_PACKING
gl_FragColor=texture2D(depthBuffer,vUv);
#else
float depth=readDepth(vUv);
#if OUTPUT_DEPTH_PACKING == 3201
gl_FragColor=(depth==1.0)?vec4(1.0):packDepthToRGBA(depth);
#else
gl_FragColor=vec4(vec3(depth),1.0);
#endif
#endif
}`,c$=`varying vec2 vUv;
#if DEPTH_COPY_MODE == 1
uniform vec2 texelPosition;
#endif
void main(){
#if DEPTH_COPY_MODE == 1
vUv=texelPosition;
#else
vUv=position.xy*0.5+0.5;
#endif
gl_Position=vec4(position.xy,1.0,1.0);}`,f$=class extends on{constructor(){super({name:"DepthCopyMaterial",defines:{INPUT_DEPTH_PACKING:"0",OUTPUT_DEPTH_PACKING:"0",DEPTH_COPY_MODE:"0"},uniforms:{depthBuffer:new ie(null),texelPosition:new ie(new le)},blending:En,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:u$,vertexShader:c$}),this.depthCopyMode=bp.FULL}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(n){this.uniforms.depthBuffer.value=n}set inputDepthPacking(n){this.defines.INPUT_DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}get outputDepthPacking(){return Number(this.defines.OUTPUT_DEPTH_PACKING)}set outputDepthPacking(n){this.defines.OUTPUT_DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=Oi){this.depthBuffer=n,this.inputDepthPacking=e}getInputDepthPacking(){return Number(this.defines.INPUT_DEPTH_PACKING)}setInputDepthPacking(n){this.defines.INPUT_DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}getOutputDepthPacking(){return Number(this.defines.OUTPUT_DEPTH_PACKING)}setOutputDepthPacking(n){this.defines.OUTPUT_DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}get texelPosition(){return this.uniforms.texelPosition.value}getTexelPosition(){return this.uniforms.texelPosition.value}setTexelPosition(n){this.uniforms.texelPosition.value=n}get mode(){return this.depthCopyMode}set mode(n){this.depthCopyMode=n,this.defines.DEPTH_COPY_MODE=n.toFixed(0),this.needsUpdate=!0}getMode(){return this.mode}setMode(n){this.mode=n}},h$=`#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
#ifdef DOWNSAMPLE_NORMALS
uniform lowp sampler2D normalBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}int findBestDepth(const in float samples[4]){float c=(samples[0]+samples[1]+samples[2]+samples[3])*0.25;float distances[]=float[4](abs(c-samples[0]),abs(c-samples[1]),abs(c-samples[2]),abs(c-samples[3]));float maxDistance=max(max(distances[0],distances[1]),max(distances[2],distances[3]));int remaining[3];int rejected[3];int i,j,k;for(i=0,j=0,k=0;i<4;++i){if(distances[i]<maxDistance){remaining[j++]=i;}else{rejected[k++]=i;}}for(;j<3;++j){remaining[j]=rejected[--k];}vec3 s=vec3(samples[remaining[0]],samples[remaining[1]],samples[remaining[2]]);c=(s.x+s.y+s.z)/3.0;distances[0]=abs(c-s.x);distances[1]=abs(c-s.y);distances[2]=abs(c-s.z);float minDistance=min(distances[0],min(distances[1],distances[2]));for(i=0;i<3;++i){if(distances[i]==minDistance){break;}}return remaining[i];}void main(){float d[]=float[4](readDepth(vUv0),readDepth(vUv1),readDepth(vUv2),readDepth(vUv3));int index=findBestDepth(d);
#ifdef DOWNSAMPLE_NORMALS
vec3 n[]=vec3[4](texture2D(normalBuffer,vUv0).rgb,texture2D(normalBuffer,vUv1).rgb,texture2D(normalBuffer,vUv2).rgb,texture2D(normalBuffer,vUv3).rgb);
#else
vec3 n[]=vec3[4](vec3(0.0),vec3(0.0),vec3(0.0),vec3(0.0));
#endif
gl_FragColor=vec4(n[index],d[index]);}`,d$="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=uv;vUv1=vec2(uv.x,uv.y+texelSize.y);vUv2=vec2(uv.x+texelSize.x,uv.y);vUv3=uv+texelSize;gl_Position=vec4(position.xy,1.0,1.0);}",p$=class extends on{constructor(){super({name:"DepthDownsamplingMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new ie(null),normalBuffer:new ie(null),texelSize:new ie(new le)},blending:En,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:h$,vertexShader:d$})}set depthBuffer(n){this.uniforms.depthBuffer.value=n}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=Oi){this.depthBuffer=n,this.depthPacking=e}set normalBuffer(n){this.uniforms.normalBuffer.value=n,n!==null?this.defines.DOWNSAMPLE_NORMALS="1":delete this.defines.DOWNSAMPLE_NORMALS,this.needsUpdate=!0}setNormalBuffer(n){this.normalBuffer=n}setTexelSize(n,e){this.uniforms.texelSize.value.set(n,e)}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},m$=`#include <common>
#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer0;uniform highp sampler2D depthBuffer1;
#else
uniform mediump sampler2D depthBuffer0;uniform mediump sampler2D depthBuffer1;
#endif
uniform sampler2D inputBuffer;uniform vec2 cameraNearFar;float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNearFar.x,cameraNearFar.y);
#else
return orthographicDepthToViewZ(depth,cameraNearFar.x,cameraNearFar.y);
#endif
}varying vec2 vUv;void main(){vec2 depth;
#if DEPTH_PACKING_0 == 3201
depth.x=unpackRGBAToDepth(texture2D(depthBuffer0,vUv));
#else
depth.x=texture2D(depthBuffer0,vUv).r;
#endif
#if DEPTH_PACKING_1 == 3201
depth.y=unpackRGBAToDepth(texture2D(depthBuffer1,vUv));
#else
depth.y=texture2D(depthBuffer1,vUv).r;
#endif
bool isMaxDepth=(depth.x==1.0);
#ifdef PERSPECTIVE_CAMERA
depth.x=viewZToOrthographicDepth(getViewZ(depth.x),cameraNearFar.x,cameraNearFar.y);depth.y=viewZToOrthographicDepth(getViewZ(depth.y),cameraNearFar.x,cameraNearFar.y);
#endif
#if DEPTH_TEST_STRATEGY == 0
bool keep=depthTest(depth.x,depth.y);
#elif DEPTH_TEST_STRATEGY == 1
bool keep=isMaxDepth||depthTest(depth.x,depth.y);
#else
bool keep=!isMaxDepth&&depthTest(depth.x,depth.y);
#endif
if(keep){gl_FragColor=texture2D(inputBuffer,vUv);}else{discard;}}`,WF=class extends on{constructor(){super({name:"DepthMaskMaterial",defines:{DEPTH_EPSILON:"0.0001",DEPTH_PACKING_0:"0",DEPTH_PACKING_1:"0",DEPTH_TEST_STRATEGY:$p.KEEP_MAX_DEPTH},uniforms:{inputBuffer:new ie(null),depthBuffer0:new ie(null),depthBuffer1:new ie(null),cameraNearFar:new ie(new le(1,1))},blending:En,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:m$,vertexShader:Zc}),this.depthMode=E_}set depthBuffer0(n){this.uniforms.depthBuffer0.value=n}set depthPacking0(n){this.defines.DEPTH_PACKING_0=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer0(n,e=Oi){this.depthBuffer0=n,this.depthPacking0=e}set depthBuffer1(n){this.uniforms.depthBuffer1.value=n}set depthPacking1(n){this.defines.DEPTH_PACKING_1=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer1(n,e=Oi){this.depthBuffer1=n,this.depthPacking1=e}get maxDepthStrategy(){return Number(this.defines.DEPTH_TEST_STRATEGY)}set maxDepthStrategy(n){this.defines.DEPTH_TEST_STRATEGY=n.toFixed(0),this.needsUpdate=!0}get keepFar(){return this.maxDepthStrategy}set keepFar(n){this.maxDepthStrategy=n?$p.KEEP_MAX_DEPTH:$p.DISCARD_MAX_DEPTH}getMaxDepthStrategy(){return this.maxDepthStrategy}setMaxDepthStrategy(n){this.maxDepthStrategy=n}get epsilon(){return Number(this.defines.DEPTH_EPSILON)}set epsilon(n){this.defines.DEPTH_EPSILON=n.toFixed(16),this.needsUpdate=!0}getEpsilon(){return this.epsilon}setEpsilon(n){this.epsilon=n}get depthMode(){return Number(this.defines.DEPTH_MODE)}set depthMode(n){let e;switch(n){case Hb:e="false";break;case Gb:e="true";break;case Om:e="abs(d1 - d0) <= DEPTH_EPSILON";break;case Sx:e="abs(d1 - d0) > DEPTH_EPSILON";break;case E_:e="d0 > d1";break;case km:e="d0 >= d1";break;case Wb:e="d0 <= d1";break;case jb:default:e="d0 < d1";break}this.defines.DEPTH_MODE=n.toFixed(0),this.defines["depthTest(d0, d1)"]=e,this.needsUpdate=!0}getDepthMode(){return this.depthMode}setDepthMode(n){this.depthMode=n}adoptCameraSettings(n){this.copyCameraSettings(n)}copyCameraSettings(n){n&&(this.uniforms.cameraNearFar.value.set(n.near,n.far),n instanceof Nn?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},g$=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#define WEIGHT_INNER 0.125
#define WEIGHT_OUTER 0.0555555
varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;float clampToBorder(const in vec2 uv){return float(uv.s>=0.0&&uv.s<=1.0&&uv.t>=0.0&&uv.t<=1.0);}void main(){vec4 c=vec4(0.0);vec4 w=WEIGHT_INNER*vec4(clampToBorder(vUv00),clampToBorder(vUv01),clampToBorder(vUv02),clampToBorder(vUv03));c+=w.x*texture2D(inputBuffer,vUv00);c+=w.y*texture2D(inputBuffer,vUv01);c+=w.z*texture2D(inputBuffer,vUv02);c+=w.w*texture2D(inputBuffer,vUv03);w=WEIGHT_OUTER*vec4(clampToBorder(vUv04),clampToBorder(vUv05),clampToBorder(vUv06),clampToBorder(vUv07));c+=w.x*texture2D(inputBuffer,vUv04);c+=w.y*texture2D(inputBuffer,vUv05);c+=w.z*texture2D(inputBuffer,vUv06);c+=w.w*texture2D(inputBuffer,vUv07);w=WEIGHT_OUTER*vec4(clampToBorder(vUv08),clampToBorder(vUv09),clampToBorder(vUv10),clampToBorder(vUv11));c+=w.x*texture2D(inputBuffer,vUv08);c+=w.y*texture2D(inputBuffer,vUv09);c+=w.z*texture2D(inputBuffer,vUv10);c+=w.w*texture2D(inputBuffer,vUv11);c+=WEIGHT_OUTER*texture2D(inputBuffer,vUv);gl_FragColor=c;
#include <encodings_fragment>
}`,v$="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;void main(){vUv=position.xy*0.5+0.5;vUv00=vUv+texelSize*vec2(-1.0,1.0);vUv01=vUv+texelSize*vec2(1.0,1.0);vUv02=vUv+texelSize*vec2(-1.0,-1.0);vUv03=vUv+texelSize*vec2(1.0,-1.0);vUv04=vUv+texelSize*vec2(-2.0,2.0);vUv05=vUv+texelSize*vec2(0.0,2.0);vUv06=vUv+texelSize*vec2(2.0,2.0);vUv07=vUv+texelSize*vec2(-2.0,0.0);vUv08=vUv+texelSize*vec2(2.0,0.0);vUv09=vUv+texelSize*vec2(-2.0,-2.0);vUv10=vUv+texelSize*vec2(0.0,-2.0);vUv11=vUv+texelSize*vec2(2.0,-2.0);gl_Position=vec4(position.xy,1.0,1.0);}",y$=class extends on{constructor(){super({name:"DownsamplingMaterial",uniforms:{inputBuffer:new ie(null),texelSize:new ie(new le)},blending:En,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:g$,vertexShader:v$})}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},_$=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if THREE_REVISION >= 137
vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEAD void main(){FRAGMENT_MAIN_UV vec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGE gl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <encodings_fragment>
#endif
#include <dithering_fragment>
}`,x$="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEAD void main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORT gl_Position=vec4(position.xy,1.0,1.0);}",S$=class extends on{constructor(n,e,t,i,r=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:Wc.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new ie(null),depthBuffer:new ie(null),resolution:new ie(new le),texelSize:new ie(new le),cameraNear:new ie(.3),cameraFar:new ie(1e3),aspect:new ie(1),time:new ie(0)},blending:En,toneMapped:!1,depthWrite:!1,depthTest:!1,dithering:r}),n&&this.setShaderParts(n),e&&this.setDefines(e),t&&this.setUniforms(t),this.copyCameraSettings(i)}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(n){this.uniforms.depthBuffer.value=n}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=Oi){this.depthBuffer=n,this.depthPacking=e}setShaderData(n){this.setShaderParts(n.shaderParts),this.setDefines(n.defines),this.setUniforms(n.uniforms),this.setExtensions(n.extensions)}setShaderParts(n){return this.fragmentShader=_$.replace(nn.FRAGMENT_HEAD,n.get(nn.FRAGMENT_HEAD)||"").replace(nn.FRAGMENT_MAIN_UV,n.get(nn.FRAGMENT_MAIN_UV)||"").replace(nn.FRAGMENT_MAIN_IMAGE,n.get(nn.FRAGMENT_MAIN_IMAGE)||""),this.vertexShader=x$.replace(nn.VERTEX_HEAD,n.get(nn.VERTEX_HEAD)||"").replace(nn.VERTEX_MAIN_SUPPORT,n.get(nn.VERTEX_MAIN_SUPPORT)||""),this.needsUpdate=!0,this}setDefines(n){for(const e of n.entries())this.defines[e[0]]=e[1];return this.needsUpdate=!0,this}setUniforms(n){for(const e of n.entries())this.uniforms[e[0]]=e[1];return this}setExtensions(n){this.extensions={};for(const e of n)this.extensions[e]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(n){this.encodeOutput!==n&&(n?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(n){return this.encodeOutput}setOutputEncodingEnabled(n){this.encodeOutput=n}get time(){return this.uniforms.time.value}set time(n){this.uniforms.time.value=n}setDeltaTime(n){this.uniforms.time.value+=n}adoptCameraSettings(n){this.copyCameraSettings(n)}copyCameraSettings(n){n&&(this.uniforms.cameraNear.value=n.near,this.uniforms.cameraFar.value=n.far,n instanceof Nn?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(n,e){const t=this.uniforms;t.resolution.value.set(n,e),t.texelSize.value.set(1/n,1/e),t.aspect.value=n/e}static get Section(){return nn}},w$=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform vec2 lightPosition;uniform float exposure;uniform float decay;uniform float density;uniform float weight;uniform float clampMax;varying vec2 vUv;void main(){vec2 coord=vUv;vec2 delta=lightPosition-coord;delta*=1.0/SAMPLES_FLOAT*density;float illuminationDecay=1.0;vec4 color=vec4(0.0);for(int i=0;i<SAMPLES_INT;++i){coord+=delta;vec4 texel=texture2D(inputBuffer,coord);texel*=illuminationDecay*weight;color+=texel;illuminationDecay*=decay;}gl_FragColor=clamp(color*exposure,0.0,clampMax);
#include <dithering_fragment>
}`,M$=class extends on{constructor(n){super({name:"GodRaysMaterial",defines:{SAMPLES_INT:"60",SAMPLES_FLOAT:"60.0"},uniforms:{inputBuffer:new ie(null),lightPosition:new ie(n),density:new ie(1),decay:new ie(1),weight:new ie(1),exposure:new ie(1),clampMax:new ie(1)},blending:En,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:w$,vertexShader:Zc})}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}get lightPosition(){return this.uniforms.lightPosition.value}getLightPosition(){return this.uniforms.lightPosition.value}setLightPosition(n){this.uniforms.lightPosition.value=n}get density(){return this.uniforms.density.value}set density(n){this.uniforms.density.value=n}getDensity(){return this.uniforms.density.value}setDensity(n){this.uniforms.density.value=n}get decay(){return this.uniforms.decay.value}set decay(n){this.uniforms.decay.value=n}getDecay(){return this.uniforms.decay.value}setDecay(n){this.uniforms.decay.value=n}get weight(){return this.uniforms.weight.value}set weight(n){this.uniforms.weight.value=n}getWeight(){return this.uniforms.weight.value}setWeight(n){this.uniforms.weight.value=n}get exposure(){return this.uniforms.exposure.value}set exposure(n){this.uniforms.exposure.value=n}getExposure(){return this.uniforms.exposure.value}setExposure(n){this.uniforms.exposure.value=n}get maxIntensity(){return this.uniforms.clampMax.value}set maxIntensity(n){this.uniforms.clampMax.value=n}getMaxIntensity(){return this.uniforms.clampMax.value}setMaxIntensity(n){this.uniforms.clampMax.value=n}get samples(){return Number(this.defines.SAMPLES_INT)}set samples(n){const e=Math.floor(n);this.defines.SAMPLES_INT=e.toFixed(0),this.defines.SAMPLES_FLOAT=e.toFixed(1),this.needsUpdate=!0}getSamples(){return this.samples}setSamples(n){this.samples=n}},T$=`#include <common>
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);l*=low*high;
#elif defined(THRESHOLD)
l=smoothstep(threshold,threshold+smoothing,l);
#endif
#ifdef COLOR
gl_FragColor=vec4(texel.rgb*l,l);
#else
gl_FragColor=vec4(l);
#endif
}`,E$=class extends on{constructor(n=!1,e=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:Wc.replace(/\D+/g,"")},uniforms:{inputBuffer:new ie(null),threshold:new ie(0),smoothing:new ie(1),range:new ie(null)},blending:En,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:T$,vertexShader:Zc}),this.colorOutput=n,this.luminanceRange=e}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}get threshold(){return this.uniforms.threshold.value}set threshold(n){this.smoothing>0||n>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=n}getThreshold(){return this.threshold}setThreshold(n){this.threshold=n}get smoothing(){return this.uniforms.smoothing.value}set smoothing(n){this.threshold>0||n>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=n}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(n){this.smoothing=n}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(n){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(n){n?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(n){return this.colorOutput}setColorOutputEnabled(n){this.colorOutput=n}get useRange(){return this.luminanceRange!==null}set useRange(n){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(n){n!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=n,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(n){this.luminanceRange=n}},b$=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef MASK_PRECISION_HIGH
uniform mediump sampler2D maskTexture;
#else
uniform lowp sampler2D maskTexture;
#endif
#if MASK_FUNCTION != 0
uniform float strength;
#endif
varying vec2 vUv;void main(){
#if COLOR_CHANNEL == 0
float mask=texture2D(maskTexture,vUv).r;
#elif COLOR_CHANNEL == 1
float mask=texture2D(maskTexture,vUv).g;
#elif COLOR_CHANNEL == 2
float mask=texture2D(maskTexture,vUv).b;
#else
float mask=texture2D(maskTexture,vUv).a;
#endif
#if MASK_FUNCTION == 0
#ifdef INVERTED
mask=step(mask,0.0);
#else
mask=1.0-step(mask,0.0);
#endif
#else
mask=clamp(mask*strength,0.0,1.0);
#ifdef INVERTED
mask=1.0-mask;
#endif
#endif
#if MASK_FUNCTION == 2
gl_FragColor=vec4(mask*texture2D(inputBuffer,vUv).rgb,mask);
#else
gl_FragColor=mask*texture2D(inputBuffer,vUv);
#endif
}`,C$=class extends on{constructor(n=null){super({name:"MaskMaterial",uniforms:{maskTexture:new ie(n),inputBuffer:new ie(null),strength:new ie(1)},blending:En,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:b$,vertexShader:Zc}),this.colorChannel=dh.RED,this.maskFunction=Kp.DISCARD}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}set maskTexture(n){this.uniforms.maskTexture.value=n,delete this.defines.MASK_PRECISION_HIGH,n.type!==xn&&(this.defines.MASK_PRECISION_HIGH="1"),this.needsUpdate=!0}setMaskTexture(n){this.maskTexture=n}set colorChannel(n){this.defines.COLOR_CHANNEL=n.toFixed(0),this.needsUpdate=!0}setColorChannel(n){this.colorChannel=n}set maskFunction(n){this.defines.MASK_FUNCTION=n.toFixed(0),this.needsUpdate=!0}setMaskFunction(n){this.maskFunction=n}get inverted(){return this.defines.INVERTED!==void 0}set inverted(n){this.inverted&&!n?delete this.defines.INVERTED:n&&(this.defines.INVERTED="1"),this.needsUpdate=!0}isInverted(){return this.inverted}setInverted(n){this.inverted=n}get strength(){return this.uniforms.strength.value}set strength(n){this.uniforms.strength.value=n}getStrength(){return this.strength}setStrength(n){this.strength=n}},P$="uniform lowp sampler2D inputBuffer;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 c0=texture2D(inputBuffer,vUv0).rg;vec2 c1=texture2D(inputBuffer,vUv1).rg;vec2 c2=texture2D(inputBuffer,vUv2).rg;vec2 c3=texture2D(inputBuffer,vUv3).rg;float d0=(c0.x-c1.x)*0.5;float d1=(c2.x-c3.x)*0.5;float d=length(vec2(d0,d1));float a0=min(c0.y,c1.y);float a1=min(c2.y,c3.y);float visibilityFactor=min(a0,a1);gl_FragColor.rg=(1.0-visibilityFactor>0.001)?vec2(d,0.0):vec2(0.0,d);}",A$="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=vec2(uv.x+texelSize.x,uv.y);vUv1=vec2(uv.x-texelSize.x,uv.y);vUv2=vec2(uv.x,uv.y+texelSize.y);vUv3=vec2(uv.x,uv.y-texelSize.y);gl_Position=vec4(position.xy,1.0,1.0);}",R$=class extends on{constructor(n=new le){super({name:"OutlineMaterial",uniforms:{inputBuffer:new ie(null),texelSize:new ie(new le)},blending:En,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:P$,vertexShader:A$}),this.uniforms.texelSize.value.set(n.x,n.y),this.uniforms.maskTexture=this.uniforms.inputBuffer}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}setTexelSize(n,e){this.uniforms.texelSize.value.set(n,e)}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},D$=`#include <common>
#include <packing>
#ifdef NORMAL_DEPTH
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D normalDepthBuffer;
#else
uniform mediump sampler2D normalDepthBuffer;
#endif
float readDepth(const in vec2 uv){return texture2D(normalDepthBuffer,uv).a;}
#else
uniform lowp sampler2D normalBuffer;
#if DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}
#endif
uniform lowp sampler2D noiseTexture;uniform mat4 inverseProjectionMatrix;uniform mat4 projectionMatrix;uniform vec2 texelSize;uniform vec2 cameraNearFar;uniform float intensity;uniform float minRadiusScale;uniform float fade;uniform float bias;uniform vec2 distanceCutoff;uniform vec2 proximityCutoff;varying vec2 vUv;varying vec2 vUv2;float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNearFar.x,cameraNearFar.y);
#else
return orthographicDepthToViewZ(depth,cameraNearFar.x,cameraNearFar.y);
#endif
}vec3 getViewPosition(const in vec2 screenPosition,const in float depth,const in float viewZ){vec4 clipPosition=vec4(vec3(screenPosition,depth)*2.0-1.0,1.0);float clipW=projectionMatrix[2][3]*viewZ+projectionMatrix[3][3];clipPosition*=clipW;return(inverseProjectionMatrix*clipPosition).xyz;}float getAmbientOcclusion(const in vec3 p,const in vec3 n,const in float depth,const in vec2 uv){float radiusScale=1.0-smoothstep(0.0,distanceCutoff.y,depth);radiusScale=radiusScale*(1.0-minRadiusScale)+minRadiusScale;float radius=RADIUS*radiusScale;float noise=texture2D(noiseTexture,vUv2).r;float baseAngle=noise*PI2;float rings=SPIRAL_TURNS*PI2;float occlusion=0.0;int taps=0;for(int i=0;i<SAMPLES_INT;++i){float alpha=(float(i)+0.5)*INV_SAMPLES_FLOAT;float angle=alpha*rings+baseAngle;vec2 rotation=vec2(cos(angle),sin(angle));vec2 coords=alpha*radius*rotation*texelSize+uv;if(coords.s<0.0||coords.s>1.0||coords.t<0.0||coords.t>1.0){continue;}float sampleDepth=readDepth(coords);float viewZ=getViewZ(sampleDepth);
#ifdef PERSPECTIVE_CAMERA
float linearSampleDepth=viewZToOrthographicDepth(viewZ,cameraNearFar.x,cameraNearFar.y);
#else
float linearSampleDepth=sampleDepth;
#endif
float proximity=abs(depth-linearSampleDepth);if(proximity<proximityCutoff.y){float falloff=1.0-smoothstep(proximityCutoff.x,proximityCutoff.y,proximity);vec3 Q=getViewPosition(coords,sampleDepth,viewZ);vec3 v=Q-p;float vv=dot(v,v);float vn=dot(v,n)-bias;float f=max(RADIUS_SQ-vv,0.0)/RADIUS_SQ;occlusion+=(f*f*f*max(vn/(fade+vv),0.0))*falloff;}++taps;}return occlusion/(4.0*max(float(taps),1.0));}void main(){
#ifdef NORMAL_DEPTH
vec4 normalDepth=texture2D(normalDepthBuffer,vUv);
#else
vec4 normalDepth=vec4(texture2D(normalBuffer,vUv).xyz,readDepth(vUv));
#endif
float ao=0.0;float depth=normalDepth.a;float viewZ=getViewZ(depth);
#ifdef PERSPECTIVE_CAMERA
float linearDepth=viewZToOrthographicDepth(viewZ,cameraNearFar.x,cameraNearFar.y);
#else
float linearDepth=depth;
#endif
if(linearDepth<distanceCutoff.y){vec3 viewPosition=getViewPosition(vUv,depth,viewZ);vec3 viewNormal=unpackRGBToNormal(normalDepth.rgb);ao+=getAmbientOcclusion(viewPosition,viewNormal,linearDepth,vUv);float d=smoothstep(distanceCutoff.x,distanceCutoff.y,linearDepth);ao=mix(ao,0.0,d);
#ifdef LEGACY_INTENSITY
ao=clamp(1.0-pow(1.0-ao,abs(intensity)),0.0,1.0);
#endif
}gl_FragColor.r=ao;}`,L$="uniform vec2 noiseScale;varying vec2 vUv;varying vec2 vUv2;void main(){vUv=position.xy*0.5+0.5;vUv2=vUv*noiseScale;gl_Position=vec4(position.xy,1.0,1.0);}",I$=class extends on{constructor(n){super({name:"SSAOMaterial",defines:{SAMPLES_INT:"0",INV_SAMPLES_FLOAT:"0.0",SPIRAL_TURNS:"0.0",RADIUS:"1.0",RADIUS_SQ:"1.0",DISTANCE_SCALING:"1",DEPTH_PACKING:"0"},uniforms:{depthBuffer:new ie(null),normalBuffer:new ie(null),normalDepthBuffer:new ie(null),noiseTexture:new ie(null),inverseProjectionMatrix:new ie(new mt),projectionMatrix:new ie(new mt),texelSize:new ie(new le),cameraNearFar:new ie(new le),distanceCutoff:new ie(new le),proximityCutoff:new ie(new le),noiseScale:new ie(new le),minRadiusScale:new ie(.33),intensity:new ie(1),fade:new ie(.01),bias:new ie(0)},blending:En,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:D$,vertexShader:L$}),this.copyCameraSettings(n),this.resolution=new le,this.r=1}get near(){return this.uniforms.cameraNearFar.value.x}get far(){return this.uniforms.cameraNearFar.value.y}set normalDepthBuffer(n){this.uniforms.normalDepthBuffer.value=n,n!==null?this.defines.NORMAL_DEPTH="1":delete this.defines.NORMAL_DEPTH,this.needsUpdate=!0}setNormalDepthBuffer(n){this.normalDepthBuffer=n}set normalBuffer(n){this.uniforms.normalBuffer.value=n}setNormalBuffer(n){this.uniforms.normalBuffer.value=n}set depthBuffer(n){this.uniforms.depthBuffer.value=n}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=Oi){this.depthBuffer=n,this.depthPacking=e}set noiseTexture(n){this.uniforms.noiseTexture.value=n}setNoiseTexture(n){this.uniforms.noiseTexture.value=n}get samples(){return Number(this.defines.SAMPLES_INT)}set samples(n){this.defines.SAMPLES_INT=n.toFixed(0),this.defines.INV_SAMPLES_FLOAT=(1/n).toFixed(9),this.needsUpdate=!0}getSamples(){return this.samples}setSamples(n){this.samples=n}get rings(){return Number(this.defines.SPIRAL_TURNS)}set rings(n){this.defines.SPIRAL_TURNS=n.toFixed(1),this.needsUpdate=!0}getRings(){return this.rings}setRings(n){this.rings=n}get intensity(){return this.uniforms.intensity.value}set intensity(n){this.uniforms.intensity.value=n,this.defines.LEGACY_INTENSITY===void 0&&(this.defines.LEGACY_INTENSITY="1",this.needsUpdate=!0)}getIntensity(){return this.uniforms.intensity.value}setIntensity(n){this.uniforms.intensity.value=n}get fade(){return this.uniforms.fade.value}set fade(n){this.uniforms.fade.value=n}getFade(){return this.uniforms.fade.value}setFade(n){this.uniforms.fade.value=n}get bias(){return this.uniforms.bias.value}set bias(n){this.uniforms.bias.value=n}getBias(){return this.uniforms.bias.value}setBias(n){this.uniforms.bias.value=n}get minRadiusScale(){return this.uniforms.minRadiusScale.value}set minRadiusScale(n){this.uniforms.minRadiusScale.value=n}getMinRadiusScale(){return this.uniforms.minRadiusScale.value}setMinRadiusScale(n){this.uniforms.minRadiusScale.value=n}updateRadius(){const n=this.r*this.resolution.height;this.defines.RADIUS=n.toFixed(11),this.defines.RADIUS_SQ=(n*n).toFixed(11),this.needsUpdate=!0}get radius(){return this.r}set radius(n){this.r=Math.min(Math.max(n,1e-6),1),this.updateRadius()}getRadius(){return this.radius}setRadius(n){this.radius=n}get distanceScaling(){return!0}set distanceScaling(n){}isDistanceScalingEnabled(){return this.distanceScaling}setDistanceScalingEnabled(n){this.distanceScaling=n}get distanceThreshold(){return this.uniforms.distanceCutoff.value.x}set distanceThreshold(n){this.uniforms.distanceCutoff.value.set(Math.min(Math.max(n,0),1),Math.min(Math.max(n+this.distanceFalloff,0),1))}get worldDistanceThreshold(){return-hh(this.distanceThreshold,this.near,this.far)}set worldDistanceThreshold(n){this.distanceThreshold=lc(-n,this.near,this.far)}get distanceFalloff(){return this.uniforms.distanceCutoff.value.y-this.distanceThreshold}set distanceFalloff(n){this.uniforms.distanceCutoff.value.y=Math.min(Math.max(this.distanceThreshold+n,0),1)}get worldDistanceFalloff(){return-hh(this.distanceFalloff,this.near,this.far)}set worldDistanceFalloff(n){this.distanceFalloff=lc(-n,this.near,this.far)}setDistanceCutoff(n,e){this.uniforms.distanceCutoff.value.set(Math.min(Math.max(n,0),1),Math.min(Math.max(n+e,0),1))}get proximityThreshold(){return this.uniforms.proximityCutoff.value.x}set proximityThreshold(n){this.uniforms.proximityCutoff.value.set(Math.min(Math.max(n,0),1),Math.min(Math.max(n+this.proximityFalloff,0),1))}get worldProximityThreshold(){return-hh(this.proximityThreshold,this.near,this.far)}set worldProximityThreshold(n){this.proximityThreshold=lc(-n,this.near,this.far)}get proximityFalloff(){return this.uniforms.proximityCutoff.value.y-this.proximityThreshold}set proximityFalloff(n){this.uniforms.proximityCutoff.value.y=Math.min(Math.max(this.proximityThreshold+n,0),1)}get worldProximityFalloff(){return-hh(this.proximityFalloff,this.near,this.far)}set worldProximityFalloff(n){this.proximityFalloff=lc(-n,this.near,this.far)}setProximityCutoff(n,e){this.uniforms.proximityCutoff.value.set(Math.min(Math.max(n,0),1),Math.min(Math.max(n+e,0),1))}setTexelSize(n,e){this.uniforms.texelSize.value.set(n,e)}adoptCameraSettings(n){this.copyCameraSettings(n)}copyCameraSettings(n){n&&(this.uniforms.cameraNearFar.value.set(n.near,n.far),this.uniforms.projectionMatrix.value.copy(n.projectionMatrix),this.uniforms.inverseProjectionMatrix.value.copy(n.projectionMatrix).invert(),n instanceof Nn?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(n,e){const t=this.uniforms,i=t.noiseTexture.value;i!==null&&t.noiseScale.value.set(n/i.image.width,e/i.image.height),t.texelSize.value.set(1/n,1/e),this.resolution.set(n,e),this.updateRadius()}},k$=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;uniform mediump sampler2D supportBuffer;
#else
uniform lowp sampler2D inputBuffer;uniform lowp sampler2D supportBuffer;
#endif
uniform float radius;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vec4 c=vec4(0.0);c+=texture2D(inputBuffer,vUv0)*0.0625;c+=texture2D(inputBuffer,vUv1)*0.125;c+=texture2D(inputBuffer,vUv2)*0.0625;c+=texture2D(inputBuffer,vUv3)*0.125;c+=texture2D(inputBuffer,vUv)*0.25;c+=texture2D(inputBuffer,vUv4)*0.125;c+=texture2D(inputBuffer,vUv5)*0.0625;c+=texture2D(inputBuffer,vUv6)*0.125;c+=texture2D(inputBuffer,vUv7)*0.0625;vec4 baseColor=texture2D(supportBuffer,vUv);gl_FragColor=mix(baseColor,c,radius);
#include <encodings_fragment>
}`,O$="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,1.0);vUv1=vUv+texelSize*vec2(0.0,1.0);vUv2=vUv+texelSize*vec2(1.0,1.0);vUv3=vUv+texelSize*vec2(-1.0,0.0);vUv4=vUv+texelSize*vec2(1.0,0.0);vUv5=vUv+texelSize*vec2(-1.0,-1.0);vUv6=vUv+texelSize*vec2(0.0,-1.0);vUv7=vUv+texelSize*vec2(1.0,-1.0);gl_Position=vec4(position.xy,1.0,1.0);}",N$=class extends on{constructor(){super({name:"UpsamplingMaterial",uniforms:{inputBuffer:new ie(null),supportBuffer:new ie(null),texelSize:new ie(new le),radius:new ie(.85)},blending:En,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:k$,vertexShader:O$})}set inputBuffer(n){this.uniforms.inputBuffer.value=n}set supportBuffer(n){this.uniforms.supportBuffer.value=n}get radius(){return this.uniforms.radius.value}set radius(n){this.uniforms.radius.value=n}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},U$=new ud,ml=null;function F$(){if(ml===null){const n=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),e=new Float32Array([0,0,2,0,0,2]);ml=new Lt,ml.setAttribute!==void 0?(ml.setAttribute("position",new sn(n,3)),ml.setAttribute("uv",new sn(e,2))):(ml.addAttribute("position",new sn(n,3)),ml.addAttribute("uv",new sn(e,2)))}return ml}var Ei=class{constructor(n="Pass",e=new Lc,t=U$){this.name=n,this.renderer=null,this.scene=e,this.camera=t,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(n){if(this.rtt===n){const e=this.fullscreenMaterial;e!==null&&(e.needsUpdate=!0),this.rtt=!n}}set mainScene(n){}set mainCamera(n){}setRenderer(n){this.renderer=n}isEnabled(){return this.enabled}setEnabled(n){this.enabled=n}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(n){let e=this.screen;e!==null?e.material=n:(e=new Ii(F$(),n),e.frustumCulled=!1,this.scene===null&&(this.scene=new Lc),this.scene.add(e),this.screen=e)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(n){this.fullscreenMaterial=n}getDepthTexture(){return null}setDepthTexture(n,e=Oi){}render(n,e,t,i,r){throw new Error("Render method not implemented!")}setSize(n,e){}initialize(n,e,t){}dispose(){for(const n of Object.keys(this)){const e=this[n];(e instanceof qt||e instanceof Ti||e instanceof bn||e instanceof Ei)&&this[n].dispose()}}},jF=class extends Ei{constructor(n,e=!0){super("CopyPass"),this.fullscreenMaterial=new GF,this.needsSwap=!1,this.renderTarget=n,n===void 0&&(this.renderTarget=new qt(1,1,{minFilter:vt,magFilter:vt,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=e}get resize(){return this.autoResize}set resize(n){this.autoResize=n}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(n){this.autoResize=n}render(n,e,t,i,r){this.fullscreenMaterial.inputBuffer=e.texture,n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){this.autoResize&&this.renderTarget.setSize(n,e)}initialize(n,e,t){t!==void 0&&(this.renderTarget.texture.type=t,t!==xn?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":qa(n)===ln&&xi(this.renderTarget.texture,ln))}},z$=class extends Ei{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(n,e,t,i,r){const s=n.state.buffers.stencil;s.setLocked(!1),s.setTest(!1)}},YD=new Oe,Og=class extends Ei{constructor(n=!0,e=!0,t=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=n,this.depth=e,this.stencil=t,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(n,e,t){this.color=n,this.depth=e,this.stencil=t}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(n){this.overrideClearColor=n}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(n){this.overrideClearAlpha=n}render(n,e,t,i,r){const s=this.overrideClearColor,o=this.overrideClearAlpha,a=n.getClearAlpha(),l=s!==null,u=o>=0;l?(n.getClearColor(YD),n.setClearColor(s,u?o:a)):u&&n.setClearAlpha(o),n.setRenderTarget(this.renderToScreen?null:e),n.clear(this.color,this.depth,this.stencil),l?n.setClearColor(YD,a):u&&n.setClearAlpha(a)}},gl=-1,un=class extends eo{constructor(n,e=gl,t=gl,i=1){super(),this.resizable=n,this.baseSize=new le(1,1),this.preferredSize=new le(e,t),this.target=this.preferredSize,this.s=i,this.effectiveSize=new le,this.addEventListener("change",()=>this.updateEffectiveSize()),this.updateEffectiveSize()}updateEffectiveSize(){const n=this.baseSize,e=this.preferredSize,t=this.effectiveSize,i=this.scale;e.width!==gl?t.width=e.width:e.height!==gl?t.width=Math.round(e.height*(n.width/Math.max(n.height,1))):t.width=Math.round(n.width*i),e.height!==gl?t.height=e.height:e.width!==gl?t.height=Math.round(e.width/Math.max(n.width/Math.max(n.height,1),1)):t.height=Math.round(n.height*i)}get width(){return this.effectiveSize.width}set width(n){this.preferredWidth=n}get height(){return this.effectiveSize.height}set height(n){this.preferredHeight=n}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(n){this.s!==n&&(this.s=n,this.preferredSize.setScalar(gl),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(n){this.scale=n}get baseWidth(){return this.baseSize.width}set baseWidth(n){this.baseSize.width!==n&&(this.baseSize.width=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(n){this.baseWidth=n}get baseHeight(){return this.baseSize.height}set baseHeight(n){this.baseSize.height!==n&&(this.baseSize.height=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(n){this.baseHeight=n}setBaseSize(n,e){(this.baseSize.width!==n||this.baseSize.height!==e)&&(this.baseSize.set(n,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(n){this.preferredSize.width!==n&&(this.preferredSize.width=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(n){this.preferredWidth=n}get preferredHeight(){return this.preferredSize.height}set preferredHeight(n){this.preferredSize.height!==n&&(this.preferredSize.height=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(n){this.preferredHeight=n}setPreferredSize(n,e){(this.preferredSize.width!==n||this.preferredSize.height!==e)&&(this.preferredSize.set(n,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(n){this.s=n.scale,this.baseSize.set(n.baseWidth,n.baseHeight),this.preferredSize.set(n.preferredWidth,n.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return gl}},Sw=!1,qD=class{constructor(n=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(n),this.meshCount=0,this.replaceMaterial=e=>{if(e.isMesh){let t;if(e.material.flatShading)switch(e.material.side){case zr:t=this.materialsFlatShadedDoubleSide;break;case yi:t=this.materialsFlatShadedBackSide;break;default:t=this.materialsFlatShaded;break}else switch(e.material.side){case zr:t=this.materialsDoubleSide;break;case yi:t=this.materialsBackSide;break;default:t=this.materials;break}this.originalMaterials.set(e,e.material),e.isSkinnedMesh?e.material=t[2]:e.isInstancedMesh?e.material=t[1]:e.material=t[0],++this.meshCount}}}cloneMaterial(n){if(!(n instanceof on))return n.clone();const e=n.uniforms,t=new Map;for(const r in e){const s=e[r].value;s.isRenderTargetTexture&&(e[r].value=null,t.set(r,s))}const i=n.clone();for(const r of t)e[r[0]].value=r[1],i.uniforms[r[0]].value=r[1];return i}setMaterial(n){if(this.disposeMaterials(),this.material=n,n!==null){const e=this.materials=[this.cloneMaterial(n),this.cloneMaterial(n),this.cloneMaterial(n)];for(const t of e)t.uniforms=Object.assign({},n.uniforms),t.side=ta;e[2].skinning=!0,this.materialsBackSide=e.map(t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},n.uniforms),i.side=yi,i}),this.materialsDoubleSide=e.map(t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},n.uniforms),i.side=zr,i}),this.materialsFlatShaded=e.map(t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},n.uniforms),i.flatShading=!0,i}),this.materialsFlatShadedBackSide=e.map(t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},n.uniforms),i.flatShading=!0,i.side=yi,i}),this.materialsFlatShadedDoubleSide=e.map(t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},n.uniforms),i.flatShading=!0,i.side=zr,i})}}render(n,e,t){const i=n.shadowMap.enabled;if(n.shadowMap.enabled=!1,Sw){const r=this.originalMaterials;this.meshCount=0,e.traverse(this.replaceMaterial),n.render(e,t);for(const s of r)s[0].material=s[1];this.meshCount!==r.size&&r.clear()}else{const r=e.overrideMaterial;e.overrideMaterial=this.material,n.render(e,t),e.overrideMaterial=r}n.shadowMap.enabled=i}disposeMaterials(){if(this.material!==null){const n=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const e of n)e.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return Sw}static set workaroundEnabled(n){Sw=n}},_d=class extends Ei{constructor(n,e,t=null){super("RenderPass",n,e),this.needsSwap=!1,this.clearPass=new Og,this.overrideMaterialManager=t===null?null:new qD(t),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(n){this.scene=n}set mainCamera(n){this.camera=n}get renderToScreen(){return super.renderToScreen}set renderToScreen(n){super.renderToScreen=n,this.clearPass.renderToScreen=n}get overrideMaterial(){const n=this.overrideMaterialManager;return n!==null?n.material:null}set overrideMaterial(n){const e=this.overrideMaterialManager;n!==null?e!==null?e.setMaterial(n):this.overrideMaterialManager=new qD(n):e!==null&&(e.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(n){this.overrideMaterial=n}get clear(){return this.clearPass.enabled}set clear(n){this.clearPass.enabled=n}getSelection(){return this.selection}setSelection(n){this.selection=n}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(n){this.ignoreBackground=n}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(n){this.skipShadowMapUpdate=n}getClearPass(){return this.clearPass}render(n,e,t,i,r){const s=this.scene,o=this.camera,a=this.selection,l=o.layers.mask,u=s.background,f=n.shadowMap.autoUpdate,d=this.renderToScreen?null:e;a!==null&&o.layers.set(a.getLayer()),this.skipShadowMapUpdate&&(n.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(s.background=null),this.clearPass.enabled&&this.clearPass.render(n,e),n.setRenderTarget(d),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(n,s,o):n.render(s,o),o.layers.mask=l,s.background=u,n.shadowMap.autoUpdate=f}},OC=class extends Ei{constructor(n,e,{renderTarget:t,resolutionScale:i=1,width:r=un.AUTO_SIZE,height:s=un.AUTO_SIZE,resolutionX:o=r,resolutionY:a=s}={}){super("DepthPass"),this.needsSwap=!1,this.renderPass=new _d(n,e,new Ax({depthPacking:ia}));const l=this.renderPass;l.skipShadowMapUpdate=!0,l.ignoreBackground=!0;const u=l.getClearPass();u.overrideClearColor=new Oe(16777215),u.overrideClearAlpha=1,this.renderTarget=t,this.renderTarget===void 0&&(this.renderTarget=new qt(1,1,{minFilter:Ht,magFilter:Ht}),this.renderTarget.texture.name="DepthPass.Target");const f=this.resolution=new un(this,o,a,i);f.addEventListener("change",d=>this.setSize(f.baseWidth,f.baseHeight))}set mainScene(n){this.renderPass.mainScene=n}set mainCamera(n){this.renderPass.mainCamera=n}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}render(n,e,t,i,r){const s=this.renderToScreen?null:this.renderTarget;this.renderPass.render(n,s)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height)}},XF=class extends Ei{constructor({normalBuffer:n=null,resolutionScale:e=.5,width:t=un.AUTO_SIZE,height:i=un.AUTO_SIZE,resolutionX:r=t,resolutionY:s=i}={}){super("DepthDownsamplingPass");const o=new p$;o.normalBuffer=n,this.fullscreenMaterial=o,this.needsDepthTexture=!0,this.needsSwap=!1,this.renderTarget=new qt(1,1,{minFilter:Ht,magFilter:Ht,depthBuffer:!1,type:Jn}),this.renderTarget.texture.name="DepthDownsamplingPass.Target",this.renderTarget.texture.generateMipmaps=!1;const a=this.resolution=new un(this,r,s,e);a.addEventListener("change",l=>this.setSize(a.baseWidth,a.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}setDepthTexture(n,e=Oi){this.fullscreenMaterial.depthBuffer=n,this.fullscreenMaterial.depthPacking=e}render(n,e,t,i,r){n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height),this.fullscreenMaterial.setSize(n,e)}initialize(n,e,t){const i=n.getContext();if(!(i.getExtension("EXT_color_buffer_float")||i.getExtension("EXT_color_buffer_half_float")))throw new Error("Rendering to float texture is not supported.")}},B$=class extends Ei{constructor({depthPacking:n=ia}={}){super("DepthCopyPass");const e=new f$;e.outputDepthPacking=n,this.fullscreenMaterial=e,this.needsDepthTexture=!0,this.needsSwap=!1,this.renderTarget=new qt(1,1,{type:n===ia?xn:Jn,minFilter:Ht,magFilter:Ht,depthBuffer:!1}),this.renderTarget.texture.name="DepthCopyPass.Target"}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}get depthPacking(){return this.fullscreenMaterial.outputDepthPacking}getDepthPacking(){return this.fullscreenMaterial.outputDepthPacking}setDepthTexture(n,e=Oi){this.fullscreenMaterial.depthBuffer=n,this.fullscreenMaterial.inputDepthPacking=e}render(n,e,t,i,r){n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){this.renderTarget.setSize(n,e)}},Z0=new Float32Array([255/256/256**3,255/256/256**2,255/256/256,255/256]);function V$(n){return(n[0]*Z0[0]+n[1]*Z0[1]+n[2]*Z0[2]+n[3]*Z0[3])/255}var H$=class extends B${constructor({depthPacking:n=ia,mode:e=bp.SINGLE}={}){super({depthPacking:n}),this.name="DepthPickingPass",this.fullscreenMaterial.mode=e,this.pixelBuffer=n===ia?new Uint8Array(4):new Float32Array(4),this.callback=null}readDepth(n){return this.fullscreenMaterial.texelPosition.set(n.x*.5+.5,n.y*.5+.5),new Promise(e=>{this.callback=e})}render(n,e,t,i,r){const s=this.fullscreenMaterial,o=s.mode;if(o===bp.FULL&&super.render(n),this.callback!==null){const a=this.renderTarget,l=this.pixelBuffer,u=a.texture.type!==Jn;let f=0,d=0;if(o===bp.SINGLE)super.render(n);else{const p=s.texelPosition;f=Math.round(p.x*a.width),d=Math.round(p.y*a.height)}n.readRenderTargetPixels(a,f,d,1,1,l),this.callback(u?V$(l):l[0]),this.callback=null}}setSize(n,e){this.fullscreenMaterial.mode===bp.FULL&&super.setSize(n,e)}};function ZD(n,e,t){for(const i of e){const r="$1"+n+i.charAt(0).toUpperCase()+i.slice(1),s=new RegExp("([^\\.])(\\b"+i+"\\b)","g");for(const o of t.entries())o[1]!==null&&t.set(o[0],o[1].replace(s,r))}}function G$(n,e,t){let i=e.getFragmentShader(),r=e.getVertexShader();const s=i!==void 0&&/mainImage/.test(i),o=i!==void 0&&/mainUv/.test(i);if(t.attributes|=e.getAttributes(),i===void 0)throw new Error(`Missing fragment shader (${e.name})`);if(o&&t.attributes&qs.CONVOLUTION)throw new Error(`Effects that transform UVs are incompatible with convolution effects (${e.name})`);if(!s&&!o)throw new Error(`Could not find mainImage or mainUv function (${e.name})`);{const a=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,l=t.shaderParts;let u=l.get(nn.FRAGMENT_HEAD)||"",f=l.get(nn.FRAGMENT_MAIN_UV)||"",d=l.get(nn.FRAGMENT_MAIN_IMAGE)||"",p=l.get(nn.VERTEX_HEAD)||"",m=l.get(nn.VERTEX_MAIN_SUPPORT)||"";const g=new Set,y=new Set;if(o&&(f+=`	${n}MainUv(UV);
`,t.uvTransformation=!0),r!==null&&/mainSupport/.test(r)){const w=/mainSupport *\([\w\s]*?uv\s*?\)/.test(r);m+=`	${n}MainSupport(`,m+=w?`vUv);
`:`);
`;for(const S of r.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(const T of S[1].split(/\s*,\s*/))t.varyings.add(T),g.add(T),y.add(T);for(const S of r.matchAll(a))y.add(S[1])}for(const w of i.matchAll(a))y.add(w[1]);for(const w of e.defines.keys())y.add(w.replace(/\([\w\s,]*\)/g,""));for(const w of e.uniforms.keys())y.add(w);y.delete("while"),y.delete("for"),y.delete("if"),e.uniforms.forEach((w,S)=>t.uniforms.set(n+S.charAt(0).toUpperCase()+S.slice(1),w)),e.defines.forEach((w,S)=>t.defines.set(n+S.charAt(0).toUpperCase()+S.slice(1),w));const x=new Map([["fragment",i],["vertex",r]]);ZD(n,y,t.defines),ZD(n,y,x),i=x.get("fragment"),r=x.get("vertex");const v=e.blendMode;if(t.blendModes.set(v.blendFunction,v),s){e.inputColorSpace!==null&&e.inputColorSpace!==t.colorSpace&&(d+=e.inputColorSpace===ln?`color0 = LinearTosRGB(color0);
	`:`color0 = sRGBToLinear(color0);
	`),e.outputColorSpace!==VF?t.colorSpace=e.outputColorSpace:e.inputColorSpace!==null&&(t.colorSpace=e.inputColorSpace);const w=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;d+=`${n}MainImage(color0, UV, `,t.attributes&qs.DEPTH&&w.test(i)&&(d+="depth, ",t.readDepth=!0),d+=`color1);
	`;const S=n+"BlendOpacity";t.uniforms.set(S,v.opacity),d+=`color0 = blend${v.blendFunction}(color0, color1, ${S});

	`,u+=`uniform float ${S};

`}if(u+=i+`
`,r!==null&&(p+=r+`
`),l.set(nn.FRAGMENT_HEAD,u),l.set(nn.FRAGMENT_MAIN_UV,f),l.set(nn.FRAGMENT_MAIN_IMAGE,d),l.set(nn.VERTEX_HEAD,p),l.set(nn.VERTEX_MAIN_SUPPORT,m),e.extensions!==null)for(const w of e.extensions)t.extensions.add(w)}}var W$=class extends Ei{constructor(n,...e){super("EffectPass"),this.fullscreenMaterial=new S$(null,null,null,n),this.listener=t=>this.handleEvent(t),this.effects=[],this.setEffects(e),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(n){for(const e of this.effects)e.mainScene=n}set mainCamera(n){this.fullscreenMaterial.copyCameraSettings(n);for(const e of this.effects)e.mainCamera=n}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(n){this.fullscreenMaterial.encodeOutput=n}get dithering(){return this.fullscreenMaterial.dithering}set dithering(n){const e=this.fullscreenMaterial;e.dithering=n,e.needsUpdate=!0}setEffects(n){for(const e of this.effects)e.removeEventListener("change",this.listener);this.effects=n.sort((e,t)=>t.attributes-e.attributes);for(const e of this.effects)e.addEventListener("change",this.listener)}updateMaterial(){const n=new J$;let e=0;for(const o of this.effects)if(o.blendMode.blendFunction===wt.DST)n.attributes|=o.getAttributes()&qs.DEPTH;else{if(n.attributes&o.getAttributes()&qs.CONVOLUTION)throw new Error(`Convolution effects cannot be merged (${o.name})`);G$("e"+e++,o,n)}let t=n.shaderParts.get(nn.FRAGMENT_HEAD),i=n.shaderParts.get(nn.FRAGMENT_MAIN_IMAGE),r=n.shaderParts.get(nn.FRAGMENT_MAIN_UV);const s=/\bblend\b/g;for(const o of n.blendModes.values())t+=o.getShaderCode().replace(s,`blend${o.blendFunction}`)+`
`;n.attributes&qs.DEPTH?(n.readDepth&&(i=`float depth = readDepth(UV);

	`+i),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,n.colorSpace===ln&&(i+=`color0 = sRGBToLinear(color0);
	`),n.uvTransformation?(r=`vec2 transformedUv = vUv;
`+r,n.defines.set("UV","transformedUv")):n.defines.set("UV","vUv"),n.shaderParts.set(nn.FRAGMENT_HEAD,t),n.shaderParts.set(nn.FRAGMENT_MAIN_IMAGE,i),n.shaderParts.set(nn.FRAGMENT_MAIN_UV,r);for(const[o,a]of n.shaderParts)a!==null&&n.shaderParts.set(o,a.trim().replace(/^#/,`
#`));this.skipRendering=e===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(n)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(n,e=Oi){this.fullscreenMaterial.depthBuffer=n,this.fullscreenMaterial.depthPacking=e;for(const t of this.effects)t.setDepthTexture(n,e)}render(n,e,t,i,r){for(const s of this.effects)s.update(n,e,i);if(!this.skipRendering||this.renderToScreen){const s=this.fullscreenMaterial;s.inputBuffer=e.texture,s.time+=i*this.timeScale,n.setRenderTarget(this.renderToScreen?null:t),n.render(this.scene,this.camera)}}setSize(n,e){this.fullscreenMaterial.setSize(n,e);for(const t of this.effects)t.setSize(n,e)}initialize(n,e,t){this.renderer=n;for(const i of this.effects)i.initialize(n,e,t);this.updateMaterial(),t!==void 0&&t!==xn&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const n of this.effects)n.removeEventListener("change",this.listener),n.dispose()}handleEvent(n){switch(n.type){case"change":this.recompile();break}}},Bx=class extends Ei{constructor({kernelSize:n=yd.MEDIUM,resolutionScale:e=.5,width:t=un.AUTO_SIZE,height:i=un.AUTO_SIZE,resolutionX:r=t,resolutionY:s=i}={}){super("KawaseBlurPass"),this.renderTargetA=new qt(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const o=this.resolution=new un(this,r,s,e);o.addEventListener("change",a=>this.setSize(o.baseWidth,o.baseHeight)),this._blurMaterial=new r$,this._blurMaterial.kernelSize=n,this.copyMaterial=new GF}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(n){this._blurMaterial=n}get dithering(){return this.copyMaterial.dithering}set dithering(n){this.copyMaterial.dithering=n}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(n){this.blurMaterial.kernelSize=n}get width(){return this.resolution.width}set width(n){this.resolution.preferredWidth=n}get height(){return this.resolution.height}set height(n){this.resolution.preferredHeight=n}get scale(){return this.blurMaterial.scale}set scale(n){this.blurMaterial.scale=n}getScale(){return this.blurMaterial.scale}setScale(n){this.blurMaterial.scale=n}getKernelSize(){return this.kernelSize}setKernelSize(n){this.kernelSize=n}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}render(n,e,t,i,r){const s=this.scene,o=this.camera,a=this.renderTargetA,l=this.renderTargetB,u=this.blurMaterial,f=u.kernelSequence;let d=e;this.fullscreenMaterial=u;for(let p=0,m=f.length;p<m;++p){const g=p&1?l:a;u.kernel=f[p],u.inputBuffer=d.texture,n.setRenderTarget(g),n.render(s,o),d=g}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=d.texture,n.setRenderTarget(this.renderToScreen?null:t),n.render(s,o)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e);const i=t.width,r=t.height;this.renderTargetA.setSize(i,r),this.renderTargetB.setSize(i,r),this.blurMaterial.setSize(n,e)}initialize(n,e,t){t!==void 0&&(this.renderTargetA.texture.type=t,this.renderTargetB.texture.type=t,t!==xn?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):qa(n)===ln&&(xi(this.renderTargetA.texture,ln),xi(this.renderTargetB.texture,ln)))}static get AUTO_SIZE(){return un.AUTO_SIZE}},j$=class extends Ei{constructor({renderTarget:n,luminanceRange:e,colorOutput:t,resolutionScale:i=1,width:r=un.AUTO_SIZE,height:s=un.AUTO_SIZE,resolutionX:o=r,resolutionY:a=s}={}){super("LuminancePass"),this.fullscreenMaterial=new E$(t,e),this.needsSwap=!1,this.renderTarget=n,this.renderTarget===void 0&&(this.renderTarget=new qt(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target");const l=this.resolution=new un(this,o,a,i);l.addEventListener("change",u=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(n,e,t,i,r){const s=this.fullscreenMaterial;s.inputBuffer=e.texture,n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height)}initialize(n,e,t){t!==void 0&&t!==xn&&(this.renderTarget.texture.type=t,this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},X$=class extends Ei{constructor(n,e){super("MaskPass",n,e),this.needsSwap=!1,this.clearPass=new Og(!1,!1,!0),this.inverse=!1}set mainScene(n){this.scene=n}set mainCamera(n){this.camera=n}get inverted(){return this.inverse}set inverted(n){this.inverse=n}get clear(){return this.clearPass.enabled}set clear(n){this.clearPass.enabled=n}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(n){this.inverted=n}render(n,e,t,i,r){const s=n.getContext(),o=n.state.buffers,a=this.scene,l=this.camera,u=this.clearPass,f=this.inverted?0:1,d=1-f;o.color.setMask(!1),o.depth.setMask(!1),o.color.setLocked(!0),o.depth.setLocked(!0),o.stencil.setTest(!0),o.stencil.setOp(s.REPLACE,s.REPLACE,s.REPLACE),o.stencil.setFunc(s.ALWAYS,f,4294967295),o.stencil.setClear(d),o.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?u.render(n,null):(u.render(n,e),u.render(n,t))),this.renderToScreen?(n.setRenderTarget(null),n.render(a,l)):(n.setRenderTarget(e),n.render(a,l),n.setRenderTarget(t),n.render(a,l)),o.color.setLocked(!1),o.depth.setLocked(!1),o.stencil.setLocked(!1),o.stencil.setFunc(s.EQUAL,1,4294967295),o.stencil.setOp(s.KEEP,s.KEEP,s.KEEP),o.stencil.setLocked(!0)}},Y$=class extends Ei{constructor(){super("MipmapBlurPass"),this.needsSwap=!1,this.renderTarget=new qt(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Upsampling.Mipmap0",this.downsamplingMipmaps=[],this.upsamplingMipmaps=[],this.downsamplingMaterial=new y$,this.upsamplingMaterial=new N$,this.resolution=new le}get texture(){return this.renderTarget.texture}get levels(){return this.downsamplingMipmaps.length}set levels(n){if(this.levels!==n){const e=this.renderTarget;this.dispose(),this.downsamplingMipmaps=[],this.upsamplingMipmaps=[];for(let t=0;t<n;++t){const i=e.clone();i.texture.name="Downsampling.Mipmap"+t,this.downsamplingMipmaps.push(i)}this.upsamplingMipmaps.push(e);for(let t=1,i=n-1;t<i;++t){const r=e.clone();r.texture.name="Upsampling.Mipmap"+t,this.upsamplingMipmaps.push(r)}this.setSize(this.resolution.x,this.resolution.y)}}get radius(){return this.upsamplingMaterial.radius}set radius(n){this.upsamplingMaterial.radius=n}render(n,e,t,i,r){const{scene:s,camera:o}=this,{downsamplingMaterial:a,upsamplingMaterial:l}=this,{downsamplingMipmaps:u,upsamplingMipmaps:f}=this;let d=e;this.fullscreenMaterial=a;for(let p=0,m=u.length;p<m;++p){const g=u[p];a.setSize(d.width,d.height),a.inputBuffer=d.texture,n.setRenderTarget(g),n.render(s,o),d=g}this.fullscreenMaterial=l;for(let p=f.length-1;p>=0;--p){const m=f[p];l.setSize(d.width,d.height),l.inputBuffer=d.texture,l.supportBuffer=u[p].texture,n.setRenderTarget(m),n.render(s,o),d=m}}setSize(n,e){const t=this.resolution;t.set(n,e);let i=t.width,r=t.height;for(let s=0,o=this.downsamplingMipmaps.length;s<o;++s)i=Math.round(i*.5),r=Math.round(r*.5),this.downsamplingMipmaps[s].setSize(i,r),s<this.upsamplingMipmaps.length&&this.upsamplingMipmaps[s].setSize(i,r)}initialize(n,e,t){if(t!==void 0){const i=this.downsamplingMipmaps.concat(this.upsamplingMipmaps);for(const r of i)r.texture.type=t;if(t!==xn)this.downsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.upsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1";else if(qa(n)===ln)for(const r of i)xi(r.texture,ln)}}dispose(){super.dispose();for(const n of this.downsamplingMipmaps.concat(this.upsamplingMipmaps))n.dispose()}},q$=class extends Ei{constructor(n,e,{renderTarget:t,resolutionScale:i=1,width:r=un.AUTO_SIZE,height:s=un.AUTO_SIZE,resolutionX:o=r,resolutionY:a=s}={}){super("NormalPass"),this.needsSwap=!1,this.renderPass=new _d(n,e,new vC);const l=this.renderPass;l.ignoreBackground=!0,l.skipShadowMapUpdate=!0;const u=l.getClearPass();u.overrideClearColor=new Oe(7829503),u.overrideClearAlpha=1,this.renderTarget=t,this.renderTarget===void 0&&(this.renderTarget=new qt(1,1,{minFilter:Ht,magFilter:Ht}),this.renderTarget.texture.name="NormalPass.Target");const f=this.resolution=new un(this,o,a,i);f.addEventListener("change",d=>this.setSize(f.baseWidth,f.baseHeight))}set mainScene(n){this.renderPass.mainScene=n}set mainCamera(n){this.renderPass.mainCamera=n}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}render(n,e,t,i,r){const s=this.renderToScreen?null:this.renderTarget;this.renderPass.render(n,s,s)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height)}},xo=class extends Ei{constructor(n,e="inputBuffer"){super("ShaderPass"),this.fullscreenMaterial=n,this.input=e}setInput(n){this.input=n}render(n,e,t,i,r){const s=this.fullscreenMaterial.uniforms;e!==null&&s!==void 0&&s[this.input]!==void 0&&(s[this.input].value=e.texture),n.setRenderTarget(this.renderToScreen?null:t),n.render(this.scene,this.camera)}initialize(n,e,t){t!==void 0&&t!==xn&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},ww=1/1e3,Z$=1e3,$$=class{constructor(){this.startTime=performance.now(),this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(n){typeof document<"u"&&document.hidden!==void 0&&(n?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=n)}get delta(){return this._delta*ww}get fixedDelta(){return this._fixedDelta*ww}set fixedDelta(n){this._fixedDelta=n*Z$}get elapsed(){return this._elapsed*ww}update(n){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=(n!==void 0?n:performance.now())-this.startTime,this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()-this.startTime}handleEvent(n){document.hidden||(this.currentTime=performance.now()-this.startTime)}dispose(){this.autoReset=!1}},K$=class{constructor(e=null,{depthBuffer:t=!0,stencilBuffer:i=!1,multisampling:r=0,frameBufferType:s}={}){this.renderer=null,this.inputBuffer=this.createBuffer(t,i,s,r),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new jF,this.depthTexture=null,this.passes=[],this.timer=new $$,this.autoRenderToScreen=!0,this.setRenderer(e)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(e){const t=this.inputBuffer,i=this.multisampling;i>0&&e>0?(this.inputBuffer.samples=e,this.outputBuffer.samples=e,this.inputBuffer.dispose(),this.outputBuffer.dispose()):i!==e&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(t.depthBuffer,t.stencilBuffer,t.texture.type,e),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(e){if(this.renderer=e,e!==null){const t=e.getSize(new le),i=e.getContext().getContextAttributes().alpha,r=this.inputBuffer.texture.type;r===xn&&qa(e)===ln&&(xi(this.inputBuffer.texture,ln),xi(this.outputBuffer.texture,ln),this.inputBuffer.dispose(),this.outputBuffer.dispose()),e.autoClear=!1,this.setSize(t.width,t.height);for(const s of this.passes)s.initialize(e,i,r)}}replaceRenderer(e,t=!0){const i=this.renderer,r=i.domElement.parentNode;return this.setRenderer(e),t&&r!==null&&(r.removeChild(i.domElement),r.appendChild(e.domElement)),i}createDepthTexture(){const e=this.depthTexture=new Rx;return this.inputBuffer.depthTexture=e,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(e.format=ru,e.type=Wl):e.type=Ia,e}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const e of this.passes)e.setDepthTexture(null)}}createBuffer(e,t,i,r){const s=this.renderer,o=s===null?new le:s.getDrawingBufferSize(new le),a={minFilter:vt,magFilter:vt,stencilBuffer:t,depthBuffer:e,type:i},l=new qt(o.width,o.height,a);return r>0&&(l.ignoreDepthForMultisampleCopy=!1,l.samples=r),i===xn&&qa(s)===ln&&xi(l.texture,ln),l.texture.name="EffectComposer.Buffer",l.texture.generateMipmaps=!1,l}setMainScene(e){for(const t of this.passes)t.mainScene=e}setMainCamera(e){for(const t of this.passes)t.mainCamera=e}addPass(e,t){const i=this.passes,r=this.renderer,s=r.getDrawingBufferSize(new le),o=r.getContext().getContextAttributes().alpha,a=this.inputBuffer.texture.type;if(e.setRenderer(r),e.setSize(s.width,s.height),e.initialize(r,o,a),this.autoRenderToScreen&&(i.length>0&&(i[i.length-1].renderToScreen=!1),e.renderToScreen&&(this.autoRenderToScreen=!1)),t!==void 0?i.splice(t,0,e):i.push(e),this.autoRenderToScreen&&(i[i.length-1].renderToScreen=!0),e.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){const l=this.createDepthTexture();for(e of i)e.setDepthTexture(l)}else e.setDepthTexture(this.depthTexture)}removePass(e){const t=this.passes,i=t.indexOf(e);if(i!==-1&&t.splice(i,1).length>0){if(this.depthTexture!==null){const o=(l,u)=>l||u.needsDepthTexture;t.reduce(o,!1)||(e.getDepthTexture()===this.depthTexture&&e.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&i===t.length&&(e.renderToScreen=!1,t.length>0&&(t[t.length-1].renderToScreen=!0))}}removeAllPasses(){const e=this.passes;this.deleteDepthTexture(),e.length>0&&(this.autoRenderToScreen&&(e[e.length-1].renderToScreen=!1),this.passes=[])}render(e){const t=this.renderer,i=this.copyPass;let r=this.inputBuffer,s=this.outputBuffer,o=!1,a,l,u;e===void 0&&(this.timer.update(),e=this.timer.delta);for(const f of this.passes)f.enabled&&(f.render(t,r,s,e,o),f.needsSwap&&(o&&(i.renderToScreen=f.renderToScreen,a=t.getContext(),l=t.state.buffers.stencil,l.setFunc(a.NOTEQUAL,1,4294967295),i.render(t,r,s,e,o),l.setFunc(a.EQUAL,1,4294967295)),u=r,r=s,s=u),f instanceof X$?o=!0:f instanceof z$&&(o=!1))}setSize(e,t,i){const r=this.renderer,s=r.getSize(new le);(e===void 0||t===void 0)&&(e=s.width,t=s.height),(s.width!==e||s.height!==t)&&r.setSize(e,t,i);const o=r.getDrawingBufferSize(new le);this.inputBuffer.setSize(o.width,o.height),this.outputBuffer.setSize(o.width,o.height);for(const a of this.passes)a.setSize(o.width,o.height)}reset(){const e=this.timer.autoReset;this.dispose(),this.autoRenderToScreen=!0,this.timer.autoReset=e}dispose(){for(const e of this.passes)e.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}},J$=class{constructor(){this.shaderParts=new Map([[nn.FRAGMENT_HEAD,null],[nn.FRAGMENT_MAIN_UV,null],[nn.FRAGMENT_MAIN_IMAGE,null],[nn.VERTEX_HEAD,null],[nn.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=qs.NONE,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=qh}},NC=class extends Set{constructor(n,e=10){super(),this.l=e,this.exclusive=!1,n!==void 0&&this.set(n)}get layer(){return this.l}set layer(n){const e=this.l;for(const t of this)t.layers.disable(e),t.layers.enable(n);this.l=n}getLayer(){return this.layer}setLayer(n){this.layer=n}isExclusive(){return this.exclusive}setExclusive(n){this.exclusive=n}clear(){const n=this.layer;for(const e of this)e.layers.disable(n);return super.clear()}set(n){this.clear();for(const e of n)this.add(e);return this}indexOf(n){return this.has(n)?0:-1}add(n){return this.exclusive?n.layers.set(this.layer):n.layers.enable(this.layer),super.add(n)}delete(n){return this.has(n)&&n.layers.disable(this.layer),super.delete(n)}toggle(n){let e;return this.has(n)?(this.delete(n),e=!1):(this.add(n),e=!0),e}setVisible(n){for(const e of this)n?e.layers.enable(0):e.layers.disable(0);return this}},Q$="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y,opacity);}",eK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,min(y.a,opacity));}",tK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y)*0.5,opacity);}",nK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.rg,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",iK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(step(0.0,y)*(1.0-min(vec4(1.0),(1.0-x)/y)),vec4(1.0),step(1.0,x));return mix(x,z,opacity);}",rK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=step(0.0,x)*mix(min(vec4(1.0),x/max(1.0-y,1e-9)),vec4(1.0),step(1.0,y));return mix(x,z,opacity);}",sK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x,y),opacity);}",oK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,abs(x-y),opacity);}",aK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x/max(y,1e-12),opacity);}",lK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y-2.0*x*y),opacity);}",uK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 a=min(x,1.0),b=min(y,1.0);vec4 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,y));return mix(x,z,opacity);}",cK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,step(1.0,x+y),opacity);}",fK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.r,xHSL.gb));return vec4(mix(x.rgb,z,opacity),y.a);}",hK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-y,opacity);}",dK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y*(1.0-x),opacity);}",pK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x,y),opacity);}",mK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(y+x-1.0,0.0,1.0),opacity);}",gK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x+y,1.0),opacity);}",vK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(2.0*y+x-1.0,0.0,1.0),opacity);}",yK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.rg,yHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",_K="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x*y,opacity);}",xK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-abs(1.0-x-y),opacity);}",SK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}",wK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(2.0*y*x,1.0-2.0*(1.0-y)*(1.0-x),step(0.5,x));return mix(x,z,opacity);}",MK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 z=mix(mix(y2,x,step(0.5*x,y)),max(vec4(0.0),y2-1.0),step(x,(y2-1.0)));return mix(x,z,opacity);}",TK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(min(x*x/max(1.0-y,1e-12),1.0),y,step(1.0,y));return mix(x,z,opacity);}",EK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.r,yHSL.g,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",bK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y-min(x*y,1.0),opacity);}",CK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 w=step(0.5,y);vec4 z=mix(x-(1.0-y2)*x*(1.0-x),mix(x+(y2-1.0)*(sqrt(x)-x),x+(y2-1.0)*x*((16.0*x-12.0)*x+3.0),w*(1.0-step(0.25,x))),w);return mix(x,z,opacity);}",PK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}",AK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x+y-1.0,0.0),opacity);}",RK="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(max(1.0-min((1.0-x)/(2.0*y),1.0),0.0),min(x/(2.0*(1.0-y)),1.0),step(0.5,y));return mix(x,z,opacity);}",DK=new Map([[wt.ADD,Q$],[wt.ALPHA,eK],[wt.AVERAGE,tK],[wt.COLOR,nK],[wt.COLOR_BURN,iK],[wt.COLOR_DODGE,rK],[wt.DARKEN,sK],[wt.DIFFERENCE,oK],[wt.DIVIDE,aK],[wt.DST,null],[wt.EXCLUSION,lK],[wt.HARD_LIGHT,uK],[wt.HARD_MIX,cK],[wt.HUE,fK],[wt.INVERT,hK],[wt.INVERT_RGB,dK],[wt.LIGHTEN,pK],[wt.LINEAR_BURN,mK],[wt.LINEAR_DODGE,gK],[wt.LINEAR_LIGHT,vK],[wt.LUMINOSITY,yK],[wt.MULTIPLY,_K],[wt.NEGATION,xK],[wt.NORMAL,SK],[wt.OVERLAY,wK],[wt.PIN_LIGHT,MK],[wt.REFLECT,TK],[wt.SATURATION,EK],[wt.SCREEN,bK],[wt.SOFT_LIGHT,CK],[wt.SRC,PK],[wt.SUBTRACT,AK],[wt.VIVID_LIGHT,RK]]),LK=class extends eo{constructor(n,e=1){super(),this._blendFunction=n,this.opacity=new ie(e)}getOpacity(){return this.opacity.value}setOpacity(n){this.opacity.value=n}get blendFunction(){return this._blendFunction}set blendFunction(n){this._blendFunction=n,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(n){this.blendFunction=n}getShaderCode(){return DK.get(this.blendFunction)}},cr=class extends eo{constructor(n,e,{attributes:t=qs.NONE,blendFunction:i=wt.NORMAL,defines:r=new Map,uniforms:s=new Map,extensions:o=null,vertexShader:a=null}={}){super(),this.name=n,this.renderer=null,this.attributes=t,this.fragmentShader=e,this.vertexShader=a,this.defines=r,this.uniforms=s,this.extensions=o,this.blendMode=new LK(i),this.blendMode.addEventListener("change",l=>this.setChanged()),this._inputColorSpace=qh,this._outputColorSpace=VF}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(n){this._inputColorSpace=n,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(n){this._outputColorSpace=n,this.setChanged()}set mainScene(n){}set mainCamera(n){}getName(){return this.name}setRenderer(n){this.renderer=n}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(n){this.attributes=n,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(n){this.fragmentShader=n,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(n){this.vertexShader=n,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(n,e=Oi){}update(n,e,t){}setSize(n,e){}initialize(n,e,t){}dispose(){for(const n of Object.keys(this)){const e=this[n];(e instanceof qt||e instanceof Ti||e instanceof bn||e instanceof Ei)&&this[n].dispose()}}},IK=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=texture2D(map,uv)*intensity;}`,kK=class extends cr{constructor({blendFunction:n=wt.SCREEN,luminanceThreshold:e=.9,luminanceSmoothing:t=.025,mipmapBlur:i=!1,intensity:r=1,radius:s=.85,levels:o=8,kernelSize:a=yd.LARGE,resolutionScale:l=.5,width:u=un.AUTO_SIZE,height:f=un.AUTO_SIZE,resolutionX:d=u,resolutionY:p=f}={}){super("BloomEffect",IK,{blendFunction:n,uniforms:new Map([["map",new ie(null)],["intensity",new ie(r)]])}),this.renderTarget=new qt(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.blurPass=new Bx({kernelSize:a}),this.luminancePass=new j$({colorOutput:!0}),this.luminanceMaterial.threshold=e,this.luminanceMaterial.smoothing=t,this.mipmapBlurPass=new Y$,this.mipmapBlurPass.enabled=i,this.mipmapBlurPass.radius=s,this.mipmapBlurPass.levels=o,this.uniforms.get("map").value=i?this.mipmapBlurPass.texture:this.renderTarget.texture;const m=this.resolution=new un(this,d,p,l);m.addEventListener("change",g=>this.setSize(m.baseWidth,m.baseHeight))}get texture(){return this.mipmapBlurPass.enabled?this.mipmapBlurPass.texture:this.renderTarget.texture}getTexture(){return this.texture}getResolution(){return this.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(n){this.resolution.preferredWidth=n}get height(){return this.resolution.height}set height(n){this.resolution.preferredHeight=n}get dithering(){return this.blurPass.dithering}set dithering(n){this.blurPass.dithering=n}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(n){this.blurPass.kernelSize=n}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(n){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(n){this.uniforms.get("intensity").value=n}getIntensity(){return this.intensity}setIntensity(n){this.intensity=n}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}update(n,e,t){const i=this.renderTarget,r=this.luminancePass;r.enabled?(r.render(n,e),this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(n,r.renderTarget):this.blurPass.render(n,r.renderTarget,i)):this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(n,e):this.blurPass.render(n,e,i)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height),this.blurPass.resolution.copy(t),this.luminancePass.setSize(n,e),this.mipmapBlurPass.setSize(n,e)}initialize(n,e,t){this.blurPass.initialize(n,e,t),this.luminancePass.initialize(n,e,t),this.mipmapBlurPass.initialize(n,e,t),t!==void 0&&(this.renderTarget.texture.type=t,qa(n)===ln&&xi(this.renderTarget.texture,ln))}},OK="void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=vec4(vec3(average(inputColor.rgb)),inputColor.a);}",NK=class extends cr{constructor(n){super("ColorAverageEffect",OK,{blendFunction:n})}},UK=`#ifdef RADIAL_MODULATION
uniform float modulationOffset;
#endif
varying float vActive;varying vec2 vUvR;varying vec2 vUvB;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 ra=inputColor.ra;vec2 ba=inputColor.ba;
#ifdef RADIAL_MODULATION
const vec2 center=vec2(0.5);float d=distance(uv,center)*2.0;d=max(d-modulationOffset,0.0);if(vActive>0.0&&d>0.0){ra=texture2D(inputBuffer,mix(uv,vUvR,d)).ra;ba=texture2D(inputBuffer,mix(uv,vUvB,d)).ba;}
#else
if(vActive>0.0){ra=texture2D(inputBuffer,vUvR).ra;ba=texture2D(inputBuffer,vUvB).ba;}
#endif
outputColor=vec4(ra.x,inputColor.g,ba.x,max(max(ra.y,ba.y),inputColor.a));}`,FK="uniform vec2 offset;varying float vActive;varying vec2 vUvR;varying vec2 vUvB;void mainSupport(const in vec2 uv){vec2 shift=offset*vec2(1.0,aspect);vActive=(shift.x!=0.0||shift.y!=0.0)?1.0:0.0;vUvR=uv+shift;vUvB=uv-shift;}",zK=class extends cr{constructor({offset:n=new le(.001,5e-4),radialModulation:e=!1,modulationOffset:t=.15}={}){super("ChromaticAberrationEffect",UK,{vertexShader:FK,attributes:qs.CONVOLUTION,uniforms:new Map([["offset",new ie(n)],["modulationOffset",new ie(t)]])}),this.radialModulation=e}get offset(){return this.uniforms.get("offset").value}set offset(n){this.uniforms.get("offset").value=n}get radialModulation(){return this.defines.has("RADIAL_MODULATION")}set radialModulation(n){n?this.defines.set("RADIAL_MODULATION","1"):this.defines.delete("RADIAL_MODULATION"),this.setChanged()}get modulationOffset(){return this.uniforms.get("modulationOffset").value}set modulationOffset(n){this.uniforms.get("modulationOffset").value=n}getOffset(){return this.offset}setOffset(n){this.offset=n}},BK=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D nearColorBuffer;uniform mediump sampler2D farColorBuffer;
#else
uniform lowp sampler2D nearColorBuffer;uniform lowp sampler2D farColorBuffer;
#endif
uniform lowp sampler2D nearCoCBuffer;uniform float scale;void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){vec4 colorNear=texture2D(nearColorBuffer,uv);vec4 colorFar=texture2D(farColorBuffer,uv);float cocNear=texture2D(nearCoCBuffer,uv).r;cocNear=min(cocNear*scale,1.0);vec4 result=inputColor*(1.0-colorFar.a)+colorFar;result=mix(result,colorNear,cocNear);outputColor=result;}`,VK=class extends cr{constructor(n,{blendFunction:e,worldFocusDistance:t,worldFocusRange:i,focusDistance:r=0,focalLength:s=.1,focusRange:o=s,bokehScale:a=1,resolutionScale:l=1,width:u=un.AUTO_SIZE,height:f=un.AUTO_SIZE,resolutionX:d=u,resolutionY:p=f}={}){super("DepthOfFieldEffect",BK,{blendFunction:e,attributes:qs.DEPTH,uniforms:new Map([["nearColorBuffer",new ie(null)],["farColorBuffer",new ie(null)],["nearCoCBuffer",new ie(null)],["scale",new ie(1)]])}),this.camera=n,this.renderTarget=new qt(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="DoF.Intermediate",this.renderTargetMasked=this.renderTarget.clone(),this.renderTargetMasked.texture.name="DoF.Masked.Far",this.renderTargetNear=this.renderTarget.clone(),this.renderTargetNear.texture.name="DoF.Bokeh.Near",this.uniforms.get("nearColorBuffer").value=this.renderTargetNear.texture,this.renderTargetFar=this.renderTarget.clone(),this.renderTargetFar.texture.name="DoF.Bokeh.Far",this.uniforms.get("farColorBuffer").value=this.renderTargetFar.texture,this.renderTargetCoC=this.renderTarget.clone(),this.renderTargetCoC.texture.name="DoF.CoC",this.renderTargetCoCBlurred=this.renderTargetCoC.clone(),this.renderTargetCoCBlurred.texture.name="DoF.CoC.Blurred",this.uniforms.get("nearCoCBuffer").value=this.renderTargetCoCBlurred.texture,this.cocPass=new xo(new QZ(n));const m=this.cocMaterial;m.focusDistance=r,m.focusRange=o,t!==void 0&&(m.worldFocusDistance=t),i!==void 0&&(m.worldFocusRange=i),this.blurPass=new Bx({resolutionScale:l,resolutionX:d,resolutionY:p,kernelSize:yd.MEDIUM}),this.maskPass=new xo(new C$(this.renderTargetCoC.texture));const g=this.maskPass.fullscreenMaterial;g.maskFunction=Kp.MULTIPLY,g.colorChannel=dh.GREEN,this.bokehNearBasePass=new xo(new Y0(!1,!0)),this.bokehNearBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehNearFillPass=new xo(new Y0(!0,!0)),this.bokehNearFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehFarBasePass=new xo(new Y0(!1,!1)),this.bokehFarBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.bokehFarFillPass=new xo(new Y0(!0,!1)),this.bokehFarFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.target=null;const y=this.resolution=new un(this,d,p,l);y.addEventListener("change",x=>this.setSize(y.baseWidth,y.baseHeight)),this.bokehScale=a}set mainCamera(n){this.camera=n,this.cocMaterial.copyCameraSettings(n)}get cocTexture(){return this.renderTargetCoC.texture}get cocMaterial(){return this.cocPass.fullscreenMaterial}get circleOfConfusionMaterial(){return this.cocMaterial}getCircleOfConfusionMaterial(){return this.circleOfConfusionMaterial}getBlurPass(){return this.blurPass}getResolution(){return this.resolution}get bokehScale(){return this.uniforms.get("scale").value}set bokehScale(n){this.bokehNearBasePass.fullscreenMaterial.scale=n,this.bokehNearFillPass.fullscreenMaterial.scale=n,this.bokehFarBasePass.fullscreenMaterial.scale=n,this.bokehFarFillPass.fullscreenMaterial.scale=n,this.maskPass.fullscreenMaterial.strength=n,this.uniforms.get("scale").value=n}getBokehScale(){return this.bokehScale}setBokehScale(n){this.bokehScale=n}getTarget(){return this.target}setTarget(n){this.target=n}calculateFocusDistance(n){const e=this.camera,t=e.position.distanceTo(n);return lc(-t,e.near,e.far)}setDepthTexture(n,e=Oi){this.circleOfConfusionMaterial.depthBuffer=n,this.circleOfConfusionMaterial.depthPacking=e}update(n,e,t){const i=this.renderTarget,r=this.renderTargetCoC,s=this.renderTargetCoCBlurred,o=this.renderTargetMasked;if(this.target!==null){const a=this.calculateFocusDistance(this.target);this.cocMaterial.focusDistance=a}this.cocPass.render(n,null,r),this.blurPass.render(n,r,s),this.maskPass.render(n,e,o),this.bokehFarBasePass.render(n,o,i),this.bokehFarFillPass.render(n,i,this.renderTargetFar),this.bokehNearBasePass.render(n,e,i),this.bokehNearFillPass.render(n,i,this.renderTargetNear)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e);const i=t.width,r=t.height;this.cocPass.setSize(n,e),this.blurPass.setSize(n,e),this.maskPass.setSize(n,e),this.renderTargetCoC.setSize(n,e),this.renderTargetMasked.setSize(n,e),this.renderTarget.setSize(i,r),this.renderTargetNear.setSize(i,r),this.renderTargetFar.setSize(i,r),this.renderTargetCoCBlurred.setSize(i,r),this.bokehNearBasePass.fullscreenMaterial.setSize(n,e),this.bokehNearFillPass.fullscreenMaterial.setSize(n,e),this.bokehFarBasePass.fullscreenMaterial.setSize(n,e),this.bokehFarFillPass.fullscreenMaterial.setSize(n,e)}initialize(n,e,t){this.cocPass.initialize(n,e,t),this.maskPass.initialize(n,e,t),this.bokehNearBasePass.initialize(n,e,t),this.bokehNearFillPass.initialize(n,e,t),this.bokehFarBasePass.initialize(n,e,t),this.bokehFarFillPass.initialize(n,e,t),this.blurPass.initialize(n,e,xn);const i=this.maskPass.fullscreenMaterial;i.maskFunction=e?Kp.MULTIPLY:Kp.MULTIPLY_RGB_SET_ALPHA,t!==void 0&&(this.renderTarget.texture.type=t,this.renderTargetNear.texture.type=t,this.renderTargetFar.texture.type=t,this.renderTargetMasked.texture.type=t,qa(n)===ln&&(xi(this.renderTarget.texture,ln),xi(this.renderTargetNear.texture,ln),xi(this.renderTargetFar.texture,ln),xi(this.renderTargetMasked.texture,ln)))}};function HK(n,e,t){const i=new Map([[Mx,1],[Zb,1],[$b,2],[Dn,4]]);let r;if(i.has(e)||console.error("Invalid noise texture format"),t===xn){r=new Uint8Array(n*i.get(e));for(let s=0,o=r.length;s<o;++s)r[s]=Math.random()*255+.5}else{r=new Float32Array(n*i.get(e));for(let s=0,o=r.length;s<o;++s)r[s]=Math.random()}return r}var GT=class extends Ua{constructor(n,e,t=Mx,i=xn){super(HK(n*e,t,i),n,e,t,i),this.needsUpdate=!0}},GK="uniform lowp sampler2D perturbationMap;uniform bool active;uniform float columns;uniform float random;uniform vec2 seeds;uniform vec2 distortion;void mainUv(inout vec2 uv){if(active){if(uv.y<distortion.x+columns&&uv.y>distortion.x-columns*random){float sx=clamp(ceil(seeds.x),0.0,1.0);uv.y=sx*(1.0-(uv.y+distortion.y))+(1.0-sx)*distortion.y;}if(uv.x<distortion.y+columns&&uv.x>distortion.y-columns*random){float sy=clamp(ceil(seeds.y),0.0,1.0);uv.x=sy*distortion.x+(1.0-sy)*(1.0-(uv.x+distortion.x));}vec2 normal=texture2D(perturbationMap,uv*random*random).rg;uv+=normal*seeds*(random*0.2);}}",$0="Glitch.Generated";function Lr(n,e){return n+Math.random()*(e-n)}var WK=class extends cr{constructor({chromaticAberrationOffset:n=null,delay:e=new le(1.5,3.5),duration:t=new le(.6,1),strength:i=new le(.3,1),columns:r=.05,ratio:s=.85,perturbationMap:o=null,dtSize:a=64}={}){if(super("GlitchEffect",GK,{uniforms:new Map([["perturbationMap",new ie(null)],["columns",new ie(r)],["active",new ie(!1)],["random",new ie(1)],["seeds",new ie(new le)],["distortion",new ie(new le)]])}),o===null){const l=new GT(a,a,Dn);l.name=$0,this.perturbationMap=l}else this.perturbationMap=o;this.time=0,this.distortion=this.uniforms.get("distortion").value,this.delay=e,this.duration=t,this.breakPoint=new le(Lr(this.delay.x,this.delay.y),Lr(this.duration.x,this.duration.y)),this.strength=i,this.mode=Qu.SPORADIC,this.ratio=s,this.chromaticAberrationOffset=n}get seeds(){return this.uniforms.get("seeds").value}get active(){return this.uniforms.get("active").value}isActive(){return this.active}get minDelay(){return this.delay.x}set minDelay(n){this.delay.x=n}getMinDelay(){return this.delay.x}setMinDelay(n){this.delay.x=n}get maxDelay(){return this.delay.y}set maxDelay(n){this.delay.y=n}getMaxDelay(){return this.delay.y}setMaxDelay(n){this.delay.y=n}get minDuration(){return this.duration.x}set minDuration(n){this.duration.x=n}getMinDuration(){return this.duration.x}setMinDuration(n){this.duration.x=n}get maxDuration(){return this.duration.y}set maxDuration(n){this.duration.y=n}getMaxDuration(){return this.duration.y}setMaxDuration(n){this.duration.y=n}get minStrength(){return this.strength.x}set minStrength(n){this.strength.x=n}getMinStrength(){return this.strength.x}setMinStrength(n){this.strength.x=n}get maxStrength(){return this.strength.y}set maxStrength(n){this.strength.y=n}getMaxStrength(){return this.strength.y}setMaxStrength(n){this.strength.y=n}getMode(){return this.mode}setMode(n){this.mode=n}getGlitchRatio(){return 1-this.ratio}setGlitchRatio(n){this.ratio=Math.min(Math.max(1-n,0),1)}get columns(){return this.uniforms.get("columns").value}set columns(n){this.uniforms.get("columns").value=n}getGlitchColumns(){return this.columns}setGlitchColumns(n){this.columns=n}getChromaticAberrationOffset(){return this.chromaticAberrationOffset}setChromaticAberrationOffset(n){this.chromaticAberrationOffset=n}get perturbationMap(){return this.uniforms.get("perturbationMap").value}set perturbationMap(n){const e=this.perturbationMap;e!==null&&e.name===$0&&e.dispose(),n.minFilter=n.magFilter=Ht,n.wrapS=n.wrapT=Xa,n.generateMipmaps=!1,this.uniforms.get("perturbationMap").value=n}getPerturbationMap(){return this.perturbationMap}setPerturbationMap(n){this.perturbationMap=n}generatePerturbationMap(n=64){const e=new GT(n,n,Dn);return e.name=$0,e}update(n,e,t){const i=this.mode,r=this.breakPoint,s=this.chromaticAberrationOffset,o=this.strength;let a=this.time,l=!1,u=0,f=0,d;i!==Qu.DISABLED&&(i===Qu.SPORADIC&&(a+=t,d=a>r.x,a>=r.x+r.y&&(r.set(Lr(this.delay.x,this.delay.y),Lr(this.duration.x,this.duration.y)),a=0)),u=Math.random(),this.uniforms.get("random").value=u,d&&u>this.ratio||i===Qu.CONSTANT_WILD?(l=!0,u*=o.y*.03,f=Lr(-Math.PI,Math.PI),this.seeds.set(Lr(-o.y,o.y),Lr(-o.y,o.y)),this.distortion.set(Lr(0,1),Lr(0,1))):(d||i===Qu.CONSTANT_MILD)&&(l=!0,u*=o.x*.03,f=Lr(-Math.PI,Math.PI),this.seeds.set(Lr(-o.x,o.x),Lr(-o.x,o.x)),this.distortion.set(Lr(0,1),Lr(0,1))),this.time=a),s!==null&&(l?s.set(Math.cos(f),Math.sin(f)).multiplyScalar(u):s.set(0,0)),this.uniforms.get("active").value=l}dispose(){const n=this.perturbationMap;n!==null&&n.name===$0&&n.dispose()}},jK=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=texture2D(map,uv);}`,Mw=new N,$D=new mt,XK=class extends cr{constructor(n,e,{blendFunction:t=wt.SCREEN,samples:i=60,density:r=.96,decay:s=.9,weight:o=.4,exposure:a=.6,clampMax:l=1,blur:u=!0,kernelSize:f=yd.SMALL,resolutionScale:d=.5,width:p=un.AUTO_SIZE,height:m=un.AUTO_SIZE,resolutionX:g=p,resolutionY:y=m}={}){super("GodRaysEffect",jK,{blendFunction:t,attributes:qs.DEPTH,uniforms:new Map([["map",new ie(null)]])}),this.camera=n,this._lightSource=e,this.lightSource=e,this.lightScene=new Lc,this.screenPosition=new le,this.renderTargetA=new qt(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="GodRays.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="GodRays.Target.B",this.uniforms.get("map").value=this.renderTargetB.texture,this.renderTargetLight=new qt(1,1),this.renderTargetLight.texture.name="GodRays.Light",this.renderTargetLight.depthTexture=new Rx,this.renderPassLight=new _d(this.lightScene,n),this.renderPassLight.clearPass.overrideClearColor=new Oe(0),this.clearPass=new Og(!0,!1,!1),this.clearPass.overrideClearColor=new Oe(0),this.blurPass=new Bx({kernelSize:f}),this.blurPass.enabled=u,this.depthMaskPass=new xo(new WF);const x=this.depthMaskMaterial;x.depthBuffer1=this.renderTargetLight.depthTexture,x.copyCameraSettings(n),this.godRaysPass=new xo(new M$(this.screenPosition));const v=this.godRaysMaterial;v.density=r,v.decay=s,v.weight=o,v.exposure=a,v.maxIntensity=l,v.samples=i;const w=this.resolution=new un(this,g,y,d);w.addEventListener("change",S=>this.setSize(w.baseWidth,w.baseHeight))}set mainCamera(n){this.camera=n,this.renderPassLight.mainCamera=n,this.depthMaskMaterial.copyCameraSettings(n)}get lightSource(){return this._lightSource}set lightSource(n){this._lightSource=n,n!==null&&(n.material.depthWrite=!1,n.material.transparent=!0)}getBlurPass(){return this.blurPass}get texture(){return this.renderTargetB.texture}getTexture(){return this.texture}get depthMaskMaterial(){return this.depthMaskPass.fullscreenMaterial}get godRaysMaterial(){return this.godRaysPass.fullscreenMaterial}getGodRaysMaterial(){return this.godRaysMaterial}getResolution(){return this.resolution}get width(){return this.resolution.width}set width(n){this.resolution.preferredWidth=n}get height(){return this.resolution.height}set height(n){this.resolution.preferredHeight=n}get dithering(){return this.godRaysMaterial.dithering}set dithering(n){const e=this.godRaysMaterial;e.dithering=n,e.needsUpdate=!0}get blur(){return this.blurPass.enabled}set blur(n){this.blurPass.enabled=n}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(n){this.blurPass.kernelSize=n}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}get samples(){return this.godRaysMaterial.samples}set samples(n){this.godRaysMaterial.samples=n}setDepthTexture(n,e=Oi){this.depthMaskPass.fullscreenMaterial.depthBuffer0=n,this.depthMaskPass.fullscreenMaterial.depthPacking0=e}update(n,e,t){const i=this.lightSource,r=i.parent,s=i.matrixAutoUpdate,o=this.renderTargetA,a=this.renderTargetLight;i.material.depthWrite=!0,i.matrixAutoUpdate=!1,i.updateWorldMatrix(!0,!1),r!==null&&(s||$D.copy(i.matrix),i.matrix.copy(i.matrixWorld)),this.lightScene.add(i),this.renderPassLight.render(n,a),this.clearPass.render(n,o),this.depthMaskPass.render(n,a,o),i.material.depthWrite=!1,i.matrixAutoUpdate=s,r!==null&&(s||i.matrix.copy($D),r.add(i)),Mw.setFromMatrixPosition(i.matrixWorld).project(this.camera),this.screenPosition.set(Math.min(Math.max((Mw.x+1)*.5,-1),2),Math.min(Math.max((Mw.y+1)*.5,-1),2)),this.blurPass.enabled&&this.blurPass.render(n,o,o),this.godRaysPass.render(n,o,this.renderTargetB)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e);const i=t.width,r=t.height;this.renderTargetA.setSize(i,r),this.renderTargetB.setSize(i,r),this.renderTargetLight.setSize(i,r),this.blurPass.resolution.copy(t)}initialize(n,e,t){this.blurPass.initialize(n,e,t),this.renderPassLight.initialize(n,e,t),this.depthMaskPass.initialize(n,e,t),this.godRaysPass.initialize(n,e,t),t!==void 0&&(this.renderTargetA.texture.type=t,this.renderTargetB.texture.type=t,this.renderTargetLight.texture.type=t,qa(n)===ln&&(xi(this.renderTargetA.texture,ln),xi(this.renderTargetB.texture,ln),xi(this.renderTargetLight.texture,ln)))}},YK="uniform vec2 scale;uniform float lineWidth;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){float grid=0.5-max(abs(mod(uv.x*scale.x,1.0)-0.5),abs(mod(uv.y*scale.y,1.0)-0.5));outputColor=vec4(vec3(smoothstep(0.0,lineWidth,grid)),inputColor.a);}",qK=class extends cr{constructor({blendFunction:n=wt.OVERLAY,scale:e=1,lineWidth:t=0}={}){super("GridEffect",YK,{blendFunction:n,uniforms:new Map([["scale",new ie(new le)],["lineWidth",new ie(t)]])}),this.resolution=new le,this.s=0,this.scale=e,this.l=0,this.lineWidth=t}get scale(){return this.s}set scale(n){this.s=Math.max(n,1e-6),this.setSize(this.resolution.width,this.resolution.height)}getScale(){return this.scale}setScale(n){this.scale=n}get lineWidth(){return this.l}set lineWidth(n){this.l=n,this.setSize(this.resolution.width,this.resolution.height)}getLineWidth(){return this.lineWidth}setLineWidth(n){this.lineWidth=n}setSize(n,e){this.resolution.set(n,e);const t=n/e,i=this.scale*(e*.125);this.uniforms.get("scale").value.set(t*i,i),this.uniforms.get("lineWidth").value=i/e+this.lineWidth}};function KD(n,e,t){const i=document.createElement("canvas"),r=i.getContext("2d");if(i.width=n,i.height=e,t instanceof Image)r.drawImage(t,0,0);else{const s=r.createImageData(n,e);s.data.set(t),r.putImageData(s,0,0)}return i}var YF=class{constructor(n=0,e=0,t=null){this.width=n,this.height=e,this.data=t}toCanvas(){return typeof document>"u"?null:KD(this.width,this.height,this.data)}static from(n){const{width:e,height:t}=n;let i;if(n instanceof Image){const r=KD(e,t,n);r!==null&&(i=r.getContext("2d").getImageData(0,0,e,t).data)}else i=n.data;return new YF(e,t,i)}},ZK=`"use strict";(()=>{var O=Math.pow;var _={SCALE_UP:"lut.scaleup"};var k=[new Float32Array(3),new Float32Array(3)],n=[new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array(3)],Z=[[new Float32Array([0,0,0]),new Float32Array([1,0,0]),new Float32Array([1,1,0]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([1,0,0]),new Float32Array([1,0,1]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,0,1]),new Float32Array([1,0,1]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,1,0]),new Float32Array([1,1,0]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,1,0]),new Float32Array([0,1,1]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,0,1]),new Float32Array([0,1,1]),new Float32Array([1,1,1])]];function d(a,t,r,m){let i=r[0]-t[0],e=r[1]-t[1],y=r[2]-t[2],h=a[0]-t[0],A=a[1]-t[1],w=a[2]-t[2],c=e*w-y*A,l=y*h-i*w,x=i*A-e*h,u=Math.sqrt(c*c+l*l+x*x),b=u*.5,s=c/u,F=l/u,f=x/u,p=-(a[0]*s+a[1]*F+a[2]*f),M=m[0]*s+m[1]*F+m[2]*f;return Math.abs(M+p)*b/3}function V(a,t,r,m,i,e){let y=(r+m*t+i*t*t)*4;e[0]=a[y+0],e[1]=a[y+1],e[2]=a[y+2]}function j(a,t,r,m,i,e){let y=r*(t-1),h=m*(t-1),A=i*(t-1),w=Math.floor(y),c=Math.floor(h),l=Math.floor(A),x=Math.ceil(y),u=Math.ceil(h),b=Math.ceil(A),s=y-w,F=h-c,f=A-l;if(w===y&&c===h&&l===A)V(a,t,y,h,A,e);else{let p;s>=F&&F>=f?p=Z[0]:s>=f&&f>=F?p=Z[1]:f>=s&&s>=F?p=Z[2]:F>=s&&s>=f?p=Z[3]:F>=f&&f>=s?p=Z[4]:f>=F&&F>=s&&(p=Z[5]);let[M,g,X,Y]=p,P=k[0];P[0]=s,P[1]=F,P[2]=f;let o=k[1],L=x-w,S=u-c,U=b-l;o[0]=L*M[0]+w,o[1]=S*M[1]+c,o[2]=U*M[2]+l,V(a,t,o[0],o[1],o[2],n[0]),o[0]=L*g[0]+w,o[1]=S*g[1]+c,o[2]=U*g[2]+l,V(a,t,o[0],o[1],o[2],n[1]),o[0]=L*X[0]+w,o[1]=S*X[1]+c,o[2]=U*X[2]+l,V(a,t,o[0],o[1],o[2],n[2]),o[0]=L*Y[0]+w,o[1]=S*Y[1]+c,o[2]=U*Y[2]+l,V(a,t,o[0],o[1],o[2],n[3]);let T=d(g,X,Y,P)*6,q=d(M,X,Y,P)*6,C=d(M,g,Y,P)*6,E=d(M,g,X,P)*6;n[0][0]*=T,n[0][1]*=T,n[0][2]*=T,n[1][0]*=q,n[1][1]*=q,n[1][2]*=q,n[2][0]*=C,n[2][1]*=C,n[2][2]*=C,n[3][0]*=E,n[3][1]*=E,n[3][2]*=E,e[0]=n[0][0]+n[1][0]+n[2][0]+n[3][0],e[1]=n[0][1]+n[1][1]+n[2][1]+n[3][1],e[2]=n[0][2]+n[1][2]+n[2][2]+n[3][2]}}var v=class{static expand(t,r){let m=Math.cbrt(t.length/4),i=new Float32Array(3),e=new t.constructor(O(r,3)*4),y=t instanceof Uint8Array?255:1,h=O(r,2),A=1/(r-1);for(let w=0;w<r;++w)for(let c=0;c<r;++c)for(let l=0;l<r;++l){let x=l*A,u=c*A,b=w*A,s=Math.round(l+c*r+w*h)*4;j(t,m,x,u,b,i),e[s+0]=i[0],e[s+1]=i[1],e[s+2]=i[2],e[s+3]=y}return e}};self.addEventListener("message",a=>{let t=a.data,r=t.data;switch(t.operation){case _.SCALE_UP:r=v.expand(r,t.size);break}postMessage(r,[r.buffer]),close()});})();
`,JD=new Oe,Fy=class extends yc{constructor(n,e){super(n,e,e,e),this.type=Jn,this.format=Dn,this.minFilter=vt,this.magFilter=vt,this.wrapS=mi,this.wrapT=mi,this.wrapR=mi,this.unpackAlignment=1,this.needsUpdate=!0,xi(this,qh),this.domainMin=new N(0,0,0),this.domainMax=new N(1,1,1)}get isLookupTexture3D(){return!0}scaleUp(n,e=!0){const t=this.image;let i;return n<=t.width?i=Promise.reject(new Error("The target size must be greater than the current size")):i=new Promise((r,s)=>{const o=URL.createObjectURL(new Blob([ZK],{type:"text/javascript"})),a=new Worker(o);a.addEventListener("error",u=>s(u.error)),a.addEventListener("message",u=>{const f=new Fy(u.data,n);xw(this,f),f.type=this.type,f.name=this.name,URL.revokeObjectURL(o),r(f)});const l=e?[t.data.buffer]:[];a.postMessage({operation:e$.SCALE_UP,data:t.data,size:n},l)}),i}applyLUT(n){const e=this.image,t=n.image,i=Math.min(e.width,e.height,e.depth),r=Math.min(t.width,t.height,t.depth);if(i!==r)console.error("Size mismatch");else if(n.type!==Jn||this.type!==Jn)console.error("Both LUTs must be FloatType textures");else if(n.format!==Dn||this.format!==Dn)console.error("Both LUTs must be RGBA textures");else{const s=e.data,o=t.data,a=i,l=a**2,u=a-1;for(let f=0,d=a**3;f<d;++f){const p=f*4,m=s[p+0]*u,g=s[p+1]*u,y=s[p+2]*u,x=Math.round(m+g*a+y*l)*4;s[p+0]=o[x+0],s[p+1]=o[x+1],s[p+2]=o[x+2]}this.needsUpdate=!0}return this}convertToUint8(){if(this.type===Jn){const n=this.image.data,e=new Uint8Array(n.length);for(let t=0,i=n.length;t<i;++t)e[t]=n[t]*255+.5;this.image.data=e,this.type=xn,this.needsUpdate=!0}return this}convertToFloat(){if(this.type===xn){const n=this.image.data,e=new Float32Array(n.length);for(let t=0,i=n.length;t<i;++t)e[t]=n[t]/255;this.image.data=e,this.type=Jn,this.needsUpdate=!0}return this}convertToRGBA(){return console.warn("LookupTexture","convertToRGBA() is deprecated, LUTs are now RGBA by default"),this}convertLinearToSRGB(){const n=this.image.data;if(this.type===Jn){for(let e=0,t=n.length;e<t;e+=4)JD.fromArray(n,e).convertLinearToSRGB().toArray(n,e);xi(this,ln),this.needsUpdate=!0}else console.error("Color space conversion requires FloatType data");return this}convertSRGBToLinear(){const n=this.image.data;if(this.type===Jn){for(let e=0,t=n.length;e<t;e+=4)JD.fromArray(n,e).convertSRGBToLinear().toArray(n,e);xi(this,qh),this.needsUpdate=!0}else console.error("Color space conversion requires FloatType data");return this}toDataTexture(){const n=this.image.width,e=this.image.height*this.image.depth,t=new Ua(this.image.data,n,e);return t.name=this.name,t.type=this.type,t.format=this.format,t.minFilter=vt,t.magFilter=vt,t.wrapS=this.wrapS,t.wrapT=this.wrapT,t.generateMipmaps=!1,t.needsUpdate=!0,xw(this,t),t}static from(n){const e=n.image,{width:t,height:i}=e,r=Math.min(t,i);let s;if(e instanceof Image){const l=YF.from(e).data;if(t>i){s=new Uint8Array(l.length);for(let u=0;u<r;++u)for(let f=0;f<r;++f)for(let d=0;d<r;++d){const p=(d+u*r+f*r*r)*4,m=(d+f*r+u*r*r)*4;s[m+0]=l[p+0],s[m+1]=l[p+1],s[m+2]=l[p+2],s[m+3]=l[p+3]}}else s=new Uint8Array(l.buffer)}else s=e.data.slice();const o=new Fy(s,r);return o.type=n.type,o.name=n.name,xw(n,o),o}static createNeutral(n){const e=new Float32Array(n**3*4),t=n**2,i=1/(n-1);for(let s=0;s<n;++s)for(let o=0;o<n;++o)for(let a=0;a<n;++a){const l=(s+o*n+a*t)*4;e[l+0]=s*i,e[l+1]=o*i,e[l+2]=a*i,e[l+3]=1}const r=new Fy(e,n);return r.name="neutral",r}},$K=`uniform vec3 scale;uniform vec3 offset;
#ifdef CUSTOM_INPUT_DOMAIN
uniform vec3 domainMin;uniform vec3 domainMax;
#endif
#ifdef LUT_3D
#ifdef LUT_PRECISION_HIGH
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler3D lut;
#else
uniform mediump sampler3D lut;
#endif
#else
uniform lowp sampler3D lut;
#endif
vec4 applyLUT(const in vec3 rgb){
#ifdef TETRAHEDRAL_INTERPOLATION
vec3 p=floor(rgb);vec3 f=rgb-p;vec3 v1=(p+0.5)*LUT_TEXEL_WIDTH;vec3 v4=(p+1.5)*LUT_TEXEL_WIDTH;vec3 v2,v3;vec3 frac;if(f.r>=f.g){if(f.g>f.b){frac=f.rgb;v2=vec3(v4.x,v1.y,v1.z);v3=vec3(v4.x,v4.y,v1.z);}else if(f.r>=f.b){frac=f.rbg;v2=vec3(v4.x,v1.y,v1.z);v3=vec3(v4.x,v1.y,v4.z);}else{frac=f.brg;v2=vec3(v1.x,v1.y,v4.z);v3=vec3(v4.x,v1.y,v4.z);}}else{if(f.b>f.g){frac=f.bgr;v2=vec3(v1.x,v1.y,v4.z);v3=vec3(v1.x,v4.y,v4.z);}else if(f.r>=f.b){frac=f.grb;v2=vec3(v1.x,v4.y,v1.z);v3=vec3(v4.x,v4.y,v1.z);}else{frac=f.gbr;v2=vec3(v1.x,v4.y,v1.z);v3=vec3(v1.x,v4.y,v4.z);}}vec4 n1=texture(lut,v1);vec4 n2=texture(lut,v2);vec4 n3=texture(lut,v3);vec4 n4=texture(lut,v4);vec4 weights=vec4(1.0-frac.x,frac.x-frac.y,frac.y-frac.z,frac.z);vec4 result=weights*mat4(vec4(n1.r,n2.r,n3.r,n4.r),vec4(n1.g,n2.g,n3.g,n4.g),vec4(n1.b,n2.b,n3.b,n4.b),vec4(1.0));return vec4(result.rgb,1.0);
#else
return texture(lut,rgb);
#endif
}
#else
#ifdef LUT_PRECISION_HIGH
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D lut;
#else
uniform mediump sampler2D lut;
#endif
#else
uniform lowp sampler2D lut;
#endif
vec4 applyLUT(const in vec3 rgb){float slice=rgb.b*LUT_SIZE;float slice0=floor(slice);float interp=slice-slice0;float centeredInterp=interp-0.5;float slice1=slice0+sign(centeredInterp);
#ifdef LUT_STRIP_HORIZONTAL
float xOffset=clamp(rgb.r*LUT_TEXEL_HEIGHT,LUT_TEXEL_WIDTH*0.5,LUT_TEXEL_HEIGHT-LUT_TEXEL_WIDTH*0.5);vec2 uv0=vec2(slice0*LUT_TEXEL_HEIGHT+xOffset,rgb.g);vec2 uv1=vec2(slice1*LUT_TEXEL_HEIGHT+xOffset,rgb.g);
#else
float yOffset=clamp(rgb.g*LUT_TEXEL_WIDTH,LUT_TEXEL_HEIGHT*0.5,LUT_TEXEL_WIDTH-LUT_TEXEL_HEIGHT*0.5);vec2 uv0=vec2(rgb.r,slice0*LUT_TEXEL_WIDTH+yOffset);vec2 uv1=vec2(rgb.r,slice1*LUT_TEXEL_WIDTH+yOffset);
#endif
vec4 sample0=texture2D(lut,uv0);vec4 sample1=texture2D(lut,uv1);return mix(sample0,sample1,abs(centeredInterp));}
#endif
void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 c=inputColor.rgb;
#ifdef CUSTOM_INPUT_DOMAIN
if(c.r>=domainMin.r&&c.g>=domainMin.g&&c.b>=domainMin.b&&c.r<=domainMax.r&&c.g<=domainMax.g&&c.b<=domainMax.b){c=applyLUT(scale*c+offset).rgb;}else{c=inputColor.rgb;}
#else
#if !defined(LUT_3D) || defined(TETRAHEDRAL_INTERPOLATION)
c=clamp(c,0.0,1.0);
#endif
c=applyLUT(scale*c+offset).rgb;
#endif
outputColor=vec4(c,inputColor.a);}`,KK=class extends cr{constructor(n,{blendFunction:e=wt.SRC,tetrahedralInterpolation:t=!1,inputEncoding:i=an,inputColorSpace:r}={}){super("LUT3DEffect",$K,{blendFunction:e,uniforms:new Map([["lut",new ie(null)],["scale",new ie(new N)],["offset",new ie(new N)],["domainMin",new ie(null)],["domainMax",new ie(null)]])}),this.tetrahedralInterpolation=t,this.inputColorSpace=r||HF.get(i),this.lut=n}get inputEncoding(){return this.inputColorSpace}set inputEncoding(n){this.inputColorSpace=n}getInputEncoding(){return this.inputColorSpace}setInputEncoding(n){this.inputColorSpace=n}getOutputEncoding(){return this.outputColorSpace}get lut(){return this.uniforms.get("lut").value}set lut(n){const e=this.defines,t=this.uniforms;if(this.lut!==n&&(t.get("lut").value=n,n!==null)){const i=n.image,r=this.tetrahedralInterpolation;if(e.clear(),e.set("LUT_SIZE",Math.min(i.width,i.height).toFixed(16)),e.set("LUT_TEXEL_WIDTH",(1/i.width).toFixed(16)),e.set("LUT_TEXEL_HEIGHT",(1/i.height).toFixed(16)),t.get("domainMin").value=null,t.get("domainMax").value=null,(n.type===Jn||n.type===ps)&&e.set("LUT_PRECISION_HIGH","1"),i.width>i.height?e.set("LUT_STRIP_HORIZONTAL","1"):n instanceof yc&&e.set("LUT_3D","1"),n instanceof Fy){const s=n.domainMin,o=n.domainMax;(s.x!==0||s.y!==0||s.z!==0||o.x!==1||o.y!==1||o.z!==1)&&(e.set("CUSTOM_INPUT_DOMAIN","1"),t.get("domainMin").value=s.clone(),t.get("domainMax").value=o.clone())}this.tetrahedralInterpolation=r}}getLUT(){return this.lut}setLUT(n){this.lut=n}updateScaleOffset(){const n=this.lut;if(n!==null){const e=Math.min(n.image.width,n.image.height),t=this.uniforms.get("scale").value,i=this.uniforms.get("offset").value;if(this.tetrahedralInterpolation&&n instanceof yc)if(this.defines.has("CUSTOM_INPUT_DOMAIN")){const r=n.domainMax.clone().sub(n.domainMin);t.setScalar(e-1).divide(r),i.copy(n.domainMin).negate().multiply(t)}else t.setScalar(e-1),i.setScalar(0);else if(this.defines.has("CUSTOM_INPUT_DOMAIN")){const r=n.domainMax.clone().sub(n.domainMin).multiplyScalar(e);t.setScalar(e-1).divide(r),i.copy(n.domainMin).negate().multiply(t).addScalar(1/(2*e))}else t.setScalar((e-1)/e),i.setScalar(1/(2*e))}}configureTetrahedralInterpolation(){const n=this.lut;n!==null&&(n.minFilter=vt,n.magFilter=vt,this.tetrahedralInterpolation&&(n instanceof yc?(n.minFilter=Ht,n.magFilter=Ht):console.warn("Tetrahedral interpolation requires a 3D texture")),n.source===void 0&&(n.needsUpdate=!0))}get tetrahedralInterpolation(){return this.defines.has("TETRAHEDRAL_INTERPOLATION")}set tetrahedralInterpolation(n){n?this.defines.set("TETRAHEDRAL_INTERPOLATION","1"):this.defines.delete("TETRAHEDRAL_INTERPOLATION"),this.configureTetrahedralInterpolation(),this.updateScaleOffset(),this.setChanged()}setTetrahedralInterpolationEnabled(n){this.tetrahedralInterpolation=n}},JK=`void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 noise=vec3(rand(uv*time));
#ifdef PREMULTIPLY
outputColor=vec4(min(inputColor.rgb*noise,vec3(1.0)),inputColor.a);
#else
outputColor=vec4(noise,inputColor.a);
#endif
}`,QK=class extends cr{constructor({blendFunction:n=wt.SCREEN,premultiply:e=!1}={}){super("NoiseEffect",JK,{blendFunction:n}),this.premultiply=e}get premultiply(){return this.defines.has("PREMULTIPLY")}set premultiply(n){this.premultiply!==n&&(n?this.defines.set("PREMULTIPLY","1"):this.defines.delete("PREMULTIPLY"),this.setChanged())}isPremultiplied(){return this.premultiply}setPremultiplied(n){this.premultiply=n}},eJ=`uniform lowp sampler2D edgeTexture;uniform lowp sampler2D maskTexture;uniform vec3 visibleEdgeColor;uniform vec3 hiddenEdgeColor;uniform float pulse;uniform float edgeStrength;
#ifdef USE_PATTERN
uniform lowp sampler2D patternTexture;varying vec2 vUvPattern;
#endif
void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 edge=texture2D(edgeTexture,uv).rg;vec2 mask=texture2D(maskTexture,uv).rg;
#ifndef X_RAY
edge.y=0.0;
#endif
edge*=(edgeStrength*mask.x*pulse);vec3 color=edge.x*visibleEdgeColor+edge.y*hiddenEdgeColor;float visibilityFactor=0.0;
#ifdef USE_PATTERN
vec4 patternColor=texture2D(patternTexture,vUvPattern);
#ifdef X_RAY
float hiddenFactor=0.5;
#else
float hiddenFactor=0.0;
#endif
visibilityFactor=(1.0-mask.y>0.0)?1.0:hiddenFactor;visibilityFactor*=(1.0-mask.x)*patternColor.a;color+=visibilityFactor*patternColor.rgb;
#endif
float alpha=max(max(edge.x,edge.y),visibilityFactor);
#ifdef ALPHA
outputColor=vec4(color,alpha);
#else
outputColor=vec4(color,max(alpha,inputColor.a));
#endif
}`,tJ="uniform float patternScale;varying vec2 vUvPattern;void mainSupport(const in vec2 uv){vUvPattern=uv*vec2(aspect,1.0)*patternScale;}",nJ=class extends cr{constructor(n,e,{blendFunction:t=wt.SCREEN,patternTexture:i=null,patternScale:r=1,edgeStrength:s=1,pulseSpeed:o=0,visibleEdgeColor:a=16777215,hiddenEdgeColor:l=2230538,kernelSize:u=yd.VERY_SMALL,blur:f=!1,xRay:d=!0,multisampling:p=0,resolutionScale:m=.5,width:g=un.AUTO_SIZE,height:y=un.AUTO_SIZE,resolutionX:x=g,resolutionY:v=y}={}){super("OutlineEffect",eJ,{uniforms:new Map([["maskTexture",new ie(null)],["edgeTexture",new ie(null)],["edgeStrength",new ie(s)],["visibleEdgeColor",new ie(new Oe(a))],["hiddenEdgeColor",new ie(new Oe(l))],["pulse",new ie(1)],["patternScale",new ie(r)],["patternTexture",new ie(null)]])}),this.blendMode.addEventListener("change",b=>{this.blendMode.blendFunction===wt.ALPHA?this.defines.set("ALPHA","1"):this.defines.delete("ALPHA"),this.setChanged()}),this.blendMode.blendFunction=t,this.patternTexture=i,this.xRay=d,this.scene=n,this.camera=e,this.renderTargetMask=new qt(1,1),this.renderTargetMask.samples=p,this.renderTargetMask.texture.name="Outline.Mask",this.uniforms.get("maskTexture").value=this.renderTargetMask.texture,this.renderTargetOutline=new qt(1,1,{depthBuffer:!1}),this.renderTargetOutline.texture.name="Outline.Edges",this.uniforms.get("edgeTexture").value=this.renderTargetOutline.texture,this.clearPass=new Og,this.clearPass.overrideClearColor=new Oe(0),this.clearPass.overrideClearAlpha=1,this.depthPass=new OC(n,e),this.maskPass=new _d(n,e,new l$(this.depthPass.texture,e));const w=this.maskPass.clearPass;w.overrideClearColor=new Oe(16777215),w.overrideClearAlpha=1,this.blurPass=new Bx({resolutionScale:m,resolutionX:x,resolutionY:v,kernelSize:u}),this.blurPass.enabled=f;const S=this.blurPass.resolution;S.addEventListener("change",b=>this.setSize(S.baseWidth,S.baseHeight)),this.outlinePass=new xo(new R$);const T=this.outlinePass.fullscreenMaterial;T.inputBuffer=this.renderTargetMask.texture,this.time=0,this.active=!1,this.selection=new NC,this.selection.layer=10,this.pulseSpeed=o}set mainScene(n){this.scene=n,this.depthPass.mainScene=n,this.maskPass.mainScene=n}set mainCamera(n){this.camera=n,this.depthPass.mainCamera=n,this.maskPass.mainCamera=n,this.maskPass.overrideMaterial.copyCameraSettings(n)}get resolution(){return this.blurPass.resolution}getResolution(){return this.blurPass.getResolution()}get multisampling(){return this.renderTargetMask.samples}set multisampling(n){this.renderTargetMask.samples=n,this.renderTargetMask.dispose()}get patternScale(){return this.uniforms.get("patternScale").value}set patternScale(n){this.uniforms.get("patternScale").value=n}get edgeStrength(){return this.uniforms.get("edgeStrength").value}set edgeStrength(n){this.uniforms.get("edgeStrength").value=n}get visibleEdgeColor(){return this.uniforms.get("visibleEdgeColor").value}set visibleEdgeColor(n){this.uniforms.get("visibleEdgeColor").value=n}get hiddenEdgeColor(){return this.uniforms.get("hiddenEdgeColor").value}set hiddenEdgeColor(n){this.uniforms.get("hiddenEdgeColor").value=n}getBlurPass(){return this.blurPass}getSelection(){return this.selection}getPulseSpeed(){return this.pulseSpeed}setPulseSpeed(n){this.pulseSpeed=n}get width(){return this.resolution.width}set width(n){this.resolution.preferredWidth=n}get height(){return this.resolution.height}set height(n){this.resolution.preferredHeight=n}get selectionLayer(){return this.selection.layer}set selectionLayer(n){this.selection.layer=n}get dithering(){return this.blurPass.dithering}set dithering(n){this.blurPass.dithering=n}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(n){this.blurPass.kernelSize=n}get blur(){return this.blurPass.enabled}set blur(n){this.blurPass.enabled=n}get xRay(){return this.defines.has("X_RAY")}set xRay(n){this.xRay!==n&&(n?this.defines.set("X_RAY","1"):this.defines.delete("X_RAY"),this.setChanged())}isXRayEnabled(){return this.xRay}setXRayEnabled(n){this.xRay=n}get patternTexture(){return this.uniforms.get("patternTexture").value}set patternTexture(n){n!==null?(n.wrapS=n.wrapT=Xa,this.defines.set("USE_PATTERN","1"),this.setVertexShader(tJ)):(this.defines.delete("USE_PATTERN"),this.setVertexShader(null)),this.uniforms.get("patternTexture").value=n,this.setChanged()}setPatternTexture(n){this.patternTexture=n}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}setSelection(n){return this.selection.set(n),this}clearSelection(){return this.selection.clear(),this}selectObject(n){return this.selection.add(n),this}deselectObject(n){return this.selection.delete(n),this}update(n,e,t){const i=this.scene,r=this.camera,s=this.selection,a=this.uniforms.get("pulse"),l=i.background,u=r.layers.mask;s.size>0?(i.background=null,a.value=1,this.pulseSpeed>0&&(a.value=Math.cos(this.time*this.pulseSpeed*10)*.375+.625),this.active=!0,this.time+=t,s.setVisible(!1),this.depthPass.render(n),s.setVisible(!0),r.layers.set(s.layer),this.maskPass.render(n,this.renderTargetMask),r.layers.mask=u,i.background=l,this.outlinePass.render(n,null,this.renderTargetOutline),this.blurPass.enabled&&this.blurPass.render(n,this.renderTargetOutline,this.renderTargetOutline)):this.active&&(this.clearPass.render(n,this.renderTargetOutline),this.active=!1)}setSize(n,e){this.blurPass.setSize(n,e),this.renderTargetMask.setSize(n,e);const t=this.resolution;t.setBaseSize(n,e);const i=t.width,r=t.height;this.depthPass.setSize(i,r),this.renderTargetOutline.setSize(i,r),this.outlinePass.fullscreenMaterial.setSize(i,r)}initialize(n,e,t){this.blurPass.initialize(n,e,xn),t!==void 0&&(this.depthPass.initialize(n,e,t),this.maskPass.initialize(n,e,t),this.outlinePass.initialize(n,e,t))}},iJ="uniform bool active;uniform vec4 d;void mainUv(inout vec2 uv){if(active){uv=d.xy*(floor(uv*d.zw)+0.5);}}",rJ=class extends cr{constructor(n=30){super("PixelationEffect",iJ,{uniforms:new Map([["active",new ie(!1)],["d",new ie(new Gt)]])}),this.resolution=new le,this._granularity=0,this.granularity=n}get granularity(){return this._granularity}set granularity(n){let e=Math.floor(n);e%2>0&&(e+=1),this._granularity=e,this.uniforms.get("active").value=e>0,this.setSize(this.resolution.width,this.resolution.height)}getGranularity(){return this.granularity}setGranularity(n){this.granularity=n}setSize(n,e){const t=this.resolution;t.set(n,e);const i=this.granularity,r=i/t.x,s=i/t.y;this.uniforms.get("d").value.set(r,s,1/r,1/s)}};new N;new N;var sJ=class extends kK{constructor(n,e,t){super(t),this.setAttributes(this.getAttributes()|qs.DEPTH),this.camera=e,this.depthPass=new OC(n,e),this.clearPass=new Og(!0,!1,!1),this.clearPass.overrideClearColor=new Oe(0),this.depthMaskPass=new xo(new WF);const i=this.depthMaskMaterial;i.copyCameraSettings(e),i.depthBuffer1=this.depthPass.texture,i.depthPacking1=ia,i.depthMode=Om,this.renderTargetMasked=new qt(1,1,{depthBuffer:!1}),this.renderTargetMasked.texture.name="Bloom.Masked",this.selection=new NC,this.selection.layer=11,this._inverted=!1,this._ignoreBackground=!1}set mainScene(n){this.depthPass.mainScene=n}set mainCamera(n){this.camera=n,this.depthPass.mainCamera=n,this.depthMaskMaterial.copyCameraSettings(n)}getSelection(){return this.selection}get depthMaskMaterial(){return this.depthMaskPass.fullscreenMaterial}get inverted(){return this._inverted}set inverted(n){this._inverted=n,this.depthMaskMaterial.depthMode=n?Sx:Om}isInverted(){return this.inverted}setInverted(n){this.inverted=n}get ignoreBackground(){return this._ignoreBackground}set ignoreBackground(n){this._ignoreBackground=n,this.depthMaskMaterial.maxDepthStrategy=n?$p.DISCARD_MAX_DEPTH:$p.KEEP_MAX_DEPTH}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(n){this.ignoreBackground=n}setDepthTexture(n,e=Oi){this.depthMaskMaterial.depthBuffer0=n,this.depthMaskMaterial.depthPacking0=e}update(n,e,t){const i=this.camera,r=this.selection,s=this.inverted;let o=e;if(this.ignoreBackground||!s||r.size>0){const a=i.layers.mask;i.layers.set(r.layer),this.depthPass.render(n),i.layers.mask=a,o=this.renderTargetMasked,this.clearPass.render(n,o),this.depthMaskPass.render(n,e,o)}super.update(n,o,t)}setSize(n,e){super.setSize(n,e),this.renderTargetMasked.setSize(n,e),this.depthPass.setSize(n,e)}initialize(n,e,t){super.initialize(n,e,t),this.clearPass.initialize(n,e,t),this.depthPass.initialize(n,e,t),this.depthMaskPass.initialize(n,e,t),t!==void 0&&(this.renderTargetMasked.texture.type=t,qa(n)===ln&&xi(this.renderTargetMasked.texture,ln))}},oJ=`uniform lowp sampler2D aoBuffer;uniform float luminanceInfluence;uniform float intensity;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if defined(DEPTH_AWARE_UPSAMPLING) && defined(NORMAL_DEPTH)
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D normalDepthBuffer;
#else
uniform mediump sampler2D normalDepthBuffer;
#endif
#endif
#ifdef COLORIZE
uniform vec3 color;
#endif
void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){float aoLinear=texture2D(aoBuffer,uv).r;
#if defined(DEPTH_AWARE_UPSAMPLING) && defined(NORMAL_DEPTH) && __VERSION__ == 300
vec4 normalDepth[4];normalDepth[0]=textureOffset(normalDepthBuffer,uv,ivec2(0,0));normalDepth[1]=textureOffset(normalDepthBuffer,uv,ivec2(0,1));normalDepth[2]=textureOffset(normalDepthBuffer,uv,ivec2(1,0));normalDepth[3]=textureOffset(normalDepthBuffer,uv,ivec2(1,1));float dot01=dot(normalDepth[0].rgb,normalDepth[1].rgb);float dot02=dot(normalDepth[0].rgb,normalDepth[2].rgb);float dot03=dot(normalDepth[0].rgb,normalDepth[3].rgb);float minDot=min(dot01,min(dot02,dot03));float s=step(THRESHOLD,minDot);float smallestDistance=1.0;int index;for(int i=0;i<4;++i){float distance=abs(depth-normalDepth[i].a);if(distance<smallestDistance){smallestDistance=distance;index=i;}}ivec2 offsets[4];offsets[0]=ivec2(0,0);offsets[1]=ivec2(0,1);offsets[2]=ivec2(1,0);offsets[3]=ivec2(1,1);ivec2 coord=ivec2(uv*vec2(textureSize(aoBuffer,0)))+offsets[index];float aoNearest=texelFetch(aoBuffer,coord,0).r;float ao=mix(aoNearest,aoLinear,s);
#else
float ao=aoLinear;
#endif
float l=luminance(inputColor.rgb);ao=mix(ao,0.0,l*luminanceInfluence);ao=clamp(ao*intensity,0.0,1.0);
#ifdef COLORIZE
outputColor=vec4(1.0-ao*(1.0-color),inputColor.a);
#else
outputColor=vec4(vec3(1.0-ao),inputColor.a);
#endif
}`,QD=64,aJ=class extends cr{constructor(n,e,{blendFunction:t=wt.MULTIPLY,samples:i=9,rings:r=7,normalDepthBuffer:s=null,depthAwareUpsampling:o=!0,worldDistanceThreshold:a,worldDistanceFalloff:l,worldProximityThreshold:u,worldProximityFalloff:f,distanceThreshold:d=.97,distanceFalloff:p=.03,rangeThreshold:m=5e-4,rangeFalloff:g=.001,minRadiusScale:y=.1,luminanceInfluence:x=.7,radius:v=.1825,intensity:w=1,bias:S=.025,fade:T=.01,color:b=null,resolutionScale:P=1,width:R=un.AUTO_SIZE,height:D=un.AUTO_SIZE,resolutionX:C=R,resolutionY:L=D}={}){super("SSAOEffect",oJ,{blendFunction:t,attributes:qs.DEPTH,defines:new Map([["THRESHOLD","0.997"]]),uniforms:new Map([["aoBuffer",new ie(null)],["normalDepthBuffer",new ie(s)],["luminanceInfluence",new ie(x)],["color",new ie(null)],["intensity",new ie(w)],["scale",new ie(0)]])}),this.renderTarget=new qt(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="AO.Target",this.uniforms.get("aoBuffer").value=this.renderTarget.texture;const F=this.resolution=new un(this,C,L,P);F.addEventListener("change",W=>this.setSize(F.baseWidth,F.baseHeight)),this.camera=n,this.depthDownsamplingPass=new XF({normalBuffer:e,resolutionScale:P}),this.depthDownsamplingPass.enabled=s===null,this.ssaoPass=new xo(new I$(n));const H=new GT(QD,QD,Dn);H.wrapS=H.wrapT=Xa;const G=this.ssaoMaterial;G.normalBuffer=e,G.noiseTexture=H,G.minRadiusScale=y,G.samples=i,G.radius=v,G.rings=r,G.fade=T,G.bias=S,G.distanceThreshold=d,G.distanceFalloff=p,G.proximityThreshold=m,G.proximityFalloff=g,a!==void 0&&(G.worldDistanceThreshold=a),l!==void 0&&(G.worldDistanceFalloff=l),u!==void 0&&(G.worldProximityThreshold=u),f!==void 0&&(G.worldProximityFalloff=f),s!==null&&(this.ssaoMaterial.normalDepthBuffer=s,this.defines.set("NORMAL_DEPTH","1")),this.depthAwareUpsampling=o,this.color=b}set mainCamera(n){this.camera=n,this.ssaoMaterial.copyCameraSettings(n)}get normalBuffer(){return this.ssaoMaterial.normalBuffer}set normalBuffer(n){this.ssaoMaterial.normalBuffer=n,this.depthDownsamplingPass.fullscreenMaterial.normalBuffer=n}getResolution(){return this.resolution}get ssaoMaterial(){return this.ssaoPass.fullscreenMaterial}getSSAOMaterial(){return this.ssaoMaterial}get samples(){return this.ssaoMaterial.samples}set samples(n){this.ssaoMaterial.samples=n}get rings(){return this.ssaoMaterial.rings}set rings(n){this.ssaoMaterial.rings=n}get radius(){return this.ssaoMaterial.radius}set radius(n){this.ssaoMaterial.radius=n}get depthAwareUpsampling(){return this.defines.has("DEPTH_AWARE_UPSAMPLING")}set depthAwareUpsampling(n){this.depthAwareUpsampling!==n&&(n?this.defines.set("DEPTH_AWARE_UPSAMPLING","1"):this.defines.delete("DEPTH_AWARE_UPSAMPLING"),this.setChanged())}isDepthAwareUpsamplingEnabled(){return this.depthAwareUpsampling}setDepthAwareUpsamplingEnabled(n){this.depthAwareUpsampling=n}get distanceScaling(){return!0}set distanceScaling(n){}get color(){return this.uniforms.get("color").value}set color(n){const e=this.uniforms,t=this.defines;n!==null?t.has("COLORIZE")?e.get("color").value.set(n):(t.set("COLORIZE","1"),e.get("color").value=new Oe(n),this.setChanged()):t.has("COLORIZE")&&(t.delete("COLORIZE"),e.get("color").value=null,this.setChanged())}get luminanceInfluence(){return this.uniforms.get("luminanceInfluence").value}set luminanceInfluence(n){this.uniforms.get("luminanceInfluence").value=n}get intensity(){return this.uniforms.get("intensity").value}set intensity(n){this.uniforms.get("intensity").value=n}getColor(){return this.color}setColor(n){this.color=n}setDistanceCutoff(n,e){this.ssaoMaterial.distanceThreshold=n,this.ssaoMaterial.distanceFalloff=e}setProximityCutoff(n,e){this.ssaoMaterial.proximityThreshold=n,this.ssaoMaterial.proximityFalloff=e}setDepthTexture(n,e=Oi){this.depthDownsamplingPass.setDepthTexture(n,e),this.ssaoMaterial.depthBuffer=n,this.ssaoMaterial.depthPacking=e}update(n,e,t){const i=this.renderTarget;this.depthDownsamplingPass.enabled&&this.depthDownsamplingPass.render(n),this.ssaoPass.render(n,null,i)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e);const i=t.width,r=t.height;this.ssaoMaterial.copyCameraSettings(this.camera),this.ssaoMaterial.setSize(i,r),this.renderTarget.setSize(i,r),this.depthDownsamplingPass.resolution.scale=t.scale,this.depthDownsamplingPass.setSize(n,e)}initialize(n,e,t){try{let i=this.uniforms.get("normalDepthBuffer").value;i===null&&(this.depthDownsamplingPass.initialize(n,e,t),i=this.depthDownsamplingPass.texture,this.uniforms.get("normalDepthBuffer").value=i,this.ssaoMaterial.normalDepthBuffer=i,this.defines.set("NORMAL_DEPTH","1"))}catch{this.depthDownsamplingPass.enabled=!1}}},lJ=`#ifdef TEXTURE_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
varying vec2 vUv2;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){
#ifdef UV_TRANSFORM
vec4 texel=texture2D(map,vUv2);
#else
vec4 texel=texture2D(map,uv);
#endif
outputColor=TEXEL;}`,uJ=`#ifdef ASPECT_CORRECTION
uniform float scale;
#else
uniform mat3 uvTransform;
#endif
varying vec2 vUv2;void mainSupport(const in vec2 uv){
#ifdef ASPECT_CORRECTION
vUv2=uv*vec2(aspect,1.0)*scale;
#else
vUv2=(uvTransform*vec3(uv,1.0)).xy;
#endif
}`,cJ=class extends cr{constructor({blendFunction:n,texture:e=null,aspectCorrection:t=!1}={}){super("TextureEffect",lJ,{blendFunction:n,defines:new Map([["TEXEL","texel"]]),uniforms:new Map([["map",new ie(null)],["scale",new ie(1)],["uvTransform",new ie(null)]])}),this.texture=e,this.aspectCorrection=t}get texture(){return this.uniforms.get("map").value}set texture(n){const e=this.texture,t=this.uniforms,i=this.defines;e!==n&&(t.get("map").value=n,t.get("uvTransform").value=n.matrix,i.delete("TEXTURE_PRECISION_HIGH"),n!==null&&(n.matrixAutoUpdate?(i.set("UV_TRANSFORM","1"),this.setVertexShader(uJ)):(i.delete("UV_TRANSFORM"),this.setVertexShader(null)),n.type!==xn&&i.set("TEXTURE_PRECISION_HIGH","1"),(e===null||e.type!==n.type||e.encoding!==n.encoding)&&this.setChanged()))}getTexture(){return this.texture}setTexture(n){this.texture=n}get aspectCorrection(){return this.defines.has("ASPECT_CORRECTION")}set aspectCorrection(n){this.aspectCorrection!==n&&(n?this.defines.set("ASPECT_CORRECTION","1"):this.defines.delete("ASPECT_CORRECTION"),this.setChanged())}get uvTransform(){const n=this.texture;return n!==null&&n.matrixAutoUpdate}set uvTransform(n){const e=this.texture;e!==null&&(e.matrixAutoUpdate=n)}setTextureSwizzleRGBA(n,e=n,t=n,i=n){const r="rgba";let s="";(n!==dh.RED||e!==dh.GREEN||t!==dh.BLUE||i!==dh.ALPHA)&&(s=[".",r[n],r[e],r[t],r[i]].join("")),this.defines.set("TEXEL","texel"+s),this.setChanged()}update(n,e,t){this.texture.matrixAutoUpdate&&this.texture.updateMatrix()}},fJ=`uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;
#if VIGNETTE_TECHNIQUE == 0
float d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));
#else
vec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));
#endif
outputColor=vec4(color,inputColor.a);}`,hJ=class extends cr{constructor({blendFunction:n,technique:e=q0.DEFAULT,eskil:t=!1,offset:i=.5,darkness:r=.5}={}){super("VignetteEffect",fJ,{blendFunction:n,defines:new Map([["VIGNETTE_TECHNIQUE",e.toFixed(0)]]),uniforms:new Map([["offset",new ie(i)],["darkness",new ie(r)]])})}get technique(){return Number(this.defines.get("VIGNETTE_TECHNIQUE"))}set technique(n){this.technique!==n&&(this.defines.set("VIGNETTE_TECHNIQUE",n.toFixed(0)),this.setChanged())}get eskil(){return this.technique===q0.ESKIL}set eskil(n){this.technique=n?q0.ESKIL:q0.DEFAULT}getTechnique(){return this.technique}setTechnique(n){this.technique=n}get offset(){return this.uniforms.get("offset").value}set offset(n){this.uniforms.get("offset").value=n}getOffset(){return this.offset}setOffset(n){this.offset=n}get darkness(){return this.uniforms.get("darkness").value}set darkness(n){this.uniforms.get("darkness").value=n}getDarkness(){return this.darkness}setDarkness(n){this.darkness=n}};function WT(){return WT=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},WT.apply(this,arguments)}var dJ=`#define GLSLIFY 1
uniform float blur;uniform float blurSharpness;uniform int blurKernel;vec3 denoise(vec3 center,sampler2D tex,vec2 uv,vec2 invTexSize,float blur,float blurSharpness,int blurKernel){vec3 color;float total;vec3 col;float weight;for(int x=-blurKernel;x<=blurKernel;x++){for(int y=-blurKernel;y<=blurKernel;y++){col=textureLod(tex,uv+vec2(x,y)*invTexSize,0.).rgb;weight=1.0-abs(dot(col-center,vec3(0.25)));weight=pow(weight,blurSharpness);color+=col*weight;total+=weight;}}return color/total;}`,pJ=`#define GLSLIFY 1
#define MODE_DEFAULT 0
#define MODE_REFLECTIONS 1
#define MODE_RAW_REFLECTION 2
#define MODE_BLURRED_REFLECTIONS 3
#define MODE_INPUT 4
#define MODE_BLUR_MIX 5
#define FLOAT_EPSILON 0.00001
uniform sampler2D inputTexture;uniform sampler2D reflectionsTexture;uniform float samples;
#include <boxBlur>
void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 reflectionsTexel=texture2D(reflectionsTexture,vUv);ivec2 size=textureSize(reflectionsTexture,0);vec2 invTexSize=1./vec2(size.x,size.y);vec3 reflectionClr=reflectionsTexel.xyz;if(blur>FLOAT_EPSILON){vec3 blurredReflectionsColor=denoise(reflectionsTexel.rgb,reflectionsTexture,vUv,invTexSize,blur,blurSharpness,blurKernel);reflectionClr=mix(reflectionClr,blurredReflectionsColor.rgb,blur);}
#if RENDER_MODE == MODE_DEFAULT
outputColor=vec4(inputColor.rgb+reflectionClr,1.0);
#endif
#if RENDER_MODE == MODE_REFLECTIONS
outputColor=vec4(reflectionClr,1.0);
#endif
#if RENDER_MODE == MODE_RAW_REFLECTION
outputColor=vec4(reflectionsTexel.xyz,1.0);
#endif
#if RENDER_MODE == MODE_BLURRED_REFLECTIONS
outputColor=vec4(blurredReflectionsTexel.xyz,1.0);
#endif
#if RENDER_MODE == MODE_INPUT
outputColor=vec4(inputColor.xyz,1.0);
#endif
#if RENDER_MODE == MODE_BLUR_MIX
outputColor=vec4(vec3(blur),1.0);
#endif
}`,qF=`#define GLSLIFY 1
vec3 getViewPosition(const float depth){float clipW=_projectionMatrix[2][3]*depth+_projectionMatrix[3][3];vec4 clipPosition=vec4((vec3(vUv,depth)-0.5)*2.0,1.0);clipPosition*=clipW;return(_inverseProjectionMatrix*clipPosition).xyz;}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}vec3 screenSpaceToWorldSpace(const vec2 uv,const float depth){vec4 ndc=vec4((uv.x-0.5)*2.0,(uv.y-0.5)*2.0,(depth-0.5)*2.0,1.0);vec4 clip=_inverseProjectionMatrix*ndc;vec4 view=cameraMatrixWorld*(clip/clip.w);return view.xyz;}
#define Scale (vec3(0.8, 0.8, 0.8))
#define K (19.19)
vec3 hash(vec3 a){a=fract(a*Scale);a+=dot(a,a.yxz+K);return fract((a.xxy+a.yxx)*a.zyx);}float fresnel_dielectric_cos(float cosi,float eta){float c=abs(cosi);float g=eta*eta-1.0+c*c;float result;if(g>0.0){g=sqrt(g);float A=(g-c)/(g+c);float B=(c*(g+c)-1.0)/(c*(g-c)+1.0);result=0.5*A*A*(1.0+B*B);}else{result=1.0;}return result;}float fresnel_dielectric(vec3 Incoming,vec3 Normal,float eta){float cosine=dot(Incoming,Normal);return min(1.0,5.0*fresnel_dielectric_cos(cosine,eta));}`,mJ=`#define GLSLIFY 1
#define INV_EULER 0.36787944117144233
alpha=velocityDisocclusion<FLOAT_EPSILON ?(alpha+0.0075): 0.0;alpha=clamp(alpha,0.0,1.0);bool needsBlur=!didReproject||velocityDisocclusion>0.5;
#ifdef boxBlur
if(needsBlur)inputColor=boxBlurredColor;
#endif
if(alpha==1.0){outputColor=accumulatedColor;}else{float m=mix(alpha,1.0,blend);if(needsBlur)m=0.0;outputColor=accumulatedColor*m+inputColor*(1.0-m);}`;class gJ extends on{constructor(){super({type:"MRTMaterial",defines:{USE_UV:"",TEMPORAL_RESOLVE:""},uniforms:{opacity:new ie(1),normalMap:new ie(null),normalScale:new ie(new le(1,1)),uvTransform:new ie(new Ut),roughness:new ie(1),roughnessMap:new ie(null)},vertexShader:`
                #ifdef USE_MRT
                 varying vec2 vHighPrecisionZW;
                #endif
                #define NORMAL
                #if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
                    varying vec3 vViewPosition;
                #endif
                #include <common>
                #include <uv_pars_vertex>
                #include <displacementmap_pars_vertex>
                #include <normal_pars_vertex>
                #include <morphtarget_pars_vertex>
                #include <skinning_pars_vertex>
                #include <logdepthbuf_pars_vertex>
                #include <clipping_planes_pars_vertex>
                void main() {
                    #include <uv_vertex>
                    #include <beginnormal_vertex>
                    #include <morphnormal_vertex>
                    #include <skinbase_vertex>
                    #include <skinnormal_vertex>
                    #include <defaultnormal_vertex>
                    #include <normal_vertex>
                    #include <begin_vertex>
                    #include <morphtarget_vertex>
                    #include <skinning_vertex>
                    #include <displacementmap_vertex>
                    #include <project_vertex>
                    #include <logdepthbuf_vertex>
                    #include <clipping_planes_vertex>
                    #if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
                        vViewPosition = - mvPosition.xyz;
                    #endif
                    #ifdef USE_MRT
                        vHighPrecisionZW = gl_Position.zw;
                    #endif 
                    #ifdef USE_UV
                        vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
                    #endif
                }
            `,fragmentShader:`
                 #define NORMAL
                #if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
                    varying vec3 vViewPosition;
                #endif
                #include <packing>
                #include <uv_pars_fragment>
                #include <normal_pars_fragment>
                #include <bumpmap_pars_fragment>
                #include <normalmap_pars_fragment>
                #include <logdepthbuf_pars_fragment>
                #include <clipping_planes_pars_fragment>
                #include <roughnessmap_pars_fragment>
                
                #ifdef USE_MRT
                layout(location = 0) out vec4 gNormal;
                layout(location = 1) out vec4 gDepth;
                
                varying vec2 vHighPrecisionZW;
                #endif
                uniform float roughness;
                void main() {
                    #include <clipping_planes_fragment>
                    #include <logdepthbuf_fragment>
                    #include <normal_fragment_begin>
                    #include <normal_fragment_maps>

                    float roughnessFactor = roughness;
                    
                    if(roughness > 10.0e9){
                        roughnessFactor = 1.;
                    }else{
                        #ifdef useRoughnessMap
                            vec4 texelRoughness = texture2D( roughnessMap, vUv );
                            // reads channel G, compatible with a combined OcclusionRoughnessMetallic (RGB) texture
                            roughnessFactor *= texelRoughness.g;
                        #endif
                    }

                    vec3 normalColor = packNormalToRGB( normal );
                    #ifdef USE_MRT
                        float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
                        vec4 depthColor = packDepthToRGBA( fragCoordZ );
                        gNormal = vec4( normalColor, roughnessFactor );
                        gDepth = depthColor;
                    #else
                        gl_FragColor = vec4(normalColor, roughnessFactor);
                    #endif
                }
            `,toneMapped:!1}),this.normalMapType=Ja,this.normalScale=new le(1,1),Object.defineProperty(this,"glslVersion",{get(){return"USE_MRT"in this.defines?C_:null},set(e){}})}}var vJ=`#define GLSLIFY 1
varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}`,yJ=`#define GLSLIFY 1
varying vec2 vUv;uniform sampler2D inputTexture;uniform sampler2D accumulatedTexture;uniform sampler2D normalTexture;uniform sampler2D depthTexture;uniform sampler2D envMap;uniform mat4 _projectionMatrix;uniform mat4 _inverseProjectionMatrix;uniform mat4 cameraMatrixWorld;uniform float cameraNear;uniform float cameraFar;uniform float rayDistance;uniform float intensity;uniform float maxDepthDifference;uniform float roughnessFade;uniform float maxRoughness;uniform float fade;uniform float thickness;uniform float ior;uniform float samples;uniform float jitter;uniform float jitterRoughness;
#define INVALID_RAY_COORDS vec2(-1.0);
#define EARLY_OUT_COLOR vec4(0.0, 0.0, 0.0, 1.0)
#define FLOAT_EPSILON 0.00001
float nearMinusFar;float nearMulFar;float farMinusNear;
#include <packing>
#include <helperFunctions>
vec2 RayMarch(vec3 dir,inout vec3 hitPos,inout float rayHitDepthDifference);vec2 BinarySearch(in vec3 dir,inout vec3 hitPos,inout float rayHitDepthDifference);float fastGetViewZ(const in float depth);vec3 getIBLRadiance(const in vec3 viewDir,const in vec3 normal,const in float roughness);void main(){vec4 depthTexel=textureLod(depthTexture,vUv,0.0);if(dot(depthTexel.rgb,depthTexel.rgb)<FLOAT_EPSILON){gl_FragColor=EARLY_OUT_COLOR;return;}float unpackedDepth=unpackRGBAToDepth(depthTexel);vec4 normalTexel=textureLod(normalTexture,vUv,0.0);float roughness=normalTexel.a;float specular=1.0-roughness;nearMinusFar=cameraNear-cameraFar;nearMulFar=cameraNear*cameraFar;farMinusNear=cameraFar-cameraNear;normalTexel.rgb=unpackRGBToNormal(normalTexel.rgb);float depth=fastGetViewZ(unpackedDepth);vec3 viewPos=getViewPosition(depth);vec3 viewDir=normalize(viewPos);vec3 viewNormal=normalTexel.xyz;vec3 worldPos=screenSpaceToWorldSpace(vUv,unpackedDepth);vec3 jitt=vec3(0.0);if(jitterRoughness!=0.0||jitter!=0.0){vec3 randomJitter=hash(50.0*samples*worldPos)-0.5;float spread=((2.0-specular)+roughness*jitterRoughness);float jitterMix=jitter*0.25+jitterRoughness*roughness;if(jitterMix>1.0)jitterMix=1.0;jitt=mix(vec3(0.0),randomJitter*spread,jitterMix);}viewNormal+=jitt;float fresnelFactor=fresnel_dielectric(viewDir,viewNormal,ior);vec3 iblRadiance=getIBLRadiance(-viewDir,viewNormal,0.)*fresnelFactor;float lastFrameAlpha=textureLod(accumulatedTexture,vUv,0.0).a;if(roughness>maxRoughness||(roughness>1.0-FLOAT_EPSILON&&roughnessFade>1.0-FLOAT_EPSILON)){gl_FragColor=vec4(iblRadiance,lastFrameAlpha);return;}vec3 reflected=reflect(viewDir,viewNormal);vec3 rayDir=reflected*-viewPos.z;vec3 hitPos=viewPos;float rayHitDepthDifference;vec2 coords=RayMarch(rayDir,hitPos,rayHitDepthDifference);if(coords.x==-1.0){gl_FragColor=vec4(iblRadiance,lastFrameAlpha);return;}vec4 SSRTexel=textureLod(inputTexture,coords.xy,0.0);vec4 SSRTexelReflected=textureLod(accumulatedTexture,coords.xy,0.0);vec3 SSR=SSRTexel.rgb+SSRTexelReflected.rgb;float roughnessFactor=mix(specular,1.0,max(0.0,1.0-roughnessFade));vec2 coordsNDC=(coords.xy*2.0-1.0);float screenFade=0.1;float maxDimension=min(1.0,max(abs(coordsNDC.x),abs(coordsNDC.y)));float reflectionIntensity=1.0-(max(0.0,maxDimension-screenFade)/(1.0-screenFade));reflectionIntensity=max(0.,reflectionIntensity);vec3 finalSSR=mix(iblRadiance,SSR,reflectionIntensity)*roughnessFactor;if(fade!=0.0){vec3 hitWorldPos=screenSpaceToWorldSpace(coords,rayHitDepthDifference);float reflectionDistance=distance(hitWorldPos,worldPos)+1.0;float opacity=1.0/(reflectionDistance*fade*0.1);if(opacity>1.0)opacity=1.0;finalSSR*=opacity;}finalSSR*=fresnelFactor*intensity;finalSSR=min(vec3(1.0),finalSSR);float alpha=hitPos.z==1.0 ? 1.0 : SSRTexelReflected.a;alpha=min(lastFrameAlpha,alpha);gl_FragColor=vec4(finalSSR,alpha);}vec2 RayMarch(vec3 dir,inout vec3 hitPos,inout float rayHitDepthDifference){dir=normalize(dir);dir*=rayDistance/float(steps);float depth;vec4 projectedCoord;vec4 lastProjectedCoord;float unpackedDepth;vec4 depthTexel;for(int i=0;i<steps;i++){hitPos+=dir;projectedCoord=_projectionMatrix*vec4(hitPos,1.0);projectedCoord.xy/=projectedCoord.w;projectedCoord.xy=projectedCoord.xy*0.5+0.5;
#ifndef missedRays
if(projectedCoord.x<0.0||projectedCoord.x>1.0||projectedCoord.y<0.0||projectedCoord.y>1.0){return INVALID_RAY_COORDS;}
#endif
depthTexel=textureLod(depthTexture,projectedCoord.xy,0.0);unpackedDepth=unpackRGBAToDepth(depthTexel);depth=fastGetViewZ(unpackedDepth);rayHitDepthDifference=depth-hitPos.z;if(rayHitDepthDifference>=0.0&&rayHitDepthDifference<thickness){
#if refineSteps == 0
if(dot(depthTexel.rgb,depthTexel.rgb)<FLOAT_EPSILON)return INVALID_RAY_COORDS;
#else
return BinarySearch(dir,hitPos,rayHitDepthDifference);
#endif
}
#ifndef missedRays
if(hitPos.z>0.0){return INVALID_RAY_COORDS;}
#endif
lastProjectedCoord=projectedCoord;}hitPos.z=1.0;
#ifndef missedRays
return INVALID_RAY_COORDS;
#endif
rayHitDepthDifference=unpackedDepth;return projectedCoord.xy;}vec2 BinarySearch(in vec3 dir,inout vec3 hitPos,inout float rayHitDepthDifference){float depth;vec4 projectedCoord;vec2 lastMinProjectedCoordXY;float unpackedDepth;vec4 depthTexel;for(int i=0;i<refineSteps;i++){projectedCoord=_projectionMatrix*vec4(hitPos,1.0);projectedCoord.xy/=projectedCoord.w;projectedCoord.xy=projectedCoord.xy*0.5+0.5;depthTexel=textureLod(depthTexture,projectedCoord.xy,0.0);unpackedDepth=unpackRGBAToDepth(depthTexel);depth=fastGetViewZ(unpackedDepth);rayHitDepthDifference=depth-hitPos.z;dir*=0.5;if(rayHitDepthDifference>0.0){hitPos-=dir;}else{hitPos+=dir;}}if(dot(depthTexel.rgb,depthTexel.rgb)<FLOAT_EPSILON)return INVALID_RAY_COORDS;if(abs(rayHitDepthDifference)>maxDepthDifference)return INVALID_RAY_COORDS;projectedCoord=_projectionMatrix*vec4(hitPos,1.0);projectedCoord.xy/=projectedCoord.w;projectedCoord.xy=projectedCoord.xy*0.5+0.5;rayHitDepthDifference=unpackedDepth;return projectedCoord.xy;}float fastGetViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return nearMulFar/(farMinusNear*depth-cameraFar);
#else
return depth*nearMinusFar-cameraNear;
#endif
}
#include <common>
#include <cube_uv_reflection_fragment>
vec3 getIBLRadiance(const in vec3 viewDir,const in vec3 normal,const in float roughness){
#if defined(ENVMAP_TYPE_CUBE_UV)
vec3 reflectVec=reflect(-viewDir,normal);reflectVec=normalize(mix(reflectVec,normal,roughness*roughness));reflectVec=inverseTransformDirection(reflectVec,viewMatrix);vec4 envMapColor=textureCubeUV(envMap,reflectVec,roughness);return envMapColor.rgb*intensity;
#else
return vec3(0.0);
#endif
}`;class _J extends on{constructor(){super({type:"ReflectionsMaterial",uniforms:{inputTexture:new ie(null),accumulatedTexture:new ie(null),normalTexture:new ie(null),depthTexture:new ie(null),_projectionMatrix:new ie(new mt),_inverseProjectionMatrix:new ie(new mt),cameraMatrixWorld:new ie(new mt),cameraNear:new ie(0),cameraFar:new ie(0),rayDistance:new ie(0),intensity:new ie(0),roughnessFade:new ie(0),fade:new ie(0),thickness:new ie(0),ior:new ie(0),maxDepthDifference:new ie(0),jitter:new ie(0),jitterRoughness:new ie(0),maxRoughness:new ie(0),samples:new ie(0),envMap:new ie(null),envMapPosition:new ie(new N),envMapSize:new ie(new N),viewMatrix:new ie(new mt)},defines:{steps:20,refineSteps:5,CUBEUV_TEXEL_WIDTH:0,CUBEUV_TEXEL_HEIGHT:0,CUBEUV_MAX_MIP:0,vWorldPosition:"worldPos"},fragmentShader:yJ.replace("#include <helperFunctions>",qF),vertexShader:vJ,toneMapped:!1,depthWrite:!1,depthTest:!1})}}const ZF=n=>{const e=[n],t=[];for(;e.length!==0;){const i=e.shift();i.material&&t.push(i);for(const r of i.children)r.visible&&e.push(r)}return t},xJ=n=>{const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}},eL=(n,e,t)=>{n.uniforms.envMap.value=e;const i=xJ({envMapCubeUVHeight:t});n.defines.ENVMAP_TYPE_CUBE_UV="",n.defines.CUBEUV_TEXEL_WIDTH=i.texelWidth,n.defines.CUBEUV_TEXEL_HEIGHT=i.texelHeight,n.defines.CUBEUV_MAX_MIP=i.maxMip+".0",n.needsUpdate=!0},SJ=()=>{try{const n=document.createElement("canvas");return!!(window.WebGL2RenderingContext&&n.getContext("webgl2"))}catch{return!1}};class wJ extends Ei{constructor(e,t={}){super("ReflectionsPass"),this.ssrEffect=void 0,this.cachedMaterials=new WeakMap,this.USE_MRT=!1,this.webgl1DepthPass=null,this.visibleMeshes=[],this.ssrEffect=e,this._scene=e._scene,this._camera=e._camera,this.fullscreenMaterial=new _J,e._camera.isPerspectiveCamera&&(this.fullscreenMaterial.defines.PERSPECTIVE_CAMERA="");const i=t.width||typeof window<"u"?window.innerWidth:2e3,r=t.height||typeof window<"u"?window.innerHeight:1e3;this.renderTarget=new qt(i,r,{minFilter:vt,magFilter:vt,type:ps,depthBuffer:!1}),this.renderPass=new _d(this._scene,this._camera),this.USE_MRT=SJ(),this.USE_MRT?(this.gBuffersRenderTarget=new fU(i,r,2,{minFilter:vt,magFilter:vt}),this.normalTexture=this.gBuffersRenderTarget.texture[0],this.depthTexture=this.gBuffersRenderTarget.texture[1]):(this.webgl1DepthPass=new OC(this._scene,this._camera),this.webgl1DepthPass.renderTarget.minFilter=vt,this.webgl1DepthPass.renderTarget.magFilter=vt,this.webgl1DepthPass.renderTarget.texture.minFilter=vt,this.webgl1DepthPass.renderTarget.texture.magFilter=vt,this.webgl1DepthPass.setSize(typeof window<"u"?window.innerWidth:2e3,typeof window<"u"?window.innerHeight:1e3),this.gBuffersRenderTarget=new qt(i,r,{minFilter:vt,magFilter:vt}),this.normalTexture=this.gBuffersRenderTarget.texture,this.depthTexture=this.webgl1DepthPass.texture),this.fullscreenMaterial.uniforms.normalTexture.value=this.normalTexture,this.fullscreenMaterial.uniforms.depthTexture.value=this.depthTexture,this.fullscreenMaterial.uniforms.accumulatedTexture.value=this.ssrEffect.temporalResolvePass.accumulatedTexture,this.fullscreenMaterial.uniforms.cameraMatrixWorld.value=this._camera.matrixWorld,this.fullscreenMaterial.uniforms._projectionMatrix.value=this._camera.projectionMatrix,this.fullscreenMaterial.uniforms._inverseProjectionMatrix.value=this._camera.projectionMatrixInverse}setSize(e,t){this.renderTarget.setSize(e*this.ssrEffect.resolutionScale,t*this.ssrEffect.resolutionScale),this.gBuffersRenderTarget.setSize(e*this.ssrEffect.resolutionScale,t*this.ssrEffect.resolutionScale),this.fullscreenMaterial.uniforms.accumulatedTexture.value=this.ssrEffect.temporalResolvePass.accumulatedTexture,this.fullscreenMaterial.needsUpdate=!0}dispose(){this.renderTarget.dispose(),this.gBuffersRenderTarget.dispose(),this.renderPass.dispose(),this.USE_MRT||this.webgl1DepthPass.dispose(),this.fullscreenMaterial.dispose(),this.normalTexture=null,this.depthTexture=null,this.velocityTexture=null}keepMaterialMapUpdated(e,t,i,r){this.ssrEffect[r]?t[i]!==e[i]&&(e[i]=t[i],e.uniforms[i].value=t[i],t[i]?e.defines[r]="":delete e.defines[r],e.needsUpdate=!0):e[i]!==void 0&&(e[i]=void 0,e.uniforms[i].value=void 0,delete e.defines[r],e.needsUpdate=!0)}setMRTMaterialInScene(){this.visibleMeshes=ZF(this._scene);for(const e of this.visibleMeshes)if(e.material){const t=e.material;let[i,r]=this.cachedMaterials.get(e)||[];if(t!==i){r&&r.dispose(),r=new gJ,this.USE_MRT&&(r.defines.USE_MRT=""),r.normalScale=t.normalScale,r.uniforms.normalScale.value=t.normalScale;const s=t.map||t.normalMap||t.roughnessMap||t.metalnessMap;s&&(r.uniforms.uvTransform.value=s.matrix),this.cachedMaterials.set(e,[t,r])}this.keepMaterialMapUpdated(r,t,"normalMap","useNormalMap"),this.keepMaterialMapUpdated(r,t,"roughnessMap","useRoughnessMap"),r.uniforms.roughness.value=this.ssrEffect.selection.size===0||this.ssrEffect.selection.has(e)?t.roughness||0:1e11,e.material=r}}unsetMRTMaterialInScene(){for(const t of this.visibleMeshes){var e;if(((e=t.material)==null?void 0:e.type)==="MRTMaterial"){t.visible=!0;const[i]=this.cachedMaterials.get(t);t.material=i}}}render(e,t){this.setMRTMaterialInScene(),e.setRenderTarget(this.gBuffersRenderTarget),this.renderPass.render(e,this.gBuffersRenderTarget),this.unsetMRTMaterialInScene(),this.USE_MRT||this.webgl1DepthPass.renderPass.render(e,this.webgl1DepthPass.renderTarget),this.fullscreenMaterial.uniforms.inputTexture.value=t.texture,this.fullscreenMaterial.uniforms.samples.value=this.ssrEffect.temporalResolvePass.samples,this.fullscreenMaterial.uniforms.cameraNear.value=this._camera.near,this.fullscreenMaterial.uniforms.cameraFar.value=this._camera.far,this.fullscreenMaterial.uniforms.viewMatrix.value.copy(this._camera.matrixWorldInverse),e.setRenderTarget(this.renderTarget),e.render(this.scene,this.camera)}}const tL={intensity:1,exponent:1,distance:10,fade:0,roughnessFade:1,thickness:10,ior:1.45,maxRoughness:1,maxDepthDifference:10,blend:.9,correction:1,correctionRadius:1,blur:.5,blurKernel:1,blurSharpness:10,jitter:0,jitterRoughness:0,steps:20,refineSteps:5,missedRays:!0,useNormalMap:!0,useRoughnessMap:!0,resolutionScale:1,velocityResolutionScale:1};var MJ=`#define GLSLIFY 1
varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}`,TJ=`#define GLSLIFY 1
uniform sampler2D inputTexture;uniform sampler2D accumulatedTexture;uniform sampler2D velocityTexture;uniform sampler2D lastVelocityTexture;uniform float blend;uniform float correction;uniform float exponent;uniform float samples;uniform vec2 invTexSize;uniform mat4 curInverseProjectionMatrix;uniform mat4 curCameraMatrixWorld;uniform mat4 prevInverseProjectionMatrix;uniform mat4 prevCameraMatrixWorld;varying vec2 vUv;
#define MAX_NEIGHBOR_DEPTH_DIFFERENCE 0.001
#define FLOAT_EPSILON 0.00001
#define FLOAT_ONE_MINUS_EPSILON 0.99999
vec3 transformexponent;vec3 undoColorTransformExponent;vec3 transformColor(vec3 color){if(exponent==1.0)return color;return pow(abs(color),transformexponent);}vec3 undoColorTransform(vec3 color){if(exponent==1.0)return color;return max(pow(abs(color),undoColorTransformExponent),vec3(0.0));}void main(){if(exponent!=1.0){transformexponent=vec3(1.0/exponent);undoColorTransformExponent=vec3(exponent);}vec4 inputTexel=textureLod(inputTexture,vUv,0.0);vec4 accumulatedTexel;vec3 inputColor=transformColor(inputTexel.rgb);vec3 accumulatedColor;float alpha=inputTexel.a;float velocityDisocclusion;bool didReproject=false;
#ifdef boxBlur
vec3 boxBlurredColor=inputTexel.rgb;
#endif
vec4 velocity=textureLod(velocityTexture,vUv,0.0);bool isMoving=alpha<1.0||dot(velocity.xy,velocity.xy)>0.0;if(isMoving){vec3 minNeighborColor=inputColor;vec3 maxNeighborColor=inputColor;vec3 col;vec2 neighborUv;vec2 reprojectedUv=vUv-velocity.xy;vec4 lastVelocity=textureLod(lastVelocityTexture,reprojectedUv,0.0);float depth=velocity.b;float closestDepth=depth;float lastClosestDepth=lastVelocity.b;float neighborDepth;float lastNeighborDepth;for(int x=-correctionRadius;x<=correctionRadius;x++){for(int y=-correctionRadius;y<=correctionRadius;y++){if(x!=0||y!=0){neighborUv=vUv+vec2(x,y)*invTexSize;vec4 neigborVelocity=textureLod(velocityTexture,neighborUv,0.0);neighborDepth=neigborVelocity.b;col=textureLod(inputTexture,neighborUv,0.0).xyz;int absX=abs(x);int absY=abs(y);
#ifdef dilation
if(absX==1&&absY==1){if(neighborDepth>closestDepth){velocity=neigborVelocity;closestDepth=neighborDepth;}vec4 lastNeighborVelocity=textureLod(velocityTexture,vUv+vec2(x,y)*invTexSize,0.0);lastNeighborDepth=lastNeighborVelocity.b;if(neighborDepth>closestDepth){lastVelocity=lastNeighborVelocity;lastClosestDepth=lastNeighborDepth;}}
#endif
if(abs(depth-neighborDepth)<MAX_NEIGHBOR_DEPTH_DIFFERENCE){
#ifdef boxBlur
if(absX<=2&&absY<=2)boxBlurredColor+=col;
#endif
col=transformColor(col);minNeighborColor=min(col,minNeighborColor);maxNeighborColor=max(col,maxNeighborColor);}}}}float velocityLength=length(lastVelocity.xy-velocity.xy);velocityDisocclusion=(velocityLength-0.000005)*10.0;velocityDisocclusion*=velocityDisocclusion;reprojectedUv=vUv-velocity.xy;
#ifdef boxBlur
float pxRadius=correctionRadius>5 ? 121.0 : pow(float(correctionRadius*2+1),2.0);boxBlurredColor/=pxRadius;boxBlurredColor=transformColor(boxBlurredColor);
#endif
if(reprojectedUv.x>=0.0&&reprojectedUv.x<=1.0&&reprojectedUv.y>=0.0&&reprojectedUv.y<=1.0){accumulatedTexel=textureLod(accumulatedTexture,reprojectedUv,0.0);accumulatedColor=transformColor(accumulatedTexel.rgb);vec3 clampedColor=clamp(accumulatedColor,minNeighborColor,maxNeighborColor);accumulatedColor=mix(accumulatedColor,clampedColor,correction);didReproject=true;}else{
#ifdef boxBlur
accumulatedColor=boxBlurredColor;
#else
accumulatedColor=inputColor;
#endif
}if(velocity.r>FLOAT_ONE_MINUS_EPSILON&&velocity.g>FLOAT_ONE_MINUS_EPSILON){alpha=0.0;velocityDisocclusion=1.0;}}else{accumulatedColor=transformColor(textureLod(accumulatedTexture,vUv,0.0).rgb);}vec3 outputColor=inputColor;
#include <custom_compose_shader>
gl_FragColor=vec4(undoColorTransform(outputColor),alpha);}`;class EJ extends on{constructor(e){const t=TJ.replace("#include <custom_compose_shader>",e);super({type:"TemporalResolveMaterial",uniforms:{inputTexture:new ie(null),accumulatedTexture:new ie(null),velocityTexture:new ie(null),lastVelocityTexture:new ie(null),samples:new ie(1),blend:new ie(.5),correction:new ie(1),exponent:new ie(1),invTexSize:new ie(new le)},defines:{correctionRadius:1},vertexShader:MJ,fragmentShader:t})}}const bJ=`
		#ifdef USE_SKINNING
		#ifdef BONE_TEXTURE
			uniform sampler2D prevBoneTexture;
			mat4 getPrevBoneMatrix( const in float i ) {
				float j = i * 4.0;
				float x = mod( j, float( boneTextureSize ) );
				float y = floor( j / float( boneTextureSize ) );
				float dx = 1.0 / float( boneTextureSize );
				float dy = 1.0 / float( boneTextureSize );
				y = dy * ( y + 0.5 );
				vec4 v1 = texture2D( prevBoneTexture, vec2( dx * ( x + 0.5 ), y ) );
				vec4 v2 = texture2D( prevBoneTexture, vec2( dx * ( x + 1.5 ), y ) );
				vec4 v3 = texture2D( prevBoneTexture, vec2( dx * ( x + 2.5 ), y ) );
				vec4 v4 = texture2D( prevBoneTexture, vec2( dx * ( x + 3.5 ), y ) );
				mat4 bone = mat4( v1, v2, v3, v4 );
				return bone;
			}
		#else
			uniform mat4 prevBoneMatrices[ MAX_BONES ];
			mat4 getPrevBoneMatrix( const in float i ) {
				mat4 bone = prevBoneMatrices[ int(i) ];
				return bone;
			}
		#endif
		#endif
`,CJ=`
		vec3 transformed;

		// Get the normal
		${pt.skinbase_vertex}
		${pt.beginnormal_vertex}
		${pt.skinnormal_vertex}
		${pt.defaultnormal_vertex}

		// Get the current vertex position
		transformed = vec3( position );
		${pt.skinning_vertex}
		newPosition = velocityMatrix * vec4( transformed, 1.0 );

		// Get the previous vertex position
		transformed = vec3( position );
		${pt.skinbase_vertex.replace(/mat4 /g,"").replace(/getBoneMatrix/g,"getPrevBoneMatrix")}
		${pt.skinning_vertex.replace(/vec4 /g,"")}
		prevPosition = prevVelocityMatrix * vec4( transformed, 1.0 );

		gl_Position = newPosition;
`;class PJ extends on{constructor(){super({uniforms:{prevVelocityMatrix:{value:new mt},velocityMatrix:{value:new mt},prevBoneTexture:{value:null},interpolateGeometry:{value:0},intensity:{value:1},boneTexture:{value:null},alphaTest:{value:0},map:{value:null},alphaMap:{value:null},opacity:{value:1}},vertexShader:`
                    #define MAX_BONES 1024
                    
                    ${pt.skinning_pars_vertex}
                    ${bJ}
        
                    uniform mat4 velocityMatrix;
                    uniform mat4 prevVelocityMatrix;
                    uniform float interpolateGeometry;
                    varying vec4 prevPosition;
                    varying vec4 newPosition;
					varying vec2 vHighPrecisionZW;
        
                    void main() {
        
                        ${CJ}

						vHighPrecisionZW = gl_Position.zw;
        
                    }`,fragmentShader:`
                    uniform float intensity;
                    varying vec4 prevPosition;
                    varying vec4 newPosition;
					varying vec2 vHighPrecisionZW;
        
                    void main() {
						#ifdef FULL_MOVEMENT
						gl_FragColor = vec4( 1., 1., 1. - gl_FragCoord.z, 0. );
						return;
						#endif

                        vec2 pos0 = (prevPosition.xy / prevPosition.w) * 0.5 + 0.5;
                        vec2 pos1 = (newPosition.xy / newPosition.w) * 0.5 + 0.5;
        
                        vec2 vel = pos1 - pos0;

						float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
                        
                        gl_FragColor = vec4( vel, 1. - fragCoordZ, 0. );
        
                    }`}),this.isVelocityMaterial=!0}}const AJ=new Oe(0),RJ=["visible","wireframe","side"];class DJ extends Ei{constructor(e,t){var i,r;super("VelocityPass"),this.cachedMaterials=new WeakMap,this.lastCameraTransform={position:new N,quaternion:new Si},this.visibleMeshes=[],this.renderedMeshesThisFrame=0,this.renderedMeshesLastFrame=0,this._scene=e,this._camera=t,this.renderTarget=new qt(((i=window)==null?void 0:i.innerWidth)||1e3,((r=window)==null?void 0:r.innerHeight)||1e3,{type:ps})}setVelocityMaterialInScene(){this.renderedMeshesThisFrame=0,this.visibleMeshes=ZF(this._scene);for(const i of this.visibleMeshes){var e;const r=i.material;let[s,o]=this.cachedMaterials.get(i)||[];if(r!==s){var t;o=new PJ,o.lastMatrixWorld=new mt,i.material=o,(t=i.skeleton)!=null&&t.boneTexture&&this.saveBoneTexture(i),this.cachedMaterials.set(i,[r,o])}if(o.uniforms.velocityMatrix.value.multiplyMatrices(this._camera.projectionMatrix,i.modelViewMatrix),i.userData.needsUpdatedReflections||r.map instanceof RU?("FULL_MOVEMENT"in o.defines||(o.needsUpdate=!0),o.defines.FULL_MOVEMENT=""):"FULL_MOVEMENT"in o.defines&&(delete o.defines.FULL_MOVEMENT,o.needsUpdate=!0),i.visible=this.cameraMovedThisFrame||!i.matrixWorld.equals(o.lastMatrixWorld)||i.skeleton||"FULL_MOVEMENT"in o.defines,i.material=o,!!i.visible){this.renderedMeshesThisFrame++;for(const a of RJ)o[a]=r[a];(e=i.skeleton)!=null&&e.boneTexture&&(o.defines.USE_SKINNING="",o.defines.BONE_TEXTURE="",o.uniforms.boneTexture.value=i.skeleton.boneTexture)}}}saveBoneTexture(e){let t=e.material.uniforms.prevBoneTexture.value;if(t&&t.image.width===e.skeleton.boneTexture.width)t=e.material.uniforms.prevBoneTexture.value,t.image.data.set(e.skeleton.boneTexture.image.data);else{var i;(i=t)==null||i.dispose();const r=e.skeleton.boneTexture.image.data.slice(),s=e.skeleton.boneTexture.image.width;t=new Ua(r,s,s,Dn,Jn),e.material.uniforms.prevBoneTexture.value=t,t.needsUpdate=!0}}unsetVelocityMaterialInScene(){for(const t of this.visibleMeshes)if(t.material.isVelocityMaterial){var e;t.visible=!0,t.material.lastMatrixWorld.copy(t.matrixWorld),t.material.uniforms.prevVelocityMatrix.value.multiplyMatrices(this._camera.projectionMatrix,t.modelViewMatrix),(e=t.skeleton)!=null&&e.boneTexture&&this.saveBoneTexture(t),t.material=this.cachedMaterials.get(t)[0]}}setSize(e,t){this.renderTarget.setSize(e,t)}renderVelocity(e){if(e.setRenderTarget(this.renderTarget),this.renderedMeshesThisFrame>0){const{background:t}=this._scene;this._scene.background=AJ,e.render(this._scene,this._camera),this._scene.background=t}else e.clearColor()}checkCameraMoved(){const e=this.lastCameraTransform.position.distanceToSquared(this._camera.position),t=8*(1-this.lastCameraTransform.quaternion.dot(this._camera.quaternion));return e>1e-6||t>1e-6?(this.lastCameraTransform.position.copy(this._camera.position),this.lastCameraTransform.quaternion.copy(this._camera.quaternion),!0):!1}render(e){this.cameraMovedThisFrame=this.checkCameraMoved(),this.setVelocityMaterialInScene(),(this.renderedMeshesThisFrame>0||this.renderedMeshesLastFrame>0)&&this.renderVelocity(e),this.unsetVelocityMaterialInScene(),this.renderedMeshesLastFrame=this.renderedMeshesThisFrame}}const nL=new le;class LJ extends Ei{constructor(e,t,i,r={}){super("TemporalResolvePass"),this.velocityPass=null,this.velocityResolutionScale=1,this.samples=1,this.lastCameraTransform={position:new N,quaternion:new Si},this._scene=e,this._camera=t,this.renderTarget=new qt(1,1,{minFilter:vt,magFilter:vt,type:ps,depthBuffer:!1}),this.velocityPass=new DJ(e,t),this.fullscreenMaterial=new EJ(i),this.fullscreenMaterial.defines.correctionRadius=r.correctionRadius||1,r.dilation&&(this.fullscreenMaterial.defines.dilation=""),r.boxBlur&&(this.fullscreenMaterial.defines.boxBlur=""),this.setupFramebuffers(1,1),this.checkCanUseSharedVelocityTexture()}dispose(){this._scene.userData.velocityTexture===this.velocityPass.renderTarget.texture&&(delete this._scene.userData.velocityTexture,delete this._scene.userData.lastVelocityTexture),this.renderTarget.dispose(),this.accumulatedTexture.dispose(),this.fullscreenMaterial.dispose(),this.velocityPass.dispose()}setSize(e,t){this.renderTarget.setSize(e,t),this.velocityPass.setSize(e*this.velocityResolutionScale,t*this.velocityResolutionScale),this.velocityPass.renderTarget.texture.minFilter=this.velocityResolutionScale===1?Ht:vt,this.velocityPass.renderTarget.texture.magFilter=this.velocityResolutionScale===1?Ht:vt,this.velocityPass.renderTarget.texture.needsUpdate=!0,this.fullscreenMaterial.uniforms.invTexSize.value.set(1/e,1/t),this.setupFramebuffers(e,t)}setupFramebuffers(e,t){this.accumulatedTexture&&this.accumulatedTexture.dispose(),this.lastVelocityTexture&&this.lastVelocityTexture.dispose(),this.accumulatedTexture=new DT(e,t,Dn),this.accumulatedTexture.minFilter=vt,this.accumulatedTexture.magFilter=vt,this.accumulatedTexture.type=ps,this.lastVelocityTexture=new DT(e*this.velocityResolutionScale,t*this.velocityResolutionScale,Dn),this.lastVelocityTexture.minFilter=this.velocityResolutionScale===1?Ht:vt,this.lastVelocityTexture.magFilter=this.velocityResolutionScale===1?Ht:vt,this.lastVelocityTexture.type=ps,this.fullscreenMaterial.uniforms.accumulatedTexture.value=this.accumulatedTexture,this.fullscreenMaterial.uniforms.lastVelocityTexture.value=this.lastVelocityTexture,this.fullscreenMaterial.needsUpdate=!0}checkCanUseSharedVelocityTexture(){return this._scene.userData.velocityTexture&&this.velocityPass.renderTarget.texture!==this._scene.userData.velocityTexture?this.velocityPass.renderTarget.texture===this.fullscreenMaterial.uniforms.velocityTexture.value&&(this.fullscreenMaterial.uniforms.lastVelocityTexture.value=this._scene.userData.lastVelocityTexture,this.fullscreenMaterial.uniforms.velocityTexture.value=this._scene.userData.velocityTexture,this.fullscreenMaterial.needsUpdate=!0):this.velocityPass.renderTarget.texture!==this.fullscreenMaterial.uniforms.velocityTexture.value&&(this.fullscreenMaterial.uniforms.velocityTexture.value=this.velocityPass.renderTarget.texture,this.fullscreenMaterial.uniforms.lastVelocityTexture.value=this.lastVelocityTexture,this.fullscreenMaterial.needsUpdate=!0,this._scene.userData.velocityTexture||(this._scene.userData.velocityTexture=this.velocityPass.renderTarget.texture,this._scene.userData.lastVelocityTexture=this.lastVelocityTexture)),this.velocityPass.renderTarget.texture!==this.fullscreenMaterial.uniforms.velocityTexture.value}checkNeedsResample(){const e=this.lastCameraTransform.position.distanceToSquared(this._camera.position),t=8*(1-this.lastCameraTransform.quaternion.dot(this._camera.quaternion));(e>1e-6||t>1e-6)&&(this.samples=1,this.lastCameraTransform.position.copy(this._camera.position),this.lastCameraTransform.quaternion.copy(this._camera.quaternion))}render(e){this.samples++,this.checkNeedsResample(),this.fullscreenMaterial.uniforms.samples.value=this.samples,e.setRenderTarget(this.renderTarget),e.render(this.scene,this.camera),e.copyFramebufferToTexture(nL,this.accumulatedTexture),e.setRenderTarget(this.velocityPass.renderTarget),e.copyFramebufferToTexture(nL,this.lastVelocityTexture)}}const iL=function(e,t){let i=1,r=0;for(;e>0;)i/=t,r+=i*(e%t),e=~~(e/t);return r},IJ=n=>{const e=[];let t=1;const i=t+n;for(;t<i;t++)e.push([iL(t,2)-.5,iL(t,3)-.5]);return e};function rL(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}const kJ=`
#if defined( USE_ENVMAP ) || defined(  ) || defined ( USE_SHADOWMAP )
    vec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );

    #ifdef BOX_PROJECTED_ENV_MAP
        vWorldPosition = worldPosition.xyz;
    #endif
#endif
`,OJ=`
#ifdef BOX_PROJECTED_ENV_MAP
    uniform vec3 envMapSize;
    uniform vec3 envMapPosition;
    varying vec3 vWorldPosition;
    
    vec3 parallaxCorrectNormal( vec3 v, vec3 cubeSize, vec3 cubePos ) {
        vec3 nDir = normalize( v );

        vec3 rbmax = ( .5 * cubeSize + cubePos - vWorldPosition ) / nDir;
        vec3 rbmin = ( -.5 * cubeSize + cubePos - vWorldPosition ) / nDir;

        vec3 rbminmax;

        rbminmax.x = ( nDir.x > 0. ) ? rbmax.x : rbmin.x;
        rbminmax.y = ( nDir.y > 0. ) ? rbmax.y : rbmin.y;
        rbminmax.z = ( nDir.z > 0. ) ? rbmax.z : rbmin.z;

        float correction = min( min( rbminmax.x, rbminmax.y ), rbminmax.z );
        vec3 boxIntersection = vWorldPosition + nDir * correction;
        
        return boxIntersection - cubePos;
    }
#endif
`,NJ=`
#ifdef BOX_PROJECTED_ENV_MAP
    worldNormal = parallaxCorrectNormal( worldNormal, envMapSize, envMapPosition );
#endif
`,UJ=`
#ifdef BOX_PROJECTED_ENV_MAP
    reflectVec = parallaxCorrectNormal( reflectVec, envMapSize, envMapPosition );
#endif
`;function FJ(n,e,t){n.defines.BOX_PROJECTED_ENV_MAP="",n.uniforms.envMapPosition={value:e},n.uniforms.envMapSize={value:t};const i=new RegExp(rL("vec3 worldNormal = inverseTransformDirection ( normal , viewMatrix ) ;").replaceAll(" ","\\s*"),"g"),r=new RegExp(rL("reflectVec = inverseTransformDirection ( reflectVec , viewMatrix ) ;").replaceAll(" ","\\s*"),"g");n.vertexShader=`varying vec3 vWorldPosition;
`+n.vertexShader.replace("#include <worldpos_vertex>",kJ),n.fragmentShader=OJ+`
`+n.fragmentShader.replace("#include <envmap_physical_pars_fragment>",pt.envmap_physical_pars_fragment).replace(i,`vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
                ${NJ}`).replace(r,`reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
                ${UJ}`)}const zJ=pJ.replace("#include <helperFunctions>",qF).replace("#include <boxBlur>",dJ),BJ=["blur","blurSharpness","blurKernel"],VJ=new _g(1);let K0;class HJ extends cr{constructor(e,t,i=tL){super("SSREffect",zJ,{type:"FinalSSRMaterial",uniforms:new Map([["reflectionsTexture",new ie(null)],["blur",new ie(0)],["blurSharpness",new ie(0)],["blurKernel",new ie(0)]]),defines:new Map([["RENDER_MODE","0"]])}),this.haltonSequence=IJ(1024),this.haltonIndex=0,this.selection=new NC,this.lastSize=void 0,this.cubeCamera=new bx(.001,1e3,VJ),this.usingBoxProjectedEnvMap=!1,this._scene=e,this._camera=t,i=WT({},tL,i,{boxBlur:!0,dilation:!0}),this.temporalResolvePass=new LJ(e,t,mJ,i),this.uniforms.get("reflectionsTexture").value=this.temporalResolvePass.renderTarget.texture,this.reflectionsPass=new wJ(this,i),this.temporalResolvePass.fullscreenMaterial.uniforms.inputTexture.value=this.reflectionsPass.renderTarget.texture,this.lastSize={width:i.width,height:i.height,resolutionScale:i.resolutionScale,velocityResolutionScale:i.velocityResolutionScale},this.setSize(i.width,i.height),this.makeOptionsReactive(i)}makeOptionsReactive(e){let t=!1;const i=this.reflectionsPass.fullscreenMaterial.uniforms,r=Object.keys(i);for(const s of Object.keys(e))Object.defineProperty(this,s,{get(){return e[s]},set(o){if(!(e[s]===o&&t))switch(e[s]=o,BJ.includes(s)||this.setSize(this.lastSize.width,this.lastSize.height,!0),s){case"resolutionScale":this.setSize(this.lastSize.width,this.lastSize.height);break;case"velocityResolutionScale":this.temporalResolvePass.velocityResolutionScale=o,this.setSize(this.lastSize.width,this.lastSize.height,!0);break;case"blur":this.uniforms.get("blur").value=o;break;case"blurSharpness":this.uniforms.get("blurSharpness").value=o;break;case"blurKernel":this.uniforms.get("blurKernel").value=o;break;case"steps":this.reflectionsPass.fullscreenMaterial.defines.steps=parseInt(o),this.reflectionsPass.fullscreenMaterial.needsUpdate=t;break;case"refineSteps":this.reflectionsPass.fullscreenMaterial.defines.refineSteps=parseInt(o),this.reflectionsPass.fullscreenMaterial.needsUpdate=t;break;case"missedRays":o?this.reflectionsPass.fullscreenMaterial.defines.missedRays="":delete this.reflectionsPass.fullscreenMaterial.defines.missedRays,this.reflectionsPass.fullscreenMaterial.needsUpdate=t;break;case"correctionRadius":this.temporalResolvePass.fullscreenMaterial.defines.correctionRadius=Math.round(o),this.temporalResolvePass.fullscreenMaterial.needsUpdate=t;break;case"blend":this.temporalResolvePass.fullscreenMaterial.uniforms.blend.value=o;break;case"correction":this.temporalResolvePass.fullscreenMaterial.uniforms.correction.value=o;break;case"exponent":this.temporalResolvePass.fullscreenMaterial.uniforms.exponent.value=o;break;case"distance":i.rayDistance.value=o;default:r.includes(s)&&(i[s].value=o)}}}),this[s]=e[s];t=!0}setSize(e,t,i=!1){!i&&e===this.lastSize.width&&t===this.lastSize.height&&this.resolutionScale===this.lastSize.resolutionScale&&this.velocityResolutionScale===this.lastSize.velocityResolutionScale||(this.temporalResolvePass.setSize(e,t),this.reflectionsPass.setSize(e,t),this.lastSize={width:e,height:t,resolutionScale:this.resolutionScale,velocityResolutionScale:this.velocityResolutionScale})}generateBoxProjectedEnvMapFallback(e,t=new N,i=new N,r=512){this.cubeCamera.renderTarget.dispose(),this.cubeCamera.renderTarget=new _g(r),this.cubeCamera.position.copy(t),this.cubeCamera.updateMatrixWorld(),this.cubeCamera.update(e,this._scene),K0||(K0=new A_(e),K0.compileCubemapShader());const s=K0.fromCubemap(this.cubeCamera.renderTarget.texture).texture;s.minFilter=vt,s.magFilter=vt;const o=this.reflectionsPass.fullscreenMaterial;return FJ(o,t,i),o.fragmentShader=o.fragmentShader.replace("vec3 worldPos","worldPos").replace("varying vec3 vWorldPosition;","vec3 worldPos;"),o.uniforms.envMapPosition.value.copy(t),o.uniforms.envMapSize.value.copy(i),eL(o,s,r),this.usingBoxProjectedEnvMap=!0,s}setIBLRadiance(e,t){this._scene.traverse(i=>{if(i.material){var r;const s=(r=t.properties.get(i.material))==null?void 0:r.uniforms;s&&"disableIBLRadiance"in s&&(s.disableIBLRadiance.value=e)}})}deleteBoxProjectedEnvMapFallback(){const e=this.reflectionsPass.fullscreenMaterial;e.uniforms.envMap.value=null,e.fragmentShader=e.fragmentShader.replace("worldPos = ","vec3 worldPos = "),delete e.defines.BOX_PROJECTED_ENV_MAP,e.needsUpdate=!0,this.usingBoxProjectedEnvMap=!1}dispose(){super.dispose(),this.reflectionsPass.dispose(),this.temporalResolvePass.dispose()}update(e,t){if(!this.usingBoxProjectedEnvMap&&this._scene.environment){const a=this.reflectionsPass.fullscreenMaterial;let l=null;if(this._scene.traverse(u=>{if(!l&&u.material&&!u.material.envMap){const f=e.properties.get(u.material);"envMap"in f&&f.envMap instanceof bn&&(l=f.envMap)}}),l){const u=this._scene.environment.image.height;eL(a,l,u)}}this.haltonIndex=(this.haltonIndex+1)%this.haltonSequence.length;const[i,r]=this.haltonSequence[this.haltonIndex],{width:s,height:o}=this.lastSize;this.temporalResolvePass.velocityPass.render(e),this._camera.setViewOffset&&this._camera.setViewOffset(s,o,i,r,s,o),this.reflectionsPass.render(e,t),this.temporalResolvePass.render(e),this._camera.clearViewOffset()}static patchDirectEnvIntensity(e=0){e===0?pt.envmap_physical_pars_fragment=pt.envmap_physical_pars_fragment.replace("vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {","vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) { return vec3(0.0);"):pt.envmap_physical_pars_fragment=pt.envmap_physical_pars_fragment.replace("vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );","vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness ) * "+e.toFixed(5)+";")}}O.forwardRef(({target:n=void 0,mouse:e=!1,debug:t=void 0,manual:i=!1,smoothTime:r=0,...s},o)=>{const a=O.useRef(null),l=O.useRef(null),u=O.useRef(null),f=sr(({scene:b})=>b),d=sr(({pointer:b})=>b),{composer:p,camera:m}=O.useContext(gu),[g]=O.useState(()=>new H$),[y]=O.useState(()=>new jF);O.useEffect(()=>(p.addPass(g),p.addPass(y),()=>{p.removePass(g),p.removePass(y)}),[p,g,y]),O.useEffect(()=>()=>{g.dispose(),y.dispose()},[g,y]);const[x]=O.useState(()=>new N(0,0,0)),[v]=O.useState(()=>new N(0,0,0)),w=O.useCallback(async(b,P)=>(v.x=b,v.y=P,v.z=await g.readDepth(v),v.z=v.z*2-1,1-v.z>1e-7?v.unproject(m):!1),[v,g,m]),S=O.useCallback(async(b,P=!0)=>{var R;if(n)x.set(...n);else{const{x:D,y:C}=e?d:{x:0,y:0},L=await w(D,C);L&&x.copy(L)}P&&(!((R=a.current)===null||R===void 0)&&R.target)&&(r>0&&b>0?Uy.damp3(a.current.target,x,r,b):a.current.target.copy(x))},[n,x,e,w,r,d]);LC(async(b,P)=>{var R;i||S(P),l.current&&l.current.position.copy(x),u.current&&(!((R=a.current)===null||R===void 0)&&R.target)&&u.current.position.copy(a.current.target)});const T=O.useMemo(()=>({dofRef:a,hitpoint:x,update:S}),[x,S]);return O.useImperativeHandle(o,()=>T,[T]),yt($s,{children:[t?oZ(yt($s,{children:[yt("mesh",{ref:l,children:[de("sphereGeometry",{args:[t,16,16]}),de("meshBasicMaterial",{color:"#00ff00",opacity:1,transparent:!0,depthWrite:!1})]}),yt("mesh",{ref:u,children:[de("sphereGeometry",{args:[t/2,16,16]}),de("meshBasicMaterial",{color:"#00ff00",opacity:.5,transparent:!0,depthWrite:!1})]})]}),f):null,de(jJ,{ref:a,...s,target:x})]})});const Pl=n=>typeof n=="object"&&n!=null&&"current"in n?n.current:n;let GJ=0;const sL=new WeakMap,$F=(n,e)=>Jl.forwardRef(function({blendFunction:i=e==null?void 0:e.blendFunction,opacity:r=e==null?void 0:e.opacity,...s},o){let a=sL.get(n);if(!a){const f=`@react-three/postprocessing/${n.name}-${GJ++}`;SF({[f]:n}),sL.set(n,a=f)}const l=sr(f=>f.camera),u=Jl.useMemo(()=>{var f,d;return[...(f=e==null?void 0:e.args)!==null&&f!==void 0?f:[],...(d=s.args)!==null&&d!==void 0?d:[{...e,...s}]]},[JSON.stringify(s)]);return de(a,{camera:l,"blendMode-blendFunction":i,"blendMode-opacity":r,...s,ref:o,args:u})}),zy=(n,e)=>{const t=n[e];return Jl.useMemo(()=>typeof t=="number"?new le(t,t):t?new le(...t):new le,[t])};O.forwardRef(function(e,t){const i=zy(e,"offset"),r=O.useMemo(()=>new zK({...e,offset:i}),[i,e]);return de("primitive",{ref:t,object:r,dispose:null})});O.forwardRef(function({blendFunction:e=wt.NORMAL},t){const i=O.useMemo(()=>new NK(e),[e]);return de("primitive",{ref:t,object:i,dispose:null})});const gu=O.createContext(null),WJ=Jl.memo(O.forwardRef(({children:n,camera:e,scene:t,resolutionScale:i,enabled:r=!0,renderPriority:s=1,autoClear:o=!0,depthBuffer:a,disableNormalPass:l,stencilBuffer:u,multisampling:f=8,frameBufferType:d=ps},p)=>{const{gl:m,scene:g,camera:y,size:x}=sr(),v=t||g,w=e||y,[S,T,b]=O.useMemo(()=>{const C=jZ(),L=new K$(m,{depthBuffer:a,stencilBuffer:u,multisampling:f>0&&C?f:0,frameBufferType:d});L.addPass(new _d(v,w));let F=null,H=null;return l||(H=new q$(v,w),H.enabled=!1,L.addPass(H),i!==void 0&&C&&(F=new XF({normalBuffer:H.texture,resolutionScale:i}),F.enabled=!1,L.addPass(F))),[L,H,F]},[w,m,a,u,f,d,v,l,i]);O.useEffect(()=>S==null?void 0:S.setSize(x.width,x.height),[S,x]),LC((C,L)=>{r&&(m.autoClear=o,S.render(L))},r?s:0);const P=O.useRef(null),R=tZ(P);O.useLayoutEffect(()=>{let C;return P.current&&R.current&&S&&(C=new W$(w,...R.current.objects),C.renderToScreen=!0,S.addPass(C),T&&(T.enabled=!0),b&&(b.enabled=!0)),()=>{C&&(S==null||S.removePass(C)),T&&(T.enabled=!1),b&&(b.enabled=!1)}},[S,n,w,T,b,R]);const D=O.useMemo(()=>({composer:S,normalPass:T,downSamplingPass:b,resolutionScale:i,camera:w,scene:v}),[S,T,b,i,w,v]);return O.useImperativeHandle(p,()=>S,[S]),de(gu.Provider,{value:D,children:de("group",{ref:P,children:n})})})),jJ=O.forwardRef(function({target:e,depthTexture:t,...i},r){const s=sr(l=>l.invalidate),{camera:o}=O.useContext(gu),a=O.useMemo(()=>{const l=new VK(o,i),u=l.maskPass.getFullscreenMaterial();return u.maskFunction=Kp.MULTIPLY_RGB_SET_ALPHA,l},[o,i]);return O.useLayoutEffect(()=>{if(e&&typeof e!="number"){const l=e instanceof N?new N().set(e.x,e.y,e.z):new N().set(e[0],e[1],e[2]);a.target=l}t&&a.setDepthTexture(t.texture,t.packing),s()},[e,t,a]),de("primitive",{ref:r,object:a,dispose:null})});O.forwardRef(function({active:e=!0,...t},i){const r=sr(u=>u.invalidate),s=zy(t,"delay"),o=zy(t,"duration"),a=zy(t,"strength"),l=O.useMemo(()=>new WK({...t,delay:s,duration:o,strength:a}),[s,o,t,a]);return O.useLayoutEffect(()=>{l.mode=e?t.mode||Qu.SPORADIC:Qu.DISABLED,r()},[e,l,r,t.mode]),de("primitive",{ref:i,object:l,dispose:null})});O.forwardRef(function(e,t){const{camera:i}=O.useContext(gu),r=O.useMemo(()=>new XK(i,Pl(e.sun),e),[i,e]);return O.useLayoutEffect(()=>void(r.lightSource=Pl(e.sun)),[r,e.sun]),de("primitive",{ref:t,object:r,dispose:null})});O.forwardRef(function({size:e,...t},i){const r=sr(o=>o.invalidate),s=O.useMemo(()=>new qK(t),[t]);return O.useLayoutEffect(()=>{e&&s.setSize(e.width,e.height),r()},[s,e]),de("primitive",{ref:i,object:s,dispose:null})});const XJ=$F(QK,{blendFunction:wt.COLOR_DODGE}),UC=O.createContext(null);O.forwardRef(function({selection:e=[],selectionLayer:t=10,blendFunction:i,patternTexture:r,edgeStrength:s,pulseSpeed:o,visibleEdgeColor:a,hiddenEdgeColor:l,width:u,height:f,kernelSize:d,blur:p,xRay:m,...g},y){const x=sr(b=>b.invalidate),{scene:v,camera:w}=O.useContext(gu),S=O.useMemo(()=>new nJ(v,w,{blendFunction:i,patternTexture:r,edgeStrength:s,pulseSpeed:o,visibleEdgeColor:a,hiddenEdgeColor:l,width:u,height:f,kernelSize:d,blur:p,xRay:m,...g}),[i,p,w,s,f,l,d,r,g,o,v,a,u,m]),T=O.useContext(UC);return O.useEffect(()=>{if(!T&&e)return S.selection.set(Array.isArray(e)?e.map(Pl):[Pl(e)]),x(),()=>{S.selection.clear(),x()}},[S,e,T,x]),O.useEffect(()=>{S.selectionLayer=t,x()},[S,x,t]),O.useRef(),O.useEffect(()=>{var b;if(T&&T.enabled&&!((b=T.selected)===null||b===void 0)&&b.length)return S.selection.set(T.selected),x(),()=>{S.selection.clear(),x()}},[T,S.selection,x]),de("primitive",{ref:y,object:S})});O.forwardRef(function({granularity:e=5},t){const i=O.useMemo(()=>new rJ(e),[e]);return de("primitive",{ref:t,object:i,dispose:null})});const YJ=(n,e)=>n.layers.enable(e.selection.layer),qJ=(n,e)=>n.layers.disable(e.selection.layer);O.forwardRef(function({selection:e=[],selectionLayer:t=10,lights:i=[],luminanceThreshold:r,luminanceSmoothing:s,intensity:o,width:a,height:l,kernelSize:u,mipmapBlur:f,...d},p){i.length===0&&console.warn("SelectiveBloom requires lights to work.");const m=sr(w=>w.invalidate),{scene:g,camera:y}=O.useContext(gu),x=O.useMemo(()=>new sJ(g,y,{blendFunction:wt.ADD,luminanceThreshold:r,luminanceSmoothing:s,intensity:o,width:a,height:l,kernelSize:u,mipmapBlur:f,...d}),[g,y,r,s,o,a,l,u,f,d]),v=O.useContext(UC);return O.useEffect(()=>{if(!v&&e)return x.selection.set(Array.isArray(e)?e.map(Pl):[Pl(e)]),m(),()=>{x.selection.clear(),m()}},[x,e,v,m]),O.useEffect(()=>{x.selection.layer=t,m()},[x,m,t]),O.useEffect(()=>{if(i&&i.length>0)return i.forEach(w=>YJ(Pl(w),x)),m(),()=>{i.forEach(w=>qJ(Pl(w),x)),m()}},[x,m,i,t]),O.useEffect(()=>{var w;if(v&&v.enabled&&!((w=v.selected)===null||w===void 0)&&w.length)return x.selection.set(v.selected),m(),()=>{x.selection.clear(),m()}},[v,x.selection,m]),de("primitive",{ref:p,object:x,dispose:null})});O.forwardRef(function(e,t){const{camera:i,normalPass:r,downSamplingPass:s,resolutionScale:o}=O.useContext(gu),a=O.useMemo(()=>r===null&&s===null?(console.error("Please enable the NormalPass in the EffectComposer in order to use SSAO."),{}):new aJ(i,r&&!s?r.texture:null,{blendFunction:wt.MULTIPLY,samples:30,rings:4,distanceThreshold:1,distanceFalloff:0,rangeThreshold:.5,rangeFalloff:.1,luminanceInfluence:.9,radius:20,bias:.5,intensity:1,color:void 0,normalDepthBuffer:s?s.texture:null,resolutionScale:o??1,depthAwareUpsampling:!0,...e}),[i,r,e]);return de("primitive",{ref:t,object:a,dispose:null})});O.forwardRef(function({textureSrc:e,texture:t,...i},r){const s=vd(kg,e);O.useLayoutEffect(()=>{s.encoding=an,s.wrapS=s.wrapT=Xa},[s]);const o=O.useMemo(()=>new cJ({...i,texture:s||t}),[i,s,t]);return de("primitive",{ref:r,object:o,dispose:null})});const ZJ=$F(hJ);O.forwardRef(function({lut:e,tetrahedralInterpolation:t,...i},r){const s=O.useMemo(()=>new KK(e,i),[e,i]),o=sr(a=>a.invalidate);return O.useLayoutEffect(()=>{t&&(s.tetrahedralInterpolation=t),e&&(s.lut=e),o()},[s,o,e,t]),de("primitive",{ref:r,object:s,dispose:null})});O.forwardRef(function({ENABLE_BLUR:e=!0,USE_MRT:t=!0,...i},r){const{invalidate:s}=sr(),{scene:o,camera:a}=O.useContext(gu),l=O.useMemo(()=>new HJ(o,a,{ENABLE_BLUR:e,USE_MRT:t,...i}),[o,a,e,t,i]),u=O.useContext(UC);return O.useEffect(()=>{var f;if(u&&u.enabled&&!((f=u.selected)===null||f===void 0)&&f.length)return l.selection.set(u.selected),s(),()=>{l.selection.clear(),s()}},[u]),de("primitive",{ref:r,object:l,...i})});var Qe={},jT={exports:{}};(function(n,e){(function(t,i){var r="1.0.35",s="",o="?",a="function",l="undefined",u="object",f="string",d="major",p="model",m="name",g="type",y="vendor",x="version",v="architecture",w="console",S="mobile",T="tablet",b="smarttv",P="wearable",R="embedded",D=350,C="Amazon",L="Apple",F="ASUS",H="BlackBerry",G="Browser",W="Chrome",X="Edge",re="Firefox",Q="Google",z="Huawei",j="LG",I="Microsoft",ee="Motorola",oe="Opera",se="Samsung",te="Sharp",Te="Sony",we="Xiaomi",J="Zebra",Xe="Facebook",it="Chromium OS",Ee="Mac OS",Ie=function(ge,pe){var _e={};for(var De in ge)pe[De]&&pe[De].length%2===0?_e[De]=pe[De].concat(ge[De]):_e[De]=ge[De];return _e},ce=function(ge){for(var pe={},_e=0;_e<ge.length;_e++)pe[ge[_e].toUpperCase()]=ge[_e];return pe},ae=function(ge,pe){return typeof ge===f?Me(pe).indexOf(Me(ge))!==-1:!1},Me=function(ge){return ge.toLowerCase()},ze=function(ge){return typeof ge===f?ge.replace(/[^\d\.]/g,s).split(".")[0]:i},Re=function(ge,pe){if(typeof ge===f)return ge=ge.replace(/^\s\s*/,s),typeof pe===l?ge:ge.substring(0,D)},$=function(ge,pe){for(var _e=0,De,Fe,he,Pe,Ce,je;_e<pe.length&&!Ce;){var Ve=pe[_e],Ze=pe[_e+1];for(De=Fe=0;De<Ve.length&&!Ce&&Ve[De];)if(Ce=Ve[De++].exec(ge),Ce)for(he=0;he<Ze.length;he++)je=Ce[++Fe],Pe=Ze[he],typeof Pe===u&&Pe.length>0?Pe.length===2?typeof Pe[1]==a?this[Pe[0]]=Pe[1].call(this,je):this[Pe[0]]=Pe[1]:Pe.length===3?typeof Pe[1]===a&&!(Pe[1].exec&&Pe[1].test)?this[Pe[0]]=je?Pe[1].call(this,je,Pe[2]):i:this[Pe[0]]=je?je.replace(Pe[1],Pe[2]):i:Pe.length===4&&(this[Pe[0]]=je?Pe[3].call(this,je.replace(Pe[1],Pe[2])):i):this[Pe]=je||i;_e+=2}},et=function(ge,pe){for(var _e in pe)if(typeof pe[_e]===u&&pe[_e].length>0){for(var De=0;De<pe[_e].length;De++)if(ae(pe[_e][De],ge))return _e===o?i:_e}else if(ae(pe[_e],ge))return _e===o?i:_e;return ge},Ue={"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},ft={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Tt={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[x,[m,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[x,[m,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[m,x],[/opios[\/ ]+([\w\.]+)/i],[x,[m,oe+" Mini"]],[/\bopr\/([\w\.]+)/i],[x,[m,oe]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[m,x],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[x,[m,"UC"+G]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[x,[m,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[x,[m,"WeChat"]],[/konqueror\/([\w\.]+)/i],[x,[m,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[x,[m,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[x,[m,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[m,/(.+)/,"$1 Secure "+G],x],[/\bfocus\/([\w\.]+)/i],[x,[m,re+" Focus"]],[/\bopt\/([\w\.]+)/i],[x,[m,oe+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[x,[m,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[x,[m,"Dolphin"]],[/coast\/([\w\.]+)/i],[x,[m,oe+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[x,[m,"MIUI "+G]],[/fxios\/([-\w\.]+)/i],[x,[m,re]],[/\bqihu|(qi?ho?o?|360)browser/i],[[m,"360 "+G]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[m,/(.+)/,"$1 "+G],x],[/(comodo_dragon)\/([\w\.]+)/i],[[m,/_/g," "],x],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[m,x],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[m],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[m,Xe],x],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[m,x],[/\bgsa\/([\w\.]+) .*safari\//i],[x,[m,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[x,[m,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[x,[m,W+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[m,W+" WebView"],x],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[x,[m,"Android "+G]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[m,x],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[x,[m,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[x,m],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[m,[x,et,Ue]],[/(webkit|khtml)\/([\w\.]+)/i],[m,x],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[m,"Netscape"],x],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[x,[m,re+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[m,x],[/(cobalt)\/([\w\.]+)/i],[m,[x,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[v,"amd64"]],[/(ia32(?=;))/i],[[v,Me]],[/((?:i[346]|x)86)[;\)]/i],[[v,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[v,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[v,"armhf"]],[/windows (ce|mobile); ppc;/i],[[v,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[v,/ower/,s,Me]],[/(sun4\w)[;\)]/i],[[v,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[v,Me]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[p,[y,se],[g,T]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[p,[y,se],[g,S]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[p,[y,L],[g,S]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[p,[y,L],[g,T]],[/(macintosh);/i],[p,[y,L]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[p,[y,te],[g,S]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[p,[y,z],[g,T]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[p,[y,z],[g,S]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[p,/_/g," "],[y,we],[g,S]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[p,/_/g," "],[y,we],[g,T]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[p,[y,"OPPO"],[g,S]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[p,[y,"Vivo"],[g,S]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[p,[y,"Realme"],[g,S]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[p,[y,ee],[g,S]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[p,[y,ee],[g,T]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[p,[y,j],[g,T]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[p,[y,j],[g,S]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[p,[y,"Lenovo"],[g,T]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[p,/_/g," "],[y,"Nokia"],[g,S]],[/(pixel c)\b/i],[p,[y,Q],[g,T]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[p,[y,Q],[g,S]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[p,[y,Te],[g,S]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[p,"Xperia Tablet"],[y,Te],[g,T]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[p,[y,"OnePlus"],[g,S]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[p,[y,C],[g,T]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[p,/(.+)/g,"Fire Phone $1"],[y,C],[g,S]],[/(playbook);[-\w\),; ]+(rim)/i],[p,y,[g,T]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[p,[y,H],[g,S]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[p,[y,F],[g,T]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[p,[y,F],[g,S]],[/(nexus 9)/i],[p,[y,"HTC"],[g,T]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[y,[p,/_/g," "],[g,S]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[p,[y,"Acer"],[g,T]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[p,[y,"Meizu"],[g,S]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[y,p,[g,S]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[y,p,[g,T]],[/(surface duo)/i],[p,[y,I],[g,T]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[p,[y,"Fairphone"],[g,S]],[/(u304aa)/i],[p,[y,"AT&T"],[g,S]],[/\bsie-(\w*)/i],[p,[y,"Siemens"],[g,S]],[/\b(rct\w+) b/i],[p,[y,"RCA"],[g,T]],[/\b(venue[\d ]{2,7}) b/i],[p,[y,"Dell"],[g,T]],[/\b(q(?:mv|ta)\w+) b/i],[p,[y,"Verizon"],[g,T]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[p,[y,"Barnes & Noble"],[g,T]],[/\b(tm\d{3}\w+) b/i],[p,[y,"NuVision"],[g,T]],[/\b(k88) b/i],[p,[y,"ZTE"],[g,T]],[/\b(nx\d{3}j) b/i],[p,[y,"ZTE"],[g,S]],[/\b(gen\d{3}) b.+49h/i],[p,[y,"Swiss"],[g,S]],[/\b(zur\d{3}) b/i],[p,[y,"Swiss"],[g,T]],[/\b((zeki)?tb.*\b) b/i],[p,[y,"Zeki"],[g,T]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[y,"Dragon Touch"],p,[g,T]],[/\b(ns-?\w{0,9}) b/i],[p,[y,"Insignia"],[g,T]],[/\b((nxa|next)-?\w{0,9}) b/i],[p,[y,"NextBook"],[g,T]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[y,"Voice"],p,[g,S]],[/\b(lvtel\-)?(v1[12]) b/i],[[y,"LvTel"],p,[g,S]],[/\b(ph-1) /i],[p,[y,"Essential"],[g,S]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[p,[y,"Envizen"],[g,T]],[/\b(trio[-\w\. ]+) b/i],[p,[y,"MachSpeed"],[g,T]],[/\btu_(1491) b/i],[p,[y,"Rotor"],[g,T]],[/(shield[\w ]+) b/i],[p,[y,"Nvidia"],[g,T]],[/(sprint) (\w+)/i],[y,p,[g,S]],[/(kin\.[onetw]{3})/i],[[p,/\./g," "],[y,I],[g,S]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[p,[y,J],[g,T]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[p,[y,J],[g,S]],[/smart-tv.+(samsung)/i],[y,[g,b]],[/hbbtv.+maple;(\d+)/i],[[p,/^/,"SmartTV"],[y,se],[g,b]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[y,j],[g,b]],[/(apple) ?tv/i],[y,[p,L+" TV"],[g,b]],[/crkey/i],[[p,W+"cast"],[y,Q],[g,b]],[/droid.+aft(\w)( bui|\))/i],[p,[y,C],[g,b]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[p,[y,te],[g,b]],[/(bravia[\w ]+)( bui|\))/i],[p,[y,Te],[g,b]],[/(mitv-\w{5}) bui/i],[p,[y,we],[g,b]],[/Hbbtv.*(technisat) (.*);/i],[y,p,[g,b]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[y,Re],[p,Re],[g,b]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[g,b]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[y,p,[g,w]],[/droid.+; (shield) bui/i],[p,[y,"Nvidia"],[g,w]],[/(playstation [345portablevi]+)/i],[p,[y,Te],[g,w]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[p,[y,I],[g,w]],[/((pebble))app/i],[y,p,[g,P]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[p,[y,L],[g,P]],[/droid.+; (glass) \d/i],[p,[y,Q],[g,P]],[/droid.+; (wt63?0{2,3})\)/i],[p,[y,J],[g,P]],[/(quest( 2| pro)?)/i],[p,[y,Xe],[g,P]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[y,[g,R]],[/(aeobc)\b/i],[p,[y,C],[g,R]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[p,[g,S]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[p,[g,T]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[g,T]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[g,S]],[/(android[-\w\. ]{0,9});.+buil/i],[p,[y,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[x,[m,X+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[x,[m,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[m,x],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[x,m]],os:[[/microsoft (windows) (vista|xp)/i],[m,x],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[m,[x,et,ft]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[m,"Windows"],[x,et,ft]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/ios;fbsv\/([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[x,/_/g,"."],[m,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[m,Ee],[x,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[x,m],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[m,x],[/\(bb(10);/i],[x,[m,H]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[x,[m,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[x,[m,re+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[x,[m,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[x,[m,"watchOS"]],[/crkey\/([\d\.]+)/i],[x,[m,W+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[m,it],x],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[m,x],[/(sunos) ?([\w\.\d]*)/i],[[m,"Solaris"],x],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[m,x]]},B=function(ge,pe){if(typeof ge===u&&(pe=ge,ge=i),!(this instanceof B))return new B(ge,pe).getResult();var _e=typeof t!==l&&t.navigator?t.navigator:i,De=ge||(_e&&_e.userAgent?_e.userAgent:s),Fe=_e&&_e.userAgentData?_e.userAgentData:i,he=pe?Ie(Tt,pe):Tt,Pe=_e&&_e.userAgent==De;return this.getBrowser=function(){var Ce={};return Ce[m]=i,Ce[x]=i,$.call(Ce,De,he.browser),Ce[d]=ze(Ce[x]),Pe&&_e&&_e.brave&&typeof _e.brave.isBrave==a&&(Ce[m]="Brave"),Ce},this.getCPU=function(){var Ce={};return Ce[v]=i,$.call(Ce,De,he.cpu),Ce},this.getDevice=function(){var Ce={};return Ce[y]=i,Ce[p]=i,Ce[g]=i,$.call(Ce,De,he.device),Pe&&!Ce[g]&&Fe&&Fe.mobile&&(Ce[g]=S),Pe&&Ce[p]=="Macintosh"&&_e&&typeof _e.standalone!==l&&_e.maxTouchPoints&&_e.maxTouchPoints>2&&(Ce[p]="iPad",Ce[g]=T),Ce},this.getEngine=function(){var Ce={};return Ce[m]=i,Ce[x]=i,$.call(Ce,De,he.engine),Ce},this.getOS=function(){var Ce={};return Ce[m]=i,Ce[x]=i,$.call(Ce,De,he.os),Pe&&!Ce[m]&&Fe&&Fe.platform!="Unknown"&&(Ce[m]=Fe.platform.replace(/chrome os/i,it).replace(/macos/i,Ee)),Ce},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return De},this.setUA=function(Ce){return De=typeof Ce===f&&Ce.length>D?Re(Ce,D):Ce,this},this.setUA(De),this};B.VERSION=r,B.BROWSER=ce([m,x,d]),B.CPU=ce([v]),B.DEVICE=ce([p,y,g,w,S,b,T,P,R]),B.ENGINE=B.OS=ce([m,x]),n.exports&&(e=n.exports=B),e.UAParser=B;var k=typeof t!==l&&(t.jQuery||t.Zepto);if(k&&!k.ua){var fe=new B;k.ua=fe.getResult(),k.ua.get=function(){return fe.getUA()},k.ua.set=function(ge){fe.setUA(ge);var pe=fe.getResult();for(var _e in pe)k.ua[_e]=pe[_e]}}})(typeof window=="object"?window:iH)})(jT,jT.exports);var $J=jT.exports;Object.defineProperty(Qe,"__esModule",{value:!0});function KJ(n){return n&&typeof n=="object"&&"default"in n?n.default:n}var or=O,Sn=KJ(or),KF=$J,vu=new KF,fr=vu.getBrowser(),JJ=vu.getCPU(),Ms=vu.getDevice(),FC=vu.getEngine(),yu=vu.getOS(),Ng=vu.getUA(),JF=function(e){return vu.setUA(e)},Ug=function(e){if(!e){console.error("No userAgent string was provided");return}var t=new KF(e);return{UA:t,browser:t.getBrowser(),cpu:t.getCPU(),device:t.getDevice(),engine:t.getEngine(),os:t.getOS(),ua:t.getUA(),setUserAgent:function(r){return t.setUA(r)}}},QF=Object.freeze({ClientUAInstance:vu,browser:fr,cpu:JJ,device:Ms,engine:FC,os:yu,ua:Ng,setUa:JF,parseUserAgent:Ug});function oL(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function QJ(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?oL(Object(t),!0).forEach(function(i){nQ(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):oL(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function Jp(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Jp=function(e){return typeof e}:Jp=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jp(n)}function eQ(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function aL(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function tQ(n,e,t){return e&&aL(n.prototype,e),t&&aL(n,t),n}function nQ(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function XT(){return XT=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},XT.apply(this,arguments)}function iQ(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),e&&qT(n,e)}function YT(n){return YT=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},YT(n)}function qT(n,e){return qT=Object.setPrototypeOf||function(i,r){return i.__proto__=r,i},qT(n,e)}function rQ(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function to(n,e){if(n==null)return{};var t=rQ(n,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function By(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function sQ(n,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return By(n)}function oQ(n,e){return aQ(n)||lQ(n,e)||uQ(n,e)||cQ()}function aQ(n){if(Array.isArray(n))return n}function lQ(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i=[],r=!0,s=!1,o,a;try{for(t=t.call(n);!(r=(o=t.next()).done)&&(i.push(o.value),!(e&&i.length===e));r=!0);}catch(l){s=!0,a=l}finally{try{!r&&t.return!=null&&t.return()}finally{if(s)throw a}}return i}}function uQ(n,e){if(n){if(typeof n=="string")return lL(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return lL(n,e)}}function lL(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function cQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var nr={Mobile:"mobile",Tablet:"tablet",SmartTv:"smarttv",Console:"console",Wearable:"wearable",Embedded:"embedded",Browser:void 0},qr={Chrome:"Chrome",Firefox:"Firefox",Opera:"Opera",Yandex:"Yandex",Safari:"Safari",InternetExplorer:"Internet Explorer",Edge:"Edge",Chromium:"Chromium",Ie:"IE",MobileSafari:"Mobile Safari",EdgeChromium:"Edge Chromium",MIUI:"MIUI Browser",SamsungBrowser:"Samsung Browser"},xd={IOS:"iOS",Android:"Android",WindowsPhone:"Windows Phone",Windows:"Windows",MAC_OS:"Mac OS"},fQ={isMobile:!1,isTablet:!1,isBrowser:!1,isSmartTV:!1,isConsole:!1,isWearable:!1},hQ=function(e){switch(e){case nr.Mobile:return{isMobile:!0};case nr.Tablet:return{isTablet:!0};case nr.SmartTv:return{isSmartTV:!0};case nr.Console:return{isConsole:!0};case nr.Wearable:return{isWearable:!0};case nr.Browser:return{isBrowser:!0};case nr.Embedded:return{isEmbedded:!0};default:return fQ}},dQ=function(e){return JF(e)},bt=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"none";return e||t},zC=function(){return typeof window<"u"&&(window.navigator||navigator)?window.navigator||navigator:!1},BC=function(e){var t=zC();return t&&t.platform&&(t.platform.indexOf(e)!==-1||t.platform==="MacIntel"&&t.maxTouchPoints>1&&!window.MSStream)},pQ=function(e,t,i,r,s){return{isBrowser:e,browserMajorVersion:bt(t.major),browserFullVersion:bt(t.version),browserName:bt(t.name),engineName:bt(i.name),engineVersion:bt(i.version),osName:bt(r.name),osVersion:bt(r.version),userAgent:bt(s)}},uL=function(e,t,i,r){return QJ({},e,{vendor:bt(t.vendor),model:bt(t.model),os:bt(i.name),osVersion:bt(i.version),ua:bt(r)})},mQ=function(e,t,i,r){return{isSmartTV:e,engineName:bt(t.name),engineVersion:bt(t.version),osName:bt(i.name),osVersion:bt(i.version),userAgent:bt(r)}},gQ=function(e,t,i,r){return{isConsole:e,engineName:bt(t.name),engineVersion:bt(t.version),osName:bt(i.name),osVersion:bt(i.version),userAgent:bt(r)}},vQ=function(e,t,i,r){return{isWearable:e,engineName:bt(t.name),engineVersion:bt(t.version),osName:bt(i.name),osVersion:bt(i.version),userAgent:bt(r)}},yQ=function(e,t,i,r,s){return{isEmbedded:e,vendor:bt(t.vendor),model:bt(t.model),engineName:bt(i.name),engineVersion:bt(i.version),osName:bt(r.name),osVersion:bt(r.version),userAgent:bt(s)}};function _Q(n){var e=n?Ug(n):QF,t=e.device,i=e.browser,r=e.engine,s=e.os,o=e.ua,a=hQ(t.type),l=a.isBrowser,u=a.isMobile,f=a.isTablet,d=a.isSmartTV,p=a.isConsole,m=a.isWearable,g=a.isEmbedded;if(l)return pQ(l,i,r,s,o);if(d)return mQ(d,r,s,o);if(p)return gQ(p,r,s,o);if(u||f)return uL(a,t,s,o);if(m)return vQ(m,r,s,o);if(g)return yQ(g,t,r,s,o)}var ez=function(e){var t=e.type;return t===nr.Mobile},tz=function(e){var t=e.type;return t===nr.Tablet},nz=function(e){var t=e.type;return t===nr.Mobile||t===nr.Tablet},iz=function(e){var t=e.type;return t===nr.SmartTv},D_=function(e){var t=e.type;return t===nr.Browser},rz=function(e){var t=e.type;return t===nr.Wearable},sz=function(e){var t=e.type;return t===nr.Console},oz=function(e){var t=e.type;return t===nr.Embedded},az=function(e){var t=e.vendor;return bt(t)},lz=function(e){var t=e.model;return bt(t)},uz=function(e){var t=e.type;return bt(t,"browser")},cz=function(e){var t=e.name;return t===xd.Android},fz=function(e){var t=e.name;return t===xd.Windows},hz=function(e){var t=e.name;return t===xd.MAC_OS},dz=function(e){var t=e.name;return t===xd.WindowsPhone},pz=function(e){var t=e.name;return t===xd.IOS},mz=function(e){var t=e.version;return bt(t)},gz=function(e){var t=e.name;return bt(t)},vz=function(e){var t=e.name;return t===qr.Chrome},yz=function(e){var t=e.name;return t===qr.Firefox},_z=function(e){var t=e.name;return t===qr.Chromium},L_=function(e){var t=e.name;return t===qr.Edge},xz=function(e){var t=e.name;return t===qr.Yandex},Sz=function(e){var t=e.name;return t===qr.Safari||t===qr.MobileSafari},wz=function(e){var t=e.name;return t===qr.MobileSafari},Mz=function(e){var t=e.name;return t===qr.Opera},Tz=function(e){var t=e.name;return t===qr.InternetExplorer||t===qr.Ie},Ez=function(e){var t=e.name;return t===qr.MIUI},bz=function(e){var t=e.name;return t===qr.SamsungBrowser},Cz=function(e){var t=e.version;return bt(t)},Pz=function(e){var t=e.major;return bt(t)},Az=function(e){var t=e.name;return bt(t)},Rz=function(e){var t=e.name;return bt(t)},Dz=function(e){var t=e.version;return bt(t)},Lz=function(){var e=zC(),t=e&&e.userAgent&&e.userAgent.toLowerCase();return typeof t=="string"?/electron/.test(t):!1},Ah=function(e){return typeof e=="string"&&e.indexOf("Edg/")!==-1},Iz=function(){var e=zC();return e&&(/iPad|iPhone|iPod/.test(e.platform)||e.platform==="MacIntel"&&e.maxTouchPoints>1)&&!window.MSStream},Wo=function(){return BC("iPad")},kz=function(){return BC("iPhone")},Oz=function(){return BC("iPod")},Nz=function(e){return bt(e)};function Uz(n){var e=n||QF,t=e.device,i=e.browser,r=e.os,s=e.engine,o=e.ua;return{isSmartTV:iz(t),isConsole:sz(t),isWearable:rz(t),isEmbedded:oz(t),isMobileSafari:wz(i)||Wo(),isChromium:_z(i),isMobile:nz(t)||Wo(),isMobileOnly:ez(t),isTablet:tz(t)||Wo(),isBrowser:D_(t),isDesktop:D_(t),isAndroid:cz(r),isWinPhone:dz(r),isIOS:pz(r)||Wo(),isChrome:vz(i),isFirefox:yz(i),isSafari:Sz(i),isOpera:Mz(i),isIE:Tz(i),osVersion:mz(r),osName:gz(r),fullBrowserVersion:Cz(i),browserVersion:Pz(i),browserName:Az(i),mobileVendor:az(t),mobileModel:lz(t),engineName:Rz(s),engineVersion:Dz(s),getUA:Nz(o),isEdge:L_(i)||Ah(o),isYandex:xz(i),deviceType:uz(t),isIOS13:Iz(),isIPad13:Wo(),isIPhone13:kz(),isIPod13:Oz(),isElectron:Lz(),isEdgeChromium:Ah(o),isLegacyEdge:L_(i)&&!Ah(o),isWindows:fz(r),isMacOs:hz(r),isMIUI:Ez(i),isSamsungBrowser:bz(i)}}var Fz=iz(Ms),zz=sz(Ms),Bz=rz(Ms),xQ=oz(Ms),SQ=wz(fr)||Wo(),wQ=_z(fr),Vx=nz(Ms)||Wo(),Vz=ez(Ms),Hz=tz(Ms)||Wo(),Gz=D_(Ms),MQ=D_(Ms),Wz=cz(yu),jz=dz(yu),Xz=pz(yu)||Wo(),TQ=vz(fr),EQ=yz(fr),bQ=Sz(fr),CQ=Mz(fr),Yz=Tz(fr),PQ=mz(yu),AQ=gz(yu),RQ=Cz(fr),DQ=Pz(fr),LQ=Az(fr),IQ=az(Ms),kQ=lz(Ms),OQ=Rz(FC),NQ=Dz(FC),UQ=Nz(Ng),FQ=L_(fr)||Ah(Ng),zQ=xz(fr),BQ=uz(Ms),VQ=Iz(),HQ=Wo(),GQ=kz(),WQ=Oz(),jQ=Lz(),XQ=Ah(Ng),YQ=L_(fr)&&!Ah(Ng),qQ=fz(yu),ZQ=hz(yu),$Q=Ez(fr),KQ=bz(fr),JQ=function(e){if(!e||typeof e!="string"){console.error("No valid user agent string was provided");return}var t=Ug(e),i=t.device,r=t.browser,s=t.os,o=t.engine,a=t.ua;return Uz({device:i,browser:r,os:s,engine:o,ua:a})},QQ=function(e){var t=e.renderWithFragment,i=e.children,r=to(e,["renderWithFragment","children"]);return Wz?t?Sn.createElement(or.Fragment,null,i):Sn.createElement("div",r,i):null},eee=function(e){var t=e.renderWithFragment,i=e.children,r=to(e,["renderWithFragment","children"]);return Gz?t?Sn.createElement(or.Fragment,null,i):Sn.createElement("div",r,i):null},tee=function(e){var t=e.renderWithFragment,i=e.children,r=to(e,["renderWithFragment","children"]);return Yz?t?Sn.createElement(or.Fragment,null,i):Sn.createElement("div",r,i):null},nee=function(e){var t=e.renderWithFragment,i=e.children,r=to(e,["renderWithFragment","children"]);return Xz?t?Sn.createElement(or.Fragment,null,i):Sn.createElement("div",r,i):null},iee=function(e){var t=e.renderWithFragment,i=e.children,r=to(e,["renderWithFragment","children"]);return Vx?t?Sn.createElement(or.Fragment,null,i):Sn.createElement("div",r,i):null},ree=function(e){var t=e.renderWithFragment,i=e.children,r=to(e,["renderWithFragment","children"]);return Hz?t?Sn.createElement(or.Fragment,null,i):Sn.createElement("div",r,i):null},see=function(e){var t=e.renderWithFragment,i=e.children,r=to(e,["renderWithFragment","children"]);return jz?t?Sn.createElement(or.Fragment,null,i):Sn.createElement("div",r,i):null},oee=function(e){var t=e.renderWithFragment,i=e.children;e.viewClassName,e.style;var r=to(e,["renderWithFragment","children","viewClassName","style"]);return Vz?t?Sn.createElement(or.Fragment,null,i):Sn.createElement("div",r,i):null},aee=function(e){var t=e.renderWithFragment,i=e.children,r=to(e,["renderWithFragment","children"]);return Fz?t?Sn.createElement(or.Fragment,null,i):Sn.createElement("div",r,i):null},lee=function(e){var t=e.renderWithFragment,i=e.children,r=to(e,["renderWithFragment","children"]);return zz?t?Sn.createElement(or.Fragment,null,i):Sn.createElement("div",r,i):null},uee=function(e){var t=e.renderWithFragment,i=e.children,r=to(e,["renderWithFragment","children"]);return Bz?t?Sn.createElement(or.Fragment,null,i):Sn.createElement("div",r,i):null},cee=function(e){var t=e.renderWithFragment,i=e.children;e.viewClassName,e.style;var r=e.condition,s=to(e,["renderWithFragment","children","viewClassName","style","condition"]);return r?t?Sn.createElement(or.Fragment,null,i):Sn.createElement("div",s,i):null};function fee(n){return function(e){iQ(t,e);function t(i){var r;return eQ(this,t),r=sQ(this,YT(t).call(this,i)),r.isEventListenerAdded=!1,r.handleOrientationChange=r.handleOrientationChange.bind(By(r)),r.onOrientationChange=r.onOrientationChange.bind(By(r)),r.onPageLoad=r.onPageLoad.bind(By(r)),r.state={isLandscape:!1,isPortrait:!1},r}return tQ(t,[{key:"handleOrientationChange",value:function(){this.isEventListenerAdded||(this.isEventListenerAdded=!0);var r=window.innerWidth>window.innerHeight?90:0;this.setState({isPortrait:r===0,isLandscape:r===90})}},{key:"onOrientationChange",value:function(){this.handleOrientationChange()}},{key:"onPageLoad",value:function(){this.handleOrientationChange()}},{key:"componentDidMount",value:function(){(typeof window>"u"?"undefined":Jp(window))!==void 0&&Vx&&(this.isEventListenerAdded?window.removeEventListener("load",this.onPageLoad,!1):(this.handleOrientationChange(),window.addEventListener("load",this.onPageLoad,!1)),window.addEventListener("resize",this.onOrientationChange,!1))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onOrientationChange,!1)}},{key:"render",value:function(){return Sn.createElement(n,XT({},this.props,{isLandscape:this.state.isLandscape,isPortrait:this.state.isPortrait}))}}]),t}(Sn.Component)}function hee(){var n=or.useState(function(){var s=window.innerWidth>window.innerHeight?90:0;return{isPortrait:s===0,isLandscape:s===90,orientation:s===0?"portrait":"landscape"}}),e=oQ(n,2),t=e[0],i=e[1],r=or.useCallback(function(){var s=window.innerWidth>window.innerHeight?90:0,o={isPortrait:s===0,isLandscape:s===90,orientation:s===0?"portrait":"landscape"};t.orientation!==o.orientation&&i(o)},[t.orientation]);return or.useEffect(function(){return(typeof window>"u"?"undefined":Jp(window))!==void 0&&Vx&&(r(),window.addEventListener("load",r,!1),window.addEventListener("resize",r,!1)),function(){window.removeEventListener("resize",r,!1),window.removeEventListener("load",r,!1)}},[r]),t}function qz(n){var e=n||window.navigator.userAgent;return Ug(e)}function dee(n){var e=n||window.navigator.userAgent,t=qz(e),i=Uz(t);return[i,t]}Qe.AndroidView=QQ;Qe.BrowserTypes=qr;Qe.BrowserView=eee;Qe.ConsoleView=lee;Qe.CustomView=cee;Qe.IEView=tee;Qe.IOSView=nee;Qe.MobileOnlyView=oee;Qe.MobileView=iee;Qe.OsTypes=xd;Qe.SmartTVView=aee;Qe.TabletView=ree;Qe.WearableView=uee;Qe.WinPhoneView=see;Qe.browserName=LQ;Qe.browserVersion=DQ;Qe.deviceDetect=_Q;Qe.deviceType=BQ;Qe.engineName=OQ;Qe.engineVersion=NQ;Qe.fullBrowserVersion=RQ;Qe.getSelectorsByUserAgent=JQ;Qe.getUA=UQ;Qe.isAndroid=Wz;Qe.isBrowser=Gz;Qe.isChrome=TQ;Qe.isChromium=wQ;Qe.isConsole=zz;Qe.isDesktop=MQ;Qe.isEdge=FQ;Qe.isEdgeChromium=XQ;Qe.isElectron=jQ;Qe.isEmbedded=xQ;Qe.isFirefox=EQ;Qe.isIE=Yz;Qe.isIOS=Xz;Qe.isIOS13=VQ;Qe.isIPad13=HQ;Qe.isIPhone13=GQ;Qe.isIPod13=WQ;Qe.isLegacyEdge=YQ;Qe.isMIUI=$Q;Qe.isMacOs=ZQ;var pee=Qe.isMobile=Vx;Qe.isMobileOnly=Vz;Qe.isMobileSafari=SQ;Qe.isOpera=CQ;Qe.isSafari=bQ;Qe.isSamsungBrowser=KQ;Qe.isSmartTV=Fz;Qe.isTablet=Hz;Qe.isWearable=Bz;Qe.isWinPhone=jz;Qe.isWindows=qQ;Qe.isYandex=zQ;Qe.mobileModel=kQ;Qe.mobileVendor=IQ;Qe.osName=AQ;Qe.osVersion=PQ;Qe.parseUserAgent=Ug;Qe.setUserAgent=dQ;Qe.useDeviceData=qz;Qe.useDeviceSelectors=dee;Qe.useMobileOrientation=hee;Qe.withOrientationChange=fee;const mee=`
	uniform float uFrequency;
	uniform float uAmplitude;
	uniform float uOffset;
	uniform float pointerX;

    void mainUv(inout vec2 uv) {
        uv.y += sin(uv.x * uFrequency + uOffset) * uAmplitude;
    }

    void mainImage(const in vec4 inputColor, const in vec2 uv, out vec4 outputColor) {
      outputColor = vec4(inputColor.rgb, inputColor.a);
    }
`;class gee extends cr{constructor({uFrequency:e,uAmplitude:t,pointerX:i,blendFunction:r=r.MULTIPLY}){super("WaveEffect",mee,{blendFunction:r,uniforms:new Map([["uFrequency",new ie(e)],["uAmplitude",new ie(t)],["uOffset",new ie(0)],["pointerX",new ie(i)]])})}update(e,t,i){this.uniforms.get("uOffset").value+=i}}const vee=O.forwardRef(function(n,e){const t=new gee(n);return de("primitive",{ref:e,object:t})}),yee=n=>{const e=O.useRef();return yt(WJ,{disableNormalPass:!0,multisampling:!1,children:[de(XJ,{premultiply:!0,blendFunction:wt.DARKEN,opacity:.6}),de(ZJ,{offset:.5,darkness:.8,eskil:!0}),de(vee,{ref:e,uFrequency:4.66,uAmplitude:.15,uMousePos:!0,blendFunction:wt.MULTIPLY})]})};function _ee(){const n=sr(i=>i.viewport),e=R_("./textures/displacement2.png"),t=R_("./textures/normal2.png");return de($s,{children:yt("mesh",{children:[de(yee,{}),de(YZ,{scale:[n.width,n.height,1],args:[1,1,1,1],children:de("meshPhysicalMaterial",{toneMapped:!1,color:"#191919",roughness:.5,metalness:.25,displacementMap:e,displacementScale:.51,normalMap:t,normalScale:.1})})]})})}const Zz=""+new URL("kj-logo-0b144ac6.svg",import.meta.url).href,xee="_highlighted_u4gfp_42",See="_nav__container_u4gfp_122",wee="_menu_u4gfp_134",cL={highlighted:xee,nav__container:See,menu:wee},$z=O.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"}),Hx=O.createContext({}),Gx=O.createContext(null),Wx=typeof document<"u",Qm=Wx?O.useLayoutEffect:O.useEffect,Kz=O.createContext({strict:!1});function Mee(n,e,t,i){const{visualElement:r}=O.useContext(Hx),s=O.useContext(Kz),o=O.useContext(Gx),a=O.useContext($z).reducedMotion,l=O.useRef();i=i||s.renderer,!l.current&&i&&(l.current=i(n,{visualState:e,parent:r,props:t,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const u=l.current;return O.useInsertionEffect(()=>{u&&u.update(t,o)}),Qm(()=>{u&&u.render()}),O.useEffect(()=>{u&&u.updateFeatures()}),(window.HandoffAppearAnimations?Qm:O.useEffect)(()=>{u&&u.animationState&&u.animationState.animateChanges()}),u}function ph(n){return typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function Tee(n,e,t){return O.useCallback(i=>{i&&n.mount&&n.mount(i),e&&(i?e.mount(i):e.unmount()),t&&(typeof t=="function"?t(i):ph(t)&&(t.current=i))},[e])}function eg(n){return typeof n=="string"||Array.isArray(n)}function jx(n){return typeof n=="object"&&typeof n.start=="function"}const VC=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],HC=["initial",...VC];function Xx(n){return jx(n.animate)||HC.some(e=>eg(n[e]))}function Jz(n){return!!(Xx(n)||n.variants)}function Eee(n,e){if(Xx(n)){const{initial:t,animate:i}=n;return{initial:t===!1||eg(t)?t:void 0,animate:eg(i)?i:void 0}}return n.inherit!==!1?e:{}}function bee(n){const{initial:e,animate:t}=Eee(n,O.useContext(Hx));return O.useMemo(()=>({initial:e,animate:t}),[fL(e),fL(t)])}function fL(n){return Array.isArray(n)?n.join(" "):n}const hL={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},tg={};for(const n in hL)tg[n]={isEnabled:e=>hL[n].some(t=>!!e[t])};function Cee(n){for(const e in n)tg[e]={...tg[e],...n[e]}}const GC=O.createContext({}),Qz=O.createContext({}),Pee=Symbol.for("motionComponentSymbol");function Aee({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:i,Component:r}){n&&Cee(n);function s(a,l){let u;const f={...O.useContext($z),...a,layoutId:Ree(a)},{isStatic:d}=f,p=bee(a),m=i(a,d);if(!d&&Wx){p.visualElement=Mee(r,m,f,e);const g=O.useContext(Qz),y=O.useContext(Kz).strict;p.visualElement&&(u=p.visualElement.loadFeatures(f,y,n,g))}return O.createElement(Hx.Provider,{value:p},u&&p.visualElement?O.createElement(u,{visualElement:p.visualElement,...f}):null,t(r,a,Tee(m,p.visualElement,l),m,d,p.visualElement))}const o=O.forwardRef(s);return o[Pee]=r,o}function Ree({layoutId:n}){const e=O.useContext(GC).id;return e&&n!==void 0?e+"-"+n:n}function Dee(n){function e(i,r={}){return Aee(n(i,r))}if(typeof Proxy>"u")return e;const t=new Map;return new Proxy(e,{get:(i,r)=>(t.has(r)||t.set(r,e(r)),t.get(r))})}const Lee=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function WC(n){return typeof n!="string"||n.includes("-")?!1:!!(Lee.indexOf(n)>-1||/[A-Z]/.test(n))}const I_={};function Iee(n){Object.assign(I_,n)}const Fg=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],$c=new Set(Fg);function eB(n,{layout:e,layoutId:t}){return $c.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!I_[n]||n==="opacity")}const Zr=n=>!!(n&&n.getVelocity),kee={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Oee=Fg.length;function Nee(n,{enableHardwareAcceleration:e=!0,allowTransformNone:t=!0},i,r){let s="";for(let o=0;o<Oee;o++){const a=Fg[o];if(n[a]!==void 0){const l=kee[a]||a;s+=`${l}(${n[a]}) `}}return e&&!n.z&&(s+="translateZ(0)"),s=s.trim(),r?s=r(n,i?"":s):t&&i&&(s="none"),s}const tB=n=>e=>typeof e=="string"&&e.startsWith(n),nB=tB("--"),ZT=tB("var(--"),Uee=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,Fee=(n,e)=>e&&typeof n=="number"?e.transform(n):n,Nc=(n,e,t)=>Math.min(Math.max(t,n),e),Kc={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Qp={...Kc,transform:n=>Nc(0,1,n)},J0={...Kc,default:1},em=n=>Math.round(n*1e5)/1e5,Yx=/(-)?([\d]*\.?[\d])+/g,iB=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,zee=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function zg(n){return typeof n=="string"}const Bg=n=>({test:e=>zg(e)&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),vl=Bg("deg"),Jo=Bg("%"),St=Bg("px"),Bee=Bg("vh"),Vee=Bg("vw"),dL={...Jo,parse:n=>Jo.parse(n)/100,transform:n=>Jo.transform(n*100)},pL={...Kc,transform:Math.round},rB={borderWidth:St,borderTopWidth:St,borderRightWidth:St,borderBottomWidth:St,borderLeftWidth:St,borderRadius:St,radius:St,borderTopLeftRadius:St,borderTopRightRadius:St,borderBottomRightRadius:St,borderBottomLeftRadius:St,width:St,maxWidth:St,height:St,maxHeight:St,size:St,top:St,right:St,bottom:St,left:St,padding:St,paddingTop:St,paddingRight:St,paddingBottom:St,paddingLeft:St,margin:St,marginTop:St,marginRight:St,marginBottom:St,marginLeft:St,rotate:vl,rotateX:vl,rotateY:vl,rotateZ:vl,scale:J0,scaleX:J0,scaleY:J0,scaleZ:J0,skew:vl,skewX:vl,skewY:vl,distance:St,translateX:St,translateY:St,translateZ:St,x:St,y:St,z:St,perspective:St,transformPerspective:St,opacity:Qp,originX:dL,originY:dL,originZ:St,zIndex:pL,fillOpacity:Qp,strokeOpacity:Qp,numOctaves:pL};function jC(n,e,t,i){const{style:r,vars:s,transform:o,transformOrigin:a}=n;let l=!1,u=!1,f=!0;for(const d in e){const p=e[d];if(nB(d)){s[d]=p;continue}const m=rB[d],g=Fee(p,m);if($c.has(d)){if(l=!0,o[d]=g,!f)continue;p!==(m.default||0)&&(f=!1)}else d.startsWith("origin")?(u=!0,a[d]=g):r[d]=g}if(e.transform||(l||i?r.transform=Nee(n.transform,t,f,i):r.transform&&(r.transform="none")),u){const{originX:d="50%",originY:p="50%",originZ:m=0}=a;r.transformOrigin=`${d} ${p} ${m}`}}const XC=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function sB(n,e,t){for(const i in e)!Zr(e[i])&&!eB(i,t)&&(n[i]=e[i])}function Hee({transformTemplate:n},e,t){return O.useMemo(()=>{const i=XC();return jC(i,e,{enableHardwareAcceleration:!t},n),Object.assign({},i.vars,i.style)},[e])}function Gee(n,e,t){const i=n.style||{},r={};return sB(r,i,n),Object.assign(r,Hee(n,e,t)),n.transformValues?n.transformValues(r):r}function Wee(n,e,t){const i={},r=Gee(n,e,t);return n.drag&&n.dragListener!==!1&&(i.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(i.tabIndex=0),i.style=r,i}const jee=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","ignoreStrict","viewport"]);function k_(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||jee.has(n)}let oB=n=>!k_(n);function Xee(n){n&&(oB=e=>e.startsWith("on")?!k_(e):n(e))}try{Xee(require("@emotion/is-prop-valid").default)}catch{}function Yee(n,e,t){const i={};for(const r in n)r==="values"&&typeof n.values=="object"||(oB(r)||t===!0&&k_(r)||!e&&!k_(r)||n.draggable&&r.startsWith("onDrag"))&&(i[r]=n[r]);return i}function mL(n,e,t){return typeof n=="string"?n:St.transform(e+t*n)}function qee(n,e,t){const i=mL(e,n.x,n.width),r=mL(t,n.y,n.height);return`${i} ${r}`}const Zee={offset:"stroke-dashoffset",array:"stroke-dasharray"},$ee={offset:"strokeDashoffset",array:"strokeDasharray"};function Kee(n,e,t=1,i=0,r=!0){n.pathLength=1;const s=r?Zee:$ee;n[s.offset]=St.transform(-i);const o=St.transform(e),a=St.transform(t);n[s.array]=`${o} ${a}`}function YC(n,{attrX:e,attrY:t,attrScale:i,originX:r,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...u},f,d,p){if(jC(n,u,f,p),d){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:m,style:g,dimensions:y}=n;m.transform&&(y&&(g.transform=m.transform),delete m.transform),y&&(r!==void 0||s!==void 0||g.transform)&&(g.transformOrigin=qee(y,r!==void 0?r:.5,s!==void 0?s:.5)),e!==void 0&&(m.x=e),t!==void 0&&(m.y=t),i!==void 0&&(m.scale=i),o!==void 0&&Kee(m,o,a,l,!1)}const aB=()=>({...XC(),attrs:{}}),qC=n=>typeof n=="string"&&n.toLowerCase()==="svg";function Jee(n,e,t,i){const r=O.useMemo(()=>{const s=aB();return YC(s,e,{enableHardwareAcceleration:!1},qC(i),n.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(n.style){const s={};sB(s,n.style,n),r.style={...s,...r.style}}return r}function Qee(n=!1){return(t,i,r,{latestValues:s},o)=>{const l=(WC(t)?Jee:Wee)(i,s,o,t),f={...Yee(i,typeof t=="string",n),...l,ref:r},{children:d}=i,p=O.useMemo(()=>Zr(d)?d.get():d,[d]);return O.createElement(t,{...f,children:p})}}const ZC=n=>n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();function lB(n,{style:e,vars:t},i,r){Object.assign(n.style,e,r&&r.getProjectionStyles(i));for(const s in t)n.style.setProperty(s,t[s])}const uB=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function cB(n,e,t,i){lB(n,e,void 0,i);for(const r in e.attrs)n.setAttribute(uB.has(r)?r:ZC(r),e.attrs[r])}function $C(n,e){const{style:t}=n,i={};for(const r in t)(Zr(t[r])||e.style&&Zr(e.style[r])||eB(r,n))&&(i[r]=t[r]);return i}function fB(n,e){const t=$C(n,e);for(const i in n)if(Zr(n[i])||Zr(e[i])){const r=Fg.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;t[r]=n[i]}return t}function KC(n,e,t,i={},r={}){return typeof e=="function"&&(e=e(t!==void 0?t:n.custom,i,r)),typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"&&(e=e(t!==void 0?t:n.custom,i,r)),e}function JC(n){const e=O.useRef(null);return e.current===null&&(e.current=n()),e.current}const O_=n=>Array.isArray(n),ete=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),tte=n=>O_(n)?n[n.length-1]||0:n;function Vy(n){const e=Zr(n)?n.get():n;return ete(e)?e.toValue():e}function nte({scrapeMotionValuesFromProps:n,createRenderState:e,onMount:t},i,r,s){const o={latestValues:ite(i,r,s,n),renderState:e()};return t&&(o.mount=a=>t(i,a,o)),o}const hB=n=>(e,t)=>{const i=O.useContext(Hx),r=O.useContext(Gx),s=()=>nte(n,e,i,r);return t?s():JC(s)};function ite(n,e,t,i){const r={},s=i(n,{});for(const p in s)r[p]=Vy(s[p]);let{initial:o,animate:a}=n;const l=Xx(n),u=Jz(n);e&&u&&!l&&n.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let f=t?t.initial===!1:!1;f=f||o===!1;const d=f?a:o;return d&&typeof d!="boolean"&&!jx(d)&&(Array.isArray(d)?d:[d]).forEach(m=>{const g=KC(n,m);if(!g)return;const{transitionEnd:y,transition:x,...v}=g;for(const w in v){let S=v[w];if(Array.isArray(S)){const T=f?S.length-1:0;S=S[T]}S!==null&&(r[w]=S)}for(const w in y)r[w]=y[w]}),r}const rte={useVisualState:hB({scrapeMotionValuesFromProps:fB,createRenderState:aB,onMount:(n,e,{renderState:t,latestValues:i})=>{try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}YC(t,i,{enableHardwareAcceleration:!1},qC(e.tagName),n.transformTemplate),cB(e,t)}})},ste={useVisualState:hB({scrapeMotionValuesFromProps:$C,createRenderState:XC})};function ote(n,{forwardMotionProps:e=!1},t,i){return{...WC(n)?rte:ste,preloadedFeatures:t,useRender:Qee(e),createVisualElement:i,Component:n}}function ka(n,e,t,i={passive:!0}){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t)}const dB=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1;function qx(n,e="page"){return{point:{x:n[e+"X"],y:n[e+"Y"]}}}const ate=n=>e=>dB(e)&&n(e,qx(e));function Fa(n,e,t,i){return ka(n,e,ate(t),i)}const lte=(n,e)=>t=>e(n(t)),Xl=(...n)=>n.reduce(lte);function pB(n){let e=null;return()=>{const t=()=>{e=null};return e===null?(e=n,t):!1}}const gL=pB("dragHorizontal"),vL=pB("dragVertical");function mB(n){let e=!1;if(n==="y")e=vL();else if(n==="x")e=gL();else{const t=gL(),i=vL();t&&i?e=()=>{t(),i()}:(t&&t(),i&&i())}return e}function gB(){const n=mB(!0);return n?(n(),!1):!0}class _u{constructor(e){this.isMounted=!1,this.node=e}update(){}}function ute(n){let e=[],t=[],i=0,r=!1,s=!1;const o=new WeakSet,a={schedule:(l,u=!1,f=!1)=>{const d=f&&r,p=d?e:t;return u&&o.add(l),p.indexOf(l)===-1&&(p.push(l),d&&r&&(i=e.length)),l},cancel:l=>{const u=t.indexOf(l);u!==-1&&t.splice(u,1),o.delete(l)},process:l=>{if(r){s=!0;return}if(r=!0,[e,t]=[t,e],t.length=0,i=e.length,i)for(let u=0;u<i;u++){const f=e[u];f(l),o.has(f)&&(a.schedule(f),n())}r=!1,s&&(s=!1,a.process(l))}};return a}const pi={delta:0,timestamp:0,isProcessing:!1},cte=40;let $T=!0,ng=!1;const Zx=["read","update","preRender","render","postRender"],Rh=Zx.reduce((n,e)=>(n[e]=ute(()=>ng=!0),n),{}),fte=n=>Rh[n].process(pi),vB=n=>{ng=!1,pi.delta=$T?1e3/60:Math.max(Math.min(n-pi.timestamp,cte),1),pi.timestamp=n,pi.isProcessing=!0,Zx.forEach(fte),pi.isProcessing=!1,ng&&($T=!1,requestAnimationFrame(vB))},hte=()=>{ng=!0,$T=!0,pi.isProcessing||requestAnimationFrame(vB)},pn=Zx.reduce((n,e)=>{const t=Rh[e];return n[e]=(i,r=!1,s=!1)=>(ng||hte(),t.schedule(i,r,s)),n},{});function ra(n){Zx.forEach(e=>Rh[e].cancel(n))}function yL(n,e){const t="pointer"+(e?"enter":"leave"),i="onHover"+(e?"Start":"End"),r=(s,o)=>{if(s.type==="touch"||gB())return;const a=n.getProps();n.animationState&&a.whileHover&&n.animationState.setActive("whileHover",e),a[i]&&pn.update(()=>a[i](s,o))};return Fa(n.current,t,r,{passive:!n.getProps()[i]})}class dte extends _u{mount(){this.unmount=Xl(yL(this.node,!0),yL(this.node,!1))}unmount(){}}class pte extends _u{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Xl(ka(this.node.current,"focus",()=>this.onFocus()),ka(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const yB=(n,e)=>e?n===e?!0:yB(n,e.parentElement):!1,gi=n=>n;function Tw(n,e){if(!e)return;const t=new PointerEvent("pointer"+n);e(t,qx(t))}class mte extends _u{constructor(){super(...arguments),this.removeStartListeners=gi,this.removeEndListeners=gi,this.removeAccessibleListeners=gi,this.startPointerPress=(e,t)=>{if(this.removeEndListeners(),this.isPressing)return;const i=this.node.getProps(),s=Fa(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:f}=this.node.getProps();pn.update(()=>{yB(this.node.current,a.target)?u&&u(a,l):f&&f(a,l)})},{passive:!(i.onTap||i.onPointerUp)}),o=Fa(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(i.onTapCancel||i.onPointerCancel)});this.removeEndListeners=Xl(s,o),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||Tw("up",(l,u)=>{const{onTap:f}=this.node.getProps();f&&pn.update(()=>f(l,u))})};this.removeEndListeners(),this.removeEndListeners=ka(this.node.current,"keyup",o),Tw("down",(a,l)=>{this.startPress(a,l)})},t=ka(this.node.current,"keydown",e),i=()=>{this.isPressing&&Tw("cancel",(s,o)=>this.cancelPress(s,o))},r=ka(this.node.current,"blur",i);this.removeAccessibleListeners=Xl(t,r)}}startPress(e,t){this.isPressing=!0;const{onTapStart:i,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),i&&pn.update(()=>i(e,t))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!gB()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:i}=this.node.getProps();i&&pn.update(()=>i(e,t))}mount(){const e=this.node.getProps(),t=Fa(this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),i=ka(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Xl(t,i)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const KT=new WeakMap,Ew=new WeakMap,gte=n=>{const e=KT.get(n.target);e&&e(n)},vte=n=>{n.forEach(gte)};function yte({root:n,...e}){const t=n||document;Ew.has(t)||Ew.set(t,{});const i=Ew.get(t),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(vte,{root:n,...e})),i[r]}function _te(n,e,t){const i=yte(e);return KT.set(n,t),i.observe(n),()=>{KT.delete(n),i.unobserve(n)}}const xte={some:0,all:1};class Ste extends _u{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:i,amount:r="some",once:s}=e,o={root:t?t.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:xte[r]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:f,onViewportLeave:d}=this.node.getProps(),p=u?f:d;p&&p(l)};return _te(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(wte(e,t))&&this.startObserver()}unmount(){}}function wte({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const Mte={inView:{Feature:Ste},tap:{Feature:mte},focus:{Feature:pte},hover:{Feature:dte}};function _B(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let i=0;i<t;i++)if(e[i]!==n[i])return!1;return!0}function Tte(n){const e={};return n.values.forEach((t,i)=>e[i]=t.get()),e}function Ete(n){const e={};return n.values.forEach((t,i)=>e[i]=t.getVelocity()),e}function $x(n,e,t){const i=n.getProps();return KC(i,e,t!==void 0?t:i.custom,Tte(n),Ete(n))}const bte="framerAppearId",Cte="data-"+ZC(bte);let xB=gi,Kx=gi;const Yl=n=>n*1e3,za=n=>n/1e3,Pte={current:!1},SB=n=>Array.isArray(n)&&typeof n[0]=="number";function wB(n){return!!(!n||typeof n=="string"&&MB[n]||SB(n)||Array.isArray(n)&&n.every(wB))}const Cp=([n,e,t,i])=>`cubic-bezier(${n}, ${e}, ${t}, ${i})`,MB={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Cp([0,.65,.55,1]),circOut:Cp([.55,0,1,.45]),backIn:Cp([.31,.01,.66,-.59]),backOut:Cp([.33,1.53,.69,.99])};function TB(n){if(n)return SB(n)?Cp(n):Array.isArray(n)?n.map(TB):MB[n]}function Ate(n,e,t,{delay:i=0,duration:r,repeat:s=0,repeatType:o="loop",ease:a,times:l}={}){const u={[e]:t};l&&(u.offset=l);const f=TB(a);return Array.isArray(f)&&(u.easing=f),n.animate(u,{delay:i,duration:r,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const _L={waapi:()=>Object.hasOwnProperty.call(Element.prototype,"animate")},bw={},EB={};for(const n in _L)EB[n]=()=>(bw[n]===void 0&&(bw[n]=_L[n]()),bw[n]);function Rte(n,{repeat:e,repeatType:t="loop"}){const i=e&&t!=="loop"&&e%2===1?0:n.length-1;return n[i]}const bB=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,Dte=1e-7,Lte=12;function Ite(n,e,t,i,r){let s,o,a=0;do o=e+(t-e)/2,s=bB(o,i,r)-n,s>0?t=o:e=o;while(Math.abs(s)>Dte&&++a<Lte);return o}function Vg(n,e,t,i){if(n===e&&t===i)return gi;const r=s=>Ite(s,0,1,n,t);return s=>s===0||s===1?s:bB(r(s),e,i)}const kte=Vg(.42,0,1,1),Ote=Vg(0,0,.58,1),CB=Vg(.42,0,.58,1),Nte=n=>Array.isArray(n)&&typeof n[0]!="number",PB=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,AB=n=>e=>1-n(1-e),RB=n=>1-Math.sin(Math.acos(n)),QC=AB(RB),Ute=PB(QC),DB=Vg(.33,1.53,.69,.99),eP=AB(DB),Fte=PB(eP),zte=n=>(n*=2)<1?.5*eP(n):.5*(2-Math.pow(2,-10*(n-1))),Bte={linear:gi,easeIn:kte,easeInOut:CB,easeOut:Ote,circIn:RB,circInOut:Ute,circOut:QC,backIn:eP,backInOut:Fte,backOut:DB,anticipate:zte},xL=n=>{if(Array.isArray(n)){Kx(n.length===4);const[e,t,i,r]=n;return Vg(e,t,i,r)}else if(typeof n=="string")return Bte[n];return n},tP=(n,e)=>t=>!!(zg(t)&&zee.test(t)&&t.startsWith(n)||e&&Object.prototype.hasOwnProperty.call(t,e)),LB=(n,e,t)=>i=>{if(!zg(i))return i;const[r,s,o,a]=i.match(Yx);return{[n]:parseFloat(r),[e]:parseFloat(s),[t]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},Vte=n=>Nc(0,255,n),Cw={...Kc,transform:n=>Math.round(Vte(n))},uc={test:tP("rgb","red"),parse:LB("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:i=1})=>"rgba("+Cw.transform(n)+", "+Cw.transform(e)+", "+Cw.transform(t)+", "+em(Qp.transform(i))+")"};function Hte(n){let e="",t="",i="",r="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),i=n.substring(5,7),r=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),i=n.substring(3,4),r=n.substring(4,5),e+=e,t+=t,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const JT={test:tP("#"),parse:Hte,transform:uc.transform},mh={test:tP("hsl","hue"),parse:LB("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:i=1})=>"hsla("+Math.round(n)+", "+Jo.transform(em(e))+", "+Jo.transform(em(t))+", "+em(Qp.transform(i))+")"},vr={test:n=>uc.test(n)||JT.test(n)||mh.test(n),parse:n=>uc.test(n)?uc.parse(n):mh.test(n)?mh.parse(n):JT.parse(n),transform:n=>zg(n)?n:n.hasOwnProperty("red")?uc.transform(n):mh.transform(n)},Fn=(n,e,t)=>-t*n+t*e+n;function Pw(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function Gte({hue:n,saturation:e,lightness:t,alpha:i}){n/=360,e/=100,t/=100;let r=0,s=0,o=0;if(!e)r=s=o=t;else{const a=t<.5?t*(1+e):t+e-t*e,l=2*t-a;r=Pw(l,a,n+1/3),s=Pw(l,a,n),o=Pw(l,a,n-1/3)}return{red:Math.round(r*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:i}}const Aw=(n,e,t)=>{const i=n*n;return Math.sqrt(Math.max(0,t*(e*e-i)+i))},Wte=[JT,uc,mh],jte=n=>Wte.find(e=>e.test(n));function SL(n){const e=jte(n);let t=e.parse(n);return e===mh&&(t=Gte(t)),t}const IB=(n,e)=>{const t=SL(n),i=SL(e),r={...t};return s=>(r.red=Aw(t.red,i.red,s),r.green=Aw(t.green,i.green,s),r.blue=Aw(t.blue,i.blue,s),r.alpha=Fn(t.alpha,i.alpha,s),uc.transform(r))};function Xte(n){var e,t;return isNaN(n)&&zg(n)&&(((e=n.match(Yx))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(iB))===null||t===void 0?void 0:t.length)||0)>0}const kB={regex:Uee,countKey:"Vars",token:"${v}",parse:gi},OB={regex:iB,countKey:"Colors",token:"${c}",parse:vr.parse},NB={regex:Yx,countKey:"Numbers",token:"${n}",parse:Kc.parse};function Rw(n,{regex:e,countKey:t,token:i,parse:r}){const s=n.tokenised.match(e);s&&(n["num"+t]=s.length,n.tokenised=n.tokenised.replace(e,i),n.values.push(...s.map(r)))}function N_(n){const e=n.toString(),t={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return t.value.includes("var(--")&&Rw(t,kB),Rw(t,OB),Rw(t,NB),t}function UB(n){return N_(n).values}function FB(n){const{values:e,numColors:t,numVars:i,tokenised:r}=N_(n),s=e.length;return o=>{let a=r;for(let l=0;l<s;l++)l<i?a=a.replace(kB.token,o[l]):l<i+t?a=a.replace(OB.token,vr.transform(o[l])):a=a.replace(NB.token,em(o[l]));return a}}const Yte=n=>typeof n=="number"?0:n;function qte(n){const e=UB(n);return FB(n)(e.map(Yte))}const ou={test:Xte,parse:UB,createTransformer:FB,getAnimatableNone:qte},zB=(n,e)=>t=>`${t>0?e:n}`;function BB(n,e){return typeof n=="number"?t=>Fn(n,e,t):vr.test(n)?IB(n,e):n.startsWith("var(")?zB(n,e):HB(n,e)}const VB=(n,e)=>{const t=[...n],i=t.length,r=n.map((s,o)=>BB(s,e[o]));return s=>{for(let o=0;o<i;o++)t[o]=r[o](s);return t}},Zte=(n,e)=>{const t={...n,...e},i={};for(const r in t)n[r]!==void 0&&e[r]!==void 0&&(i[r]=BB(n[r],e[r]));return r=>{for(const s in i)t[s]=i[s](r);return t}},HB=(n,e)=>{const t=ou.createTransformer(e),i=N_(n),r=N_(e);return i.numVars===r.numVars&&i.numColors===r.numColors&&i.numNumbers>=r.numNumbers?Xl(VB(i.values,r.values),t):zB(n,e)},Zh=(n,e,t)=>{const i=e-n;return i===0?1:(t-n)/i},wL=(n,e)=>t=>Fn(n,e,t);function $te(n){return typeof n=="number"?wL:typeof n=="string"?vr.test(n)?IB:HB:Array.isArray(n)?VB:typeof n=="object"?Zte:wL}function Kte(n,e,t){const i=[],r=t||$te(n[0]),s=n.length-1;for(let o=0;o<s;o++){let a=r(n[o],n[o+1]);if(e){const l=Array.isArray(e)?e[o]||gi:e;a=Xl(l,a)}i.push(a)}return i}function nP(n,e,{clamp:t=!0,ease:i,mixer:r}={}){const s=n.length;if(Kx(s===e.length),s===1)return()=>e[0];n[0]>n[s-1]&&(n=[...n].reverse(),e=[...e].reverse());const o=Kte(e,i,r),a=o.length,l=u=>{let f=0;if(a>1)for(;f<n.length-2&&!(u<n[f+1]);f++);const d=Zh(n[f],n[f+1],u);return o[f](d)};return t?u=>l(Nc(n[0],n[s-1],u)):l}function Jte(n,e){const t=n[n.length-1];for(let i=1;i<=e;i++){const r=Zh(0,e,i);n.push(Fn(t,1,r))}}function GB(n){const e=[0];return Jte(e,n.length-1),e}function Qte(n,e){return n.map(t=>t*e)}function ene(n,e){return n.map(()=>e||CB).splice(0,n.length-1)}function U_({duration:n=300,keyframes:e,times:t,ease:i="easeInOut"}){const r=Nte(i)?i.map(xL):xL(i),s={done:!1,value:e[0]},o=Qte(t&&t.length===e.length?t:GB(e),n),a=nP(o,e,{ease:Array.isArray(r)?r:ene(e,r)});return{calculatedDuration:n,next:l=>(s.value=a(l),s.done=l>=n,s)}}function iP(n,e){return e?n*(1e3/e):0}const tne=5;function WB(n,e,t){const i=Math.max(e-tne,0);return iP(t-n(i),e-i)}const Dw=.001,nne=.01,ML=10,ine=.05,rne=1;function sne({duration:n=800,bounce:e=.25,velocity:t=0,mass:i=1}){let r,s;xB(n<=Yl(ML));let o=1-e;o=Nc(ine,rne,o),n=Nc(nne,ML,za(n)),o<1?(r=u=>{const f=u*o,d=f*n,p=f-t,m=QT(u,o),g=Math.exp(-d);return Dw-p/m*g},s=u=>{const d=u*o*n,p=d*t+t,m=Math.pow(o,2)*Math.pow(u,2)*n,g=Math.exp(-d),y=QT(Math.pow(u,2),o);return(-r(u)+Dw>0?-1:1)*((p-m)*g)/y}):(r=u=>{const f=Math.exp(-u*n),d=(u-t)*n+1;return-Dw+f*d},s=u=>{const f=Math.exp(-u*n),d=(t-u)*(n*n);return f*d});const a=5/n,l=ane(r,s,a);if(n=Yl(n),isNaN(l))return{stiffness:100,damping:10,duration:n};{const u=Math.pow(l,2)*i;return{stiffness:u,damping:o*2*Math.sqrt(i*u),duration:n}}}const one=12;function ane(n,e,t){let i=t;for(let r=1;r<one;r++)i=i-n(i)/e(i);return i}function QT(n,e){return n*Math.sqrt(1-e*e)}const lne=["duration","bounce"],une=["stiffness","damping","mass"];function TL(n,e){return e.some(t=>n[t]!==void 0)}function cne(n){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...n};if(!TL(n,une)&&TL(n,lne)){const t=sne(n);e={...e,...t,velocity:0,mass:1},e.isResolvedFromDuration=!0}return e}function jB({keyframes:n,restDelta:e,restSpeed:t,...i}){const r=n[0],s=n[n.length-1],o={done:!1,value:r},{stiffness:a,damping:l,mass:u,velocity:f,duration:d,isResolvedFromDuration:p}=cne(i),m=f?-za(f):0,g=l/(2*Math.sqrt(a*u)),y=s-r,x=za(Math.sqrt(a/u)),v=Math.abs(y)<5;t||(t=v?.01:2),e||(e=v?.005:.5);let w;if(g<1){const S=QT(x,g);w=T=>{const b=Math.exp(-g*x*T);return s-b*((m+g*x*y)/S*Math.sin(S*T)+y*Math.cos(S*T))}}else if(g===1)w=S=>s-Math.exp(-x*S)*(y+(m+x*y)*S);else{const S=x*Math.sqrt(g*g-1);w=T=>{const b=Math.exp(-g*x*T),P=Math.min(S*T,300);return s-b*((m+g*x*y)*Math.sinh(P)+S*y*Math.cosh(P))/S}}return{calculatedDuration:p&&d||null,next:S=>{const T=w(S);if(p)o.done=S>=d;else{let b=m;S!==0&&(g<1?b=WB(w,S,T):b=0);const P=Math.abs(b)<=t,R=Math.abs(s-T)<=e;o.done=P&&R}return o.value=o.done?s:T,o}}}function EL({keyframes:n,velocity:e=0,power:t=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:f}){const d=n[0],p={done:!1,value:d},m=D=>a!==void 0&&D<a||l!==void 0&&D>l,g=D=>a===void 0?l:l===void 0||Math.abs(a-D)<Math.abs(l-D)?a:l;let y=t*e;const x=d+y,v=o===void 0?x:o(x);v!==x&&(y=v-d);const w=D=>-y*Math.exp(-D/i),S=D=>v+w(D),T=D=>{const C=w(D),L=S(D);p.done=Math.abs(C)<=u,p.value=p.done?v:L};let b,P;const R=D=>{m(p.value)&&(b=D,P=jB({keyframes:[p.value,g(p.value)],velocity:WB(S,D,p.value),damping:r,stiffness:s,restDelta:u,restSpeed:f}))};return R(0),{calculatedDuration:null,next:D=>{let C=!1;return!P&&b===void 0&&(C=!0,T(D),R(D)),b!==void 0&&D>b?P.next(D-b):(!C&&T(D),p)}}}const fne=n=>{const e=({timestamp:t})=>n(t);return{start:()=>pn.update(e,!0),stop:()=>ra(e),now:()=>pi.isProcessing?pi.timestamp:performance.now()}},bL=2e4;function CL(n){let e=0;const t=50;let i=n.next(e);for(;!i.done&&e<bL;)e+=t,i=n.next(e);return e>=bL?1/0:e}const hne={decay:EL,inertia:EL,tween:U_,keyframes:U_,spring:jB};function F_({autoplay:n=!0,delay:e=0,driver:t=fne,keyframes:i,type:r="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:a="loop",onPlay:l,onStop:u,onComplete:f,onUpdate:d,...p}){let m=1,g=!1,y,x;const v=()=>{y&&y(),x=new Promise(ee=>{y=ee})};v();let w;const S=hne[r]||U_;let T;S!==U_&&typeof i[0]!="number"&&(T=nP([0,100],i,{clamp:!1}),i=[0,100]);const b=S({...p,keyframes:i});let P;a==="mirror"&&(P=S({...p,keyframes:[...i].reverse(),velocity:-(p.velocity||0)}));let R="idle",D=null,C=null,L=null;b.calculatedDuration===null&&s&&(b.calculatedDuration=CL(b));const{calculatedDuration:F}=b;let H=1/0,G=1/0;F!==null&&(H=F+o,G=H*(s+1)-o);let W=0;const X=ee=>{if(C===null)return;m>0&&(C=Math.min(C,ee)),D!==null?W=D:W=(ee-C)*m;const oe=W-e,se=oe<0;W=Math.max(oe,0),R==="finished"&&D===null&&(W=G);let te=W,Te=b;if(s){const it=W/H;let Ee=Math.floor(it),Ie=it%1;!Ie&&it>=1&&(Ie=1),Ie===1&&Ee--,Ee=Math.min(Ee,s+1);const ce=!!(Ee%2);ce&&(a==="reverse"?(Ie=1-Ie,o&&(Ie-=o/H)):a==="mirror"&&(Te=P));let ae=Nc(0,1,Ie);W>G&&(ae=a==="reverse"&&ce?1:0),te=ae*H}const we=se?{done:!1,value:i[0]}:Te.next(te);T&&(we.value=T(we.value));let{done:J}=we;!se&&F!==null&&(J=W>=G);const Xe=D===null&&(R==="finished"||R==="running"&&J||m<0&&W<=0);return d&&d(we.value),Xe&&z(),we},re=()=>{w&&w.stop(),w=void 0},Q=()=>{R="idle",re(),v(),C=L=null},z=()=>{R="finished",f&&f(),re(),v()},j=()=>{if(g)return;w||(w=t(X));const ee=w.now();l&&l(),D!==null?C=ee-D:(!C||R==="finished")&&(C=ee),L=C,D=null,R="running",w.start()};n&&j();const I={then(ee,oe){return x.then(ee,oe)},get time(){return za(W)},set time(ee){ee=Yl(ee),W=ee,D!==null||!w||m===0?D=ee:C=w.now()-ee/m},get duration(){const ee=b.calculatedDuration===null?CL(b):b.calculatedDuration;return za(ee)},get speed(){return m},set speed(ee){ee===m||!w||(m=ee,I.time=za(W))},get state(){return R},play:j,pause:()=>{R="paused",D=W},stop:()=>{g=!0,R!=="idle"&&(R="idle",u&&u(),Q())},cancel:()=>{L!==null&&X(L),Q()},complete:()=>{R="finished"},sample:ee=>(C=0,X(ee))};return I}const dne=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Q0=10,pne=2e4,mne=(n,e)=>e.type==="spring"||n==="backgroundColor"||!wB(e.ease);function gne(n,e,{onUpdate:t,onComplete:i,...r}){if(!(EB.waapi()&&dne.has(e)&&!r.repeatDelay&&r.repeatType!=="mirror"&&r.damping!==0&&r.type!=="inertia"))return!1;let o=!1,a,l;const u=()=>{l=new Promise(v=>{a=v})};u();let{keyframes:f,duration:d=300,ease:p,times:m}=r;if(mne(e,r)){const v=F_({...r,repeat:0,delay:0});let w={done:!1,value:f[0]};const S=[];let T=0;for(;!w.done&&T<pne;)w=v.sample(T),S.push(w.value),T+=Q0;m=void 0,f=S,d=T-Q0,p="linear"}const g=Ate(n.owner.current,e,f,{...r,duration:d,ease:p,times:m}),y=()=>g.cancel(),x=()=>{pn.update(y),a(),u()};return g.onfinish=()=>{n.set(Rte(f,r)),i&&i(),x()},{then(v,w){return l.then(v,w)},get time(){return za(g.currentTime||0)},set time(v){g.currentTime=Yl(v)},get speed(){return g.playbackRate},set speed(v){g.playbackRate=v},get duration(){return za(d)},play:()=>{o||(g.play(),ra(y))},pause:()=>g.pause(),stop:()=>{if(o=!0,g.playState==="idle")return;const{currentTime:v}=g;if(v){const w=F_({...r,autoplay:!1});n.setWithVelocity(w.sample(v-Q0).value,w.sample(v).value,Q0)}x()},complete:()=>g.finish(),cancel:x}}function vne({keyframes:n,delay:e,onUpdate:t,onComplete:i}){const r=()=>(t&&t(n[n.length-1]),i&&i(),{time:0,speed:1,duration:0,play:gi,pause:gi,stop:gi,then:s=>(s(),Promise.resolve()),cancel:gi,complete:gi});return e?F_({keyframes:[0,1],duration:0,delay:e,onComplete:r}):r()}const yne={type:"spring",stiffness:500,damping:25,restSpeed:10},_ne=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),xne={type:"keyframes",duration:.8},Sne={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},wne=(n,{keyframes:e})=>e.length>2?xne:$c.has(n)?n.startsWith("scale")?_ne(e[1]):yne:Sne,eE=(n,e)=>n==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(ou.test(e)||e==="0")&&!e.startsWith("url(")),Mne=new Set(["brightness","contrast","saturate","opacity"]);function Tne(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[i]=t.match(Yx)||[];if(!i)return n;const r=t.replace(i,"");let s=Mne.has(e)?1:0;return i!==t&&(s*=100),e+"("+s+r+")"}const Ene=/([a-z-]*)\(.*?\)/g,tE={...ou,getAnimatableNone:n=>{const e=n.match(Ene);return e?e.map(Tne).join(" "):n}},bne={...rB,color:vr,backgroundColor:vr,outlineColor:vr,fill:vr,stroke:vr,borderColor:vr,borderTopColor:vr,borderRightColor:vr,borderBottomColor:vr,borderLeftColor:vr,filter:tE,WebkitFilter:tE},rP=n=>bne[n];function XB(n,e){let t=rP(n);return t!==tE&&(t=ou),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const YB=n=>/^0[^.\s]+$/.test(n);function Cne(n){if(typeof n=="number")return n===0;if(n!==null)return n==="none"||n==="0"||YB(n)}function Pne(n,e,t,i){const r=eE(e,t);let s;Array.isArray(t)?s=[...t]:s=[null,t];const o=i.from!==void 0?i.from:n.get();let a;const l=[];for(let u=0;u<s.length;u++)s[u]===null&&(s[u]=u===0?o:s[u-1]),Cne(s[u])?l.push(u):typeof s[u]=="string"&&(a=s[u]);if(r&&l.length&&a)for(let u=0;u<l.length;u++){const f=l[u];s[f]=XB(e,a)}return s}function Ane({when:n,delay:e,delayChildren:t,staggerChildren:i,staggerDirection:r,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:u,...f}){return!!Object.keys(f).length}function qB(n,e){return n[e]||n.default||n}const sP=(n,e,t,i={})=>r=>{const s=qB(i,n)||{},o=s.delay||i.delay||0;let{elapsed:a=0}=i;a=a-Yl(o);const l=Pne(e,n,t,s),u=l[0],f=l[l.length-1],d=eE(n,u),p=eE(n,f);let m={keyframes:l,velocity:e.getVelocity(),ease:"easeOut",...s,delay:-a,onUpdate:g=>{e.set(g),s.onUpdate&&s.onUpdate(g)},onComplete:()=>{r(),s.onComplete&&s.onComplete()}};if(Ane(s)||(m={...m,...wne(n,m)}),m.duration&&(m.duration=Yl(m.duration)),m.repeatDelay&&(m.repeatDelay=Yl(m.repeatDelay)),!d||!p||Pte.current||s.type===!1)return vne(m);if(e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const g=gne(e,n,m);if(g)return g}return F_(m)};function z_(n){return!!(Zr(n)&&n.add)}const Rne=n=>/^\-?\d*\.?\d+$/.test(n);function oP(n,e){n.indexOf(e)===-1&&n.push(e)}function aP(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class lP{constructor(){this.subscriptions=[]}add(e){return oP(this.subscriptions,e),()=>aP(this.subscriptions,e)}notify(e,t,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,t,i);else for(let s=0;s<r;s++){const o=this.subscriptions[s];o&&o(e,t,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Dne=n=>!isNaN(parseFloat(n));class Lne{constructor(e,t={}){this.version="10.12.10",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(i,r=!0)=>{this.prev=this.current,this.current=i;const{delta:s,timestamp:o}=pi;this.lastUpdated!==o&&(this.timeDelta=s,this.lastUpdated=o,pn.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>pn.postRender(this.velocityCheck),this.velocityCheck=({timestamp:i})=>{i!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=Dne(this.current),this.owner=t.owner}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new lP);const i=this.events[e].add(t);return e==="change"?()=>{i(),pn.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,i){this.set(t),this.prev=e,this.timeDelta=i}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?iP(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Xo(n,e){return new Lne(n,e)}const ZB=n=>e=>e.test(n),Ine={test:n=>n==="auto",parse:n=>n},$B=[Kc,St,Jo,vl,Vee,Bee,Ine],dp=n=>$B.find(ZB(n)),kne=[...$B,vr,ou],One=n=>kne.find(ZB(n));function Nne(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Xo(t))}function Une(n,e){const t=$x(n,e);let{transitionEnd:i={},transition:r={},...s}=t?n.makeTargetAnimatable(t,!1):{};s={...s,...i};for(const o in s){const a=tte(s[o]);Nne(n,o,a)}}function Fne(n,e,t){var i,r;const s=Object.keys(e).filter(a=>!n.hasValue(a)),o=s.length;if(o)for(let a=0;a<o;a++){const l=s[a],u=e[l];let f=null;Array.isArray(u)&&(f=u[0]),f===null&&(f=(r=(i=t[l])!==null&&i!==void 0?i:n.readValue(l))!==null&&r!==void 0?r:e[l]),f!=null&&(typeof f=="string"&&(Rne(f)||YB(f))?f=parseFloat(f):!One(f)&&ou.test(u)&&(f=XB(l,u)),n.addValue(l,Xo(f,{owner:n})),t[l]===void 0&&(t[l]=f),f!==null&&n.setBaseTarget(l,f))}}function zne(n,e){return e?(e[n]||e.default||e).from:void 0}function Bne(n,e,t){const i={};for(const r in n){const s=zne(r,e);if(s!==void 0)i[r]=s;else{const o=t.getValue(r);o&&(i[r]=o.get())}}return i}function Vne({protectedKeys:n,needsAnimating:e},t){const i=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,i}function KB(n,e,{delay:t=0,transitionOverride:i,type:r}={}){let{transition:s=n.getDefaultTransition(),transitionEnd:o,...a}=n.makeTargetAnimatable(e);const l=n.getValue("willChange");i&&(s=i);const u=[],f=r&&n.animationState&&n.animationState.getState()[r];for(const d in a){const p=n.getValue(d),m=a[d];if(!p||m===void 0||f&&Vne(f,d))continue;const g={delay:t,elapsed:0,...s};if(window.HandoffAppearAnimations&&!p.hasAnimated){const x=n.getProps()[Cte];x&&(g.elapsed=window.HandoffAppearAnimations(x,d,p,pn))}p.start(sP(d,p,m,n.shouldReduceMotion&&$c.has(d)?{type:!1}:g));const y=p.animation;z_(l)&&(l.add(d),y.then(()=>l.remove(d))),u.push(y)}return o&&Promise.all(u).then(()=>{o&&Une(n,o)}),u}function nE(n,e,t={}){const i=$x(n,e,t.custom);let{transition:r=n.getDefaultTransition()||{}}=i||{};t.transitionOverride&&(r=t.transitionOverride);const s=i?()=>Promise.all(KB(n,i,t)):()=>Promise.resolve(),o=n.variantChildren&&n.variantChildren.size?(l=0)=>{const{delayChildren:u=0,staggerChildren:f,staggerDirection:d}=r;return Hne(n,e,u+l,f,d,t)}:()=>Promise.resolve(),{when:a}=r;if(a){const[l,u]=a==="beforeChildren"?[s,o]:[o,s];return l().then(()=>u())}else return Promise.all([s(),o(t.delay)])}function Hne(n,e,t=0,i=0,r=1,s){const o=[],a=(n.variantChildren.size-1)*i,l=r===1?(u=0)=>u*i:(u=0)=>a-u*i;return Array.from(n.variantChildren).sort(Gne).forEach((u,f)=>{u.notify("AnimationStart",e),o.push(nE(u,e,{...s,delay:t+l(f)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(o)}function Gne(n,e){return n.sortNodePosition(e)}function Wne(n,e,t={}){n.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(s=>nE(n,s,t));i=Promise.all(r)}else if(typeof e=="string")i=nE(n,e,t);else{const r=typeof e=="function"?$x(n,e,t.custom):e;i=Promise.all(KB(n,r,t))}return i.then(()=>n.notify("AnimationComplete",e))}const jne=[...VC].reverse(),Xne=VC.length;function Yne(n){return e=>Promise.all(e.map(({animation:t,options:i})=>Wne(n,t,i)))}function qne(n){let e=Yne(n);const t=$ne();let i=!0;const r=(l,u)=>{const f=$x(n,u);if(f){const{transition:d,transitionEnd:p,...m}=f;l={...l,...m,...p}}return l};function s(l){e=l(n)}function o(l,u){const f=n.getProps(),d=n.getVariantContext(!0)||{},p=[],m=new Set;let g={},y=1/0;for(let v=0;v<Xne;v++){const w=jne[v],S=t[w],T=f[w]!==void 0?f[w]:d[w],b=eg(T),P=w===u?S.isActive:null;P===!1&&(y=v);let R=T===d[w]&&T!==f[w]&&b;if(R&&i&&n.manuallyAnimateOnMount&&(R=!1),S.protectedKeys={...g},!S.isActive&&P===null||!T&&!S.prevProp||jx(T)||typeof T=="boolean")continue;const D=Zne(S.prevProp,T);let C=D||w===u&&S.isActive&&!R&&b||v>y&&b;const L=Array.isArray(T)?T:[T];let F=L.reduce(r,{});P===!1&&(F={});const{prevResolvedValues:H={}}=S,G={...H,...F},W=X=>{C=!0,m.delete(X),S.needsAnimating[X]=!0};for(const X in G){const re=F[X],Q=H[X];g.hasOwnProperty(X)||(re!==Q?O_(re)&&O_(Q)?!_B(re,Q)||D?W(X):S.protectedKeys[X]=!0:re!==void 0?W(X):m.add(X):re!==void 0&&m.has(X)?W(X):S.protectedKeys[X]=!0)}S.prevProp=T,S.prevResolvedValues=F,S.isActive&&(g={...g,...F}),i&&n.blockInitialAnimation&&(C=!1),C&&!R&&p.push(...L.map(X=>({animation:X,options:{type:w,...l}})))}if(m.size){const v={};m.forEach(w=>{const S=n.getBaseTarget(w);S!==void 0&&(v[w]=S)}),p.push({animation:v})}let x=!!p.length;return i&&f.initial===!1&&!n.manuallyAnimateOnMount&&(x=!1),i=!1,x?e(p):Promise.resolve()}function a(l,u,f){var d;if(t[l].isActive===u)return Promise.resolve();(d=n.variantChildren)===null||d===void 0||d.forEach(m=>{var g;return(g=m.animationState)===null||g===void 0?void 0:g.setActive(l,u)}),t[l].isActive=u;const p=o(f,l);for(const m in t)t[m].protectedKeys={};return p}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>t}}function Zne(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!_B(e,n):!1}function zu(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function $ne(){return{animate:zu(!0),whileInView:zu(),whileHover:zu(),whileTap:zu(),whileDrag:zu(),whileFocus:zu(),exit:zu()}}class Kne extends _u{constructor(e){super(e),e.animationState||(e.animationState=qne(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),jx(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){}}let Jne=0;class Qne extends _u{constructor(){super(...arguments),this.id=Jne++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t,custom:i}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e,{custom:i??this.node.getProps().custom});t&&!e&&s.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const eie={animation:{Feature:Kne},exit:{Feature:Qne}},PL=(n,e)=>Math.abs(n-e);function tie(n,e){const t=PL(n.x,e.x),i=PL(n.y,e.y);return Math.sqrt(t**2+i**2)}class JB{constructor(e,t,{transformPagePoint:i}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const u=Iw(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,d=tie(u.offset,{x:0,y:0})>=3;if(!f&&!d)return;const{point:p}=u,{timestamp:m}=pi;this.history.push({...p,timestamp:m});const{onStart:g,onMove:y}=this.handlers;f||(g&&g(this.lastMoveEvent,u),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,u)},this.handlePointerMove=(u,f)=>{this.lastMoveEvent=u,this.lastMoveEventInfo=Lw(f,this.transformPagePoint),pn.update(this.updatePoint,!0)},this.handlePointerUp=(u,f)=>{if(this.end(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const{onEnd:d,onSessionEnd:p}=this.handlers,m=Iw(u.type==="pointercancel"?this.lastMoveEventInfo:Lw(f,this.transformPagePoint),this.history);this.startEvent&&d&&d(u,m),p&&p(u,m)},!dB(e))return;this.handlers=t,this.transformPagePoint=i;const r=qx(e),s=Lw(r,this.transformPagePoint),{point:o}=s,{timestamp:a}=pi;this.history=[{...o,timestamp:a}];const{onSessionStart:l}=t;l&&l(e,Iw(s,this.history)),this.removeListeners=Xl(Fa(window,"pointermove",this.handlePointerMove),Fa(window,"pointerup",this.handlePointerUp),Fa(window,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ra(this.updatePoint)}}function Lw(n,e){return e?{point:e(n.point)}:n}function AL(n,e){return{x:n.x-e.x,y:n.y-e.y}}function Iw({point:n},e){return{point:n,delta:AL(n,QB(e)),offset:AL(n,nie(e)),velocity:iie(e,.1)}}function nie(n){return n[0]}function QB(n){return n[n.length-1]}function iie(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,i=null;const r=QB(n);for(;t>=0&&(i=n[t],!(r.timestamp-i.timestamp>Yl(e)));)t--;if(!i)return{x:0,y:0};const s=za(r.timestamp-i.timestamp);if(s===0)return{x:0,y:0};const o={x:(r.x-i.x)/s,y:(r.y-i.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function ys(n){return n.max-n.min}function iE(n,e=0,t=.01){return Math.abs(n-e)<=t}function RL(n,e,t,i=.5){n.origin=i,n.originPoint=Fn(e.min,e.max,n.origin),n.scale=ys(t)/ys(e),(iE(n.scale,1,1e-4)||isNaN(n.scale))&&(n.scale=1),n.translate=Fn(t.min,t.max,n.origin)-n.originPoint,(iE(n.translate)||isNaN(n.translate))&&(n.translate=0)}function tm(n,e,t,i){RL(n.x,e.x,t.x,i?i.originX:void 0),RL(n.y,e.y,t.y,i?i.originY:void 0)}function DL(n,e,t){n.min=t.min+e.min,n.max=n.min+ys(e)}function rie(n,e,t){DL(n.x,e.x,t.x),DL(n.y,e.y,t.y)}function LL(n,e,t){n.min=e.min-t.min,n.max=n.min+ys(e)}function nm(n,e,t){LL(n.x,e.x,t.x),LL(n.y,e.y,t.y)}function sie(n,{min:e,max:t},i){return e!==void 0&&n<e?n=i?Fn(e,n,i.min):Math.max(n,e):t!==void 0&&n>t&&(n=i?Fn(t,n,i.max):Math.min(n,t)),n}function IL(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function oie(n,{top:e,left:t,bottom:i,right:r}){return{x:IL(n.x,t,r),y:IL(n.y,e,i)}}function kL(n,e){let t=e.min-n.min,i=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,i]=[i,t]),{min:t,max:i}}function aie(n,e){return{x:kL(n.x,e.x),y:kL(n.y,e.y)}}function lie(n,e){let t=.5;const i=ys(n),r=ys(e);return r>i?t=Zh(e.min,e.max-i,n.min):i>r&&(t=Zh(n.min,n.max-r,e.min)),Nc(0,1,t)}function uie(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const rE=.35;function cie(n=rE){return n===!1?n=0:n===!0&&(n=rE),{x:OL(n,"left","right"),y:OL(n,"top","bottom")}}function OL(n,e,t){return{min:NL(n,e),max:NL(n,t)}}function NL(n,e){return typeof n=="number"?n:n[e]||0}const UL=()=>({translate:0,scale:1,origin:0,originPoint:0}),im=()=>({x:UL(),y:UL()}),FL=()=>({min:0,max:0}),si=()=>({x:FL(),y:FL()});function Vo(n){return[n("x"),n("y")]}function e4({top:n,left:e,right:t,bottom:i}){return{x:{min:e,max:t},y:{min:n,max:i}}}function fie({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function hie(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),i=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:i.y,right:i.x}}function kw(n){return n===void 0||n===1}function sE({scale:n,scaleX:e,scaleY:t}){return!kw(n)||!kw(e)||!kw(t)}function Yu(n){return sE(n)||t4(n)||n.z||n.rotate||n.rotateX||n.rotateY}function t4(n){return zL(n.x)||zL(n.y)}function zL(n){return n&&n!=="0%"}function B_(n,e,t){const i=n-t,r=e*i;return t+r}function BL(n,e,t,i,r){return r!==void 0&&(n=B_(n,r,i)),B_(n,t,i)+e}function oE(n,e=0,t=1,i,r){n.min=BL(n.min,e,t,i,r),n.max=BL(n.max,e,t,i,r)}function n4(n,{x:e,y:t}){oE(n.x,e.translate,e.scale,e.originPoint),oE(n.y,t.translate,t.scale,t.originPoint)}function die(n,e,t,i=!1){const r=t.length;if(!r)return;e.x=e.y=1;let s,o;for(let a=0;a<r;a++){s=t[a],o=s.projectionDelta;const l=s.instance;l&&l.style&&l.style.display==="contents"||(i&&s.options.layoutScroll&&s.scroll&&s!==s.root&&gh(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,n4(n,o)),i&&Yu(s.latestValues)&&gh(n,s.latestValues))}e.x=VL(e.x),e.y=VL(e.y)}function VL(n){return Number.isInteger(n)||n>1.0000000000001||n<.999999999999?n:1}function Ml(n,e){n.min=n.min+e,n.max=n.max+e}function HL(n,e,[t,i,r]){const s=e[r]!==void 0?e[r]:.5,o=Fn(n.min,n.max,s);oE(n,e[t],e[i],o,e.scale)}const pie=["x","scaleX","originX"],mie=["y","scaleY","originY"];function gh(n,e){HL(n.x,e,pie),HL(n.y,e,mie)}function i4(n,e){return e4(hie(n.getBoundingClientRect(),e))}function gie(n,e,t){const i=i4(n,t),{scroll:r}=e;return r&&(Ml(i.x,r.offset.x),Ml(i.y,r.offset.y)),i}const vie=new WeakMap;class yie{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=si(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=l=>{this.stopAnimation(),t&&this.snapToCursor(qx(l,"page").point)},s=(l,u)=>{const{drag:f,dragPropagation:d,onDragStart:p}=this.getProps();if(f&&!d&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=mB(f),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Vo(g=>{let y=this.getAxisMotionValue(g).get()||0;if(Jo.test(y)){const{projection:x}=this.visualElement;if(x&&x.layout){const v=x.layout.layoutBox[g];v&&(y=ys(v)*(parseFloat(y)/100))}}this.originPoint[g]=y}),p&&pn.update(()=>p(l,u),!1,!0);const{animationState:m}=this.visualElement;m&&m.setActive("whileDrag",!0)},o=(l,u)=>{const{dragPropagation:f,dragDirectionLock:d,onDirectionLock:p,onDrag:m}=this.getProps();if(!f&&!this.openGlobalLock)return;const{offset:g}=u;if(d&&this.currentDirection===null){this.currentDirection=_ie(g),this.currentDirection!==null&&p&&p(this.currentDirection);return}this.updateAxis("x",u.point,g),this.updateAxis("y",u.point,g),this.visualElement.render(),m&&m(l,u)},a=(l,u)=>this.stop(l,u);this.panSession=new JB(e,{onSessionStart:r,onStart:s,onMove:o,onSessionEnd:a},{transformPagePoint:this.visualElement.getTransformPagePoint()})}stop(e,t){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=t;this.startAnimation(r);const{onDragEnd:s}=this.getProps();s&&pn.update(()=>s(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,i){const{drag:r}=this.getProps();if(!i||!ey(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(o=sie(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),{layout:i}=this.visualElement.projection||{},r=this.constraints;e&&ph(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=oie(i.layoutBox,e):this.constraints=!1,this.elastic=cie(t),r!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Vo(s=>{this.getAxisMotionValue(s)&&(this.constraints[s]=uie(i.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!ph(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=gie(i,r.root,this.visualElement.getTransformPagePoint());let o=aie(r.layout.layoutBox,s);if(t){const a=t(fie(o));this.hasMutatedConstraints=!!a,a&&(o=e4(a))}return o}startAnimation(e){const{drag:t,dragMomentum:i,dragElastic:r,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=Vo(f=>{if(!ey(f,t,this.currentDirection))return;let d=l&&l[f]||{};o&&(d={min:0,max:0});const p=r?200:1e6,m=r?40:1e7,g={type:"inertia",velocity:i?e[f]:0,bounceStiffness:p,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(f,g)});return Promise.all(u).then(a)}startAxisValueAnimation(e,t){const i=this.getAxisMotionValue(e);return i.start(sP(e,i,0,t))}stopAnimation(){Vo(e=>this.getAxisMotionValue(e).stop())}getAxisMotionValue(e){const t="_drag"+e.toUpperCase(),i=this.visualElement.getProps(),r=i[t];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){Vo(t=>{const{drag:i}=this.getProps();if(!ey(t,i,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(t);if(r&&r.layout){const{min:o,max:a}=r.layout.layoutBox[t];s.set(e[t]-Fn(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:i}=this.visualElement;if(!ph(t)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Vo(o=>{const a=this.getAxisMotionValue(o);if(a){const l=a.get();r[o]=lie({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Vo(o=>{if(!ey(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];a.set(Fn(l,u,r[o]))})}addListeners(){if(!this.visualElement.current)return;vie.set(this.visualElement,this);const e=this.visualElement.current,t=Fa(e,"pointerdown",l=>{const{drag:u,dragListener:f=!0}=this.getProps();u&&f&&this.start(l)}),i=()=>{const{dragConstraints:l}=this.getProps();ph(l)&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,s=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),i();const o=ka(window,"resize",()=>this.scalePositionWithinConstraints()),a=r.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(Vo(f=>{const d=this.getAxisMotionValue(f);d&&(this.originPoint[f]+=l[f].translate,d.set(d.get()+l[f].translate))}),this.visualElement.render())});return()=>{o(),t(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:o=rE,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:i,dragPropagation:r,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function ey(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function _ie(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class xie extends _u{constructor(e){super(e),this.removeGroupControls=gi,this.removeListeners=gi,this.controls=new yie(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||gi}unmount(){this.removeGroupControls(),this.removeListeners()}}const GL=n=>(e,t)=>{n&&pn.update(()=>n(e,t))};class Sie extends _u{constructor(){super(...arguments),this.removePointerDownListener=gi}onPointerDown(e){this.session=new JB(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint()})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:GL(e),onStart:GL(t),onMove:i,onEnd:(s,o)=>{delete this.session,r&&pn.update(()=>r(s,o))}}}mount(){this.removePointerDownListener=Fa(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function wie(){const n=O.useContext(Gx);if(n===null)return[!0,null];const{isPresent:e,onExitComplete:t,register:i}=n,r=O.useId();return O.useEffect(()=>i(r),[]),!e&&t?[!1,()=>t&&t(r)]:[!0]}const Hy={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function WL(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const pp={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(St.test(n))n=parseFloat(n);else return n;const t=WL(n,e.target.x),i=WL(n,e.target.y);return`${t}% ${i}%`}},Mie={correct:(n,{treeScale:e,projectionDelta:t})=>{const i=n,r=ou.parse(n);if(r.length>5)return i;const s=ou.createTransformer(n),o=typeof r[0]!="number"?1:0,a=t.x.scale*e.x,l=t.y.scale*e.y;r[0+o]/=a,r[1+o]/=l;const u=Fn(a,l,.5);return typeof r[2+o]=="number"&&(r[2+o]/=u),typeof r[3+o]=="number"&&(r[3+o]/=u),s(r)}};class Tie extends Jl.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i,layoutId:r}=this.props,{projection:s}=e;Iee(Eie),s&&(t.group&&t.group.add(s),i&&i.register&&r&&i.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Hy.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:i,drag:r,isPresent:s}=this.props,o=i.projection;return o&&(o.isPresent=s,r||e.layoutDependency!==t||t===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||pn.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function r4(n){const[e,t]=wie(),i=O.useContext(GC);return Jl.createElement(Tie,{...n,layoutGroup:i,switchLayoutGroup:O.useContext(Qz),isPresent:e,safeToRemove:t})}const Eie={borderRadius:{...pp,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:pp,borderTopRightRadius:pp,borderBottomLeftRadius:pp,borderBottomRightRadius:pp,boxShadow:Mie},s4=["TopLeft","TopRight","BottomLeft","BottomRight"],bie=s4.length,jL=n=>typeof n=="string"?parseFloat(n):n,XL=n=>typeof n=="number"||St.test(n);function Cie(n,e,t,i,r,s){r?(n.opacity=Fn(0,t.opacity!==void 0?t.opacity:1,Pie(i)),n.opacityExit=Fn(e.opacity!==void 0?e.opacity:1,0,Aie(i))):s&&(n.opacity=Fn(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,i));for(let o=0;o<bie;o++){const a=`border${s4[o]}Radius`;let l=YL(e,a),u=YL(t,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||XL(l)===XL(u)?(n[a]=Math.max(Fn(jL(l),jL(u),i),0),(Jo.test(u)||Jo.test(l))&&(n[a]+="%")):n[a]=u}(e.rotate||t.rotate)&&(n.rotate=Fn(e.rotate||0,t.rotate||0,i))}function YL(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const Pie=o4(0,.5,QC),Aie=o4(.5,.95,gi);function o4(n,e,t){return i=>i<n?0:i>e?1:t(Zh(n,e,i))}function qL(n,e){n.min=e.min,n.max=e.max}function ks(n,e){qL(n.x,e.x),qL(n.y,e.y)}function ZL(n,e,t,i,r){return n-=e,n=B_(n,1/t,i),r!==void 0&&(n=B_(n,1/r,i)),n}function Rie(n,e=0,t=1,i=.5,r,s=n,o=n){if(Jo.test(e)&&(e=parseFloat(e),e=Fn(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Fn(s.min,s.max,i);n===s&&(a-=e),n.min=ZL(n.min,e,t,a,r),n.max=ZL(n.max,e,t,a,r)}function $L(n,e,[t,i,r],s,o){Rie(n,e[t],e[i],e[r],e.scale,s,o)}const Die=["x","scaleX","originX"],Lie=["y","scaleY","originY"];function KL(n,e,t,i){$L(n.x,e,Die,t?t.x:void 0,i?i.x:void 0),$L(n.y,e,Lie,t?t.y:void 0,i?i.y:void 0)}function JL(n){return n.translate===0&&n.scale===1}function a4(n){return JL(n.x)&&JL(n.y)}function aE(n,e){return n.x.min===e.x.min&&n.x.max===e.x.max&&n.y.min===e.y.min&&n.y.max===e.y.max}function QL(n){return ys(n.x)/ys(n.y)}class Iie{constructor(){this.members=[]}add(e){oP(this.members,e),e.scheduleRender()}remove(e){if(aP(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(r=>e===r);if(t===0)return!1;let i;for(let r=t;r>=0;r--){const s=this.members[r];if(s.isPresent!==!1){i=s;break}}return i?(this.promote(i),!0):!1}promote(e,t){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,t&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:i}=e;t.onExitComplete&&t.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function eI(n,e,t){let i="";const r=n.x.translate/e.x,s=n.y.translate/e.y;if((r||s)&&(i=`translate3d(${r}px, ${s}px, 0) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),t){const{rotate:l,rotateX:u,rotateY:f}=t;l&&(i+=`rotate(${l}deg) `),u&&(i+=`rotateX(${u}deg) `),f&&(i+=`rotateY(${f}deg) `)}const o=n.x.scale*e.x,a=n.y.scale*e.y;return(o!==1||a!==1)&&(i+=`scale(${o}, ${a})`),i||"none"}const kie=(n,e)=>n.depth-e.depth;class Oie{constructor(){this.children=[],this.isDirty=!1}add(e){oP(this.children,e),this.isDirty=!0}remove(e){aP(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(kie),this.isDirty=!1,this.children.forEach(e)}}function Nie(n,e){const t=performance.now(),i=({timestamp:r})=>{const s=r-t;s>=e&&(ra(i),n(s-e))};return pn.read(i,!0),()=>ra(i)}function Uie(n){window.MotionDebug&&window.MotionDebug.record(n)}function Fie(n){return n instanceof SVGElement&&n.tagName!=="svg"}function zie(n,e,t){const i=Zr(n)?n:Xo(n);return i.start(sP("",i,e,t)),i.animation}const tI=["","X","Y","Z"],nI=1e3;let Bie=0;const qu={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function l4({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(o={},a=e==null?void 0:e()){this.id=Bie++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{qu.totalNodes=qu.resolvedTargetDeltas=qu.recalculatedProjection=0,this.nodes.forEach(Gie),this.nodes.forEach(Yie),this.nodes.forEach(qie),this.nodes.forEach(Wie),Uie(qu)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new Oie)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new lP),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Fie(o),this.instance=o;const{layoutId:l,layout:u,visualElement:f}=this.options;if(f&&!f.current&&f.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(u||l)&&(this.isLayoutDirty=!0),n){let d;const p=()=>this.root.updateBlockedByResize=!1;n(o,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=Nie(p,250),Hy.hasAnimatedSinceResize&&(Hy.hasAnimatedSinceResize=!1,this.nodes.forEach(rI))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&f&&(l||u)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:p,hasRelativeTargetChanged:m,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||f.getDefaultTransition()||Qie,{onLayoutAnimationStart:x,onLayoutAnimationComplete:v}=f.getProps(),w=!this.targetLayout||!aE(this.targetLayout,g)||m,S=!p&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||S||p&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,S);const T={...qB(y,"layout"),onPlay:x,onComplete:v};(f.shouldReduceMotion||this.options.layoutRoot)&&(T.delay=0,T.type=!1),this.startAnimation(T)}else p||rI(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ra(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Zie),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const d=this.path[f];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(iI);return}this.isUpdating&&(this.isUpdating=!1,this.nodes.forEach(Xie),this.nodes.forEach(Vie),this.nodes.forEach(Hie),this.clearAllSnapshots(),Rh.update.process(pi),Rh.preRender.process(pi),Rh.render.process(pi))}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(jie),this.sharedNodes.forEach($ie)}scheduleUpdateProjection(){pn.preRender(this.updateProjection,!1,!0)}scheduleCheckAfterUnmount(){pn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=si(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:i(this.instance),offset:t(this.instance)})}resetTransform(){if(!r)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!a4(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,f=u!==this.prevTransformTemplateValue;o&&(a||Yu(this.latestValues)||f)&&(r(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),ere(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return si();const a=o.measureViewportBox(),{scroll:l}=this.root;return l&&(Ml(a.x,l.offset.x),Ml(a.y,l.offset.y)),a}removeElementScroll(o){const a=si();ks(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l],{scroll:f,options:d}=u;if(u!==this.root&&f&&d.layoutScroll){if(f.isRoot){ks(a,o);const{scroll:p}=this.root;p&&(Ml(a.x,-p.offset.x),Ml(a.y,-p.offset.y))}Ml(a.x,f.offset.x),Ml(a.y,f.offset.y)}}return a}applyTransform(o,a=!1){const l=si();ks(l,o);for(let u=0;u<this.path.length;u++){const f=this.path[u];!a&&f.options.layoutScroll&&f.scroll&&f!==f.root&&gh(l,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),Yu(f.latestValues)&&gh(l,f.latestValues)}return Yu(this.latestValues)&&gh(l,this.latestValues),l}removeTransform(o){const a=si();ks(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!Yu(u.latestValues))continue;sE(u.latestValues)&&u.updateSnapshot();const f=si(),d=u.measurePageBox();ks(f,d),KL(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,f)}return Yu(this.latestValues)&&KL(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==pi.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:d,layoutId:p}=this.options;if(!(!this.layout||!(d||p))){if(this.resolvedRelativeTargetAt=pi.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=si(),this.relativeTargetOrigin=si(),nm(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),ks(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=si(),this.targetWithTransforms=si()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),rie(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ks(this.target,this.layout.layoutBox),n4(this.target,this.targetDelta)):ks(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=si(),this.relativeTargetOrigin=si(),nm(this.relativeTargetOrigin,this.target,m.target),ks(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}qu.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||sE(this.parent.latestValues)||t4(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===pi.timestamp&&(u=!1),u)return;const{layout:f,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||d))return;ks(this.layoutCorrected,this.layout.layoutBox),die(this.layoutCorrected,this.treeScale,this.path,l);const{target:p}=a;if(!p)return;this.projectionDelta||(this.projectionDelta=im(),this.projectionDeltaWithTransform=im());const m=this.treeScale.x,g=this.treeScale.y,y=this.projectionTransform;tm(this.projectionDelta,this.layoutCorrected,p,this.latestValues),this.projectionTransform=eI(this.projectionDelta,this.treeScale),(this.projectionTransform!==y||this.treeScale.x!==m||this.treeScale.y!==g)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p)),qu.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const l=this.snapshot,u=l?l.latestValues:{},f={...this.latestValues},d=im();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=si(),m=l?l.source:void 0,g=this.layout?this.layout.source:void 0,y=m!==g,x=this.getStack(),v=!x||x.members.length<=1,w=!!(y&&!v&&this.options.crossfade===!0&&!this.path.some(Jie));this.animationProgress=0;let S;this.mixTargetDelta=T=>{const b=T/1e3;sI(d.x,o.x,b),sI(d.y,o.y,b),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(nm(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Kie(this.relativeTarget,this.relativeTargetOrigin,p,b),S&&aE(this.relativeTarget,S)&&(this.isProjectionDirty=!1),S||(S=si()),ks(S,this.relativeTarget)),y&&(this.animationValues=f,Cie(f,u,this.latestValues,b,w,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=b},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ra(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=pn.update(()=>{Hy.hasAnimatedSinceResize=!0,this.currentAnimation=zie(0,nI,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(nI),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:f}=o;if(!(!a||!l||!u)){if(this!==o&&this.layout&&u&&u4(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||si();const d=ys(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+d;const p=ys(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+p}ks(a,l),gh(a,f),tm(this.projectionDeltaWithTransform,this.layoutCorrected,a,f)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new Iie),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(a=!0),!a)return;const u={};for(let f=0;f<tI.length;f++){const d="rotate"+tI[f];l[d]&&(u[d]=l[d],o.setStaticValue(d,0))}o.render();for(const f in u)o.setStaticValue(f,u[f]);o.scheduleRender()}getProjectionStyles(o={}){var a,l;const u={};if(!this.instance||this.isSVG)return u;if(this.isVisible)u.visibility="";else return{visibility:"hidden"};const f=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=Vy(o.pointerEvents)||"",u.transform=f?f(this.latestValues,""):"none",u;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const y={};return this.options.layoutId&&(y.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,y.pointerEvents=Vy(o.pointerEvents)||""),this.hasProjected&&!Yu(this.latestValues)&&(y.transform=f?f({},""):"none",this.hasProjected=!1),y}const p=d.animationValues||d.latestValues;this.applyTransformsToTarget(),u.transform=eI(this.projectionDeltaWithTransform,this.treeScale,p),f&&(u.transform=f(p,u.transform));const{x:m,y:g}=this.projectionDelta;u.transformOrigin=`${m.origin*100}% ${g.origin*100}% 0`,d.animationValues?u.opacity=d===this?(l=(a=p.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:u.opacity=d===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const y in I_){if(p[y]===void 0)continue;const{correct:x,applyTo:v}=I_[y],w=u.transform==="none"?p[y]:x(p[y],d);if(v){const S=v.length;for(let T=0;T<S;T++)u[v[T]]=w}else u[y]=w}return this.options.layoutId&&(u.pointerEvents=d===this?Vy(o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(iI),this.root.sharedNodes.clear()}}}function Vie(n){n.updateLayout()}function Hie(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=n.layout,{animationType:s}=n.options,o=t.source!==n.layout.source;s==="size"?Vo(d=>{const p=o?t.measuredBox[d]:t.layoutBox[d],m=ys(p);p.min=i[d].min,p.max=p.min+m}):u4(s,t.layoutBox,i)&&Vo(d=>{const p=o?t.measuredBox[d]:t.layoutBox[d],m=ys(i[d]);p.max=p.min+m,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[d].max=n.relativeTarget[d].min+m)});const a=im();tm(a,i,t.layoutBox);const l=im();o?tm(l,n.applyTransform(r,!0),t.measuredBox):tm(l,i,t.layoutBox);const u=!a4(a);let f=!1;if(!n.resumeFrom){const d=n.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:p,layout:m}=d;if(p&&m){const g=si();nm(g,t.layoutBox,p.layoutBox);const y=si();nm(y,i,m.layoutBox),aE(g,y)||(f=!0),d.options.layoutRoot&&(n.relativeTarget=y,n.relativeTargetOrigin=g,n.relativeParent=d)}}}n.notifyListeners("didUpdate",{layout:i,snapshot:t,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeTargetChanged:f})}else if(n.isLead()){const{onExitComplete:i}=n.options;i&&i()}n.options.transition=void 0}function Gie(n){qu.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function Wie(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function jie(n){n.clearSnapshot()}function iI(n){n.clearMeasurements()}function Xie(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function rI(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0}function Yie(n){n.resolveTargetDelta()}function qie(n){n.calcProjection()}function Zie(n){n.resetRotation()}function $ie(n){n.removeLeadSnapshot()}function sI(n,e,t){n.translate=Fn(e.translate,0,t),n.scale=Fn(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function oI(n,e,t,i){n.min=Fn(e.min,t.min,i),n.max=Fn(e.max,t.max,i)}function Kie(n,e,t,i){oI(n.x,e.x,t.x,i),oI(n.y,e.y,t.y,i)}function Jie(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const Qie={duration:.45,ease:[.4,0,.1,1]};function aI(n){n.min=Math.round(n.min),n.max=Math.round(n.max)}function ere(n){aI(n.x),aI(n.y)}function u4(n,e,t){return n==="position"||n==="preserve-aspect"&&!iE(QL(e),QL(t),.2)}const tre=l4({attachResizeListener:(n,e)=>ka(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Ow={current:void 0},c4=l4({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!Ow.current){const n=new tre({});n.mount(window),n.setOptions({layoutScroll:!0}),Ow.current=n}return Ow.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),nre={pan:{Feature:Sie},drag:{Feature:xie,ProjectionNode:c4,MeasureLayout:r4}},ire=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function rre(n){const e=ire.exec(n);if(!e)return[,];const[,t,i]=e;return[t,i]}function lE(n,e,t=1){const[i,r]=rre(n);if(!i)return;const s=window.getComputedStyle(e).getPropertyValue(i);return s?s.trim():ZT(r)?lE(r,e,t+1):r}function sre(n,{...e},t){const i=n.current;if(!(i instanceof Element))return{target:e,transitionEnd:t};t&&(t={...t}),n.values.forEach(r=>{const s=r.get();if(!ZT(s))return;const o=lE(s,i);o&&r.set(o)});for(const r in e){const s=e[r];if(!ZT(s))continue;const o=lE(s,i);o&&(e[r]=o,t||(t={}),t[r]===void 0&&(t[r]=s))}return{target:e,transitionEnd:t}}const ore=new Set(["width","height","top","left","right","bottom","x","y"]),f4=n=>ore.has(n),are=n=>Object.keys(n).some(f4),lI=n=>n===Kc||n===St,uI=(n,e)=>parseFloat(n.split(", ")[e]),cI=(n,e)=>(t,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/);if(r)return uI(r[1],e);{const s=i.match(/^matrix\((.+)\)$/);return s?uI(s[1],n):0}},lre=new Set(["x","y","z"]),ure=Fg.filter(n=>!lre.has(n));function cre(n){const e=[];return ure.forEach(t=>{const i=n.getValue(t);i!==void 0&&(e.push([t,i.get()]),i.set(t.startsWith("scale")?1:0))}),e.length&&n.render(),e}const fI={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:cI(4,13),y:cI(5,14)},fre=(n,e,t)=>{const i=e.measureViewportBox(),r=e.current,s=getComputedStyle(r),{display:o}=s,a={};o==="none"&&e.setStaticValue("display",n.display||"block"),t.forEach(u=>{a[u]=fI[u](i,s)}),e.render();const l=e.measureViewportBox();return t.forEach(u=>{const f=e.getValue(u);f&&f.jump(a[u]),n[u]=fI[u](l,s)}),n},hre=(n,e,t={},i={})=>{e={...e},i={...i};const r=Object.keys(e).filter(f4);let s=[],o=!1;const a=[];if(r.forEach(l=>{const u=n.getValue(l);if(!n.hasValue(l))return;let f=t[l],d=dp(f);const p=e[l];let m;if(O_(p)){const g=p.length,y=p[0]===null?1:0;f=p[y],d=dp(f);for(let x=y;x<g&&p[x]!==null;x++)m?Kx(dp(p[x])===m):m=dp(p[x])}else m=dp(p);if(d!==m)if(lI(d)&&lI(m)){const g=u.get();typeof g=="string"&&u.set(parseFloat(g)),typeof p=="string"?e[l]=parseFloat(p):Array.isArray(p)&&m===St&&(e[l]=p.map(parseFloat))}else d!=null&&d.transform&&(m!=null&&m.transform)&&(f===0||p===0)?f===0?u.set(m.transform(f)):e[l]=d.transform(p):(o||(s=cre(n),o=!0),a.push(l),i[l]=i[l]!==void 0?i[l]:e[l],u.jump(p))}),a.length){const l=a.indexOf("height")>=0?window.pageYOffset:null,u=fre(e,n,a);return s.length&&s.forEach(([f,d])=>{n.getValue(f).set(d)}),n.render(),Wx&&l!==null&&window.scrollTo({top:l}),{target:u,transitionEnd:i}}else return{target:e,transitionEnd:i}};function dre(n,e,t,i){return are(e)?hre(n,e,t,i):{target:e,transitionEnd:i}}const pre=(n,e,t,i)=>{const r=sre(n,e,i);return e=r.target,i=r.transitionEnd,dre(n,e,t,i)},uE={current:null},h4={current:!1};function mre(){if(h4.current=!0,!!Wx)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>uE.current=n.matches;n.addListener(e),e()}else uE.current=!1}function gre(n,e,t){const{willChange:i}=e;for(const r in e){const s=e[r],o=t[r];if(Zr(s))n.addValue(r,s),z_(i)&&i.add(r);else if(Zr(o))n.addValue(r,Xo(s,{owner:n})),z_(i)&&i.remove(r);else if(o!==s)if(n.hasValue(r)){const a=n.getValue(r);!a.hasAnimated&&a.set(s)}else{const a=n.getStaticValue(r);n.addValue(r,Xo(a!==void 0?a:s,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const hI=new WeakMap,d4=Object.keys(tg),vre=d4.length,dI=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],yre=HC.length;class _re{constructor({parent:e,props:t,presenceContext:i,reducedMotionConfig:r,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>pn.render(this.render,!1,!0);const{latestValues:a,renderState:l}=s;this.latestValues=a,this.baseTarget={...a},this.initialValues=t.initial?{...a}:{},this.renderState=l,this.parent=e,this.props=t,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=o,this.isControllingVariants=Xx(t),this.isVariantNode=Jz(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...f}=this.scrapeMotionValuesFromProps(t,{});for(const d in f){const p=f[d];a[d]!==void 0&&Zr(p)&&(p.set(a[d],!1),z_(u)&&u.add(d))}}scrapeMotionValuesFromProps(e,t){return{}}mount(e){this.current=e,hI.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,i)=>this.bindToMotionValue(i,t)),h4.current||mre(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:uE.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){hI.delete(this.current),this.projection&&this.projection.unmount(),ra(this.notifyUpdate),ra(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,t){const i=$c.has(e),r=t.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&pn.update(this.notifyUpdate,!1,!0),i&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{r(),s()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...t},i,r,s){let o,a;for(let l=0;l<vre;l++){const u=d4[l],{isEnabled:f,Feature:d,ProjectionNode:p,MeasureLayout:m}=tg[u];p&&(o=p),f(t)&&(!this.features[u]&&d&&(this.features[u]=new d(this)),m&&(a=m))}if(!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:l,layout:u,drag:f,dragConstraints:d,layoutScroll:p,layoutRoot:m}=t;this.projection.setOptions({layoutId:l,layout:u,alwaysMeasureLayout:!!f||d&&ph(d),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:s,layoutScroll:p,layoutRoot:m})}return a}updateFeatures(){for(const e in this.features){const t=this.features[e];t.isMounted?t.update(this.props,this.prevProps):(t.mount(),t.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):si()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}makeTargetAnimatable(e,t=!0){return this.makeTargetAnimatableFromInstance(e,this.props,t)}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let i=0;i<dI.length;i++){const r=dI[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const s=e["on"+r];s&&(this.propEventSubscriptions[r]=this.on(r,s))}this.prevMotionValues=gre(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const i=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(i.initial=this.props.initial),i}const t={};for(let i=0;i<yre;i++){const r=HC[i],s=this.props[r];(eg(s)||s===!1)&&(t[r]=s)}return t}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&t!==void 0&&(i=Xo(t,{owner:this}),this.addValue(e,i)),i}readValue(e){return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:i}=this.props,r=typeof i=="string"||typeof i=="object"?(t=KC(this.props,i))===null||t===void 0?void 0:t[e]:void 0;if(i&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Zr(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new lP),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class p4 extends _re{sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:i}){delete t[e],delete i[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:t,...i},{transformValues:r},s){let o=Bne(i,e||{},this);if(r&&(t&&(t=r(t)),i&&(i=r(i)),o&&(o=r(o))),s){Fne(this,i,o);const a=pre(this,i,o,t);t=a.transitionEnd,i=a.target}return{transition:e,transitionEnd:t,...i}}}function xre(n){return window.getComputedStyle(n)}class Sre extends p4{readValueFromInstance(e,t){if($c.has(t)){const i=rP(t);return i&&i.default||0}else{const i=xre(e),r=(nB(t)?i.getPropertyValue(t):i[t])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:t}){return i4(e,t)}build(e,t,i,r){jC(e,t,i,r.transformTemplate)}scrapeMotionValuesFromProps(e,t){return $C(e,t)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Zr(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}renderInstance(e,t,i,r){lB(e,t,i,r)}}class wre extends p4{constructor(){super(...arguments),this.isSVGTag=!1}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if($c.has(t)){const i=rP(t);return i&&i.default||0}return t=uB.has(t)?t:ZC(t),e.getAttribute(t)}measureInstanceViewportBox(){return si()}scrapeMotionValuesFromProps(e,t){return fB(e,t)}build(e,t,i,r){YC(e,t,i,this.isSVGTag,r.transformTemplate)}renderInstance(e,t,i,r){cB(e,t,i,r)}mount(e){this.isSVGTag=qC(e.tagName),super.mount(e)}}const Mre=(n,e)=>WC(n)?new wre(e,{enableHardwareAcceleration:!1}):new Sre(e,{enableHardwareAcceleration:!0}),Tre={layout:{ProjectionNode:c4,MeasureLayout:r4}},Ere={...eie,...Mte,...nre,...Tre},bo=Dee((n,e)=>ote(n,e,Ere,Mre));function m4(){const n=O.useRef(!1);return Qm(()=>(n.current=!0,()=>{n.current=!1}),[]),n}function bre(){const n=m4(),[e,t]=O.useState(0),i=O.useCallback(()=>{n.current&&t(e+1)},[e]);return[O.useCallback(()=>pn.postRender(i),[i]),e]}class Cre extends O.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=t.offsetHeight||0,i.width=t.offsetWidth||0,i.top=t.offsetTop,i.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Pre({children:n,isPresent:e}){const t=O.useId(),i=O.useRef(null),r=O.useRef({width:0,height:0,top:0,left:0});return O.useInsertionEffect(()=>{const{width:s,height:o,top:a,left:l}=r.current;if(e||!i.current||!s||!o)return;i.current.dataset.motionPopId=t;const u=document.createElement("style");return document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${s}px !important;
            height: ${o}px !important;
            top: ${a}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[e]),O.createElement(Cre,{isPresent:e,childRef:i,sizeRef:r},O.cloneElement(n,{ref:i}))}const Nw=({children:n,initial:e,isPresent:t,onExitComplete:i,custom:r,presenceAffectsLayout:s,mode:o})=>{const a=JC(Are),l=O.useId(),u=O.useMemo(()=>({id:l,initial:e,isPresent:t,custom:r,onExitComplete:f=>{a.set(f,!0);for(const d of a.values())if(!d)return;i&&i()},register:f=>(a.set(f,!1),()=>a.delete(f))}),s?void 0:[t]);return O.useMemo(()=>{a.forEach((f,d)=>a.set(d,!1))},[t]),O.useEffect(()=>{!t&&!a.size&&i&&i()},[t]),o==="popLayout"&&(n=O.createElement(Pre,{isPresent:t},n)),O.createElement(Gx.Provider,{value:u},n)};function Are(){return new Map}function Rre(n){return O.useEffect(()=>()=>n(),[])}const Xf=n=>n.key||"";function Dre(n,e){n.forEach(t=>{const i=Xf(t);e.set(i,t)})}function Lre(n){const e=[];return O.Children.forEach(n,t=>{O.isValidElement(t)&&e.push(t)}),e}const Ire=({children:n,custom:e,initial:t=!0,onExitComplete:i,exitBeforeEnter:r,presenceAffectsLayout:s=!0,mode:o="sync"})=>{const a=O.useContext(GC).forceRender||bre()[0],l=m4(),u=Lre(n);let f=u;const d=O.useRef(new Map).current,p=O.useRef(f),m=O.useRef(new Map).current,g=O.useRef(!0);if(Qm(()=>{g.current=!1,Dre(u,m),p.current=f}),Rre(()=>{g.current=!0,m.clear(),d.clear()}),g.current)return O.createElement(O.Fragment,null,f.map(w=>O.createElement(Nw,{key:Xf(w),isPresent:!0,initial:t?void 0:!1,presenceAffectsLayout:s,mode:o},w)));f=[...f];const y=p.current.map(Xf),x=u.map(Xf),v=y.length;for(let w=0;w<v;w++){const S=y[w];x.indexOf(S)===-1&&!d.has(S)&&d.set(S,void 0)}return o==="wait"&&d.size&&(f=[]),d.forEach((w,S)=>{if(x.indexOf(S)!==-1)return;const T=m.get(S);if(!T)return;const b=y.indexOf(S);let P=w;if(!P){const R=()=>{m.delete(S),d.delete(S);const D=p.current.findIndex(C=>C.key===S);if(p.current.splice(D,1),!d.size){if(p.current=u,l.current===!1)return;a(),i&&i()}};P=O.createElement(Nw,{key:Xf(T),isPresent:!1,onExitComplete:R,custom:e,presenceAffectsLayout:s,mode:o},T),d.set(S,P)}f.splice(b,0,P)}),f=f.map(w=>{const S=w.key;return d.has(S)?w:O.createElement(Nw,{key:Xf(w),isPresent:!0,presenceAffectsLayout:s,mode:o},w)}),O.createElement(O.Fragment,null,d.size?f:f.map(w=>O.cloneElement(w)))};function kre(n,e,t){O.useInsertionEffect(()=>n.on(e,t),[n,e,t])}function g4(n,e,t){var i;if(typeof n=="string"){let r=document;e&&(Kx(!!e.current),r=e.current),t?((i=t[n])!==null&&i!==void 0||(t[n]=r.querySelectorAll(n)),n=t[n]):n=r.querySelectorAll(n)}else n instanceof Element&&(n=[n]);return Array.from(n||[])}const Gy=new WeakMap;let yl;function Ore(n,e){if(e){const{inlineSize:t,blockSize:i}=e[0];return{width:t,height:i}}else return n instanceof SVGElement&&"getBBox"in n?n.getBBox():{width:n.offsetWidth,height:n.offsetHeight}}function Nre({target:n,contentRect:e,borderBoxSize:t}){var i;(i=Gy.get(n))===null||i===void 0||i.forEach(r=>{r({target:n,contentSize:e,get size(){return Ore(n,t)}})})}function Ure(n){n.forEach(Nre)}function Fre(){typeof ResizeObserver>"u"||(yl=new ResizeObserver(Ure))}function zre(n,e){yl||Fre();const t=g4(n);return t.forEach(i=>{let r=Gy.get(i);r||(r=new Set,Gy.set(i,r)),r.add(e),yl==null||yl.observe(i)}),()=>{t.forEach(i=>{const r=Gy.get(i);r==null||r.delete(e),r!=null&&r.size||yl==null||yl.unobserve(i)})}}const Wy=new Set;let rm;function Bre(){rm=()=>{const n={width:window.innerWidth,height:window.innerHeight},e={target:window,size:n,contentSize:n};Wy.forEach(t=>t(e))},window.addEventListener("resize",rm)}function Vre(n){return Wy.add(n),rm||Bre(),()=>{Wy.delete(n),!Wy.size&&rm&&(rm=void 0)}}function Hre(n,e){return typeof n=="function"?Vre(n):zre(n,e)}const Gre=50,pI=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),Wre=()=>({time:0,x:pI(),y:pI()}),jre={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function mI(n,e,t,i){const r=t[e],{length:s,position:o}=jre[e],a=r.current,l=t.time;r.current=n["scroll"+o],r.scrollLength=n["scroll"+s]-n["client"+s],r.offset.length=0,r.offset[0]=0,r.offset[1]=r.scrollLength,r.progress=Zh(0,r.scrollLength,r.current);const u=i-l;r.velocity=u>Gre?0:iP(r.current-a,u)}function Xre(n,e,t){mI(n,"x",e,t),mI(n,"y",e,t),e.time=t}function Yre(n,e){let t={x:0,y:0},i=n;for(;i&&i!==e;)if(i instanceof HTMLElement)t.x+=i.offsetLeft,t.y+=i.offsetTop,i=i.offsetParent;else if(i instanceof SVGGraphicsElement&&"getBBox"in i){const{top:r,left:s}=i.getBBox();for(t.x+=s,t.y+=r;i&&i.tagName!=="svg";)i=i.parentNode}return t}const qre={Enter:[[0,1],[1,1]],Exit:[[0,0],[1,0]],Any:[[1,0],[0,1]],All:[[0,0],[1,1]]},cE={start:0,center:.5,end:1};function gI(n,e,t=0){let i=0;if(cE[n]!==void 0&&(n=cE[n]),typeof n=="string"){const r=parseFloat(n);n.endsWith("px")?i=r:n.endsWith("%")?n=r/100:n.endsWith("vw")?i=r/100*document.documentElement.clientWidth:n.endsWith("vh")?i=r/100*document.documentElement.clientHeight:n=r}return typeof n=="number"&&(i=e*n),t+i}const Zre=[0,0];function $re(n,e,t,i){let r=Array.isArray(n)?n:Zre,s=0,o=0;return typeof n=="number"?r=[n,n]:typeof n=="string"&&(n=n.trim(),n.includes(" ")?r=n.split(" "):r=[n,cE[n]?n:"0"]),s=gI(r[0],t,i),o=gI(r[1],e),s-o}const Kre={x:0,y:0};function Jre(n,e,t){let{offset:i=qre.All}=t;const{target:r=n,axis:s="y"}=t,o=s==="y"?"height":"width",a=r!==n?Yre(r,n):Kre,l=r===n?{width:n.scrollWidth,height:n.scrollHeight}:{width:r.clientWidth,height:r.clientHeight},u={width:n.clientWidth,height:n.clientHeight};e[s].offset.length=0;let f=!e[s].interpolate;const d=i.length;for(let p=0;p<d;p++){const m=$re(i[p],u[o],l[o],a[s]);!f&&m!==e[s].interpolatorOffsets[p]&&(f=!0),e[s].offset[p]=m}f&&(e[s].interpolate=nP(e[s].offset,GB(i)),e[s].interpolatorOffsets=[...e[s].offset]),e[s].progress=e[s].interpolate(e[s].current)}function Qre(n,e=n,t){if(t.x.targetOffset=0,t.y.targetOffset=0,e!==n){let i=e;for(;i&&i!==n;)t.x.targetOffset+=i.offsetLeft,t.y.targetOffset+=i.offsetTop,i=i.offsetParent}t.x.targetLength=e===n?e.scrollWidth:e.clientWidth,t.y.targetLength=e===n?e.scrollHeight:e.clientHeight,t.x.containerLength=n.clientWidth,t.y.containerLength=n.clientHeight}function ese(n,e,t,i={}){return{measure:()=>Qre(n,i.target,t),update:r=>{Xre(n,t,r),(i.offset||i.target)&&Jre(n,t,i)},notify:()=>e(t)}}const mp=new WeakMap,vI=new WeakMap,Uw=new WeakMap,yI=n=>n===document.documentElement?window:n;function tse(n,{container:e=document.documentElement,...t}={}){let i=Uw.get(e);i||(i=new Set,Uw.set(e,i));const r=Wre(),s=ese(e,n,r,t);if(i.add(s),!mp.has(e)){const a=()=>{for(const p of i)p.measure()},l=()=>{for(const p of i)p.update(pi.timestamp)},u=()=>{for(const p of i)p.notify()},f=()=>{pn.read(a,!1,!0),pn.update(l,!1,!0),pn.update(u,!1,!0)};mp.set(e,f);const d=yI(e);window.addEventListener("resize",f,{passive:!0}),e!==document.documentElement&&vI.set(e,Hre(e,f)),d.addEventListener("scroll",f,{passive:!0})}const o=mp.get(e);return pn.read(o,!1,!0),()=>{var a;ra(o);const l=Uw.get(e);if(!l||(l.delete(s),l.size))return;const u=mp.get(e);mp.delete(e),u&&(yI(e).removeEventListener("scroll",u),(a=vI.get(e))===null||a===void 0||a(),window.removeEventListener("resize",u))}}function _I(n,e){xB(!!(!e||e.current))}const nse=()=>({scrollX:Xo(0),scrollY:Xo(0),scrollXProgress:Xo(0),scrollYProgress:Xo(0)});function ise({container:n,target:e,layoutEffect:t=!0,...i}={}){const r=JC(nse);return(t?Qm:O.useEffect)(()=>(_I("target",e),_I("container",n),tse(({x:o,y:a})=>{r.scrollX.set(o.current),r.scrollXProgress.set(o.progress),r.scrollY.set(a.current),r.scrollYProgress.set(a.progress)},{...i,container:(n==null?void 0:n.current)||void 0,target:(e==null?void 0:e.current)||void 0})),[]),r}const rse={any:0,all:1};function sse(n,e,{root:t,margin:i,amount:r="any"}={}){const s=g4(n),o=new WeakMap,a=u=>{u.forEach(f=>{const d=o.get(f.target);if(f.isIntersecting!==!!d)if(f.isIntersecting){const p=e(f);typeof p=="function"?o.set(f.target,p):l.unobserve(f.target)}else d&&(d(f),o.delete(f.target))})},l=new IntersectionObserver(a,{root:t,rootMargin:i,threshold:typeof r=="number"?r:rse[r]});return s.forEach(u=>l.observe(u)),()=>l.disconnect()}function ose(n,{root:e,margin:t,amount:i,once:r=!1}={}){const[s,o]=O.useState(!1);return O.useEffect(()=>{if(!n.current||r&&s)return;const a=()=>(o(!0),r?void 0:()=>o(!1)),l={root:e&&e.current||void 0,margin:t,amount:i==="some"?"any":i};return sse(n.current,a,l)},[e,n,t,r]),s}/**
 * @remix-run/router v1.9.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ig(){return ig=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},ig.apply(this,arguments)}var Al;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Al||(Al={}));const xI="popstate";function ase(n){n===void 0&&(n={});function e(i,r){let{pathname:s,search:o,hash:a}=i.location;return fE("",{pathname:s,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(i,r){return typeof r=="string"?r:V_(r)}return use(e,t,null,n)}function li(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function uP(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function lse(){return Math.random().toString(36).substr(2,8)}function SI(n,e){return{usr:n.state,key:n.key,idx:e}}function fE(n,e,t,i){return t===void 0&&(t=null),ig({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Sd(e):e,{state:t,key:e&&e.key||i||lse()})}function V_(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Sd(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function use(n,e,t,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,a=Al.Pop,l=null,u=f();u==null&&(u=0,o.replaceState(ig({},o.state,{idx:u}),""));function f(){return(o.state||{idx:null}).idx}function d(){a=Al.Pop;let x=f(),v=x==null?null:x-u;u=x,l&&l({action:a,location:y.location,delta:v})}function p(x,v){a=Al.Push;let w=fE(y.location,x,v);t&&t(w,x),u=f()+1;let S=SI(w,u),T=y.createHref(w);try{o.pushState(S,"",T)}catch(b){if(b instanceof DOMException&&b.name==="DataCloneError")throw b;r.location.assign(T)}s&&l&&l({action:a,location:y.location,delta:1})}function m(x,v){a=Al.Replace;let w=fE(y.location,x,v);t&&t(w,x),u=f();let S=SI(w,u),T=y.createHref(w);o.replaceState(S,"",T),s&&l&&l({action:a,location:y.location,delta:0})}function g(x){let v=r.location.origin!=="null"?r.location.origin:r.location.href,w=typeof x=="string"?x:V_(x);return li(v,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,v)}let y={get action(){return a},get location(){return n(r,o)},listen(x){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(xI,d),l=x,()=>{r.removeEventListener(xI,d),l=null}},createHref(x){return e(r,x)},createURL:g,encodeLocation(x){let v=g(x);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:p,replace:m,go(x){return o.go(x)}};return y}var wI;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(wI||(wI={}));function cse(n,e,t){t===void 0&&(t="/");let i=typeof e=="string"?Sd(e):e,r=cP(i.pathname||"/",t);if(r==null)return null;let s=v4(n);fse(s);let o=null;for(let a=0;o==null&&a<s.length;++a)o=xse(s[a],Mse(r));return o}function v4(n,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let r=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(li(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let u=ql([i,l.relativePath]),f=t.concat(l);s.children&&s.children.length>0&&(li(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),v4(s.children,e,f,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:yse(u,s.index),routesMeta:f})};return n.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))r(s,o);else for(let l of y4(s.path))r(s,o,l)}),e}function y4(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,r=t.endsWith("?"),s=t.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let o=y4(i.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),r&&a.push(...o),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function fse(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:_se(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const hse=/^:\w+$/,dse=3,pse=2,mse=1,gse=10,vse=-2,MI=n=>n==="*";function yse(n,e){let t=n.split("/"),i=t.length;return t.some(MI)&&(i+=vse),e&&(i+=pse),t.filter(r=>!MI(r)).reduce((r,s)=>r+(hse.test(s)?dse:s===""?mse:gse),i)}function _se(n,e){return n.length===e.length&&n.slice(0,-1).every((i,r)=>i===e[r])?n[n.length-1]-e[e.length-1]:0}function xse(n,e){let{routesMeta:t}=n,i={},r="/",s=[];for(let o=0;o<t.length;++o){let a=t[o],l=o===t.length-1,u=r==="/"?e:e.slice(r.length)||"/",f=Sse({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},u);if(!f)return null;Object.assign(i,f.params);let d=a.route;s.push({params:i,pathname:ql([r,f.pathname]),pathnameBase:Cse(ql([r,f.pathnameBase])),route:d}),f.pathnameBase!=="/"&&(r=ql([r,f.pathnameBase]))}return s}function Sse(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=wse(n.path,n.caseSensitive,n.end),r=e.match(t);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce((u,f,d)=>{if(f==="*"){let p=a[d]||"";o=s.slice(0,s.length-p.length).replace(/(.)\/+$/,"$1")}return u[f]=Tse(a[d]||"",f),u},{}),pathname:s,pathnameBase:o,pattern:n}}function wse(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),uP(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],r="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(o,a)=>(i.push(a),"/([^\\/]+)"));return n.endsWith("*")?(i.push("*"),r+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":n!==""&&n!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function Mse(n){try{return decodeURI(n)}catch(e){return uP(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function Tse(n,e){try{return decodeURIComponent(n)}catch(t){return uP(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+n+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+t+").")),n}}function cP(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function Ese(n,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:r=""}=typeof n=="string"?Sd(n):n;return{pathname:t?t.startsWith("/")?t:bse(t,e):e,search:Pse(i),hash:Ase(r)}}function bse(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function Fw(n,e,t,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function _4(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function x4(n,e,t,i){i===void 0&&(i=!1);let r;typeof n=="string"?r=Sd(n):(r=ig({},n),li(!r.pathname||!r.pathname.includes("?"),Fw("?","pathname","search",r)),li(!r.pathname||!r.pathname.includes("#"),Fw("#","pathname","hash",r)),li(!r.search||!r.search.includes("#"),Fw("#","search","hash",r)));let s=n===""||r.pathname==="",o=s?"/":r.pathname,a;if(i||o==null)a=t;else{let d=e.length-1;if(o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),d-=1;r.pathname=p.join("/")}a=d>=0?e[d]:"/"}let l=Ese(r,a),u=o&&o!=="/"&&o.endsWith("/"),f=(s||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(u||f)&&(l.pathname+="/"),l}const ql=n=>n.join("/").replace(/\/\/+/g,"/"),Cse=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),Pse=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,Ase=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function Rse(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const S4=["post","put","patch","delete"];new Set(S4);const Dse=["get",...S4];new Set(Dse);/**
 * React Router v6.16.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function H_(){return H_=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},H_.apply(this,arguments)}const fP=O.createContext(null),Lse=O.createContext(null),wd=O.createContext(null),Jx=O.createContext(null),Jc=O.createContext({outlet:null,matches:[],isDataRoute:!1}),w4=O.createContext(null);function Ise(n,e){let{relative:t}=e===void 0?{}:e;Hg()||li(!1);let{basename:i,navigator:r}=O.useContext(wd),{hash:s,pathname:o,search:a}=T4(n,{relative:t}),l=o;return i!=="/"&&(l=o==="/"?i:ql([i,o])),r.createHref({pathname:l,search:a,hash:s})}function Hg(){return O.useContext(Jx)!=null}function Gg(){return Hg()||li(!1),O.useContext(Jx).location}function M4(n){O.useContext(wd).static||O.useLayoutEffect(n)}function kse(){let{isDataRoute:n}=O.useContext(Jc);return n?Yse():Ose()}function Ose(){Hg()||li(!1);let n=O.useContext(fP),{basename:e,navigator:t}=O.useContext(wd),{matches:i}=O.useContext(Jc),{pathname:r}=Gg(),s=JSON.stringify(_4(i).map(l=>l.pathnameBase)),o=O.useRef(!1);return M4(()=>{o.current=!0}),O.useCallback(function(l,u){if(u===void 0&&(u={}),!o.current)return;if(typeof l=="number"){t.go(l);return}let f=x4(l,JSON.parse(s),r,u.relative==="path");n==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:ql([e,f.pathname])),(u.replace?t.replace:t.push)(f,u.state,u)},[e,t,s,r,n])}function T4(n,e){let{relative:t}=e===void 0?{}:e,{matches:i}=O.useContext(Jc),{pathname:r}=Gg(),s=JSON.stringify(_4(i).map(o=>o.pathnameBase));return O.useMemo(()=>x4(n,JSON.parse(s),r,t==="path"),[n,s,r,t])}function Nse(n,e){return Use(n,e)}function Use(n,e,t){Hg()||li(!1);let{navigator:i}=O.useContext(wd),{matches:r}=O.useContext(Jc),s=r[r.length-1],o=s?s.params:{};s&&s.pathname;let a=s?s.pathnameBase:"/";s&&s.route;let l=Gg(),u;if(e){var f;let y=typeof e=="string"?Sd(e):e;a==="/"||(f=y.pathname)!=null&&f.startsWith(a)||li(!1),u=y}else u=l;let d=u.pathname||"/",p=a==="/"?d:d.slice(a.length)||"/",m=cse(n,{pathname:p}),g=Hse(m&&m.map(y=>Object.assign({},y,{params:Object.assign({},o,y.params),pathname:ql([a,i.encodeLocation?i.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?a:ql([a,i.encodeLocation?i.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),r,t);return e&&g?O.createElement(Jx.Provider,{value:{location:H_({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Al.Pop}},g):g}function Fse(){let n=Xse(),e=Rse(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),t?O.createElement("pre",{style:r},t):null,s)}const zse=O.createElement(Fse,null);class Bse extends O.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error?O.createElement(Jc.Provider,{value:this.props.routeContext},O.createElement(w4.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Vse(n){let{routeContext:e,match:t,children:i}=n,r=O.useContext(fP);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),O.createElement(Jc.Provider,{value:e},i)}function Hse(n,e,t){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),n==null){var r;if((r=t)!=null&&r.errors)n=t.matches;else return null}let s=n,o=(i=t)==null?void 0:i.errors;if(o!=null){let a=s.findIndex(l=>l.route.id&&(o==null?void 0:o[l.route.id]));a>=0||li(!1),s=s.slice(0,Math.min(s.length,a+1))}return s.reduceRight((a,l,u)=>{let f=l.route.id?o==null?void 0:o[l.route.id]:null,d=null;t&&(d=l.route.errorElement||zse);let p=e.concat(s.slice(0,u+1)),m=()=>{let g;return f?g=d:l.route.Component?g=O.createElement(l.route.Component,null):l.route.element?g=l.route.element:g=a,O.createElement(Vse,{match:l,routeContext:{outlet:a,matches:p,isDataRoute:t!=null},children:g})};return t&&(l.route.ErrorBoundary||l.route.errorElement||u===0)?O.createElement(Bse,{location:t.location,revalidation:t.revalidation,component:d,error:f,children:m(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):m()},null)}var E4=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(E4||{}),G_=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(G_||{});function Gse(n){let e=O.useContext(fP);return e||li(!1),e}function Wse(n){let e=O.useContext(Lse);return e||li(!1),e}function jse(n){let e=O.useContext(Jc);return e||li(!1),e}function b4(n){let e=jse(),t=e.matches[e.matches.length-1];return t.route.id||li(!1),t.route.id}function Xse(){var n;let e=O.useContext(w4),t=Wse(G_.UseRouteError),i=b4(G_.UseRouteError);return e||((n=t.errors)==null?void 0:n[i])}function Yse(){let{router:n}=Gse(E4.UseNavigateStable),e=b4(G_.UseNavigateStable),t=O.useRef(!1);return M4(()=>{t.current=!0}),O.useCallback(function(r,s){s===void 0&&(s={}),t.current&&(typeof r=="number"?n.navigate(r):n.navigate(r,H_({fromRouteId:e},s)))},[n,e])}function Pp(n){li(!1)}function qse(n){let{basename:e="/",children:t=null,location:i,navigationType:r=Al.Pop,navigator:s,static:o=!1}=n;Hg()&&li(!1);let a=e.replace(/^\/*/,"/"),l=O.useMemo(()=>({basename:a,navigator:s,static:o}),[a,s,o]);typeof i=="string"&&(i=Sd(i));let{pathname:u="/",search:f="",hash:d="",state:p=null,key:m="default"}=i,g=O.useMemo(()=>{let y=cP(u,a);return y==null?null:{location:{pathname:y,search:f,hash:d,state:p,key:m},navigationType:r}},[a,u,f,d,p,m,r]);return g==null?null:O.createElement(wd.Provider,{value:l},O.createElement(Jx.Provider,{children:t,value:g}))}function Zse(n){let{children:e,location:t}=n;return Nse(hE(e),t)}new Promise(()=>{});function hE(n,e){e===void 0&&(e=[]);let t=[];return O.Children.forEach(n,(i,r)=>{if(!O.isValidElement(i))return;let s=[...e,r];if(i.type===O.Fragment){t.push.apply(t,hE(i.props.children,s));return}i.type!==Pp&&li(!1),!i.props.index||!i.props.children||li(!1);let o={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=hE(i.props.children,s)),t.push(o)}),t}/**
 * React Router DOM v6.16.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dE(){return dE=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},dE.apply(this,arguments)}function $se(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function Kse(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function Jse(n,e){return n.button===0&&(!e||e==="_self")&&!Kse(n)}const Qse=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],eoe="startTransition",TI=_H[eoe];function toe(n){let{basename:e,children:t,future:i,window:r}=n,s=O.useRef();s.current==null&&(s.current=ase({window:r,v5Compat:!0}));let o=s.current,[a,l]=O.useState({action:o.action,location:o.location}),{v7_startTransition:u}=i||{},f=O.useCallback(d=>{u&&TI?TI(()=>l(d)):l(d)},[l,u]);return O.useLayoutEffect(()=>o.listen(f),[o,f]),O.createElement(qse,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:o})}const noe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ioe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,C4=O.forwardRef(function(e,t){let{onClick:i,relative:r,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:f}=e,d=$se(e,Qse),{basename:p}=O.useContext(wd),m,g=!1;if(typeof u=="string"&&ioe.test(u)&&(m=u,noe))try{let w=new URL(window.location.href),S=u.startsWith("//")?new URL(w.protocol+u):new URL(u),T=cP(S.pathname,p);S.origin===w.origin&&T!=null?u=T+S.search+S.hash:g=!0}catch{}let y=Ise(u,{relative:r}),x=roe(u,{replace:o,state:a,target:l,preventScrollReset:f,relative:r});function v(w){i&&i(w),w.defaultPrevented||x(w)}return O.createElement("a",dE({},d,{href:m||y,onClick:g||s?i:v,ref:t,target:l}))});var EI;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher"})(EI||(EI={}));var bI;(function(n){n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(bI||(bI={}));function roe(n,e){let{target:t,replace:i,state:r,preventScrollReset:s,relative:o}=e===void 0?{}:e,a=kse(),l=Gg(),u=T4(n,{relative:o});return O.useCallback(f=>{if(Jse(f,t)){f.preventDefault();let d=i!==void 0?i:V_(l)===V_(u);a(n,{replace:d,state:r,preventScrollReset:s,relative:o})}},[l,a,u,i,r,t,n,s,o])}const soe=()=>{O.useRef();let{scrollY:n}=ise();const[e,t]=O.useState(!1);kre(n,"change",o=>{const a=n.getPrevious();o>a?t(!0):t(!1)});const i={scrollDown:{height:"70px"},scrollUp:{height:"120px"}},r={scrollDown:{width:"1.5rem"},scrollUp:{width:"2rem"}},s={scrollDown:{opacity:0},scrollUp:{opacity:1}};return de(bo.nav,{variants:i,transition:{duration:.4,ease:"easeInOut"},animate:e?"scrollDown":"scrollUp",children:yt("div",{className:cL.nav__container,children:[de(C4,{to:"/",children:de(bo.img,{variants:r,transition:{duration:.4,ease:"easeInOut"},animate:e?"scrollDown":"scrollUp",src:Zz})}),yt(bo.div,{variants:s,transition:{duration:.4,ease:"easeInOut"},animate:e?"scrollDown":"scrollUp",className:cL.menu,children:[de("span",{children:de("a",{href:"#",children:"About"})}),de("span",{children:de("a",{href:"#",children:"Work"})}),de("span",{children:de("a",{href:"#",children:"Contact"})})]})]})})},ooe="_highlighted_19fzk_42",aoe="_footer__wrapper_19fzk_115",loe="_footer__container_19fzk_119",ty={highlighted:ooe,footer__wrapper:aoe,footer__container:loe},uoe=()=>de("footer",{children:de("div",{className:ty.footer__wrapper,children:yt("div",{className:ty.footer__container,children:[yt("div",{className:ty.footer__left,children:[de("span",{children:"Bod, Norway"}),de("h2",{children:de("a",{href:"tel:004746694520",children:"+47 46 69 45 20"})}),de("span",{children:de("a",{href:"mailto:kennethsjorgensen@gmail.com",children:"kennethsjorgensen@gmail.com"})})]}),yt("div",{className:ty.footer__right,children:[de("span",{children:"Want to work with me or hire me?"}),de("h2",{children:"Contact me"})]})]})})});function coe(){const[n,e]=O.useState(["black","red","red","hotpink","#a6d59e","#a6d59e","blue","blue"]),t=O.useRef(),i=O.useRef();return LC((r,s)=>{Uy.dampC(t.current.color,n[4],.05,s),Uy.dampC(i.current.color,n[0],.05,s),pee?t.current.position.set(-2,Math.sin(r.clock.elapsedTime),1):Uy.damp3(t.current.position,[r.pointer.x/2*r.viewport.width/4,r.pointer.y/2*r.viewport.height/4,1],.3,s)}),yt($s,{children:[de("directionalLight",{ref:t,intensity:2.2}),de("ambientLight",{color:"#a6d59e",ref:i,intensity:2.5})]})}const foe="_highlighted_1a8f6_42",hoe="_intro__section_1a8f6_109",doe="_target_1a8f6_1",poe={highlighted:foe,intro__section:hoe,target:doe};function Ea(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function P4(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}/*!
 * GSAP 3.11.5
 * https://greensock.com
 *
 * @license Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var gs={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},$h={duration:.5,overwrite:!1,delay:0},hP,ar,oi,Ws=1e8,yn=1/Ws,pE=Math.PI*2,moe=pE/4,goe=0,A4=Math.sqrt,voe=Math.cos,yoe=Math.sin,Ni=function(e){return typeof e=="string"},Yn=function(e){return typeof e=="function"},Za=function(e){return typeof e=="number"},dP=function(e){return typeof e>"u"},sa=function(e){return typeof e=="object"},jr=function(e){return e!==!1},pP=function(){return typeof window<"u"},ny=function(e){return Yn(e)||Ni(e)},R4=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},lr=Array.isArray,mE=/(?:-?\.?\d|\.)+/gi,D4=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,vh=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,zw=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,L4=/[+-]=-?[.\d]+/,I4=/[^,'"\[\]\s]+/gi,_oe=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,On,Fs,gE,mP,_s={},W_={},k4,O4=function(e){return(W_=Uc(e,_s))&&$r},gP=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},j_=function(e,t){return!t&&console.warn(e)},N4=function(e,t){return e&&(_s[e]=t)&&W_&&(W_[e]=t)||_s},rg=function(){return 0},xoe={suppressEvents:!0,isStart:!0,kill:!1},jy={suppressEvents:!0,kill:!1},Soe={suppressEvents:!0},vP={},Zl=[],vE={},U4,as={},Bw={},CI=30,Xy=[],yP="",_P=function(e){var t=e[0],i,r;if(sa(t)||Yn(t)||(e=[e]),!(i=(t._gsap||{}).harness)){for(r=Xy.length;r--&&!Xy[r].targetTest(t););i=Xy[r]}for(r=e.length;r--;)e[r]&&(e[r]._gsap||(e[r]._gsap=new aV(e[r],i)))||e.splice(r,1);return e},Sc=function(e){return e._gsap||_P(js(e))[0]._gsap},F4=function(e,t,i){return(i=e[t])&&Yn(i)?e[t]():dP(i)&&e.getAttribute&&e.getAttribute(t)||i},Xr=function(e,t){return(e=e.split(",")).forEach(t)||e},Kn=function(e){return Math.round(e*1e5)/1e5||0},Hi=function(e){return Math.round(e*1e7)/1e7||0},Dh=function(e,t){var i=t.charAt(0),r=parseFloat(t.substr(2));return e=parseFloat(e),i==="+"?e+r:i==="-"?e-r:i==="*"?e*r:e/r},woe=function(e,t){for(var i=t.length,r=0;e.indexOf(t[r])<0&&++r<i;);return r<i},X_=function(){var e=Zl.length,t=Zl.slice(0),i,r;for(vE={},Zl.length=0,i=0;i<e;i++)r=t[i],r&&r._lazy&&(r.render(r._lazy[0],r._lazy[1],!0)._lazy=0)},z4=function(e,t,i,r){Zl.length&&!ar&&X_(),e.render(t,i,r||ar&&t<0&&(e._initted||e._startAt)),Zl.length&&!ar&&X_()},B4=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(I4).length<2?t:Ni(e)?e.trim():e},V4=function(e){return e},Qs=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},Moe=function(e){return function(t,i){for(var r in i)r in t||r==="duration"&&e||r==="ease"||(t[r]=i[r])}},Uc=function(e,t){for(var i in t)e[i]=t[i];return e},PI=function n(e,t){for(var i in t)i!=="__proto__"&&i!=="constructor"&&i!=="prototype"&&(e[i]=sa(t[i])?n(e[i]||(e[i]={}),t[i]):t[i]);return e},Y_=function(e,t){var i={},r;for(r in e)r in t||(i[r]=e[r]);return i},sm=function(e){var t=e.parent||On,i=e.keyframes?Moe(lr(e.keyframes)):Qs;if(jr(e.inherit))for(;t;)i(e,t.vars.defaults),t=t.parent||t._dp;return e},Toe=function(e,t){for(var i=e.length,r=i===t.length;r&&i--&&e[i]===t[i];);return i<0},H4=function(e,t,i,r,s){i===void 0&&(i="_first"),r===void 0&&(r="_last");var o=e[r],a;if(s)for(a=t[s];o&&o[s]>a;)o=o._prev;return o?(t._next=o._next,o._next=t):(t._next=e[i],e[i]=t),t._next?t._next._prev=t:e[r]=t,t._prev=o,t.parent=t._dp=e,t},Qx=function(e,t,i,r){i===void 0&&(i="_first"),r===void 0&&(r="_last");var s=t._prev,o=t._next;s?s._next=o:e[i]===t&&(e[i]=o),o?o._prev=s:e[r]===t&&(e[r]=s),t._next=t._prev=t.parent=null},au=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove(e),e._act=0},wc=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var i=e;i;)i._dirty=1,i=i.parent;return e},Eoe=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},yE=function(e,t,i,r){return e._startAt&&(ar?e._startAt.revert(jy):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,r))},boe=function n(e){return!e||e._ts&&n(e.parent)},AI=function(e){return e._repeat?Kh(e._tTime,e=e.duration()+e._rDelay)*e:0},Kh=function(e,t){var i=Math.floor(e/=t);return e&&i===e?i-1:i},q_=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},e1=function(e){return e._end=Hi(e._start+(e._tDur/Math.abs(e._ts||e._rts||yn)||0))},t1=function(e,t){var i=e._dp;return i&&i.smoothChildTiming&&e._ts&&(e._start=Hi(i._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),e1(e),i._dirty||wc(i,e)),e},G4=function(e,t){var i;if((t._time||t._initted&&!t._dur)&&(i=q_(e.rawTime(),t),(!t._dur||Wg(0,t.totalDuration(),i)-t._tTime>yn)&&t.render(i,!0)),wc(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(i=e;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;e._zTime=-yn}},jo=function(e,t,i,r){return t.parent&&au(t),t._start=Hi((Za(i)?i:i||e!==On?Us(e,i,t):e._time)+t._delay),t._end=Hi(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),H4(e,t,"_first","_last",e._sort?"_start":0),_E(t)||(e._recent=t),r||G4(e,t),e._ts<0&&t1(e,e._tTime),e},W4=function(e,t){return(_s.ScrollTrigger||gP("scrollTrigger",t))&&_s.ScrollTrigger.create(t,e)},j4=function(e,t,i,r,s){if(SP(e,t,s),!e._initted)return 1;if(!i&&e._pt&&!ar&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&U4!==us.frame)return Zl.push(e),e._lazy=[s,r],1},Coe=function n(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||n(t))},_E=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},Poe=function(e,t,i,r){var s=e.ratio,o=t<0||!t&&(!e._start&&Coe(e)&&!(!e._initted&&_E(e))||(e._ts<0||e._dp._ts<0)&&!_E(e))?0:1,a=e._rDelay,l=0,u,f,d;if(a&&e._repeat&&(l=Wg(0,e._tDur,t),f=Kh(l,a),e._yoyo&&f&1&&(o=1-o),f!==Kh(e._tTime,a)&&(s=1-o,e.vars.repeatRefresh&&e._initted&&e.invalidate())),o!==s||ar||r||e._zTime===yn||!t&&e._zTime){if(!e._initted&&j4(e,t,r,i,l))return;for(d=e._zTime,e._zTime=t||(i?yn:0),i||(i=t&&!d),e.ratio=o,e._from&&(o=1-o),e._time=0,e._tTime=l,u=e._pt;u;)u.r(o,u.d),u=u._next;t<0&&yE(e,t,i,!0),e._onUpdate&&!i&&Xs(e,"onUpdate"),l&&e._repeat&&!i&&e.parent&&Xs(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===o&&(o&&au(e,1),!i&&!ar&&(Xs(e,o?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},Aoe=function(e,t,i){var r;if(i>t)for(r=e._first;r&&r._start<=i;){if(r.data==="isPause"&&r._start>t)return r;r=r._next}else for(r=e._last;r&&r._start>=i;){if(r.data==="isPause"&&r._start<t)return r;r=r._prev}},Jh=function(e,t,i,r){var s=e._repeat,o=Hi(t)||0,a=e._tTime/e._tDur;return a&&!r&&(e._time*=o/e._dur),e._dur=o,e._tDur=s?s<0?1e10:Hi(o*(s+1)+e._rDelay*s):o,a>0&&!r&&t1(e,e._tTime=e._tDur*a),e.parent&&e1(e),i||wc(e.parent,e),e},RI=function(e){return e instanceof Br?wc(e):Jh(e,e._dur)},Roe={_start:0,endTime:rg,totalDuration:rg},Us=function n(e,t,i){var r=e.labels,s=e._recent||Roe,o=e.duration()>=Ws?s.endTime(!1):e._dur,a,l,u;return Ni(t)&&(isNaN(t)||t in r)?(l=t.charAt(0),u=t.substr(-1)==="%",a=t.indexOf("="),l==="<"||l===">"?(a>=0&&(t=t.replace(/=/,"")),(l==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(t.substr(1))||0)*(u?(a<0?s:i).totalDuration()/100:1)):a<0?(t in r||(r[t]=o),r[t]):(l=parseFloat(t.charAt(a-1)+t.substr(a+1)),u&&i&&(l=l/100*(lr(i)?i[0]:i).totalDuration()),a>1?n(e,t.substr(0,a-1),i)+l:o+l)):t==null?o:+t},om=function(e,t,i){var r=Za(t[1]),s=(r?2:1)+(e<2?0:1),o=t[s],a,l;if(r&&(o.duration=t[1]),o.parent=i,e){for(a=o,l=i;l&&!("immediateRender"in a);)a=l.vars.defaults||{},l=jr(l.vars.inherit)&&l.parent;o.immediateRender=jr(a.immediateRender),e<2?o.runBackwards=1:o.startAt=t[s-1]}return new hi(t[0],o,t[s+1])},xu=function(e,t){return e||e===0?t(e):t},Wg=function(e,t,i){return i<e?e:i>t?t:i},rr=function(e,t){return!Ni(e)||!(t=_oe.exec(e))?"":t[1]},Doe=function(e,t,i){return xu(i,function(r){return Wg(e,t,r)})},xE=[].slice,X4=function(e,t){return e&&sa(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&sa(e[0]))&&!e.nodeType&&e!==Fs},Loe=function(e,t,i){return i===void 0&&(i=[]),e.forEach(function(r){var s;return Ni(r)&&!t||X4(r,1)?(s=i).push.apply(s,js(r)):i.push(r)})||i},js=function(e,t,i){return oi&&!t&&oi.selector?oi.selector(e):Ni(e)&&!i&&(gE||!Qh())?xE.call((t||mP).querySelectorAll(e),0):lr(e)?Loe(e,i):X4(e)?xE.call(e,0):e?[e]:[]},SE=function(e){return e=js(e)[0]||j_("Invalid scope")||{},function(t){var i=e.current||e.nativeElement||e;return js(t,i.querySelectorAll?i:i===e?j_("Invalid scope")||mP.createElement("div"):e)}},Y4=function(e){return e.sort(function(){return .5-Math.random()})},q4=function(e){if(Yn(e))return e;var t=sa(e)?e:{each:e},i=Mc(t.ease),r=t.from||0,s=parseFloat(t.base)||0,o={},a=r>0&&r<1,l=isNaN(r)||a,u=t.axis,f=r,d=r;return Ni(r)?f=d={center:.5,edges:.5,end:1}[r]||0:!a&&l&&(f=r[0],d=r[1]),function(p,m,g){var y=(g||t).length,x=o[y],v,w,S,T,b,P,R,D,C;if(!x){if(C=t.grid==="auto"?0:(t.grid||[1,Ws])[1],!C){for(R=-Ws;R<(R=g[C++].getBoundingClientRect().left)&&C<y;);C--}for(x=o[y]=[],v=l?Math.min(C,y)*f-.5:r%C,w=C===Ws?0:l?y*d/C-.5:r/C|0,R=0,D=Ws,P=0;P<y;P++)S=P%C-v,T=w-(P/C|0),x[P]=b=u?Math.abs(u==="y"?T:S):A4(S*S+T*T),b>R&&(R=b),b<D&&(D=b);r==="random"&&Y4(x),x.max=R-D,x.min=D,x.v=y=(parseFloat(t.amount)||parseFloat(t.each)*(C>y?y-1:u?u==="y"?y/C:C:Math.max(C,y/C))||0)*(r==="edges"?-1:1),x.b=y<0?s-y:s,x.u=rr(t.amount||t.each)||0,i=i&&y<0?rV(i):i}return y=(x[p]-x.min)/x.max||0,Hi(x.b+(i?i(y):y)*x.v)+x.u}},wE=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(i){var r=Hi(Math.round(parseFloat(i)/e)*e*t);return(r-r%1)/t+(Za(i)?0:rr(i))}},Z4=function(e,t){var i=lr(e),r,s;return!i&&sa(e)&&(r=i=e.radius||Ws,e.values?(e=js(e.values),(s=!Za(e[0]))&&(r*=r)):e=wE(e.increment)),xu(t,i?Yn(e)?function(o){return s=e(o),Math.abs(s-o)<=r?s:o}:function(o){for(var a=parseFloat(s?o.x:o),l=parseFloat(s?o.y:0),u=Ws,f=0,d=e.length,p,m;d--;)s?(p=e[d].x-a,m=e[d].y-l,p=p*p+m*m):p=Math.abs(e[d]-a),p<u&&(u=p,f=d);return f=!r||u<=r?e[f]:o,s||f===o||Za(o)?f:f+rr(o)}:wE(e))},$4=function(e,t,i,r){return xu(lr(e)?!t:i===!0?!!(i=0):!r,function(){return lr(e)?e[~~(Math.random()*e.length)]:(i=i||1e-5)&&(r=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((e-i/2+Math.random()*(t-e+i*.99))/i)*i*r)/r})},Ioe=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(r){return t.reduce(function(s,o){return o(s)},r)}},koe=function(e,t){return function(i){return e(parseFloat(i))+(t||rr(i))}},Ooe=function(e,t,i){return J4(e,t,0,1,i)},K4=function(e,t,i){return xu(i,function(r){return e[~~t(r)]})},Noe=function n(e,t,i){var r=t-e;return lr(e)?K4(e,n(0,e.length),t):xu(i,function(s){return(r+(s-e)%r)%r+e})},Uoe=function n(e,t,i){var r=t-e,s=r*2;return lr(e)?K4(e,n(0,e.length-1),t):xu(i,function(o){return o=(s+(o-e)%s)%s||0,e+(o>r?s-o:o)})},sg=function(e){for(var t=0,i="",r,s,o,a;~(r=e.indexOf("random(",t));)o=e.indexOf(")",r),a=e.charAt(r+7)==="[",s=e.substr(r+7,o-r-7).match(a?I4:mE),i+=e.substr(t,r-t)+$4(a?s:+s[0],a?0:+s[1],+s[2]||1e-5),t=o+1;return i+e.substr(t,e.length-t)},J4=function(e,t,i,r,s){var o=t-e,a=r-i;return xu(s,function(l){return i+((l-e)/o*a||0)})},Foe=function n(e,t,i,r){var s=isNaN(e+t)?0:function(m){return(1-m)*e+m*t};if(!s){var o=Ni(e),a={},l,u,f,d,p;if(i===!0&&(r=1)&&(i=null),o)e={p:e},t={p:t};else if(lr(e)&&!lr(t)){for(f=[],d=e.length,p=d-2,u=1;u<d;u++)f.push(n(e[u-1],e[u]));d--,s=function(g){g*=d;var y=Math.min(p,~~g);return f[y](g-y)},i=t}else r||(e=Uc(lr(e)?[]:{},e));if(!f){for(l in t)xP.call(a,e,l,"get",t[l]);s=function(g){return TP(g,a)||(o?e.p:e)}}}return xu(i,s)},DI=function(e,t,i){var r=e.labels,s=Ws,o,a,l;for(o in r)a=r[o]-t,a<0==!!i&&a&&s>(a=Math.abs(a))&&(l=o,s=a);return l},Xs=function(e,t,i){var r=e.vars,s=r[t],o=oi,a=e._ctx,l,u,f;if(s)return l=r[t+"Params"],u=r.callbackScope||e,i&&Zl.length&&X_(),a&&(oi=a),f=l?s.apply(u,l):s.call(u),oi=o,f},Ap=function(e){return au(e),e.scrollTrigger&&e.scrollTrigger.kill(!!ar),e.progress()<1&&Xs(e,"onInterrupt"),e},yh,Q4=[],eV=function(e){if(!pP()){Q4.push(e);return}e=!e.name&&e.default||e;var t=e.name,i=Yn(e),r=t&&!i&&e.init?function(){this._props=[]}:e,s={init:rg,render:TP,add:xP,kill:eae,modifier:Qoe,rawVars:0},o={targetTest:0,get:0,getSetter:MP,aliases:{},register:0};if(Qh(),e!==r){if(as[t])return;Qs(r,Qs(Y_(e,s),o)),Uc(r.prototype,Uc(s,Y_(e,o))),as[r.prop=t]=r,e.targetTest&&(Xy.push(r),vP[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}N4(t,r),e.register&&e.register($r,r,Yr)},vn=255,Rp={aqua:[0,vn,vn],lime:[0,vn,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,vn],navy:[0,0,128],white:[vn,vn,vn],olive:[128,128,0],yellow:[vn,vn,0],orange:[vn,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[vn,0,0],pink:[vn,192,203],cyan:[0,vn,vn],transparent:[vn,vn,vn,0]},Vw=function(e,t,i){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(i-t)*e*6:e<.5?i:e*3<2?t+(i-t)*(2/3-e)*6:t)*vn+.5|0},tV=function(e,t,i){var r=e?Za(e)?[e>>16,e>>8&vn,e&vn]:0:Rp.black,s,o,a,l,u,f,d,p,m,g;if(!r){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),Rp[e])r=Rp[e];else if(e.charAt(0)==="#"){if(e.length<6&&(s=e.charAt(1),o=e.charAt(2),a=e.charAt(3),e="#"+s+s+o+o+a+a+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return r=parseInt(e.substr(1,6),16),[r>>16,r>>8&vn,r&vn,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),r=[e>>16,e>>8&vn,e&vn]}else if(e.substr(0,3)==="hsl"){if(r=g=e.match(mE),!t)l=+r[0]%360/360,u=+r[1]/100,f=+r[2]/100,o=f<=.5?f*(u+1):f+u-f*u,s=f*2-o,r.length>3&&(r[3]*=1),r[0]=Vw(l+1/3,s,o),r[1]=Vw(l,s,o),r[2]=Vw(l-1/3,s,o);else if(~e.indexOf("="))return r=e.match(D4),i&&r.length<4&&(r[3]=1),r}else r=e.match(mE)||Rp.transparent;r=r.map(Number)}return t&&!g&&(s=r[0]/vn,o=r[1]/vn,a=r[2]/vn,d=Math.max(s,o,a),p=Math.min(s,o,a),f=(d+p)/2,d===p?l=u=0:(m=d-p,u=f>.5?m/(2-d-p):m/(d+p),l=d===s?(o-a)/m+(o<a?6:0):d===o?(a-s)/m+2:(s-o)/m+4,l*=60),r[0]=~~(l+.5),r[1]=~~(u*100+.5),r[2]=~~(f*100+.5)),i&&r.length<4&&(r[3]=1),r},nV=function(e){var t=[],i=[],r=-1;return e.split($l).forEach(function(s){var o=s.match(vh)||[];t.push.apply(t,o),i.push(r+=o.length+1)}),t.c=i,t},LI=function(e,t,i){var r="",s=(e+r).match($l),o=t?"hsla(":"rgba(",a=0,l,u,f,d;if(!s)return e;if(s=s.map(function(p){return(p=tV(p,t,1))&&o+(t?p[0]+","+p[1]+"%,"+p[2]+"%,"+p[3]:p.join(","))+")"}),i&&(f=nV(e),l=i.c,l.join(r)!==f.c.join(r)))for(u=e.replace($l,"1").split(vh),d=u.length-1;a<d;a++)r+=u[a]+(~l.indexOf(a)?s.shift()||o+"0,0,0,0)":(f.length?f:s.length?s:i).shift());if(!u)for(u=e.split($l),d=u.length-1;a<d;a++)r+=u[a]+s[a];return r+u[d]},$l=function(){var n="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in Rp)n+="|"+e+"\\b";return new RegExp(n+")","gi")}(),zoe=/hsl[a]?\(/,iV=function(e){var t=e.join(" "),i;if($l.lastIndex=0,$l.test(t))return i=zoe.test(t),e[1]=LI(e[1],i),e[0]=LI(e[0],i,nV(e[1])),!0},og,us=function(){var n=Date.now,e=500,t=33,i=n(),r=i,s=1e3/240,o=s,a=[],l,u,f,d,p,m,g=function y(x){var v=n()-r,w=x===!0,S,T,b,P;if(v>e&&(i+=v-t),r+=v,b=r-i,S=b-o,(S>0||w)&&(P=++d.frame,p=b-d.time*1e3,d.time=b=b/1e3,o+=S+(S>=s?4:s-S),T=1),w||(l=u(y)),T)for(m=0;m<a.length;m++)a[m](b,p,P,x)};return d={time:0,frame:0,tick:function(){g(!0)},deltaRatio:function(x){return p/(1e3/(x||60))},wake:function(){k4&&(!gE&&pP()&&(Fs=gE=window,mP=Fs.document||{},_s.gsap=$r,(Fs.gsapVersions||(Fs.gsapVersions=[])).push($r.version),O4(W_||Fs.GreenSockGlobals||!Fs.gsap&&Fs||{}),f=Fs.requestAnimationFrame,Q4.forEach(eV)),l&&d.sleep(),u=f||function(x){return setTimeout(x,o-d.time*1e3+1|0)},og=1,g(2))},sleep:function(){(f?Fs.cancelAnimationFrame:clearTimeout)(l),og=0,u=rg},lagSmoothing:function(x,v){e=x||1/0,t=Math.min(v||33,e)},fps:function(x){s=1e3/(x||240),o=d.time*1e3+s},add:function(x,v,w){var S=v?function(T,b,P,R){x(T,b,P,R),d.remove(S)}:x;return d.remove(x),a[w?"unshift":"push"](S),Qh(),S},remove:function(x,v){~(v=a.indexOf(x))&&a.splice(v,1)&&m>=v&&m--},_listeners:a},d}(),Qh=function(){return!og&&us.wake()},Yt={},Boe=/^[\d.\-M][\d.\-,\s]/,Voe=/["']/g,Hoe=function(e){for(var t={},i=e.substr(1,e.length-3).split(":"),r=i[0],s=1,o=i.length,a,l,u;s<o;s++)l=i[s],a=s!==o-1?l.lastIndexOf(","):l.length,u=l.substr(0,a),t[r]=isNaN(u)?u.replace(Voe,"").trim():+u,r=l.substr(a+1).trim();return t},Goe=function(e){var t=e.indexOf("(")+1,i=e.indexOf(")"),r=e.indexOf("(",t);return e.substring(t,~r&&r<i?e.indexOf(")",i+1):i)},Woe=function(e){var t=(e+"").split("("),i=Yt[t[0]];return i&&t.length>1&&i.config?i.config.apply(null,~e.indexOf("{")?[Hoe(t[1])]:Goe(e).split(",").map(B4)):Yt._CE&&Boe.test(e)?Yt._CE("",e):i},rV=function(e){return function(t){return 1-e(1-t)}},sV=function n(e,t){for(var i=e._first,r;i;)i instanceof Br?n(i,t):i.vars.yoyoEase&&(!i._yoyo||!i._repeat)&&i._yoyo!==t&&(i.timeline?n(i.timeline,t):(r=i._ease,i._ease=i._yEase,i._yEase=r,i._yoyo=t)),i=i._next},Mc=function(e,t){return e&&(Yn(e)?e:Yt[e]||Woe(e))||t},Qc=function(e,t,i,r){i===void 0&&(i=function(l){return 1-t(1-l)}),r===void 0&&(r=function(l){return l<.5?t(l*2)/2:1-t((1-l)*2)/2});var s={easeIn:t,easeOut:i,easeInOut:r},o;return Xr(e,function(a){Yt[a]=_s[a]=s,Yt[o=a.toLowerCase()]=i;for(var l in s)Yt[o+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=Yt[a+"."+l]=s[l]}),s},oV=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},Hw=function n(e,t,i){var r=t>=1?t:1,s=(i||(e?.3:.45))/(t<1?t:1),o=s/pE*(Math.asin(1/r)||0),a=function(f){return f===1?1:r*Math.pow(2,-10*f)*yoe((f-o)*s)+1},l=e==="out"?a:e==="in"?function(u){return 1-a(1-u)}:oV(a);return s=pE/s,l.config=function(u,f){return n(e,u,f)},l},Gw=function n(e,t){t===void 0&&(t=1.70158);var i=function(o){return o?--o*o*((t+1)*o+t)+1:0},r=e==="out"?i:e==="in"?function(s){return 1-i(1-s)}:oV(i);return r.config=function(s){return n(e,s)},r};Xr("Linear,Quad,Cubic,Quart,Quint,Strong",function(n,e){var t=e<5?e+1:e;Qc(n+",Power"+(t-1),e?function(i){return Math.pow(i,t)}:function(i){return i},function(i){return 1-Math.pow(1-i,t)},function(i){return i<.5?Math.pow(i*2,t)/2:1-Math.pow((1-i)*2,t)/2})});Yt.Linear.easeNone=Yt.none=Yt.Linear.easeIn;Qc("Elastic",Hw("in"),Hw("out"),Hw());(function(n,e){var t=1/e,i=2*t,r=2.5*t,s=function(a){return a<t?n*a*a:a<i?n*Math.pow(a-1.5/e,2)+.75:a<r?n*(a-=2.25/e)*a+.9375:n*Math.pow(a-2.625/e,2)+.984375};Qc("Bounce",function(o){return 1-s(1-o)},s)})(7.5625,2.75);Qc("Expo",function(n){return n?Math.pow(2,10*(n-1)):0});Qc("Circ",function(n){return-(A4(1-n*n)-1)});Qc("Sine",function(n){return n===1?1:-voe(n*moe)+1});Qc("Back",Gw("in"),Gw("out"),Gw());Yt.SteppedEase=Yt.steps=_s.SteppedEase={config:function(e,t){e===void 0&&(e=1);var i=1/e,r=e+(t?0:1),s=t?1:0,o=1-yn;return function(a){return((r*Wg(0,o,a)|0)+s)*i}}};$h.ease=Yt["quad.out"];Xr("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(n){return yP+=n+","+n+"Params,"});var aV=function(e,t){this.id=goe++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:F4,this.set=t?t.getSetter:MP},ed=function(){function n(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,Jh(this,+t.duration,1,1),this.data=t.data,oi&&(this._ctx=oi,oi.data.push(this)),og||us.wake()}var e=n.prototype;return e.delay=function(i){return i||i===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+i-this._delay),this._delay=i,this):this._delay},e.duration=function(i){return arguments.length?this.totalDuration(this._repeat>0?i+(i+this._rDelay)*this._repeat:i):this.totalDuration()&&this._dur},e.totalDuration=function(i){return arguments.length?(this._dirty=0,Jh(this,this._repeat<0?i:(i-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(i,r){if(Qh(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(t1(this,i),!s._dp||s.parent||G4(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&i<this._tDur||this._ts<0&&i>0||!this._tDur&&!i)&&jo(this._dp,this,this._start-this._delay)}return(this._tTime!==i||!this._dur&&!r||this._initted&&Math.abs(this._zTime)===yn||!i&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=i),z4(this,i,r)),this},e.time=function(i,r){return arguments.length?this.totalTime(Math.min(this.totalDuration(),i+AI(this))%(this._dur+this._rDelay)||(i?this._dur:0),r):this._time},e.totalProgress=function(i,r){return arguments.length?this.totalTime(this.totalDuration()*i,r):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},e.progress=function(i,r){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-i:i)+AI(this),r):this.duration()?Math.min(1,this._time/this._dur):this.ratio},e.iteration=function(i,r){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(i-1)*s,r):this._repeat?Kh(this._tTime,s)+1:1},e.timeScale=function(i){if(!arguments.length)return this._rts===-yn?0:this._rts;if(this._rts===i)return this;var r=this.parent&&this._ts?q_(this.parent._time,this):this._tTime;return this._rts=+i||0,this._ts=this._ps||i===-yn?0:this._rts,this.totalTime(Wg(-Math.abs(this._delay),this._tDur,r),!0),e1(this),Eoe(this)},e.paused=function(i){return arguments.length?(this._ps!==i&&(this._ps=i,i?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Qh(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==yn&&(this._tTime-=yn)))),this):this._ps},e.startTime=function(i){if(arguments.length){this._start=i;var r=this.parent||this._dp;return r&&(r._sort||!this.parent)&&jo(r,this,i-this._delay),this}return this._start},e.endTime=function(i){return this._start+(jr(i)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(i){var r=this.parent||this._dp;return r?i&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?q_(r.rawTime(i),this):this._tTime:this._tTime},e.revert=function(i){i===void 0&&(i=Soe);var r=ar;return ar=i,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(i),this.totalTime(-.01,i.suppressEvents)),this.data!=="nested"&&i.kill!==!1&&this.kill(),ar=r,this},e.globalTime=function(i){for(var r=this,s=arguments.length?i:r.rawTime();r;)s=r._start+s/(r._ts||1),r=r._dp;return!this.parent&&this._sat?this._sat.vars.immediateRender?-1:this._sat.globalTime(i):s},e.repeat=function(i){return arguments.length?(this._repeat=i===1/0?-2:i,RI(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(i){if(arguments.length){var r=this._time;return this._rDelay=i,RI(this),r?this.time(r):this}return this._rDelay},e.yoyo=function(i){return arguments.length?(this._yoyo=i,this):this._yoyo},e.seek=function(i,r){return this.totalTime(Us(this,i),jr(r))},e.restart=function(i,r){return this.play().totalTime(i?-this._delay:0,jr(r))},e.play=function(i,r){return i!=null&&this.seek(i,r),this.reversed(!1).paused(!1)},e.reverse=function(i,r){return i!=null&&this.seek(i||this.totalDuration(),r),this.reversed(!0).paused(!1)},e.pause=function(i,r){return i!=null&&this.seek(i,r),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(i){return arguments.length?(!!i!==this.reversed()&&this.timeScale(-this._rts||(i?-yn:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-yn,this},e.isActive=function(){var i=this.parent||this._dp,r=this._start,s;return!!(!i||this._ts&&this._initted&&i.isActive()&&(s=i.rawTime(!0))>=r&&s<this.endTime(!0)-yn)},e.eventCallback=function(i,r,s){var o=this.vars;return arguments.length>1?(r?(o[i]=r,s&&(o[i+"Params"]=s),i==="onUpdate"&&(this._onUpdate=r)):delete o[i],this):o[i]},e.then=function(i){var r=this;return new Promise(function(s){var o=Yn(i)?i:V4,a=function(){var u=r.then;r.then=null,Yn(o)&&(o=o(r))&&(o.then||o===r)&&(r.then=u),s(o),r.then=u};r._initted&&r.totalProgress()===1&&r._ts>=0||!r._tTime&&r._ts<0?a():r._prom=a})},e.kill=function(){Ap(this)},n}();Qs(ed.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-yn,_prom:0,_ps:!1,_rts:1});var Br=function(n){P4(e,n);function e(i,r){var s;return i===void 0&&(i={}),s=n.call(this,i)||this,s.labels={},s.smoothChildTiming=!!i.smoothChildTiming,s.autoRemoveChildren=!!i.autoRemoveChildren,s._sort=jr(i.sortChildren),On&&jo(i.parent||On,Ea(s),r),i.reversed&&s.reverse(),i.paused&&s.paused(!0),i.scrollTrigger&&W4(Ea(s),i.scrollTrigger),s}var t=e.prototype;return t.to=function(r,s,o){return om(0,arguments,this),this},t.from=function(r,s,o){return om(1,arguments,this),this},t.fromTo=function(r,s,o,a){return om(2,arguments,this),this},t.set=function(r,s,o){return s.duration=0,s.parent=this,sm(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new hi(r,s,Us(this,o),1),this},t.call=function(r,s,o){return jo(this,hi.delayedCall(0,r,s),o)},t.staggerTo=function(r,s,o,a,l,u,f){return o.duration=s,o.stagger=o.stagger||a,o.onComplete=u,o.onCompleteParams=f,o.parent=this,new hi(r,o,Us(this,l)),this},t.staggerFrom=function(r,s,o,a,l,u,f){return o.runBackwards=1,sm(o).immediateRender=jr(o.immediateRender),this.staggerTo(r,s,o,a,l,u,f)},t.staggerFromTo=function(r,s,o,a,l,u,f,d){return a.startAt=o,sm(a).immediateRender=jr(a.immediateRender),this.staggerTo(r,s,a,l,u,f,d)},t.render=function(r,s,o){var a=this._time,l=this._dirty?this.totalDuration():this._tDur,u=this._dur,f=r<=0?0:Hi(r),d=this._zTime<0!=r<0&&(this._initted||!u),p,m,g,y,x,v,w,S,T,b,P,R;if(this!==On&&f>l&&r>=0&&(f=l),f!==this._tTime||o||d){if(a!==this._time&&u&&(f+=this._time-a,r+=this._time-a),p=f,T=this._start,S=this._ts,v=!S,d&&(u||(a=this._zTime),(r||!s)&&(this._zTime=r)),this._repeat){if(P=this._yoyo,x=u+this._rDelay,this._repeat<-1&&r<0)return this.totalTime(x*100+r,s,o);if(p=Hi(f%x),f===l?(y=this._repeat,p=u):(y=~~(f/x),y&&y===f/x&&(p=u,y--),p>u&&(p=u)),b=Kh(this._tTime,x),!a&&this._tTime&&b!==y&&this._tTime-b*x-this._dur<=0&&(b=y),P&&y&1&&(p=u-p,R=1),y!==b&&!this._lock){var D=P&&b&1,C=D===(P&&y&1);if(y<b&&(D=!D),a=D?0:u,this._lock=1,this.render(a||(R?0:Hi(y*x)),s,!u)._lock=0,this._tTime=f,!s&&this.parent&&Xs(this,"onRepeat"),this.vars.repeatRefresh&&!R&&(this.invalidate()._lock=1),a&&a!==this._time||v!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(u=this._dur,l=this._tDur,C&&(this._lock=2,a=D?u:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!R&&this.invalidate()),this._lock=0,!this._ts&&!v)return this;sV(this,R)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(w=Aoe(this,Hi(a),Hi(p)),w&&(f-=p-(p=w._start))),this._tTime=f,this._time=p,this._act=!S,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=r,a=0),!a&&p&&!s&&!y&&(Xs(this,"onStart"),this._tTime!==f))return this;if(p>=a&&r>=0)for(m=this._first;m;){if(g=m._next,(m._act||p>=m._start)&&m._ts&&w!==m){if(m.parent!==this)return this.render(r,s,o);if(m.render(m._ts>0?(p-m._start)*m._ts:(m._dirty?m.totalDuration():m._tDur)+(p-m._start)*m._ts,s,o),p!==this._time||!this._ts&&!v){w=0,g&&(f+=this._zTime=-yn);break}}m=g}else{m=this._last;for(var L=r<0?r:p;m;){if(g=m._prev,(m._act||L<=m._end)&&m._ts&&w!==m){if(m.parent!==this)return this.render(r,s,o);if(m.render(m._ts>0?(L-m._start)*m._ts:(m._dirty?m.totalDuration():m._tDur)+(L-m._start)*m._ts,s,o||ar&&(m._initted||m._startAt)),p!==this._time||!this._ts&&!v){w=0,g&&(f+=this._zTime=L?-yn:yn);break}}m=g}}if(w&&!s&&(this.pause(),w.render(p>=a?0:-yn)._zTime=p>=a?1:-1,this._ts))return this._start=T,e1(this),this.render(r,s,o);this._onUpdate&&!s&&Xs(this,"onUpdate",!0),(f===l&&this._tTime>=this.totalDuration()||!f&&a)&&(T===this._start||Math.abs(S)!==Math.abs(this._ts))&&(this._lock||((r||!u)&&(f===l&&this._ts>0||!f&&this._ts<0)&&au(this,1),!s&&!(r<0&&!a)&&(f||a||!l)&&(Xs(this,f===l&&r>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(f<l&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(r,s){var o=this;if(Za(s)||(s=Us(this,s,r)),!(r instanceof ed)){if(lr(r))return r.forEach(function(a){return o.add(a,s)}),this;if(Ni(r))return this.addLabel(r,s);if(Yn(r))r=hi.delayedCall(0,r);else return this}return this!==r?jo(this,r,s):this},t.getChildren=function(r,s,o,a){r===void 0&&(r=!0),s===void 0&&(s=!0),o===void 0&&(o=!0),a===void 0&&(a=-Ws);for(var l=[],u=this._first;u;)u._start>=a&&(u instanceof hi?s&&l.push(u):(o&&l.push(u),r&&l.push.apply(l,u.getChildren(!0,s,o)))),u=u._next;return l},t.getById=function(r){for(var s=this.getChildren(1,1,1),o=s.length;o--;)if(s[o].vars.id===r)return s[o]},t.remove=function(r){return Ni(r)?this.removeLabel(r):Yn(r)?this.killTweensOf(r):(Qx(this,r),r===this._recent&&(this._recent=this._last),wc(this))},t.totalTime=function(r,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Hi(us.time-(this._ts>0?r/this._ts:(this.totalDuration()-r)/-this._ts))),n.prototype.totalTime.call(this,r,s),this._forcing=0,this):this._tTime},t.addLabel=function(r,s){return this.labels[r]=Us(this,s),this},t.removeLabel=function(r){return delete this.labels[r],this},t.addPause=function(r,s,o){var a=hi.delayedCall(0,s||rg,o);return a.data="isPause",this._hasPause=1,jo(this,a,Us(this,r))},t.removePause=function(r){var s=this._first;for(r=Us(this,r);s;)s._start===r&&s.data==="isPause"&&au(s),s=s._next},t.killTweensOf=function(r,s,o){for(var a=this.getTweensOf(r,o),l=a.length;l--;)Rl!==a[l]&&a[l].kill(r,s);return this},t.getTweensOf=function(r,s){for(var o=[],a=js(r),l=this._first,u=Za(s),f;l;)l instanceof hi?woe(l._targets,a)&&(u?(!Rl||l._initted&&l._ts)&&l.globalTime(0)<=s&&l.globalTime(l.totalDuration())>s:!s||l.isActive())&&o.push(l):(f=l.getTweensOf(a,s)).length&&o.push.apply(o,f),l=l._next;return o},t.tweenTo=function(r,s){s=s||{};var o=this,a=Us(o,r),l=s,u=l.startAt,f=l.onStart,d=l.onStartParams,p=l.immediateRender,m,g=hi.to(o,Qs({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:s.duration||Math.abs((a-(u&&"time"in u?u.time:o._time))/o.timeScale())||yn,onStart:function(){if(o.pause(),!m){var x=s.duration||Math.abs((a-(u&&"time"in u?u.time:o._time))/o.timeScale());g._dur!==x&&Jh(g,x,0,1).render(g._time,!0,!0),m=1}f&&f.apply(g,d||[])}},s));return p?g.render(0):g},t.tweenFromTo=function(r,s,o){return this.tweenTo(s,Qs({startAt:{time:Us(this,r)}},o))},t.recent=function(){return this._recent},t.nextLabel=function(r){return r===void 0&&(r=this._time),DI(this,Us(this,r))},t.previousLabel=function(r){return r===void 0&&(r=this._time),DI(this,Us(this,r),1)},t.currentLabel=function(r){return arguments.length?this.seek(r,!0):this.previousLabel(this._time+yn)},t.shiftChildren=function(r,s,o){o===void 0&&(o=0);for(var a=this._first,l=this.labels,u;a;)a._start>=o&&(a._start+=r,a._end+=r),a=a._next;if(s)for(u in l)l[u]>=o&&(l[u]+=r);return wc(this)},t.invalidate=function(r){var s=this._first;for(this._lock=0;s;)s.invalidate(r),s=s._next;return n.prototype.invalidate.call(this,r)},t.clear=function(r){r===void 0&&(r=!0);for(var s=this._first,o;s;)o=s._next,this.remove(s),s=o;return this._dp&&(this._time=this._tTime=this._pTime=0),r&&(this.labels={}),wc(this)},t.totalDuration=function(r){var s=0,o=this,a=o._last,l=Ws,u,f,d;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-r:r));if(o._dirty){for(d=o.parent;a;)u=a._prev,a._dirty&&a.totalDuration(),f=a._start,f>l&&o._sort&&a._ts&&!o._lock?(o._lock=1,jo(o,a,f-a._delay,1)._lock=0):l=f,f<0&&a._ts&&(s-=f,(!d&&!o._dp||d&&d.smoothChildTiming)&&(o._start+=f/o._ts,o._time-=f,o._tTime-=f),o.shiftChildren(-f,!1,-1/0),l=0),a._end>s&&a._ts&&(s=a._end),a=u;Jh(o,o===On&&o._time>s?o._time:s,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(r){if(On._ts&&(z4(On,q_(r,On)),U4=us.frame),us.frame>=CI){CI+=gs.autoSleep||120;var s=On._first;if((!s||!s._ts)&&gs.autoSleep&&us._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||us.sleep()}}},e}(ed);Qs(Br.prototype,{_lock:0,_hasPause:0,_forcing:0});var joe=function(e,t,i,r,s,o,a){var l=new Yr(this._pt,e,t,0,1,dV,null,s),u=0,f=0,d,p,m,g,y,x,v,w;for(l.b=i,l.e=r,i+="",r+="",(v=~r.indexOf("random("))&&(r=sg(r)),o&&(w=[i,r],o(w,e,t),i=w[0],r=w[1]),p=i.match(zw)||[];d=zw.exec(r);)g=d[0],y=r.substring(u,d.index),m?m=(m+1)%5:y.substr(-5)==="rgba("&&(m=1),g!==p[f++]&&(x=parseFloat(p[f-1])||0,l._pt={_next:l._pt,p:y||f===1?y:",",s:x,c:g.charAt(1)==="="?Dh(x,g)-x:parseFloat(g)-x,m:m&&m<4?Math.round:0},u=zw.lastIndex);return l.c=u<r.length?r.substring(u,r.length):"",l.fp=a,(L4.test(r)||v)&&(l.e=0),this._pt=l,l},xP=function(e,t,i,r,s,o,a,l,u,f){Yn(r)&&(r=r(s||0,e,o));var d=e[t],p=i!=="get"?i:Yn(d)?u?e[t.indexOf("set")||!Yn(e["get"+t.substr(3)])?t:"get"+t.substr(3)](u):e[t]():d,m=Yn(d)?u?$oe:fV:wP,g;if(Ni(r)&&(~r.indexOf("random(")&&(r=sg(r)),r.charAt(1)==="="&&(g=Dh(p,r)+(rr(p)||0),(g||g===0)&&(r=g))),!f||p!==r||ME)return!isNaN(p*r)&&r!==""?(g=new Yr(this._pt,e,t,+p||0,r-(p||0),typeof d=="boolean"?Joe:hV,0,m),u&&(g.fp=u),a&&g.modifier(a,this,e),this._pt=g):(!d&&!(t in e)&&gP(t,r),joe.call(this,e,t,p,r,m,l||gs.stringFilter,u))},Xoe=function(e,t,i,r,s){if(Yn(e)&&(e=am(e,s,t,i,r)),!sa(e)||e.style&&e.nodeType||lr(e)||R4(e))return Ni(e)?am(e,s,t,i,r):e;var o={},a;for(a in e)o[a]=am(e[a],s,t,i,r);return o},lV=function(e,t,i,r,s,o){var a,l,u,f;if(as[e]&&(a=new as[e]).init(s,a.rawVars?t[e]:Xoe(t[e],r,s,o,i),i,r,o)!==!1&&(i._pt=l=new Yr(i._pt,s,e,0,1,a.render,a,0,a.priority),i!==yh))for(u=i._ptLookup[i._targets.indexOf(s)],f=a._props.length;f--;)u[a._props[f]]=l;return a},Rl,ME,SP=function n(e,t,i){var r=e.vars,s=r.ease,o=r.startAt,a=r.immediateRender,l=r.lazy,u=r.onUpdate,f=r.onUpdateParams,d=r.callbackScope,p=r.runBackwards,m=r.yoyoEase,g=r.keyframes,y=r.autoRevert,x=e._dur,v=e._startAt,w=e._targets,S=e.parent,T=S&&S.data==="nested"?S.vars.targets:w,b=e._overwrite==="auto"&&!hP,P=e.timeline,R,D,C,L,F,H,G,W,X,re,Q,z,j;if(P&&(!g||!s)&&(s="none"),e._ease=Mc(s,$h.ease),e._yEase=m?rV(Mc(m===!0?s:m,$h.ease)):0,m&&e._yoyo&&!e._repeat&&(m=e._yEase,e._yEase=e._ease,e._ease=m),e._from=!P&&!!r.runBackwards,!P||g&&!r.stagger){if(W=w[0]?Sc(w[0]).harness:0,z=W&&r[W.prop],R=Y_(r,vP),v&&(v._zTime<0&&v.progress(1),t<0&&p&&a&&!y?v.render(-1,!0):v.revert(p&&x?jy:xoe),v._lazy=0),o){if(au(e._startAt=hi.set(w,Qs({data:"isStart",overwrite:!1,parent:S,immediateRender:!0,lazy:!v&&jr(l),startAt:null,delay:0,onUpdate:u,onUpdateParams:f,callbackScope:d,stagger:0},o))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(ar||!a&&!y)&&e._startAt.revert(jy),a&&x&&t<=0&&i<=0){t&&(e._zTime=t);return}}else if(p&&x&&!v){if(t&&(a=!1),C=Qs({overwrite:!1,data:"isFromStart",lazy:a&&!v&&jr(l),immediateRender:a,stagger:0,parent:S},R),z&&(C[W.prop]=z),au(e._startAt=hi.set(w,C)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(ar?e._startAt.revert(jy):e._startAt.render(-1,!0)),e._zTime=t,!a)n(e._startAt,yn,yn);else if(!t)return}for(e._pt=e._ptCache=0,l=x&&jr(l)||l&&!x,D=0;D<w.length;D++){if(F=w[D],G=F._gsap||_P(w)[D]._gsap,e._ptLookup[D]=re={},vE[G.id]&&Zl.length&&X_(),Q=T===w?D:T.indexOf(F),W&&(X=new W).init(F,z||R,e,Q,T)!==!1&&(e._pt=L=new Yr(e._pt,F,X.name,0,1,X.render,X,0,X.priority),X._props.forEach(function(I){re[I]=L}),X.priority&&(H=1)),!W||z)for(C in R)as[C]&&(X=lV(C,R,e,Q,F,T))?X.priority&&(H=1):re[C]=L=xP.call(e,F,C,"get",R[C],Q,T,0,r.stringFilter);e._op&&e._op[D]&&e.kill(F,e._op[D]),b&&e._pt&&(Rl=e,On.killTweensOf(F,re,e.globalTime(t)),j=!e.parent,Rl=0),e._pt&&l&&(vE[G.id]=1)}H&&pV(e),e._onInit&&e._onInit(e)}e._onUpdate=u,e._initted=(!e._op||e._pt)&&!j,g&&t<=0&&P.render(Ws,!0,!0)},Yoe=function(e,t,i,r,s,o,a){var l=(e._pt&&e._ptCache||(e._ptCache={}))[t],u,f,d,p;if(!l)for(l=e._ptCache[t]=[],d=e._ptLookup,p=e._targets.length;p--;){if(u=d[p][t],u&&u.d&&u.d._pt)for(u=u.d._pt;u&&u.p!==t&&u.fp!==t;)u=u._next;if(!u)return ME=1,e.vars[t]="+=0",SP(e,a),ME=0,1;l.push(u)}for(p=l.length;p--;)f=l[p],u=f._pt||f,u.s=(r||r===0)&&!s?r:u.s+(r||0)+o*u.c,u.c=i-u.s,f.e&&(f.e=Kn(i)+rr(f.e)),f.b&&(f.b=u.s+rr(f.b))},qoe=function(e,t){var i=e[0]?Sc(e[0]).harness:0,r=i&&i.aliases,s,o,a,l;if(!r)return t;s=Uc({},t);for(o in r)if(o in s)for(l=r[o].split(","),a=l.length;a--;)s[l[a]]=s[o];return s},Zoe=function(e,t,i,r){var s=t.ease||r||"power1.inOut",o,a;if(lr(t))a=i[e]||(i[e]=[]),t.forEach(function(l,u){return a.push({t:u/(t.length-1)*100,v:l,e:s})});else for(o in t)a=i[o]||(i[o]=[]),o==="ease"||a.push({t:parseFloat(e),v:t[o],e:s})},am=function(e,t,i,r,s){return Yn(e)?e.call(t,i,r,s):Ni(e)&&~e.indexOf("random(")?sg(e):e},uV=yP+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",cV={};Xr(uV+",id,stagger,delay,duration,paused,scrollTrigger",function(n){return cV[n]=1});var hi=function(n){P4(e,n);function e(i,r,s,o){var a;typeof r=="number"&&(s.duration=r,r=s,s=null),a=n.call(this,o?r:sm(r))||this;var l=a.vars,u=l.duration,f=l.delay,d=l.immediateRender,p=l.stagger,m=l.overwrite,g=l.keyframes,y=l.defaults,x=l.scrollTrigger,v=l.yoyoEase,w=r.parent||On,S=(lr(i)||R4(i)?Za(i[0]):"length"in r)?[i]:js(i),T,b,P,R,D,C,L,F;if(a._targets=S.length?_P(S):j_("GSAP target "+i+" not found. https://greensock.com",!gs.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=m,g||p||ny(u)||ny(f)){if(r=a.vars,T=a.timeline=new Br({data:"nested",defaults:y||{},targets:w&&w.data==="nested"?w.vars.targets:S}),T.kill(),T.parent=T._dp=Ea(a),T._start=0,p||ny(u)||ny(f)){if(R=S.length,L=p&&q4(p),sa(p))for(D in p)~uV.indexOf(D)&&(F||(F={}),F[D]=p[D]);for(b=0;b<R;b++)P=Y_(r,cV),P.stagger=0,v&&(P.yoyoEase=v),F&&Uc(P,F),C=S[b],P.duration=+am(u,Ea(a),b,C,S),P.delay=(+am(f,Ea(a),b,C,S)||0)-a._delay,!p&&R===1&&P.delay&&(a._delay=f=P.delay,a._start+=f,P.delay=0),T.to(C,P,L?L(b,C,S):0),T._ease=Yt.none;T.duration()?u=f=0:a.timeline=0}else if(g){sm(Qs(T.vars.defaults,{ease:"none"})),T._ease=Mc(g.ease||r.ease||"none");var H=0,G,W,X;if(lr(g))g.forEach(function(re){return T.to(S,re,">")}),T.duration();else{P={};for(D in g)D==="ease"||D==="easeEach"||Zoe(D,g[D],P,g.easeEach);for(D in P)for(G=P[D].sort(function(re,Q){return re.t-Q.t}),H=0,b=0;b<G.length;b++)W=G[b],X={ease:W.e,duration:(W.t-(b?G[b-1].t:0))/100*u},X[D]=W.v,T.to(S,X,H),H+=X.duration;T.duration()<u&&T.to({},{duration:u-T.duration()})}}u||a.duration(u=T.duration())}else a.timeline=0;return m===!0&&!hP&&(Rl=Ea(a),On.killTweensOf(S),Rl=0),jo(w,Ea(a),s),r.reversed&&a.reverse(),r.paused&&a.paused(!0),(d||!u&&!g&&a._start===Hi(w._time)&&jr(d)&&boe(Ea(a))&&w.data!=="nested")&&(a._tTime=-yn,a.render(Math.max(0,-f)||0)),x&&W4(Ea(a),x),a}var t=e.prototype;return t.render=function(r,s,o){var a=this._time,l=this._tDur,u=this._dur,f=r<0,d=r>l-yn&&!f?l:r<yn?0:r,p,m,g,y,x,v,w,S,T;if(!u)Poe(this,r,s,o);else if(d!==this._tTime||!r||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==f){if(p=d,S=this.timeline,this._repeat){if(y=u+this._rDelay,this._repeat<-1&&f)return this.totalTime(y*100+r,s,o);if(p=Hi(d%y),d===l?(g=this._repeat,p=u):(g=~~(d/y),g&&g===d/y&&(p=u,g--),p>u&&(p=u)),v=this._yoyo&&g&1,v&&(T=this._yEase,p=u-p),x=Kh(this._tTime,y),p===a&&!o&&this._initted)return this._tTime=d,this;g!==x&&(S&&this._yEase&&sV(S,v),this.vars.repeatRefresh&&!v&&!this._lock&&(this._lock=o=1,this.render(Hi(y*g),!0).invalidate()._lock=0))}if(!this._initted){if(j4(this,f?r:p,o,s,d))return this._tTime=0,this;if(a!==this._time)return this;if(u!==this._dur)return this.render(r,s,o)}if(this._tTime=d,this._time=p,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=w=(T||this._ease)(p/u),this._from&&(this.ratio=w=1-w),p&&!a&&!s&&!g&&(Xs(this,"onStart"),this._tTime!==d))return this;for(m=this._pt;m;)m.r(w,m.d),m=m._next;S&&S.render(r<0?r:!p&&v?-yn:S._dur*S._ease(p/this._dur),s,o)||this._startAt&&(this._zTime=r),this._onUpdate&&!s&&(f&&yE(this,r,s,o),Xs(this,"onUpdate")),this._repeat&&g!==x&&this.vars.onRepeat&&!s&&this.parent&&Xs(this,"onRepeat"),(d===this._tDur||!d)&&this._tTime===d&&(f&&!this._onUpdate&&yE(this,r,!0,!0),(r||!u)&&(d===this._tDur&&this._ts>0||!d&&this._ts<0)&&au(this,1),!s&&!(f&&!a)&&(d||a||v)&&(Xs(this,d===l?"onComplete":"onReverseComplete",!0),this._prom&&!(d<l&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(r){return(!r||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(r),n.prototype.invalidate.call(this,r)},t.resetTo=function(r,s,o,a){og||us.wake(),this._ts||this.play();var l=Math.min(this._dur,(this._dp._time-this._start)*this._ts),u;return this._initted||SP(this,l),u=this._ease(l/this._dur),Yoe(this,r,s,o,a,u,l)?this.resetTo(r,s,o,a):(t1(this,0),this.parent||H4(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(r,s){if(s===void 0&&(s="all"),!r&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?Ap(this):this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(r,s,Rl&&Rl.vars.overwrite!==!0)._first||Ap(this),this.parent&&o!==this.timeline.totalDuration()&&Jh(this,this._dur*this.timeline._tDur/o,0,1),this}var a=this._targets,l=r?js(r):a,u=this._ptLookup,f=this._pt,d,p,m,g,y,x,v;if((!s||s==="all")&&Toe(a,l))return s==="all"&&(this._pt=0),Ap(this);for(d=this._op=this._op||[],s!=="all"&&(Ni(s)&&(y={},Xr(s,function(w){return y[w]=1}),s=y),s=qoe(a,s)),v=a.length;v--;)if(~l.indexOf(a[v])){p=u[v],s==="all"?(d[v]=s,g=p,m={}):(m=d[v]=d[v]||{},g=s);for(y in g)x=p&&p[y],x&&((!("kill"in x.d)||x.d.kill(y)===!0)&&Qx(this,x,"_pt"),delete p[y]),m!=="all"&&(m[y]=1)}return this._initted&&!this._pt&&f&&Ap(this),this},e.to=function(r,s){return new e(r,s,arguments[2])},e.from=function(r,s){return om(1,arguments)},e.delayedCall=function(r,s,o,a){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:r,onComplete:s,onReverseComplete:s,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},e.fromTo=function(r,s,o){return om(2,arguments)},e.set=function(r,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(r,s)},e.killTweensOf=function(r,s,o){return On.killTweensOf(r,s,o)},e}(ed);Qs(hi.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Xr("staggerTo,staggerFrom,staggerFromTo",function(n){hi[n]=function(){var e=new Br,t=xE.call(arguments,0);return t.splice(n==="staggerFromTo"?5:4,0,0),e[n].apply(e,t)}});var wP=function(e,t,i){return e[t]=i},fV=function(e,t,i){return e[t](i)},$oe=function(e,t,i,r){return e[t](r.fp,i)},Koe=function(e,t,i){return e.setAttribute(t,i)},MP=function(e,t){return Yn(e[t])?fV:dP(e[t])&&e.setAttribute?Koe:wP},hV=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},Joe=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},dV=function(e,t){var i=t._pt,r="";if(!e&&t.b)r=t.b;else if(e===1&&t.e)r=t.e;else{for(;i;)r=i.p+(i.m?i.m(i.s+i.c*e):Math.round((i.s+i.c*e)*1e4)/1e4)+r,i=i._next;r+=t.c}t.set(t.t,t.p,r,t)},TP=function(e,t){for(var i=t._pt;i;)i.r(e,i.d),i=i._next},Qoe=function(e,t,i,r){for(var s=this._pt,o;s;)o=s._next,s.p===r&&s.modifier(e,t,i),s=o},eae=function(e){for(var t=this._pt,i,r;t;)r=t._next,t.p===e&&!t.op||t.op===e?Qx(this,t,"_pt"):t.dep||(i=1),t=r;return!i},tae=function(e,t,i,r){r.mSet(e,t,r.m.call(r.tween,i,r.mt),r)},pV=function(e){for(var t=e._pt,i,r,s,o;t;){for(i=t._next,r=s;r&&r.pr>t.pr;)r=r._next;(t._prev=r?r._prev:o)?t._prev._next=t:s=t,(t._next=r)?r._prev=t:o=t,t=i}e._pt=s},Yr=function(){function n(t,i,r,s,o,a,l,u,f){this.t=i,this.s=s,this.c=o,this.p=r,this.r=a||hV,this.d=l||this,this.set=u||wP,this.pr=f||0,this._next=t,t&&(t._prev=this)}var e=n.prototype;return e.modifier=function(i,r,s){this.mSet=this.mSet||this.set,this.set=tae,this.m=i,this.mt=s,this.tween=r},n}();Xr(yP+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(n){return vP[n]=1});_s.TweenMax=_s.TweenLite=hi;_s.TimelineLite=_s.TimelineMax=Br;On=new Br({sortChildren:!1,defaults:$h,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});gs.stringFilter=iV;var td=[],Yy={},nae=[],II=0,Ww=function(e){return(Yy[e]||nae).map(function(t){return t()})},TE=function(){var e=Date.now(),t=[];e-II>2&&(Ww("matchMediaInit"),td.forEach(function(i){var r=i.queries,s=i.conditions,o,a,l,u;for(a in r)o=Fs.matchMedia(r[a]).matches,o&&(l=1),o!==s[a]&&(s[a]=o,u=1);u&&(i.revert(),l&&t.push(i))}),Ww("matchMediaRevert"),t.forEach(function(i){return i.onMatch(i)}),II=e,Ww("matchMedia"))},mV=function(){function n(t,i){this.selector=i&&SE(i),this.data=[],this._r=[],this.isReverted=!1,t&&this.add(t)}var e=n.prototype;return e.add=function(i,r,s){Yn(i)&&(s=r,r=i,i=Yn);var o=this,a=function(){var u=oi,f=o.selector,d;return u&&u!==o&&u.data.push(o),s&&(o.selector=SE(s)),oi=o,d=r.apply(o,arguments),Yn(d)&&o._r.push(d),oi=u,o.selector=f,o.isReverted=!1,d};return o.last=a,i===Yn?a(o):i?o[i]=a:a},e.ignore=function(i){var r=oi;oi=null,i(this),oi=r},e.getTweens=function(){var i=[];return this.data.forEach(function(r){return r instanceof n?i.push.apply(i,r.getTweens()):r instanceof hi&&!(r.parent&&r.parent.data==="nested")&&i.push(r)}),i},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(i,r){var s=this;if(i){var o=this.getTweens();this.data.forEach(function(l){l.data==="isFlip"&&(l.revert(),l.getChildren(!0,!0,!1).forEach(function(u){return o.splice(o.indexOf(u),1)}))}),o.map(function(l){return{g:l.globalTime(0),t:l}}).sort(function(l,u){return u.g-l.g||-1}).forEach(function(l){return l.t.revert(i)}),this.data.forEach(function(l){return!(l instanceof ed)&&l.revert&&l.revert(i)}),this._r.forEach(function(l){return l(i,s)}),this.isReverted=!0}else this.data.forEach(function(l){return l.kill&&l.kill()});if(this.clear(),r){var a=td.indexOf(this);~a&&td.splice(a,1)}},e.revert=function(i){this.kill(i||{})},n}(),iae=function(){function n(t){this.contexts=[],this.scope=t}var e=n.prototype;return e.add=function(i,r,s){sa(i)||(i={matches:i});var o=new mV(0,s||this.scope),a=o.conditions={},l,u,f;this.contexts.push(o),r=o.add("onMatch",r),o.queries=i;for(u in i)u==="all"?f=1:(l=Fs.matchMedia(i[u]),l&&(td.indexOf(o)<0&&td.push(o),(a[u]=l.matches)&&(f=1),l.addListener?l.addListener(TE):l.addEventListener("change",TE)));return f&&r(o),this},e.revert=function(i){this.kill(i||{})},e.kill=function(i){this.contexts.forEach(function(r){return r.kill(i,!0)})},n}(),Z_={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t.forEach(function(r){return eV(r)})},timeline:function(e){return new Br(e)},getTweensOf:function(e,t){return On.getTweensOf(e,t)},getProperty:function(e,t,i,r){Ni(e)&&(e=js(e)[0]);var s=Sc(e||{}).get,o=i?V4:B4;return i==="native"&&(i=""),e&&(t?o((as[t]&&as[t].get||s)(e,t,i,r)):function(a,l,u){return o((as[a]&&as[a].get||s)(e,a,l,u))})},quickSetter:function(e,t,i){if(e=js(e),e.length>1){var r=e.map(function(f){return $r.quickSetter(f,t,i)}),s=r.length;return function(f){for(var d=s;d--;)r[d](f)}}e=e[0]||{};var o=as[t],a=Sc(e),l=a.harness&&(a.harness.aliases||{})[t]||t,u=o?function(f){var d=new o;yh._pt=0,d.init(e,i?f+i:f,yh,0,[e]),d.render(1,d),yh._pt&&TP(1,yh)}:a.set(e,l);return o?u:function(f){return u(e,l,i?f+i:f,a,1)}},quickTo:function(e,t,i){var r,s=$r.to(e,Uc((r={},r[t]="+=0.1",r.paused=!0,r),i||{})),o=function(l,u,f){return s.resetTo(t,l,u,f)};return o.tween=s,o},isTweening:function(e){return On.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=Mc(e.ease,$h.ease)),PI($h,e||{})},config:function(e){return PI(gs,e||{})},registerEffect:function(e){var t=e.name,i=e.effect,r=e.plugins,s=e.defaults,o=e.extendTimeline;(r||"").split(",").forEach(function(a){return a&&!as[a]&&!_s[a]&&j_(t+" effect requires "+a+" plugin.")}),Bw[t]=function(a,l,u){return i(js(a),Qs(l||{},s),u)},o&&(Br.prototype[t]=function(a,l,u){return this.add(Bw[t](a,sa(l)?l:(u=l)&&{},this),u)})},registerEase:function(e,t){Yt[e]=Mc(t)},parseEase:function(e,t){return arguments.length?Mc(e,t):Yt},getById:function(e){return On.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var i=new Br(e),r,s;for(i.smoothChildTiming=jr(e.smoothChildTiming),On.remove(i),i._dp=0,i._time=i._tTime=On._time,r=On._first;r;)s=r._next,(t||!(!r._dur&&r instanceof hi&&r.vars.onComplete===r._targets[0]))&&jo(i,r,r._start-r._delay),r=s;return jo(On,i,0),i},context:function(e,t){return e?new mV(e,t):oi},matchMedia:function(e){return new iae(e)},matchMediaRefresh:function(){return td.forEach(function(e){var t=e.conditions,i,r;for(r in t)t[r]&&(t[r]=!1,i=1);i&&e.revert()})||TE()},addEventListener:function(e,t){var i=Yy[e]||(Yy[e]=[]);~i.indexOf(t)||i.push(t)},removeEventListener:function(e,t){var i=Yy[e],r=i&&i.indexOf(t);r>=0&&i.splice(r,1)},utils:{wrap:Noe,wrapYoyo:Uoe,distribute:q4,random:$4,snap:Z4,normalize:Ooe,getUnit:rr,clamp:Doe,splitColor:tV,toArray:js,selector:SE,mapRange:J4,pipe:Ioe,unitize:koe,interpolate:Foe,shuffle:Y4},install:O4,effects:Bw,ticker:us,updateRoot:Br.updateRoot,plugins:as,globalTimeline:On,core:{PropTween:Yr,globals:N4,Tween:hi,Timeline:Br,Animation:ed,getCache:Sc,_removeLinkedListItem:Qx,reverting:function(){return ar},context:function(e){return e&&oi&&(oi.data.push(e),e._ctx=oi),oi},suppressOverwrites:function(e){return hP=e}}};Xr("to,from,fromTo,delayedCall,set,killTweensOf",function(n){return Z_[n]=hi[n]});us.add(Br.updateRoot);yh=Z_.to({},{duration:0});var rae=function(e,t){for(var i=e._pt;i&&i.p!==t&&i.op!==t&&i.fp!==t;)i=i._next;return i},sae=function(e,t){var i=e._targets,r,s,o;for(r in t)for(s=i.length;s--;)o=e._ptLookup[s][r],o&&(o=o.d)&&(o._pt&&(o=rae(o,r)),o&&o.modifier&&o.modifier(t[r],e,i[s],r))},jw=function(e,t){return{name:e,rawVars:1,init:function(r,s,o){o._onInit=function(a){var l,u;if(Ni(s)&&(l={},Xr(s,function(f){return l[f]=1}),s=l),t){l={};for(u in s)l[u]=t(s[u]);s=l}sae(a,s)}}}},$r=Z_.registerPlugin({name:"attr",init:function(e,t,i,r,s){var o,a,l;this.tween=i;for(o in t)l=e.getAttribute(o)||"",a=this.add(e,"setAttribute",(l||0)+"",t[o],r,s,0,0,o),a.op=o,a.b=l,this._props.push(o)},render:function(e,t){for(var i=t._pt;i;)ar?i.set(i.t,i.p,i.b,i):i.r(e,i.d),i=i._next}},{name:"endArray",init:function(e,t){for(var i=t.length;i--;)this.add(e,i,e[i]||0,t[i],0,0,0,0,0,1)}},jw("roundProps",wE),jw("modifiers"),jw("snap",Z4))||Z_;hi.version=Br.version=$r.version="3.11.5";k4=1;pP()&&Qh();Yt.Power0;Yt.Power1;Yt.Power2;Yt.Power3;Yt.Power4;Yt.Linear;Yt.Quad;Yt.Cubic;Yt.Quart;Yt.Quint;Yt.Strong;Yt.Elastic;Yt.Back;Yt.SteppedEase;Yt.Bounce;Yt.Sine;Yt.Expo;Yt.Circ;/*!
 * CSSPlugin 3.11.5
 * https://greensock.com
 *
 * Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var kI,Dl,Lh,EP,cc,OI,bP,oae=function(){return typeof window<"u"},$a={},Zu=180/Math.PI,Ih=Math.PI/180,Bf=Math.atan2,NI=1e8,CP=/([A-Z])/g,aae=/(left|right|width|margin|padding|x)/i,lae=/[\s,\(]\S/,Yo={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},EE=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},uae=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},cae=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},fae=function(e,t){var i=t.s+t.c*e;t.set(t.t,t.p,~~(i+(i<0?-.5:.5))+t.u,t)},gV=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},vV=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},hae=function(e,t,i){return e.style[t]=i},dae=function(e,t,i){return e.style.setProperty(t,i)},pae=function(e,t,i){return e._gsap[t]=i},mae=function(e,t,i){return e._gsap.scaleX=e._gsap.scaleY=i},gae=function(e,t,i,r,s){var o=e._gsap;o.scaleX=o.scaleY=i,o.renderTransform(s,o)},vae=function(e,t,i,r,s){var o=e._gsap;o[t]=i,o.renderTransform(s,o)},zn="transform",Co=zn+"Origin",yae=function n(e,t){var i=this,r=this.target,s=r.style;if(e in $a){if(this.tfm=this.tfm||{},e!=="transform")e=Yo[e]||e,~e.indexOf(",")?e.split(",").forEach(function(o){return i.tfm[o]=Ca(r,o)}):this.tfm[e]=r._gsap.x?r._gsap[e]:Ca(r,e);else return Yo.transform.split(",").forEach(function(o){return n.call(i,o,t)});if(this.props.indexOf(zn)>=0)return;r._gsap.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push(Co,t,"")),e=zn}(s||t)&&this.props.push(e,t,s[e])},yV=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},_ae=function(){var e=this.props,t=this.target,i=t.style,r=t._gsap,s,o;for(s=0;s<e.length;s+=3)e[s+1]?t[e[s]]=e[s+2]:e[s+2]?i[e[s]]=e[s+2]:i.removeProperty(e[s].substr(0,2)==="--"?e[s]:e[s].replace(CP,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)r[o]=this.tfm[o];r.svg&&(r.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),s=bP(),(!s||!s.isStart)&&!i[zn]&&(yV(i),r.uncache=1)}},_V=function(e,t){var i={target:e,props:[],revert:_ae,save:yae};return e._gsap||$r.core.getCache(e),t&&t.split(",").forEach(function(r){return i.save(r)}),i},xV,bE=function(e,t){var i=Dl.createElementNS?Dl.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Dl.createElement(e);return i.style?i:Dl.createElement(e)},Qo=function n(e,t,i){var r=getComputedStyle(e);return r[t]||r.getPropertyValue(t.replace(CP,"-$1").toLowerCase())||r.getPropertyValue(t)||!i&&n(e,nd(t)||t,1)||""},UI="O,Moz,ms,Ms,Webkit".split(","),nd=function(e,t,i){var r=t||cc,s=r.style,o=5;if(e in s&&!i)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);o--&&!(UI[o]+e in s););return o<0?null:(o===3?"ms":o>=0?UI[o]:"")+e},CE=function(){oae()&&window.document&&(kI=window,Dl=kI.document,Lh=Dl.documentElement,cc=bE("div")||{style:{}},bE("div"),zn=nd(zn),Co=zn+"Origin",cc.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",xV=!!nd("perspective"),bP=$r.core.reverting,EP=1)},Xw=function n(e){var t=bE("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,r=this.nextSibling,s=this.style.cssText,o;if(Lh.appendChild(t),t.appendChild(this),this.style.display="block",e)try{o=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=n}catch{}else this._gsapBBox&&(o=this._gsapBBox());return i&&(r?i.insertBefore(this,r):i.appendChild(this)),Lh.removeChild(t),this.style.cssText=s,o},FI=function(e,t){for(var i=t.length;i--;)if(e.hasAttribute(t[i]))return e.getAttribute(t[i])},SV=function(e){var t;try{t=e.getBBox()}catch{t=Xw.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===Xw||(t=Xw.call(e,!0)),t&&!t.width&&!t.x&&!t.y?{x:+FI(e,["x","cx","x1"])||0,y:+FI(e,["y","cy","y1"])||0,width:0,height:0}:t},wV=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&SV(e))},ag=function(e,t){if(t){var i=e.style;t in $a&&t!==Co&&(t=zn),i.removeProperty?((t.substr(0,2)==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),i.removeProperty(t.replace(CP,"-$1").toLowerCase())):i.removeAttribute(t)}},Ll=function(e,t,i,r,s,o){var a=new Yr(e._pt,t,i,0,1,o?vV:gV);return e._pt=a,a.b=r,a.e=s,e._props.push(i),a},zI={deg:1,rad:1,turn:1},xae={grid:1,flex:1},lu=function n(e,t,i,r){var s=parseFloat(i)||0,o=(i+"").trim().substr((s+"").length)||"px",a=cc.style,l=aae.test(t),u=e.tagName.toLowerCase()==="svg",f=(u?"client":"offset")+(l?"Width":"Height"),d=100,p=r==="px",m=r==="%",g,y,x,v;return r===o||!s||zI[r]||zI[o]?s:(o!=="px"&&!p&&(s=n(e,t,i,"px")),v=e.getCTM&&wV(e),(m||o==="%")&&($a[t]||~t.indexOf("adius"))?(g=v?e.getBBox()[l?"width":"height"]:e[f],Kn(m?s/g*d:s/100*g)):(a[l?"width":"height"]=d+(p?o:r),y=~t.indexOf("adius")||r==="em"&&e.appendChild&&!u?e:e.parentNode,v&&(y=(e.ownerSVGElement||{}).parentNode),(!y||y===Dl||!y.appendChild)&&(y=Dl.body),x=y._gsap,x&&m&&x.width&&l&&x.time===us.time&&!x.uncache?Kn(s/x.width*d):((m||o==="%")&&!xae[Qo(y,"display")]&&(a.position=Qo(e,"position")),y===e&&(a.position="static"),y.appendChild(cc),g=cc[f],y.removeChild(cc),a.position="absolute",l&&m&&(x=Sc(y),x.time=us.time,x.width=y[f]),Kn(p?g*s/d:g&&s?d/g*s:0))))},Ca=function(e,t,i,r){var s;return EP||CE(),t in Yo&&t!=="transform"&&(t=Yo[t],~t.indexOf(",")&&(t=t.split(",")[0])),$a[t]&&t!=="transform"?(s=ug(e,r),s=t!=="transformOrigin"?s[t]:s.svg?s.origin:K_(Qo(e,Co))+" "+s.zOrigin+"px"):(s=e.style[t],(!s||s==="auto"||r||~(s+"").indexOf("calc("))&&(s=$_[t]&&$_[t](e,t,i)||Qo(e,t)||F4(e,t)||(t==="opacity"?1:0))),i&&!~(s+"").trim().indexOf(" ")?lu(e,t,s,i)+i:s},Sae=function(e,t,i,r){if(!i||i==="none"){var s=nd(t,e,1),o=s&&Qo(e,s,1);o&&o!==i?(t=s,i=o):t==="borderColor"&&(i=Qo(e,"borderTopColor"))}var a=new Yr(this._pt,e.style,t,0,1,dV),l=0,u=0,f,d,p,m,g,y,x,v,w,S,T,b;if(a.b=i,a.e=r,i+="",r+="",r==="auto"&&(e.style[t]=r,r=Qo(e,t)||r,e.style[t]=i),f=[i,r],iV(f),i=f[0],r=f[1],p=i.match(vh)||[],b=r.match(vh)||[],b.length){for(;d=vh.exec(r);)x=d[0],w=r.substring(l,d.index),g?g=(g+1)%5:(w.substr(-5)==="rgba("||w.substr(-5)==="hsla(")&&(g=1),x!==(y=p[u++]||"")&&(m=parseFloat(y)||0,T=y.substr((m+"").length),x.charAt(1)==="="&&(x=Dh(m,x)+T),v=parseFloat(x),S=x.substr((v+"").length),l=vh.lastIndex-S.length,S||(S=S||gs.units[t]||T,l===r.length&&(r+=S,a.e+=S)),T!==S&&(m=lu(e,t,y,S)||0),a._pt={_next:a._pt,p:w||u===1?w:",",s:m,c:v-m,m:g&&g<4||t==="zIndex"?Math.round:0});a.c=l<r.length?r.substring(l,r.length):""}else a.r=t==="display"&&r==="none"?vV:gV;return L4.test(r)&&(a.e=0),this._pt=a,a},BI={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},wae=function(e){var t=e.split(" "),i=t[0],r=t[1]||"50%";return(i==="top"||i==="bottom"||r==="left"||r==="right")&&(e=i,i=r,r=e),t[0]=BI[i]||i,t[1]=BI[r]||r,t.join(" ")},Mae=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var i=t.t,r=i.style,s=t.u,o=i._gsap,a,l,u;if(s==="all"||s===!0)r.cssText="",l=1;else for(s=s.split(","),u=s.length;--u>-1;)a=s[u],$a[a]&&(l=1,a=a==="transformOrigin"?Co:zn),ag(i,a);l&&(ag(i,zn),o&&(o.svg&&i.removeAttribute("transform"),ug(i,1),o.uncache=1,yV(r)))}},$_={clearProps:function(e,t,i,r,s){if(s.data!=="isFromStart"){var o=e._pt=new Yr(e._pt,t,i,0,0,Mae);return o.u=r,o.pr=-10,o.tween=s,e._props.push(i),1}}},lg=[1,0,0,1,0,0],MV={},TV=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},VI=function(e){var t=Qo(e,zn);return TV(t)?lg:t.substr(7).match(D4).map(Kn)},PP=function(e,t){var i=e._gsap||Sc(e),r=e.style,s=VI(e),o,a,l,u;return i.svg&&e.getAttribute("transform")?(l=e.transform.baseVal.consolidate().matrix,s=[l.a,l.b,l.c,l.d,l.e,l.f],s.join(",")==="1,0,0,1,0,0"?lg:s):(s===lg&&!e.offsetParent&&e!==Lh&&!i.svg&&(l=r.display,r.display="block",o=e.parentNode,(!o||!e.offsetParent)&&(u=1,a=e.nextElementSibling,Lh.appendChild(e)),s=VI(e),l?r.display=l:ag(e,"display"),u&&(a?o.insertBefore(e,a):o?o.appendChild(e):Lh.removeChild(e))),t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},PE=function(e,t,i,r,s,o){var a=e._gsap,l=s||PP(e,!0),u=a.xOrigin||0,f=a.yOrigin||0,d=a.xOffset||0,p=a.yOffset||0,m=l[0],g=l[1],y=l[2],x=l[3],v=l[4],w=l[5],S=t.split(" "),T=parseFloat(S[0])||0,b=parseFloat(S[1])||0,P,R,D,C;i?l!==lg&&(R=m*x-g*y)&&(D=T*(x/R)+b*(-y/R)+(y*w-x*v)/R,C=T*(-g/R)+b*(m/R)-(m*w-g*v)/R,T=D,b=C):(P=SV(e),T=P.x+(~S[0].indexOf("%")?T/100*P.width:T),b=P.y+(~(S[1]||S[0]).indexOf("%")?b/100*P.height:b)),r||r!==!1&&a.smooth?(v=T-u,w=b-f,a.xOffset=d+(v*m+w*y)-v,a.yOffset=p+(v*g+w*x)-w):a.xOffset=a.yOffset=0,a.xOrigin=T,a.yOrigin=b,a.smooth=!!r,a.origin=t,a.originIsAbsolute=!!i,e.style[Co]="0px 0px",o&&(Ll(o,a,"xOrigin",u,T),Ll(o,a,"yOrigin",f,b),Ll(o,a,"xOffset",d,a.xOffset),Ll(o,a,"yOffset",p,a.yOffset)),e.setAttribute("data-svg-origin",T+" "+b)},ug=function(e,t){var i=e._gsap||new aV(e);if("x"in i&&!t&&!i.uncache)return i;var r=e.style,s=i.scaleX<0,o="px",a="deg",l=getComputedStyle(e),u=Qo(e,Co)||"0",f,d,p,m,g,y,x,v,w,S,T,b,P,R,D,C,L,F,H,G,W,X,re,Q,z,j,I,ee,oe,se,te,Te;return f=d=p=y=x=v=w=S=T=0,m=g=1,i.svg=!!(e.getCTM&&wV(e)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(r[zn]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[zn]!=="none"?l[zn]:"")),r.scale=r.rotate=r.translate="none"),R=PP(e,i.svg),i.svg&&(i.uncache?(z=e.getBBox(),u=i.xOrigin-z.x+"px "+(i.yOrigin-z.y)+"px",Q=""):Q=!t&&e.getAttribute("data-svg-origin"),PE(e,Q||u,!!Q||i.originIsAbsolute,i.smooth!==!1,R)),b=i.xOrigin||0,P=i.yOrigin||0,R!==lg&&(F=R[0],H=R[1],G=R[2],W=R[3],f=X=R[4],d=re=R[5],R.length===6?(m=Math.sqrt(F*F+H*H),g=Math.sqrt(W*W+G*G),y=F||H?Bf(H,F)*Zu:0,w=G||W?Bf(G,W)*Zu+y:0,w&&(g*=Math.abs(Math.cos(w*Ih))),i.svg&&(f-=b-(b*F+P*G),d-=P-(b*H+P*W))):(Te=R[6],se=R[7],I=R[8],ee=R[9],oe=R[10],te=R[11],f=R[12],d=R[13],p=R[14],D=Bf(Te,oe),x=D*Zu,D&&(C=Math.cos(-D),L=Math.sin(-D),Q=X*C+I*L,z=re*C+ee*L,j=Te*C+oe*L,I=X*-L+I*C,ee=re*-L+ee*C,oe=Te*-L+oe*C,te=se*-L+te*C,X=Q,re=z,Te=j),D=Bf(-G,oe),v=D*Zu,D&&(C=Math.cos(-D),L=Math.sin(-D),Q=F*C-I*L,z=H*C-ee*L,j=G*C-oe*L,te=W*L+te*C,F=Q,H=z,G=j),D=Bf(H,F),y=D*Zu,D&&(C=Math.cos(D),L=Math.sin(D),Q=F*C+H*L,z=X*C+re*L,H=H*C-F*L,re=re*C-X*L,F=Q,X=z),x&&Math.abs(x)+Math.abs(y)>359.9&&(x=y=0,v=180-v),m=Kn(Math.sqrt(F*F+H*H+G*G)),g=Kn(Math.sqrt(re*re+Te*Te)),D=Bf(X,re),w=Math.abs(D)>2e-4?D*Zu:0,T=te?1/(te<0?-te:te):0),i.svg&&(Q=e.getAttribute("transform"),i.forceCSS=e.setAttribute("transform","")||!TV(Qo(e,zn)),Q&&e.setAttribute("transform",Q))),Math.abs(w)>90&&Math.abs(w)<270&&(s?(m*=-1,w+=y<=0?180:-180,y+=y<=0?180:-180):(g*=-1,w+=w<=0?180:-180)),t=t||i.uncache,i.x=f-((i.xPercent=f&&(!t&&i.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-f)?-50:0)))?e.offsetWidth*i.xPercent/100:0)+o,i.y=d-((i.yPercent=d&&(!t&&i.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-d)?-50:0)))?e.offsetHeight*i.yPercent/100:0)+o,i.z=p+o,i.scaleX=Kn(m),i.scaleY=Kn(g),i.rotation=Kn(y)+a,i.rotationX=Kn(x)+a,i.rotationY=Kn(v)+a,i.skewX=w+a,i.skewY=S+a,i.transformPerspective=T+o,(i.zOrigin=parseFloat(u.split(" ")[2])||0)&&(r[Co]=K_(u)),i.xOffset=i.yOffset=0,i.force3D=gs.force3D,i.renderTransform=i.svg?Eae:xV?EV:Tae,i.uncache=0,i},K_=function(e){return(e=e.split(" "))[0]+" "+e[1]},Yw=function(e,t,i){var r=rr(t);return Kn(parseFloat(t)+parseFloat(lu(e,"x",i+"px",r)))+r},Tae=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,EV(e,t)},Bu="0deg",gp="0px",Vu=") ",EV=function(e,t){var i=t||this,r=i.xPercent,s=i.yPercent,o=i.x,a=i.y,l=i.z,u=i.rotation,f=i.rotationY,d=i.rotationX,p=i.skewX,m=i.skewY,g=i.scaleX,y=i.scaleY,x=i.transformPerspective,v=i.force3D,w=i.target,S=i.zOrigin,T="",b=v==="auto"&&e&&e!==1||v===!0;if(S&&(d!==Bu||f!==Bu)){var P=parseFloat(f)*Ih,R=Math.sin(P),D=Math.cos(P),C;P=parseFloat(d)*Ih,C=Math.cos(P),o=Yw(w,o,R*C*-S),a=Yw(w,a,-Math.sin(P)*-S),l=Yw(w,l,D*C*-S+S)}x!==gp&&(T+="perspective("+x+Vu),(r||s)&&(T+="translate("+r+"%, "+s+"%) "),(b||o!==gp||a!==gp||l!==gp)&&(T+=l!==gp||b?"translate3d("+o+", "+a+", "+l+") ":"translate("+o+", "+a+Vu),u!==Bu&&(T+="rotate("+u+Vu),f!==Bu&&(T+="rotateY("+f+Vu),d!==Bu&&(T+="rotateX("+d+Vu),(p!==Bu||m!==Bu)&&(T+="skew("+p+", "+m+Vu),(g!==1||y!==1)&&(T+="scale("+g+", "+y+Vu),w.style[zn]=T||"translate(0, 0)"},Eae=function(e,t){var i=t||this,r=i.xPercent,s=i.yPercent,o=i.x,a=i.y,l=i.rotation,u=i.skewX,f=i.skewY,d=i.scaleX,p=i.scaleY,m=i.target,g=i.xOrigin,y=i.yOrigin,x=i.xOffset,v=i.yOffset,w=i.forceCSS,S=parseFloat(o),T=parseFloat(a),b,P,R,D,C;l=parseFloat(l),u=parseFloat(u),f=parseFloat(f),f&&(f=parseFloat(f),u+=f,l+=f),l||u?(l*=Ih,u*=Ih,b=Math.cos(l)*d,P=Math.sin(l)*d,R=Math.sin(l-u)*-p,D=Math.cos(l-u)*p,u&&(f*=Ih,C=Math.tan(u-f),C=Math.sqrt(1+C*C),R*=C,D*=C,f&&(C=Math.tan(f),C=Math.sqrt(1+C*C),b*=C,P*=C)),b=Kn(b),P=Kn(P),R=Kn(R),D=Kn(D)):(b=d,D=p,P=R=0),(S&&!~(o+"").indexOf("px")||T&&!~(a+"").indexOf("px"))&&(S=lu(m,"x",o,"px"),T=lu(m,"y",a,"px")),(g||y||x||v)&&(S=Kn(S+g-(g*b+y*R)+x),T=Kn(T+y-(g*P+y*D)+v)),(r||s)&&(C=m.getBBox(),S=Kn(S+r/100*C.width),T=Kn(T+s/100*C.height)),C="matrix("+b+","+P+","+R+","+D+","+S+","+T+")",m.setAttribute("transform",C),w&&(m.style[zn]=C)},bae=function(e,t,i,r,s){var o=360,a=Ni(s),l=parseFloat(s)*(a&&~s.indexOf("rad")?Zu:1),u=l-r,f=r+u+"deg",d,p;return a&&(d=s.split("_")[1],d==="short"&&(u%=o,u!==u%(o/2)&&(u+=u<0?o:-o)),d==="cw"&&u<0?u=(u+o*NI)%o-~~(u/o)*o:d==="ccw"&&u>0&&(u=(u-o*NI)%o-~~(u/o)*o)),e._pt=p=new Yr(e._pt,t,i,r,u,uae),p.e=f,p.u="deg",e._props.push(i),p},HI=function(e,t){for(var i in t)e[i]=t[i];return e},Cae=function(e,t,i){var r=HI({},i._gsap),s="perspective,force3D,transformOrigin,svgOrigin",o=i.style,a,l,u,f,d,p,m,g;r.svg?(u=i.getAttribute("transform"),i.setAttribute("transform",""),o[zn]=t,a=ug(i,1),ag(i,zn),i.setAttribute("transform",u)):(u=getComputedStyle(i)[zn],o[zn]=t,a=ug(i,1),o[zn]=u);for(l in $a)u=r[l],f=a[l],u!==f&&s.indexOf(l)<0&&(m=rr(u),g=rr(f),d=m!==g?lu(i,l,u,g):parseFloat(u),p=parseFloat(f),e._pt=new Yr(e._pt,a,l,d,p-d,EE),e._pt.u=g||0,e._props.push(l));HI(a,r)};Xr("padding,margin,Width,Radius",function(n,e){var t="Top",i="Right",r="Bottom",s="Left",o=(e<3?[t,i,r,s]:[t+s,t+i,r+i,r+s]).map(function(a){return e<2?n+a:"border"+a+n});$_[e>1?"border"+n:n]=function(a,l,u,f,d){var p,m;if(arguments.length<4)return p=o.map(function(g){return Ca(a,g,u)}),m=p.join(" "),m.split(p[0]).length===5?p[0]:m;p=(f+"").split(" "),m={},o.forEach(function(g,y){return m[g]=p[y]=p[y]||p[(y-1)/2|0]}),a.init(l,m,d)}});var bV={name:"css",register:CE,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,i,r,s){var o=this._props,a=e.style,l=i.vars.startAt,u,f,d,p,m,g,y,x,v,w,S,T,b,P,R,D;EP||CE(),this.styles=this.styles||_V(e),D=this.styles.props,this.tween=i;for(y in t)if(y!=="autoRound"&&(f=t[y],!(as[y]&&lV(y,t,i,r,e,s)))){if(m=typeof f,g=$_[y],m==="function"&&(f=f.call(i,r,e,s),m=typeof f),m==="string"&&~f.indexOf("random(")&&(f=sg(f)),g)g(this,e,y,f,i)&&(R=1);else if(y.substr(0,2)==="--")u=(getComputedStyle(e).getPropertyValue(y)+"").trim(),f+="",$l.lastIndex=0,$l.test(u)||(x=rr(u),v=rr(f)),v?x!==v&&(u=lu(e,y,u,v)+v):x&&(f+=x),this.add(a,"setProperty",u,f,r,s,0,0,y),o.push(y),D.push(y,0,a[y]);else if(m!=="undefined"){if(l&&y in l?(u=typeof l[y]=="function"?l[y].call(i,r,e,s):l[y],Ni(u)&&~u.indexOf("random(")&&(u=sg(u)),rr(u+"")||(u+=gs.units[y]||rr(Ca(e,y))||""),(u+"").charAt(1)==="="&&(u=Ca(e,y))):u=Ca(e,y),p=parseFloat(u),w=m==="string"&&f.charAt(1)==="="&&f.substr(0,2),w&&(f=f.substr(2)),d=parseFloat(f),y in Yo&&(y==="autoAlpha"&&(p===1&&Ca(e,"visibility")==="hidden"&&d&&(p=0),D.push("visibility",0,a.visibility),Ll(this,a,"visibility",p?"inherit":"hidden",d?"inherit":"hidden",!d)),y!=="scale"&&y!=="transform"&&(y=Yo[y],~y.indexOf(",")&&(y=y.split(",")[0]))),S=y in $a,S){if(this.styles.save(y),T||(b=e._gsap,b.renderTransform&&!t.parseTransform||ug(e,t.parseTransform),P=t.smoothOrigin!==!1&&b.smooth,T=this._pt=new Yr(this._pt,a,zn,0,1,b.renderTransform,b,0,-1),T.dep=1),y==="scale")this._pt=new Yr(this._pt,b,"scaleY",b.scaleY,(w?Dh(b.scaleY,w+d):d)-b.scaleY||0,EE),this._pt.u=0,o.push("scaleY",y),y+="X";else if(y==="transformOrigin"){D.push(Co,0,a[Co]),f=wae(f),b.svg?PE(e,f,0,P,0,this):(v=parseFloat(f.split(" ")[2])||0,v!==b.zOrigin&&Ll(this,b,"zOrigin",b.zOrigin,v),Ll(this,a,y,K_(u),K_(f)));continue}else if(y==="svgOrigin"){PE(e,f,1,P,0,this);continue}else if(y in MV){bae(this,b,y,p,w?Dh(p,w+f):f);continue}else if(y==="smoothOrigin"){Ll(this,b,"smooth",b.smooth,f);continue}else if(y==="force3D"){b[y]=f;continue}else if(y==="transform"){Cae(this,f,e);continue}}else y in a||(y=nd(y)||y);if(S||(d||d===0)&&(p||p===0)&&!lae.test(f)&&y in a)x=(u+"").substr((p+"").length),d||(d=0),v=rr(f)||(y in gs.units?gs.units[y]:x),x!==v&&(p=lu(e,y,u,v)),this._pt=new Yr(this._pt,S?b:a,y,p,(w?Dh(p,w+d):d)-p,!S&&(v==="px"||y==="zIndex")&&t.autoRound!==!1?fae:EE),this._pt.u=v||0,x!==v&&v!=="%"&&(this._pt.b=u,this._pt.r=cae);else if(y in a)Sae.call(this,e,y,u,w?w+f:f);else if(y in e)this.add(e,y,u||e[y],w?w+f:f,r,s);else if(y!=="parseTransform"){gP(y,f);continue}S||(y in a?D.push(y,0,a[y]):D.push(y,1,u||e[y])),o.push(y)}}R&&pV(this)},render:function(e,t){if(t.tween._time||!bP())for(var i=t._pt;i;)i.r(e,i.d),i=i._next;else t.styles.revert()},get:Ca,aliases:Yo,getSetter:function(e,t,i){var r=Yo[t];return r&&r.indexOf(",")<0&&(t=r),t in $a&&t!==Co&&(e._gsap.x||Ca(e,"x"))?i&&OI===i?t==="scale"?mae:pae:(OI=i||{})&&(t==="scale"?gae:vae):e.style&&!dP(e.style[t])?hae:~t.indexOf("-")?dae:MP(e,t)},core:{_removeProperty:ag,_getMatrix:PP}};$r.utils.checkPrefix=nd;$r.core.getStyleSaver=_V;(function(n,e,t,i){var r=Xr(n+","+e+","+t,function(s){$a[s]=1});Xr(e,function(s){gs.units[s]="deg",MV[s]=1}),Yo[r[13]]=n+","+e,Xr(i,function(s){var o=s.split(":");Yo[o[1]]=r[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Xr("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(n){gs.units[n]="px"});$r.registerPlugin(bV);function GI(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function Pae(n,e,t){return e&&GI(n.prototype,e),t&&GI(n,t),n}/*!
 * Observer 3.11.5
 * https://greensock.com
 *
 * @license Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Gi,AE,cs,Il,kl,kh,CV,$u,lm,PV,Oa,ho,AV,RV=function(){return Gi||typeof window<"u"&&(Gi=window.gsap)&&Gi.registerPlugin&&Gi},DV=1,_h=[],Ft=[],ea=[],um=Date.now,RE=function(e,t){return t},Aae=function(){var e=lm.core,t=e.bridge||{},i=e._scrollers,r=e._proxies;i.push.apply(i,Ft),r.push.apply(r,ea),Ft=i,ea=r,RE=function(o,a){return t[o](a)}},Kl=function(e,t){return~ea.indexOf(e)&&ea[ea.indexOf(e)+1][t]},cm=function(e){return!!~PV.indexOf(e)},Ir=function(e,t,i,r,s){return e.addEventListener(t,i,{passive:!r,capture:!!s})},mr=function(e,t,i,r){return e.removeEventListener(t,i,!!r)},iy="scrollLeft",ry="scrollTop",DE=function(){return Oa&&Oa.isPressed||Ft.cache++},J_=function(e,t){var i=function r(s){if(s||s===0){DV&&(cs.history.scrollRestoration="manual");var o=Oa&&Oa.isPressed;s=r.v=Math.round(s)||(Oa&&Oa.iOS?1:0),e(s),r.cacheID=Ft.cache,o&&RE("ss",s)}else(t||Ft.cache!==r.cacheID||RE("ref"))&&(r.cacheID=Ft.cache,r.v=e());return r.v+r.offset};return i.offset=0,e&&i},Sr={s:iy,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:J_(function(n){return arguments.length?cs.scrollTo(n,di.sc()):cs.pageXOffset||Il[iy]||kl[iy]||kh[iy]||0})},di={s:ry,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:Sr,sc:J_(function(n){return arguments.length?cs.scrollTo(Sr.sc(),n):cs.pageYOffset||Il[ry]||kl[ry]||kh[ry]||0})},Nr=function(e){return Gi.utils.toArray(e)[0]||(typeof e=="string"&&Gi.config().nullTargetWarn!==!1?console.warn("Element not found:",e):null)},uu=function(e,t){var i=t.s,r=t.sc;cm(e)&&(e=Il.scrollingElement||kl);var s=Ft.indexOf(e),o=r===di.sc?1:2;!~s&&(s=Ft.push(e)-1),Ft[s+o]||e.addEventListener("scroll",DE);var a=Ft[s+o],l=a||(Ft[s+o]=J_(Kl(e,i),!0)||(cm(e)?r:J_(function(u){return arguments.length?e[i]=u:e[i]})));return l.target=e,a||(l.smooth=Gi.getProperty(e,"scrollBehavior")==="smooth"),l},LE=function(e,t,i){var r=e,s=e,o=um(),a=o,l=t||50,u=Math.max(500,l*3),f=function(g,y){var x=um();y||x-o>l?(s=r,r=g,a=o,o=x):i?r+=g:r=s+(g-s)/(x-a)*(o-a)},d=function(){s=r=i?0:r,a=o=0},p=function(g){var y=a,x=s,v=um();return(g||g===0)&&g!==r&&f(g),o===a||v-a>u?0:(r+(i?x:-x))/((i?v:o)-y)*1e3};return{update:f,reset:d,getVelocity:p}},vp=function(e,t){return t&&!e._gsapAllow&&e.preventDefault(),e.changedTouches?e.changedTouches[0]:e},WI=function(e){var t=Math.max.apply(Math,e),i=Math.min.apply(Math,e);return Math.abs(t)>=Math.abs(i)?t:i},LV=function(){lm=Gi.core.globals().ScrollTrigger,lm&&lm.core&&Aae()},IV=function(e){return Gi=e||RV(),Gi&&typeof document<"u"&&document.body&&(cs=window,Il=document,kl=Il.documentElement,kh=Il.body,PV=[cs,Il,kl,kh],Gi.utils.clamp,AV=Gi.core.context||function(){},$u="onpointerenter"in kh?"pointer":"mouse",CV=ui.isTouch=cs.matchMedia&&cs.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in cs||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,ho=ui.eventTypes=("ontouchstart"in kl?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in kl?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout(function(){return DV=0},500),LV(),AE=1),AE};Sr.op=di;Ft.cache=0;var ui=function(){function n(t){this.init(t)}var e=n.prototype;return e.init=function(i){AE||IV(Gi)||console.warn("Please gsap.registerPlugin(Observer)"),lm||LV();var r=i.tolerance,s=i.dragMinimum,o=i.type,a=i.target,l=i.lineHeight,u=i.debounce,f=i.preventDefault,d=i.onStop,p=i.onStopDelay,m=i.ignore,g=i.wheelSpeed,y=i.event,x=i.onDragStart,v=i.onDragEnd,w=i.onDrag,S=i.onPress,T=i.onRelease,b=i.onRight,P=i.onLeft,R=i.onUp,D=i.onDown,C=i.onChangeX,L=i.onChangeY,F=i.onChange,H=i.onToggleX,G=i.onToggleY,W=i.onHover,X=i.onHoverEnd,re=i.onMove,Q=i.ignoreCheck,z=i.isNormalizer,j=i.onGestureStart,I=i.onGestureEnd,ee=i.onWheel,oe=i.onEnable,se=i.onDisable,te=i.onClick,Te=i.scrollSpeed,we=i.capture,J=i.allowClicks,Xe=i.lockAxis,it=i.onLockAxis;this.target=a=Nr(a)||kl,this.vars=i,m&&(m=Gi.utils.toArray(m)),r=r||1e-9,s=s||0,g=g||1,Te=Te||1,o=o||"wheel,touch,pointer",u=u!==!1,l||(l=parseFloat(cs.getComputedStyle(kh).lineHeight)||22);var Ee,Ie,ce,ae,Me,ze,Re,$=this,et=0,Ue=0,ft=uu(a,Sr),Tt=uu(a,di),B=ft(),k=Tt(),fe=~o.indexOf("touch")&&!~o.indexOf("pointer")&&ho[0]==="pointerdown",ge=cm(a),pe=a.ownerDocument||Il,_e=[0,0,0],De=[0,0,0],Fe=0,he=function(){return Fe=um()},Pe=function(He,Ae){return($.event=He)&&m&&~m.indexOf(He.target)||Ae&&fe&&He.pointerType!=="touch"||Q&&Q(He,Ae)},Ce=function(){$._vx.reset(),$._vy.reset(),Ie.pause(),d&&d($)},je=function(){var He=$.deltaX=WI(_e),Ae=$.deltaY=WI(De),rt=Math.abs(He)>=r,ht=Math.abs(Ae)>=r;F&&(rt||ht)&&F($,He,Ae,_e,De),rt&&(b&&$.deltaX>0&&b($),P&&$.deltaX<0&&P($),C&&C($),H&&$.deltaX<0!=et<0&&H($),et=$.deltaX,_e[0]=_e[1]=_e[2]=0),ht&&(D&&$.deltaY>0&&D($),R&&$.deltaY<0&&R($),L&&L($),G&&$.deltaY<0!=Ue<0&&G($),Ue=$.deltaY,De[0]=De[1]=De[2]=0),(ae||ce)&&(re&&re($),ce&&(w($),ce=!1),ae=!1),ze&&!(ze=!1)&&it&&it($),Me&&(ee($),Me=!1),Ee=0},Ve=function(He,Ae,rt){_e[rt]+=He,De[rt]+=Ae,$._vx.update(He),$._vy.update(Ae),u?Ee||(Ee=requestAnimationFrame(je)):je()},Ze=function(He,Ae){Xe&&!Re&&($.axis=Re=Math.abs(He)>Math.abs(Ae)?"x":"y",ze=!0),Re!=="y"&&(_e[2]+=He,$._vx.update(He,!0)),Re!=="x"&&(De[2]+=Ae,$._vy.update(Ae,!0)),u?Ee||(Ee=requestAnimationFrame(je)):je()},Ct=function(He){if(!Pe(He,1)){He=vp(He,f);var Ae=He.clientX,rt=He.clientY,ht=Ae-$.x,Pt=rt-$.y,Ln=$.isDragging;$.x=Ae,$.y=rt,(Ln||Math.abs($.startX-Ae)>=s||Math.abs($.startY-rt)>=s)&&(w&&(ce=!0),Ln||($.isDragging=!0),Ze(ht,Pt),Ln||x&&x($))}},qe=$.onPress=function(dt){Pe(dt,1)||dt&&dt.button||($.axis=Re=null,Ie.pause(),$.isPressed=!0,dt=vp(dt),et=Ue=0,$.startX=$.x=dt.clientX,$.startY=$.y=dt.clientY,$._vx.reset(),$._vy.reset(),Ir(z?a:pe,ho[1],Ct,f,!0),$.deltaX=$.deltaY=0,S&&S($))},Zt=$.onRelease=function(dt){if(!Pe(dt,1)){mr(z?a:pe,ho[1],Ct,!0);var He=!isNaN($.y-$.startY),Ae=$.isDragging&&(Math.abs($.x-$.startX)>3||Math.abs($.y-$.startY)>3),rt=vp(dt);!Ae&&He&&($._vx.reset(),$._vy.reset(),f&&J&&Gi.delayedCall(.08,function(){if(um()-Fe>300&&!dt.defaultPrevented){if(dt.target.click)dt.target.click();else if(pe.createEvent){var ht=pe.createEvent("MouseEvents");ht.initMouseEvent("click",!0,!0,cs,1,rt.screenX,rt.screenY,rt.clientX,rt.clientY,!1,!1,!1,!1,0,null),dt.target.dispatchEvent(ht)}}})),$.isDragging=$.isGesturing=$.isPressed=!1,d&&!z&&Ie.restart(!0),v&&Ae&&v($),T&&T($,Ae)}},Y=function(He){return He.touches&&He.touches.length>1&&($.isGesturing=!0)&&j(He,$.isDragging)},ye=function(){return($.isGesturing=!1)||I($)},be=function(He){if(!Pe(He)){var Ae=ft(),rt=Tt();Ve((Ae-B)*Te,(rt-k)*Te,1),B=Ae,k=rt,d&&Ie.restart(!0)}},Ne=function(He){if(!Pe(He)){He=vp(He,f),ee&&(Me=!0);var Ae=(He.deltaMode===1?l:He.deltaMode===2?cs.innerHeight:1)*g;Ve(He.deltaX*Ae,He.deltaY*Ae,0),d&&!z&&Ie.restart(!0)}},tt=function(He){if(!Pe(He)){var Ae=He.clientX,rt=He.clientY,ht=Ae-$.x,Pt=rt-$.y;$.x=Ae,$.y=rt,ae=!0,(ht||Pt)&&Ze(ht,Pt)}},Xt=function(He){$.event=He,W($)},zt=function(He){$.event=He,X($)},Cn=function(He){return Pe(He)||vp(He,f)&&te($)};Ie=$._dc=Gi.delayedCall(p||.25,Ce).pause(),$.deltaX=$.deltaY=0,$._vx=LE(0,50,!0),$._vy=LE(0,50,!0),$.scrollX=ft,$.scrollY=Tt,$.isDragging=$.isGesturing=$.isPressed=!1,AV(this),$.enable=function(dt){return $.isEnabled||(Ir(ge?pe:a,"scroll",DE),o.indexOf("scroll")>=0&&Ir(ge?pe:a,"scroll",be,f,we),o.indexOf("wheel")>=0&&Ir(a,"wheel",Ne,f,we),(o.indexOf("touch")>=0&&CV||o.indexOf("pointer")>=0)&&(Ir(a,ho[0],qe,f,we),Ir(pe,ho[2],Zt),Ir(pe,ho[3],Zt),J&&Ir(a,"click",he,!1,!0),te&&Ir(a,"click",Cn),j&&Ir(pe,"gesturestart",Y),I&&Ir(pe,"gestureend",ye),W&&Ir(a,$u+"enter",Xt),X&&Ir(a,$u+"leave",zt),re&&Ir(a,$u+"move",tt)),$.isEnabled=!0,dt&&dt.type&&qe(dt),oe&&oe($)),$},$.disable=function(){$.isEnabled&&(_h.filter(function(dt){return dt!==$&&cm(dt.target)}).length||mr(ge?pe:a,"scroll",DE),$.isPressed&&($._vx.reset(),$._vy.reset(),mr(z?a:pe,ho[1],Ct,!0)),mr(ge?pe:a,"scroll",be,we),mr(a,"wheel",Ne,we),mr(a,ho[0],qe,we),mr(pe,ho[2],Zt),mr(pe,ho[3],Zt),mr(a,"click",he,!0),mr(a,"click",Cn),mr(pe,"gesturestart",Y),mr(pe,"gestureend",ye),mr(a,$u+"enter",Xt),mr(a,$u+"leave",zt),mr(a,$u+"move",tt),$.isEnabled=$.isPressed=$.isDragging=!1,se&&se($))},$.kill=$.revert=function(){$.disable();var dt=_h.indexOf($);dt>=0&&_h.splice(dt,1),Oa===$&&(Oa=0)},_h.push($),z&&cm(a)&&(Oa=$),$.enable(y)},Pae(n,[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}]),n}();ui.version="3.11.5";ui.create=function(n){return new ui(n)};ui.register=IV;ui.getAll=function(){return _h.slice()};ui.getById=function(n){return _h.filter(function(e){return e.vars.id===n})[0]};RV()&&Gi.registerPlugin(ui);/*!
 * ScrollTrigger 3.11.5
 * https://greensock.com
 *
 * @license Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var ot,Yf,Vt,An,So,Wn,kV,Q_,ex,xh,qy,sy,tr,n1,IE,_r,jI,XI,qf,OV,qw,NV,rs,UV,FV,zV,_l,kE,AP,Zw,oy=1,xr=Date.now,$w=xr(),Zs=0,Dp=0,Rae=function n(){return Dp&&requestAnimationFrame(n)},YI=function(){return n1=1},qI=function(){return n1=0},Ho=function(e){return e},Lp=function(e){return Math.round(e*1e5)/1e5||0},BV=function(){return typeof window<"u"},VV=function(){return ot||BV()&&(ot=window.gsap)&&ot.registerPlugin&&ot},Fc=function(e){return!!~kV.indexOf(e)},HV=function(e){return Kl(e,"getBoundingClientRect")||(Fc(e)?function(){return e_.width=Vt.innerWidth,e_.height=Vt.innerHeight,e_}:function(){return Ra(e)})},Dae=function(e,t,i){var r=i.d,s=i.d2,o=i.a;return(o=Kl(e,"getBoundingClientRect"))?function(){return o()[r]}:function(){return(t?Vt["inner"+s]:e["client"+s])||0}},Lae=function(e,t){return!t||~ea.indexOf(e)?HV(e):function(){return e_}},Ol=function(e,t){var i=t.s,r=t.d2,s=t.d,o=t.a;return Math.max(0,(i="scroll"+r)&&(o=Kl(e,i))?o()-HV(e)()[s]:Fc(e)?(So[i]||Wn[i])-(Vt["inner"+r]||So["client"+r]||Wn["client"+r]):e[i]-e["offset"+r])},ay=function(e,t){for(var i=0;i<qf.length;i+=3)(!t||~t.indexOf(qf[i+1]))&&e(qf[i],qf[i+1],qf[i+2])},mo=function(e){return typeof e=="string"},wr=function(e){return typeof e=="function"},Ip=function(e){return typeof e=="number"},Zy=function(e){return typeof e=="object"},yp=function(e,t,i){return e&&e.progress(t?0:1)&&i&&e.pause()},Kw=function(e,t){if(e.enabled){var i=t(e);i&&i.totalTime&&(e.callbackAnimation=i)}},Vf=Math.abs,GV="left",WV="top",RP="right",DP="bottom",Tc="width",Ec="height",fm="Right",hm="Left",dm="Top",pm="Bottom",$n="padding",Hs="margin",id="Width",LP="Height",Bi="px",wo=function(e){return Vt.getComputedStyle(e)},Iae=function(e){var t=wo(e).position;e.style.position=t==="absolute"||t==="fixed"?t:"relative"},ZI=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},Ra=function(e,t){var i=t&&wo(e)[IE]!=="matrix(1, 0, 0, 1, 0, 0)"&&ot.to(e,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),r=e.getBoundingClientRect();return i&&i.progress(0).kill(),r},OE=function(e,t){var i=t.d2;return e["offset"+i]||e["client"+i]||0},jV=function(e){var t=[],i=e.labels,r=e.duration(),s;for(s in i)t.push(i[s]/r);return t},kae=function(e){return function(t){return ot.utils.snap(jV(e),t)}},IP=function(e){var t=ot.utils.snap(e),i=Array.isArray(e)&&e.slice(0).sort(function(r,s){return r-s});return i?function(r,s,o){o===void 0&&(o=.001);var a;if(!s)return t(r);if(s>0){for(r-=o,a=0;a<i.length;a++)if(i[a]>=r)return i[a];return i[a-1]}else for(a=i.length,r+=o;a--;)if(i[a]<=r)return i[a];return i[0]}:function(r,s,o){o===void 0&&(o=.001);var a=t(r);return!s||Math.abs(a-r)<o||a-r<0==s<0?a:t(s<0?r-e:r+e)}},Oae=function(e){return function(t,i){return IP(jV(e))(t,i.direction)}},ly=function(e,t,i,r){return i.split(",").forEach(function(s){return e(t,s,r)})},Di=function(e,t,i,r,s){return e.addEventListener(t,i,{passive:!r,capture:!!s})},Ri=function(e,t,i,r){return e.removeEventListener(t,i,!!r)},uy=function(e,t,i){i=i&&i.wheelHandler,i&&(e(t,"wheel",i),e(t,"touchmove",i))},$I={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},cy={toggleActions:"play",anticipatePin:0},tx={top:0,left:0,center:.5,bottom:1,right:1},$y=function(e,t){if(mo(e)){var i=e.indexOf("="),r=~i?+(e.charAt(i-1)+1)*parseFloat(e.substr(i+1)):0;~i&&(e.indexOf("%")>i&&(r*=t/100),e=e.substr(0,i-1)),e=r+(e in tx?tx[e]*t:~e.indexOf("%")?parseFloat(e)*t/100:parseFloat(e)||0)}return e},fy=function(e,t,i,r,s,o,a,l){var u=s.startColor,f=s.endColor,d=s.fontSize,p=s.indent,m=s.fontWeight,g=An.createElement("div"),y=Fc(i)||Kl(i,"pinType")==="fixed",x=e.indexOf("scroller")!==-1,v=y?Wn:i,w=e.indexOf("start")!==-1,S=w?u:f,T="border-color:"+S+";font-size:"+d+";color:"+S+";font-weight:"+m+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return T+="position:"+((x||l)&&y?"fixed;":"absolute;"),(x||l||!y)&&(T+=(r===di?RP:DP)+":"+(o+parseFloat(p))+"px;"),a&&(T+="box-sizing:border-box;text-align:left;width:"+a.offsetWidth+"px;"),g._isStart=w,g.setAttribute("class","gsap-marker-"+e+(t?" marker-"+t:"")),g.style.cssText=T,g.innerText=t||t===0?e+"-"+t:e,v.children[0]?v.insertBefore(g,v.children[0]):v.appendChild(g),g._offset=g["offset"+r.op.d2],Ky(g,0,r,w),g},Ky=function(e,t,i,r){var s={display:"block"},o=i[r?"os2":"p2"],a=i[r?"p2":"os2"];e._isFlipped=r,s[i.a+"Percent"]=r?-100:0,s[i.a]=r?"1px":0,s["border"+o+id]=1,s["border"+a+id]=0,s[i.p]=t+"px",ot.set(e,s)},Nt=[],NE={},cg,KI=function(){return xr()-Zs>34&&(cg||(cg=requestAnimationFrame(Ba)))},Hf=function(){(!rs||!rs.isPressed||rs.startX>Wn.clientWidth)&&(Ft.cache++,rs?cg||(cg=requestAnimationFrame(Ba)):Ba(),Zs||Bc("scrollStart"),Zs=xr())},Jw=function(){zV=Vt.innerWidth,FV=Vt.innerHeight},kp=function(){Ft.cache++,!tr&&!NV&&!An.fullscreenElement&&!An.webkitFullscreenElement&&(!UV||zV!==Vt.innerWidth||Math.abs(Vt.innerHeight-FV)>Vt.innerHeight*.25)&&Q_.restart(!0)},zc={},Nae=[],XV=function n(){return Ri(Wt,"scrollEnd",n)||fc(!0)},Bc=function(e){return zc[e]&&zc[e].map(function(t){return t()})||Nae},ss=[],YV=function(e){for(var t=0;t<ss.length;t+=5)(!e||ss[t+4]&&ss[t+4].query===e)&&(ss[t].style.cssText=ss[t+1],ss[t].getBBox&&ss[t].setAttribute("transform",ss[t+2]||""),ss[t+3].uncache=1)},kP=function(e,t){var i;for(_r=0;_r<Nt.length;_r++)i=Nt[_r],i&&(!t||i._ctx===t)&&(e?i.kill(1):i.revert(!0,!0));t&&YV(t),t||Bc("revert")},qV=function(e,t){Ft.cache++,(t||!ls)&&Ft.forEach(function(i){return wr(i)&&i.cacheID++&&(i.rec=0)}),mo(e)&&(Vt.history.scrollRestoration=AP=e)},ls,bc=0,JI,Uae=function(){if(JI!==bc){var e=JI=bc;requestAnimationFrame(function(){return e===bc&&fc(!0)})}},fc=function(e,t){if(Zs&&!e){Di(Wt,"scrollEnd",XV);return}ls=Wt.isRefreshing=!0,Ft.forEach(function(r){return wr(r)&&r.cacheID++&&(r.rec=r())});var i=Bc("refreshInit");OV&&Wt.sort(),t||kP(),Ft.forEach(function(r){wr(r)&&(r.smooth&&(r.target.style.scrollBehavior="auto"),r(0))}),Nt.slice(0).forEach(function(r){return r.refresh()}),Nt.forEach(function(r,s){if(r._subPinOffset&&r.pin){var o=r.vars.horizontal?"offsetWidth":"offsetHeight",a=r.pin[o];r.revert(!0,1),r.adjustPinSpacing(r.pin[o]-a),r.refresh()}}),Nt.forEach(function(r){return r.vars.end==="max"&&r.setPositions(r.start,Math.max(r.start+1,Ol(r.scroller,r._dir)))}),i.forEach(function(r){return r&&r.render&&r.render(-1)}),Ft.forEach(function(r){wr(r)&&(r.smooth&&requestAnimationFrame(function(){return r.target.style.scrollBehavior="smooth"}),r.rec&&r(r.rec))}),qV(AP,1),Q_.pause(),bc++,ls=2,Ba(2),Nt.forEach(function(r){return wr(r.vars.onRefresh)&&r.vars.onRefresh(r)}),ls=Wt.isRefreshing=!1,Bc("refresh")},UE=0,Jy=1,mm,Ba=function(e){if(!ls||e===2){Wt.isUpdating=!0,mm&&mm.update(0);var t=Nt.length,i=xr(),r=i-$w>=50,s=t&&Nt[0].scroll();if(Jy=UE>s?-1:1,ls||(UE=s),r&&(Zs&&!n1&&i-Zs>200&&(Zs=0,Bc("scrollEnd")),qy=$w,$w=i),Jy<0){for(_r=t;_r-- >0;)Nt[_r]&&Nt[_r].update(0,r);Jy=1}else for(_r=0;_r<t;_r++)Nt[_r]&&Nt[_r].update(0,r);Wt.isUpdating=!1}cg=0},FE=[GV,WV,DP,RP,Hs+pm,Hs+fm,Hs+dm,Hs+hm,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],Qy=FE.concat([Tc,Ec,"boxSizing","max"+id,"max"+LP,"position",Hs,$n,$n+dm,$n+fm,$n+pm,$n+hm]),Fae=function(e,t,i){Oh(i);var r=e._gsap;if(r.spacerIsNative)Oh(r.spacerState);else if(e._gsap.swappedIn){var s=t.parentNode;s&&(s.insertBefore(e,t),s.removeChild(t))}e._gsap.swappedIn=!1},Qw=function(e,t,i,r){if(!e._gsap.swappedIn){for(var s=FE.length,o=t.style,a=e.style,l;s--;)l=FE[s],o[l]=i[l];o.position=i.position==="absolute"?"absolute":"relative",i.display==="inline"&&(o.display="inline-block"),a[DP]=a[RP]="auto",o.flexBasis=i.flexBasis||"auto",o.overflow="visible",o.boxSizing="border-box",o[Tc]=OE(e,Sr)+Bi,o[Ec]=OE(e,di)+Bi,o[$n]=a[Hs]=a[WV]=a[GV]="0",Oh(r),a[Tc]=a["max"+id]=i[Tc],a[Ec]=a["max"+LP]=i[Ec],a[$n]=i[$n],e.parentNode!==t&&(e.parentNode.insertBefore(t,e),t.appendChild(e)),e._gsap.swappedIn=!0}},zae=/([A-Z])/g,Oh=function(e){if(e){var t=e.t.style,i=e.length,r=0,s,o;for((e.t._gsap||ot.core.getCache(e.t)).uncache=1;r<i;r+=2)o=e[r+1],s=e[r],o?t[s]=o:t[s]&&t.removeProperty(s.replace(zae,"-$1").toLowerCase())}},hy=function(e){for(var t=Qy.length,i=e.style,r=[],s=0;s<t;s++)r.push(Qy[s],i[Qy[s]]);return r.t=e,r},Bae=function(e,t,i){for(var r=[],s=e.length,o=i?8:0,a;o<s;o+=2)a=e[o],r.push(a,a in t?t[a]:e[o+1]);return r.t=e.t,r},e_={left:0,top:0},QI=function(e,t,i,r,s,o,a,l,u,f,d,p,m){wr(e)&&(e=e(l)),mo(e)&&e.substr(0,3)==="max"&&(e=p+(e.charAt(4)==="="?$y("0"+e.substr(3),i):0));var g=m?m.time():0,y,x,v;if(m&&m.seek(0),Ip(e))m&&(e=ot.utils.mapRange(m.scrollTrigger.start,m.scrollTrigger.end,0,p,e)),a&&Ky(a,i,r,!0);else{wr(t)&&(t=t(l));var w=(e||"0").split(" "),S,T,b,P;v=Nr(t)||Wn,S=Ra(v)||{},(!S||!S.left&&!S.top)&&wo(v).display==="none"&&(P=v.style.display,v.style.display="block",S=Ra(v),P?v.style.display=P:v.style.removeProperty("display")),T=$y(w[0],S[r.d]),b=$y(w[1]||"0",i),e=S[r.p]-u[r.p]-f+T+s-b,a&&Ky(a,b,r,i-b<20||a._isStart&&b>20),i-=i-b}if(o){var R=e+i,D=o._isStart;y="scroll"+r.d2,Ky(o,R,r,D&&R>20||!D&&(d?Math.max(Wn[y],So[y]):o.parentNode[y])<=R+1),d&&(u=Ra(a),d&&(o.style[r.op.p]=u[r.op.p]-r.op.m-o._offset+Bi))}return m&&v&&(y=Ra(v),m.seek(p),x=Ra(v),m._caScrollDist=y[r.p]-x[r.p],e=e/m._caScrollDist*p),m&&m.seek(g),m?e:Math.round(e)},Vae=/(webkit|moz|length|cssText|inset)/i,ek=function(e,t,i,r){if(e.parentNode!==t){var s=e.style,o,a;if(t===Wn){e._stOrig=s.cssText,a=wo(e);for(o in a)!+o&&!Vae.test(o)&&a[o]&&typeof s[o]=="string"&&o!=="0"&&(s[o]=a[o]);s.top=i,s.left=r}else s.cssText=e._stOrig;ot.core.getCache(e).uncache=1,t.appendChild(e)}},ZV=function(e,t,i){var r=t,s=r;return function(o){var a=Math.round(e());return a!==r&&a!==s&&Math.abs(a-r)>3&&Math.abs(a-s)>3&&(o=a,i&&i()),s=r,r=o,o}},tk=function(e,t){var i=uu(e,t),r="_scroll"+t.p2,s=function o(a,l,u,f,d){var p=o.tween,m=l.onComplete,g={};u=u||i();var y=ZV(i,u,function(){p.kill(),o.tween=0});return d=f&&d||0,f=f||a-u,p&&p.kill(),l[r]=a,l.modifiers=g,g[r]=function(){return y(u+f*p.ratio+d*p.ratio*p.ratio)},l.onUpdate=function(){Ft.cache++,Ba()},l.onComplete=function(){o.tween=0,m&&m.call(p)},p=o.tween=ot.to(e,l),p};return e[r]=i,i.wheelHandler=function(){return s.tween&&s.tween.kill()&&(s.tween=0)},Di(e,"wheel",i.wheelHandler),Wt.isTouch&&Di(e,"touchmove",i.wheelHandler),s},Wt=function(){function n(t,i){Yf||n.register(ot)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),this.init(t,i)}var e=n.prototype;return e.init=function(i,r){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),!Dp){this.update=this.refresh=this.kill=Ho;return}i=ZI(mo(i)||Ip(i)||i.nodeType?{trigger:i}:i,cy);var s=i,o=s.onUpdate,a=s.toggleClass,l=s.id,u=s.onToggle,f=s.onRefresh,d=s.scrub,p=s.trigger,m=s.pin,g=s.pinSpacing,y=s.invalidateOnRefresh,x=s.anticipatePin,v=s.onScrubComplete,w=s.onSnapComplete,S=s.once,T=s.snap,b=s.pinReparent,P=s.pinSpacer,R=s.containerAnimation,D=s.fastScrollEnd,C=s.preventOverlaps,L=i.horizontal||i.containerAnimation&&i.horizontal!==!1?Sr:di,F=!d&&d!==0,H=Nr(i.scroller||Vt),G=ot.core.getCache(H),W=Fc(H),X=("pinType"in i?i.pinType:Kl(H,"pinType")||W&&"fixed")==="fixed",re=[i.onEnter,i.onLeave,i.onEnterBack,i.onLeaveBack],Q=F&&i.toggleActions.split(" "),z="markers"in i?i.markers:cy.markers,j=W?0:parseFloat(wo(H)["border"+L.p2+id])||0,I=this,ee=i.onRefreshInit&&function(){return i.onRefreshInit(I)},oe=Dae(H,W,L),se=Lae(H,W),te=0,Te=0,we=uu(H,L),J,Xe,it,Ee,Ie,ce,ae,Me,ze,Re,$,et,Ue,ft,Tt,B,k,fe,ge,pe,_e,De,Fe,he,Pe,Ce,je,Ve,Ze,Ct,qe,Zt,Y,ye,be,Ne,tt,Xt,zt;if(kE(I),I._dir=L,x*=45,I.scroller=H,I.scroll=R?R.time.bind(R):we,Ee=we(),I.vars=i,r=r||i.animation,"refreshPriority"in i&&(OV=1,i.refreshPriority===-9999&&(mm=I)),G.tweenScroll=G.tweenScroll||{top:tk(H,di),left:tk(H,Sr)},I.tweenTo=J=G.tweenScroll[L.p],I.scrubDuration=function(Ae){Zt=Ip(Ae)&&Ae,Zt?qe?qe.duration(Ae):qe=ot.to(r,{ease:"expo",totalProgress:"+=0.001",duration:Zt,paused:!0,onComplete:function(){return v&&v(I)}}):(qe&&qe.progress(1).kill(),qe=0)},r&&(r.vars.lazy=!1,r._initted||r.vars.immediateRender!==!1&&i.immediateRender!==!1&&r.duration()&&r.render(0,!0,!0),I.animation=r.pause(),r.scrollTrigger=I,I.scrubDuration(d),qe&&qe.resetTo&&qe.resetTo("totalProgress",0),Ze=0,l||(l=r.vars.id)),Nt.push(I),T&&((!Zy(T)||T.push)&&(T={snapTo:T}),"scrollBehavior"in Wn.style&&ot.set(W?[Wn,So]:H,{scrollBehavior:"auto"}),Ft.forEach(function(Ae){return wr(Ae)&&Ae.target===(W?An.scrollingElement||So:H)&&(Ae.smooth=!1)}),it=wr(T.snapTo)?T.snapTo:T.snapTo==="labels"?kae(r):T.snapTo==="labelsDirectional"?Oae(r):T.directional!==!1?function(Ae,rt){return IP(T.snapTo)(Ae,xr()-Te<500?0:rt.direction)}:ot.utils.snap(T.snapTo),Y=T.duration||{min:.1,max:2},Y=Zy(Y)?xh(Y.min,Y.max):xh(Y,Y),ye=ot.delayedCall(T.delay||Zt/2||.1,function(){var Ae=we(),rt=xr()-Te<500,ht=J.tween;if((rt||Math.abs(I.getVelocity())<10)&&!ht&&!n1&&te!==Ae){var Pt=(Ae-ce)/Ue,Ln=r&&!F?r.totalProgress():Pt,Bt=rt?0:(Ln-Ct)/(xr()-qy)*1e3||0,mn=ot.utils.clamp(-Pt,1-Pt,Vf(Bt/2)*Bt/.185),U=Pt+(T.inertia===!1?0:mn),ne=xh(0,1,it(U,I)),me=Math.round(ce+ne*Ue),Z=T,xe=Z.onStart,Ye=Z.onInterrupt,Ke=Z.onComplete;if(Ae<=ae&&Ae>=ce&&me!==Ae){if(ht&&!ht._initted&&ht.data<=Vf(me-Ae))return;T.inertia===!1&&(mn=ne-Pt),J(me,{duration:Y(Vf(Math.max(Vf(U-Ln),Vf(ne-Ln))*.185/Bt/.05||0)),ease:T.ease||"power3",data:Vf(me-Ae),onInterrupt:function(){return ye.restart(!0)&&Ye&&Ye(I)},onComplete:function(){I.update(),te=we(),Ze=Ct=r&&!F?r.totalProgress():I.progress,w&&w(I),Ke&&Ke(I)}},Ae,mn*Ue,me-Ae-mn*Ue),xe&&xe(I,J.tween)}}else I.isActive&&te!==Ae&&ye.restart(!0)}).pause()),l&&(NE[l]=I),p=I.trigger=Nr(p||m),zt=p&&p._gsap&&p._gsap.stRevert,zt&&(zt=zt(I)),m=m===!0?p:Nr(m),mo(a)&&(a={targets:p,className:a}),m&&(g===!1||g===Hs||(g=!g&&m.parentNode&&m.parentNode.style&&wo(m.parentNode).display==="flex"?!1:$n),I.pin=m,Xe=ot.core.getCache(m),Xe.spacer?ft=Xe.pinState:(P&&(P=Nr(P),P&&!P.nodeType&&(P=P.current||P.nativeElement),Xe.spacerIsNative=!!P,P&&(Xe.spacerState=hy(P))),Xe.spacer=k=P||An.createElement("div"),k.classList.add("pin-spacer"),l&&k.classList.add("pin-spacer-"+l),Xe.pinState=ft=hy(m)),i.force3D!==!1&&ot.set(m,{force3D:!0}),I.spacer=k=Xe.spacer,Ve=wo(m),Fe=Ve[g+L.os2],ge=ot.getProperty(m),pe=ot.quickSetter(m,L.a,Bi),Qw(m,k,Ve),B=hy(m)),z){et=Zy(z)?ZI(z,$I):$I,Re=fy("scroller-start",l,H,L,et,0),$=fy("scroller-end",l,H,L,et,0,Re),fe=Re["offset"+L.op.d2];var Cn=Nr(Kl(H,"content")||H);Me=this.markerStart=fy("start",l,Cn,L,et,fe,0,R),ze=this.markerEnd=fy("end",l,Cn,L,et,fe,0,R),R&&(Xt=ot.quickSetter([Me,ze],L.a,Bi)),!X&&!(ea.length&&Kl(H,"fixedMarkers")===!0)&&(Iae(W?Wn:H),ot.set([Re,$],{force3D:!0}),Pe=ot.quickSetter(Re,L.a,Bi),je=ot.quickSetter($,L.a,Bi))}if(R){var dt=R.vars.onUpdate,He=R.vars.onUpdateParams;R.eventCallback("onUpdate",function(){I.update(0,0,1),dt&&dt.apply(R,He||[])})}I.previous=function(){return Nt[Nt.indexOf(I)-1]},I.next=function(){return Nt[Nt.indexOf(I)+1]},I.revert=function(Ae,rt){if(!rt)return I.kill(!0);var ht=Ae!==!1||!I.enabled,Pt=tr;ht!==I.isReverted&&(ht&&(Ne=Math.max(we(),I.scroll.rec||0),be=I.progress,tt=r&&r.progress()),Me&&[Me,ze,Re,$].forEach(function(Ln){return Ln.style.display=ht?"none":"block"}),ht&&(tr=I,I.update(ht)),m&&(!b||!I.isActive)&&(ht?Fae(m,k,ft):Qw(m,k,wo(m),he)),ht||I.update(ht),tr=Pt,I.isReverted=ht)},I.refresh=function(Ae,rt){if(!((tr||!I.enabled)&&!rt)){if(m&&Ae&&Zs){Di(n,"scrollEnd",XV);return}!ls&&ee&&ee(I),tr=I,Te=xr(),J.tween&&(J.tween.kill(),J.tween=0),qe&&qe.pause(),y&&r&&r.revert({kill:!1}).invalidate(),I.isReverted||I.revert(!0,!0),I._subPinOffset=!1;for(var ht=oe(),Pt=se(),Ln=R?R.duration():Ol(H,L),Bt=Ue<=.01,mn=0,U=0,ne=i.end,me=i.endTrigger||p,Z=i.start||(i.start===0||!p?0:m?"0 0":"0 100%"),xe=I.pinnedContainer=i.pinnedContainer&&Nr(i.pinnedContainer),Ye=p&&Math.max(0,Nt.indexOf(I))||0,Ke=Ye,$e,at,Et,Mt,lt,_t,hn,Ui,Cr,Jt,xt;Ke--;)_t=Nt[Ke],_t.end||_t.refresh(0,1)||(tr=I),hn=_t.pin,hn&&(hn===p||hn===m||hn===xe)&&!_t.isReverted&&(Jt||(Jt=[]),Jt.unshift(_t),_t.revert(!0,!0)),_t!==Nt[Ke]&&(Ye--,Ke--);for(wr(Z)&&(Z=Z(I)),ce=QI(Z,p,ht,L,we(),Me,Re,I,Pt,j,X,Ln,R)||(m?-.001:0),wr(ne)&&(ne=ne(I)),mo(ne)&&!ne.indexOf("+=")&&(~ne.indexOf(" ")?ne=(mo(Z)?Z.split(" ")[0]:"")+ne:(mn=$y(ne.substr(2),ht),ne=mo(Z)?Z:(R?ot.utils.mapRange(0,R.duration(),R.scrollTrigger.start,R.scrollTrigger.end,ce):ce)+mn,me=p)),ae=Math.max(ce,QI(ne||(me?"100% 0":Ln),me,ht,L,we()+mn,ze,$,I,Pt,j,X,Ln,R))||-.001,Ue=ae-ce||(ce-=.01)&&.001,mn=0,Ke=Ye;Ke--;)_t=Nt[Ke],hn=_t.pin,hn&&_t.start-_t._pinPush<=ce&&!R&&_t.end>0&&($e=_t.end-_t.start,(hn===p&&_t.start-_t._pinPush<ce||hn===xe)&&!Ip(Z)&&(mn+=$e*(1-_t.progress)),hn===m&&(U+=$e));if(ce+=mn,ae+=mn,Bt&&(be=ot.utils.clamp(0,1,ot.utils.normalize(ce,ae,Ne))),I._pinPush=U,Me&&mn&&($e={},$e[L.a]="+="+mn,xe&&($e[L.p]="-="+we()),ot.set([Me,ze],$e)),m)$e=wo(m),Mt=L===di,Et=we(),_e=parseFloat(ge(L.a))+U,!Ln&&ae>1&&(xt=(W?An.scrollingElement||So:H).style,xt={style:xt,value:xt["overflow"+L.a.toUpperCase()]},xt.style["overflow"+L.a.toUpperCase()]="scroll"),Qw(m,k,$e),B=hy(m),at=Ra(m,!0),Ui=X&&uu(H,Mt?Sr:di)(),g&&(he=[g+L.os2,Ue+U+Bi],he.t=k,Ke=g===$n?OE(m,L)+Ue+U:0,Ke&&he.push(L.d,Ke+Bi),Oh(he),xe&&Nt.forEach(function(Kr){Kr.pin===xe&&Kr.vars.pinSpacing!==!1&&(Kr._subPinOffset=!0)}),X&&we(Ne)),X&&(lt={top:at.top+(Mt?Et-ce:Ui)+Bi,left:at.left+(Mt?Ui:Et-ce)+Bi,boxSizing:"border-box",position:"fixed"},lt[Tc]=lt["max"+id]=Math.ceil(at.width)+Bi,lt[Ec]=lt["max"+LP]=Math.ceil(at.height)+Bi,lt[Hs]=lt[Hs+dm]=lt[Hs+fm]=lt[Hs+pm]=lt[Hs+hm]="0",lt[$n]=$e[$n],lt[$n+dm]=$e[$n+dm],lt[$n+fm]=$e[$n+fm],lt[$n+pm]=$e[$n+pm],lt[$n+hm]=$e[$n+hm],Tt=Bae(ft,lt,b),ls&&we(0)),r?(Cr=r._initted,qw(1),r.render(r.duration(),!0,!0),De=ge(L.a)-_e+Ue+U,Ce=Math.abs(Ue-De)>1,X&&Ce&&Tt.splice(Tt.length-2,2),r.render(0,!0,!0),Cr||r.invalidate(!0),r.parent||r.totalTime(r.totalTime()),qw(0)):De=Ue,xt&&(xt.value?xt.style["overflow"+L.a.toUpperCase()]=xt.value:xt.style.removeProperty("overflow-"+L.a));else if(p&&we()&&!R)for(at=p.parentNode;at&&at!==Wn;)at._pinOffset&&(ce-=at._pinOffset,ae-=at._pinOffset),at=at.parentNode;Jt&&Jt.forEach(function(Kr){return Kr.revert(!1,!0)}),I.start=ce,I.end=ae,Ee=Ie=ls?Ne:we(),!R&&!ls&&(Ee<Ne&&we(Ne),I.scroll.rec=0),I.revert(!1,!0),ye&&(te=-1,I.isActive&&we(ce+Ue*be),ye.restart(!0)),tr=0,r&&F&&(r._initted||tt)&&r.progress()!==tt&&r.progress(tt,!0).render(r.time(),!0,!0),(Bt||be!==I.progress||R)&&(r&&!F&&r.totalProgress(R&&ce<-.001&&!be?ot.utils.normalize(ce,ae,0):be,!0),I.progress=(Ee-ce)/Ue===be?0:be),m&&g&&(k._pinOffset=Math.round(I.progress*De)),qe&&qe.invalidate(),f&&!ls&&f(I)}},I.getVelocity=function(){return(we()-Ie)/(xr()-qy)*1e3||0},I.endAnimation=function(){yp(I.callbackAnimation),r&&(qe?qe.progress(1):r.paused()?F||yp(r,I.direction<0,1):yp(r,r.reversed()))},I.labelToScroll=function(Ae){return r&&r.labels&&(ce||I.refresh()||ce)+r.labels[Ae]/r.duration()*Ue||0},I.getTrailing=function(Ae){var rt=Nt.indexOf(I),ht=I.direction>0?Nt.slice(0,rt).reverse():Nt.slice(rt+1);return(mo(Ae)?ht.filter(function(Pt){return Pt.vars.preventOverlaps===Ae}):ht).filter(function(Pt){return I.direction>0?Pt.end<=ce:Pt.start>=ae})},I.update=function(Ae,rt,ht){if(!(R&&!ht&&!Ae)){var Pt=ls===!0?Ne:I.scroll(),Ln=Ae?0:(Pt-ce)/Ue,Bt=Ln<0?0:Ln>1?1:Ln||0,mn=I.progress,U,ne,me,Z,xe,Ye,Ke,$e;if(rt&&(Ie=Ee,Ee=R?we():Pt,T&&(Ct=Ze,Ze=r&&!F?r.totalProgress():Bt)),x&&!Bt&&m&&!tr&&!oy&&Zs&&ce<Pt+(Pt-Ie)/(xr()-qy)*x&&(Bt=1e-4),Bt!==mn&&I.enabled){if(U=I.isActive=!!Bt&&Bt<1,ne=!!mn&&mn<1,Ye=U!==ne,xe=Ye||!!Bt!=!!mn,I.direction=Bt>mn?1:-1,I.progress=Bt,xe&&!tr&&(me=Bt&&!mn?0:Bt===1?1:mn===1?2:3,F&&(Z=!Ye&&Q[me+1]!=="none"&&Q[me+1]||Q[me],$e=r&&(Z==="complete"||Z==="reset"||Z in r))),C&&(Ye||$e)&&($e||d||!r)&&(wr(C)?C(I):I.getTrailing(C).forEach(function(lt){return lt.endAnimation()})),F||(qe&&!tr&&!oy?(qe._dp._time-qe._start!==qe._time&&qe.render(qe._dp._time-qe._start),qe.resetTo?qe.resetTo("totalProgress",Bt,r._tTime/r._tDur):(qe.vars.totalProgress=Bt,qe.invalidate().restart())):r&&r.totalProgress(Bt,!!tr)),m){if(Ae&&g&&(k.style[g+L.os2]=Fe),!X)pe(Lp(_e+De*Bt));else if(xe){if(Ke=!Ae&&Bt>mn&&ae+1>Pt&&Pt+1>=Ol(H,L),b)if(!Ae&&(U||Ke)){var at=Ra(m,!0),Et=Pt-ce;ek(m,Wn,at.top+(L===di?Et:0)+Bi,at.left+(L===di?0:Et)+Bi)}else ek(m,k);Oh(U||Ke?Tt:B),Ce&&Bt<1&&U||pe(_e+(Bt===1&&!Ke?De:0))}}T&&!J.tween&&!tr&&!oy&&ye.restart(!0),a&&(Ye||S&&Bt&&(Bt<1||!Zw))&&ex(a.targets).forEach(function(lt){return lt.classList[U||S?"add":"remove"](a.className)}),o&&!F&&!Ae&&o(I),xe&&!tr?(F&&($e&&(Z==="complete"?r.pause().totalProgress(1):Z==="reset"?r.restart(!0).pause():Z==="restart"?r.restart(!0):r[Z]()),o&&o(I)),(Ye||!Zw)&&(u&&Ye&&Kw(I,u),re[me]&&Kw(I,re[me]),S&&(Bt===1?I.kill(!1,1):re[me]=0),Ye||(me=Bt===1?1:3,re[me]&&Kw(I,re[me]))),D&&!U&&Math.abs(I.getVelocity())>(Ip(D)?D:2500)&&(yp(I.callbackAnimation),qe?qe.progress(1):yp(r,Z==="reverse"?1:!Bt,1))):F&&o&&!tr&&o(I)}if(je){var Mt=R?Pt/R.duration()*(R._caScrollDist||0):Pt;Pe(Mt+(Re._isFlipped?1:0)),je(Mt)}Xt&&Xt(-Pt/R.duration()*(R._caScrollDist||0))}},I.enable=function(Ae,rt){I.enabled||(I.enabled=!0,Di(H,"resize",kp),Di(W?An:H,"scroll",Hf),ee&&Di(n,"refreshInit",ee),Ae!==!1&&(I.progress=be=0,Ee=Ie=te=we()),rt!==!1&&I.refresh())},I.getTween=function(Ae){return Ae&&J?J.tween:qe},I.setPositions=function(Ae,rt){m&&(_e+=Ae-ce,De+=rt-Ae-Ue,g===$n&&I.adjustPinSpacing(rt-Ae-Ue)),I.start=ce=Ae,I.end=ae=rt,Ue=rt-Ae,I.update()},I.adjustPinSpacing=function(Ae){if(he&&Ae){var rt=he.indexOf(L.d)+1;he[rt]=parseFloat(he[rt])+Ae+Bi,he[1]=parseFloat(he[1])+Ae+Bi,Oh(he)}},I.disable=function(Ae,rt){if(I.enabled&&(Ae!==!1&&I.revert(!0,!0),I.enabled=I.isActive=!1,rt||qe&&qe.pause(),Ne=0,Xe&&(Xe.uncache=1),ee&&Ri(n,"refreshInit",ee),ye&&(ye.pause(),J.tween&&J.tween.kill()&&(J.tween=0)),!W)){for(var ht=Nt.length;ht--;)if(Nt[ht].scroller===H&&Nt[ht]!==I)return;Ri(H,"resize",kp),Ri(H,"scroll",Hf)}},I.kill=function(Ae,rt){I.disable(Ae,rt),qe&&!rt&&qe.kill(),l&&delete NE[l];var ht=Nt.indexOf(I);ht>=0&&Nt.splice(ht,1),ht===_r&&Jy>0&&_r--,ht=0,Nt.forEach(function(Pt){return Pt.scroller===I.scroller&&(ht=1)}),ht||ls||(I.scroll.rec=0),r&&(r.scrollTrigger=null,Ae&&r.revert({kill:!1}),rt||r.kill()),Me&&[Me,ze,Re,$].forEach(function(Pt){return Pt.parentNode&&Pt.parentNode.removeChild(Pt)}),mm===I&&(mm=0),m&&(Xe&&(Xe.uncache=1),ht=0,Nt.forEach(function(Pt){return Pt.pin===m&&ht++}),ht||(Xe.spacer=0)),i.onKill&&i.onKill(I)},I.enable(!1,!1),zt&&zt(I),!r||!r.add||Ue?I.refresh():ot.delayedCall(.01,function(){return ce||ae||I.refresh()})&&(Ue=.01)&&(ce=ae=0),m&&Uae()},n.register=function(i){return Yf||(ot=i||VV(),BV()&&window.document&&n.enable(),Yf=Dp),Yf},n.defaults=function(i){if(i)for(var r in i)cy[r]=i[r];return cy},n.disable=function(i,r){Dp=0,Nt.forEach(function(o){return o[r?"kill":"disable"](i)}),Ri(Vt,"wheel",Hf),Ri(An,"scroll",Hf),clearInterval(sy),Ri(An,"touchcancel",Ho),Ri(Wn,"touchstart",Ho),ly(Ri,An,"pointerdown,touchstart,mousedown",YI),ly(Ri,An,"pointerup,touchend,mouseup",qI),Q_.kill(),ay(Ri);for(var s=0;s<Ft.length;s+=3)uy(Ri,Ft[s],Ft[s+1]),uy(Ri,Ft[s],Ft[s+2])},n.enable=function(){if(Vt=window,An=document,So=An.documentElement,Wn=An.body,ot&&(ex=ot.utils.toArray,xh=ot.utils.clamp,kE=ot.core.context||Ho,qw=ot.core.suppressOverwrites||Ho,AP=Vt.history.scrollRestoration||"auto",UE=Vt.pageYOffset,ot.core.globals("ScrollTrigger",n),Wn)){Dp=1,Rae(),ui.register(ot),n.isTouch=ui.isTouch,_l=ui.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),Di(Vt,"wheel",Hf),kV=[Vt,An,So,Wn],ot.matchMedia?(n.matchMedia=function(l){var u=ot.matchMedia(),f;for(f in l)u.add(f,l[f]);return u},ot.addEventListener("matchMediaInit",function(){return kP()}),ot.addEventListener("matchMediaRevert",function(){return YV()}),ot.addEventListener("matchMedia",function(){fc(0,1),Bc("matchMedia")}),ot.matchMedia("(orientation: portrait)",function(){return Jw(),Jw})):console.warn("Requires GSAP 3.11.0 or later"),Jw(),Di(An,"scroll",Hf);var i=Wn.style,r=i.borderTopStyle,s=ot.core.Animation.prototype,o,a;for(s.revert||Object.defineProperty(s,"revert",{value:function(){return this.time(-.01,!0)}}),i.borderTopStyle="solid",o=Ra(Wn),di.m=Math.round(o.top+di.sc())||0,Sr.m=Math.round(o.left+Sr.sc())||0,r?i.borderTopStyle=r:i.removeProperty("border-top-style"),sy=setInterval(KI,250),ot.delayedCall(.5,function(){return oy=0}),Di(An,"touchcancel",Ho),Di(Wn,"touchstart",Ho),ly(Di,An,"pointerdown,touchstart,mousedown",YI),ly(Di,An,"pointerup,touchend,mouseup",qI),IE=ot.utils.checkPrefix("transform"),Qy.push(IE),Yf=xr(),Q_=ot.delayedCall(.2,fc).pause(),qf=[An,"visibilitychange",function(){var l=Vt.innerWidth,u=Vt.innerHeight;An.hidden?(jI=l,XI=u):(jI!==l||XI!==u)&&kp()},An,"DOMContentLoaded",fc,Vt,"load",fc,Vt,"resize",kp],ay(Di),Nt.forEach(function(l){return l.enable(0,1)}),a=0;a<Ft.length;a+=3)uy(Ri,Ft[a],Ft[a+1]),uy(Ri,Ft[a],Ft[a+2])}},n.config=function(i){"limitCallbacks"in i&&(Zw=!!i.limitCallbacks);var r=i.syncInterval;r&&clearInterval(sy)||(sy=r)&&setInterval(KI,r),"ignoreMobileResize"in i&&(UV=n.isTouch===1&&i.ignoreMobileResize),"autoRefreshEvents"in i&&(ay(Ri)||ay(Di,i.autoRefreshEvents||"none"),NV=(i.autoRefreshEvents+"").indexOf("resize")===-1)},n.scrollerProxy=function(i,r){var s=Nr(i),o=Ft.indexOf(s),a=Fc(s);~o&&Ft.splice(o,a?6:2),r&&(a?ea.unshift(Vt,r,Wn,r,So,r):ea.unshift(s,r))},n.clearMatchMedia=function(i){Nt.forEach(function(r){return r._ctx&&r._ctx.query===i&&r._ctx.kill(!0,!0)})},n.isInViewport=function(i,r,s){var o=(mo(i)?Nr(i):i).getBoundingClientRect(),a=o[s?Tc:Ec]*r||0;return s?o.right-a>0&&o.left+a<Vt.innerWidth:o.bottom-a>0&&o.top+a<Vt.innerHeight},n.positionInViewport=function(i,r,s){mo(i)&&(i=Nr(i));var o=i.getBoundingClientRect(),a=o[s?Tc:Ec],l=r==null?a/2:r in tx?tx[r]*a:~r.indexOf("%")?parseFloat(r)*a/100:parseFloat(r)||0;return s?(o.left+l)/Vt.innerWidth:(o.top+l)/Vt.innerHeight},n.killAll=function(i){if(Nt.slice(0).forEach(function(s){return s.vars.id!=="ScrollSmoother"&&s.kill()}),i!==!0){var r=zc.killAll||[];zc={},r.forEach(function(s){return s()})}},n}();Wt.version="3.11.5";Wt.saveStyles=function(n){return n?ex(n).forEach(function(e){if(e&&e.style){var t=ss.indexOf(e);t>=0&&ss.splice(t,5),ss.push(e,e.style.cssText,e.getBBox&&e.getAttribute("transform"),ot.core.getCache(e),kE())}}):ss};Wt.revert=function(n,e){return kP(!n,e)};Wt.create=function(n,e){return new Wt(n,e)};Wt.refresh=function(n){return n?kp():(Yf||Wt.register())&&fc(!0)};Wt.update=function(n){return++Ft.cache&&Ba(n===!0?2:0)};Wt.clearScrollMemory=qV;Wt.maxScroll=function(n,e){return Ol(n,e?Sr:di)};Wt.getScrollFunc=function(n,e){return uu(Nr(n),e?Sr:di)};Wt.getById=function(n){return NE[n]};Wt.getAll=function(){return Nt.filter(function(n){return n.vars.id!=="ScrollSmoother"})};Wt.isScrolling=function(){return!!Zs};Wt.snapDirectional=IP;Wt.addEventListener=function(n,e){var t=zc[n]||(zc[n]=[]);~t.indexOf(e)||t.push(e)};Wt.removeEventListener=function(n,e){var t=zc[n],i=t&&t.indexOf(e);i>=0&&t.splice(i,1)};Wt.batch=function(n,e){var t=[],i={},r=e.interval||.016,s=e.batchMax||1e9,o=function(u,f){var d=[],p=[],m=ot.delayedCall(r,function(){f(d,p),d=[],p=[]}).pause();return function(g){d.length||m.restart(!0),d.push(g.trigger),p.push(g),s<=d.length&&m.progress(1)}},a;for(a in e)i[a]=a.substr(0,2)==="on"&&wr(e[a])&&a!=="onRefreshInit"?o(a,e[a]):e[a];return wr(s)&&(s=s(),Di(Wt,"refresh",function(){return s=e.batchMax()})),ex(n).forEach(function(l){var u={};for(a in i)u[a]=i[a];u.trigger=l,t.push(Wt.create(u))}),t};var nk=function(e,t,i,r){return t>r?e(r):t<0&&e(0),i>r?(r-t)/(i-t):i<0?t/(t-i):1},eM=function n(e,t){t===!0?e.style.removeProperty("touch-action"):e.style.touchAction=t===!0?"auto":t?"pan-"+t+(ui.isTouch?" pinch-zoom":""):"none",e===So&&n(Wn,t)},dy={auto:1,scroll:1},Hae=function(e){var t=e.event,i=e.target,r=e.axis,s=(t.changedTouches?t.changedTouches[0]:t).target,o=s._gsap||ot.core.getCache(s),a=xr(),l;if(!o._isScrollT||a-o._isScrollT>2e3){for(;s&&s!==Wn&&(s.scrollHeight<=s.clientHeight&&s.scrollWidth<=s.clientWidth||!(dy[(l=wo(s)).overflowY]||dy[l.overflowX]));)s=s.parentNode;o._isScroll=s&&s!==i&&!Fc(s)&&(dy[(l=wo(s)).overflowY]||dy[l.overflowX]),o._isScrollT=a}(o._isScroll||r==="x")&&(t.stopPropagation(),t._gsapAllow=!0)},$V=function(e,t,i,r){return ui.create({target:e,capture:!0,debounce:!1,lockAxis:!0,type:t,onWheel:r=r&&Hae,onPress:r,onDrag:r,onScroll:r,onEnable:function(){return i&&Di(An,ui.eventTypes[0],rk,!1,!0)},onDisable:function(){return Ri(An,ui.eventTypes[0],rk,!0)}})},Gae=/(input|label|select|textarea)/i,ik,rk=function(e){var t=Gae.test(e.target.tagName);(t||ik)&&(e._gsapAllow=!0,ik=t)},Wae=function(e){Zy(e)||(e={}),e.preventDefault=e.isNormalizer=e.allowClicks=!0,e.type||(e.type="wheel,touch"),e.debounce=!!e.debounce,e.id=e.id||"normalizer";var t=e,i=t.normalizeScrollX,r=t.momentum,s=t.allowNestedScroll,o=t.onRelease,a,l,u=Nr(e.target)||So,f=ot.core.globals().ScrollSmoother,d=f&&f.get(),p=_l&&(e.content&&Nr(e.content)||d&&e.content!==!1&&!d.smooth()&&d.content()),m=uu(u,di),g=uu(u,Sr),y=1,x=(ui.isTouch&&Vt.visualViewport?Vt.visualViewport.scale*Vt.visualViewport.width:Vt.outerWidth)/Vt.innerWidth,v=0,w=wr(r)?function(){return r(a)}:function(){return r||2.8},S,T,b=$V(u,e.type,!0,s),P=function(){return T=!1},R=Ho,D=Ho,C=function(){l=Ol(u,di),D=xh(_l?1:0,l),i&&(R=xh(0,Ol(u,Sr))),S=bc},L=function(){p._gsap.y=Lp(parseFloat(p._gsap.y)+m.offset)+"px",p.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(p._gsap.y)+", 0, 1)",m.offset=m.cacheID=0},F=function(){if(T){requestAnimationFrame(P);var z=Lp(a.deltaY/2),j=D(m.v-z);if(p&&j!==m.v+m.offset){m.offset=j-m.v;var I=Lp((parseFloat(p&&p._gsap.y)||0)-m.offset);p.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+I+", 0, 1)",p._gsap.y=I+"px",m.cacheID=Ft.cache,Ba()}return!0}m.offset&&L(),T=!0},H,G,W,X,re=function(){C(),H.isActive()&&H.vars.scrollY>l&&(m()>l?H.progress(1)&&m(l):H.resetTo("scrollY",l))};return p&&ot.set(p,{y:"+=0"}),e.ignoreCheck=function(Q){return _l&&Q.type==="touchmove"&&F()||y>1.05&&Q.type!=="touchstart"||a.isGesturing||Q.touches&&Q.touches.length>1},e.onPress=function(){T=!1;var Q=y;y=Lp((Vt.visualViewport&&Vt.visualViewport.scale||1)/x),H.pause(),Q!==y&&eM(u,y>1.01?!0:i?!1:"x"),G=g(),W=m(),C(),S=bc},e.onRelease=e.onGestureStart=function(Q,z){if(m.offset&&L(),!z)X.restart(!0);else{Ft.cache++;var j=w(),I,ee;i&&(I=g(),ee=I+j*.05*-Q.velocityX/.227,j*=nk(g,I,ee,Ol(u,Sr)),H.vars.scrollX=R(ee)),I=m(),ee=I+j*.05*-Q.velocityY/.227,j*=nk(m,I,ee,Ol(u,di)),H.vars.scrollY=D(ee),H.invalidate().duration(j).play(.01),(_l&&H.vars.scrollY>=l||I>=l-1)&&ot.to({},{onUpdate:re,duration:j})}o&&o(Q)},e.onWheel=function(){H._ts&&H.pause(),xr()-v>1e3&&(S=0,v=xr())},e.onChange=function(Q,z,j,I,ee){if(bc!==S&&C(),z&&i&&g(R(I[2]===z?G+(Q.startX-Q.x):g()+z-I[1])),j){m.offset&&L();var oe=ee[2]===j,se=oe?W+Q.startY-Q.y:m()+j-ee[1],te=D(se);oe&&se!==te&&(W+=te-se),m(te)}(j||z)&&Ba()},e.onEnable=function(){eM(u,i?!1:"x"),Wt.addEventListener("refresh",re),Di(Vt,"resize",re),m.smooth&&(m.target.style.scrollBehavior="auto",m.smooth=g.smooth=!1),b.enable()},e.onDisable=function(){eM(u,!0),Ri(Vt,"resize",re),Wt.removeEventListener("refresh",re),b.kill()},e.lockAxis=e.lockAxis!==!1,a=new ui(e),a.iOS=_l,_l&&!m()&&m(1),_l&&ot.ticker.add(Ho),X=a._dc,H=ot.to(a,{ease:"power4",paused:!0,scrollX:i?"+=0.1":"+=0",scrollY:"+=0.1",modifiers:{scrollY:ZV(m,m(),function(){return H.pause()})},onUpdate:Ba,onComplete:X.vars.onComplete}),a};Wt.sort=function(n){return Nt.sort(n||function(e,t){return(e.vars.refreshPriority||0)*-1e6+e.start-(t.start+(t.vars.refreshPriority||0)*-1e6)})};Wt.observe=function(n){return new ui(n)};Wt.normalizeScroll=function(n){if(typeof n>"u")return rs;if(n===!0&&rs)return rs.enable();if(n===!1)return rs&&rs.kill();var e=n instanceof ui?n:Wae(n);return rs&&rs.target===e.target&&rs.kill(),Fc(e.target)&&(rs=e),e};Wt.core={_getVelocityProp:LE,_inputObserver:$V,_scrollers:Ft,_proxies:ea,bridge:{ss:function(){Zs||Bc("scrollStart"),Zs=xr()},ref:function(){return tr}}};VV()&&ot.registerPlugin(Wt);var zE=$r.registerPlugin(bV)||$r;zE.core.Tween;(()=>{function n(...i){const r=i.length;for(let s=0;s<r;s++){const o=i[s];o.nodeType===1||o.nodeType===11?this.appendChild(o):this.appendChild(document.createTextNode(String(o)))}}function e(...i){for(;this.lastChild;)this.removeChild(this.lastChild);i.length&&this.append(...i)}function t(...i){const r=this.parentNode;let s=i.length;if(r)for(s||r.removeChild(this);s--;){let o=i[s];typeof o!="object"?o=this.ownerDocument.createTextNode(o):o.parentNode&&o.parentNode.removeChild(o),s?r.insertBefore(this.previousSibling,o):r.replaceChild(o,this)}}typeof Element<"u"&&(Element.prototype.append||(Element.prototype.append=n,DocumentFragment.prototype.append=n),Element.prototype.replaceChildren||(Element.prototype.replaceChildren=e,DocumentFragment.prototype.replaceChildren=e),Element.prototype.replaceWith||(Element.prototype.replaceWith=t,DocumentFragment.prototype.replaceWith=t))})();function hc(n,e){return Object.getOwnPropertyNames(Object(n)).reduce((t,i)=>{const r=Object.getOwnPropertyDescriptor(Object(n),i),s=Object.getOwnPropertyDescriptor(Object(e),i);return Object.defineProperty(t,i,s||r)},{})}function jg(n){return typeof n=="string"}function OP(n){return Array.isArray(n)}function py(n={}){const e=hc(n);let t;return e.types!==void 0?t=e.types:e.split!==void 0&&(t=e.split),t!==void 0&&(e.types=(jg(t)||OP(t)?String(t):"").split(",").map(i=>String(i).trim()).filter(i=>/((line)|(word)|(char))/i.test(i))),(e.absolute||e.position)&&(e.absolute=e.absolute||/absolute/.test(n.position)),e}function NP(n){const e=jg(n)||OP(n)?String(n):"";return{none:!e,lines:/line/i.test(e),words:/word/i.test(e),chars:/char/i.test(e)}}function i1(n){return n!==null&&typeof n=="object"}function jae(n){return i1(n)&&/^(1|3|11)$/.test(n.nodeType)}function Xae(n){return typeof n=="number"&&n>-1&&n%1===0}function Yae(n){return i1(n)&&Xae(n.length)}function Vc(n){return OP(n)?n:n==null?[]:Yae(n)?Array.prototype.slice.call(n):[n]}function sk(n){let e=n;return jg(n)&&(/^(#[a-z]\w+)$/.test(n.trim())?e=document.getElementById(n.trim().slice(1)):e=document.querySelectorAll(n)),Vc(e).reduce((t,i)=>[...t,...Vc(i).filter(jae)],[])}const{entries:qae,keys:Tue,values:Eue}=Object,nx="_splittype",Va={};let Zae=0;function qo(n,e,t){if(!i1(n))return console.warn("[data.set] owner is not an object"),null;const i=n[nx]||(n[nx]=++Zae),r=Va[i]||(Va[i]={});return t===void 0?e&&Object.getPrototypeOf(e)===Object.prototype&&(Va[i]={...r,...e}):e!==void 0&&(r[e]=t),t}function dc(n,e){const t=i1(n)?n[nx]:null,i=t&&Va[t]||{};return e===void 0?i:i[e]}function KV(n){const e=n&&n[nx];e&&(delete n[e],delete Va[e])}function $ae(){qae(Va).forEach(([n,{isRoot:e,isSplit:t}])=>{(!e||!t)&&(Va[n]=null,delete Va[n])})}function Kae(n,e=" "){return(n?String(n):"").trim().replace(/\s+/g," ").split(e)}const UP="\\ud800-\\udfff",JV="\\u0300-\\u036f\\ufe20-\\ufe23",QV="\\u20d0-\\u20f0",e5="\\ufe0e\\ufe0f",Jae=`[${UP}]`,BE=`[${JV}${QV}]`,VE="\\ud83c[\\udffb-\\udfff]",Qae=`(?:${BE}|${VE})`,t5=`[^${UP}]`,n5="(?:\\ud83c[\\udde6-\\uddff]){2}",i5="[\\ud800-\\udbff][\\udc00-\\udfff]",r5="\\u200d",s5=`${Qae}?`,o5=`[${e5}]?`,ele="(?:"+r5+"(?:"+[t5,n5,i5].join("|")+")"+o5+s5+")*",tle=o5+s5+ele,nle=`(?:${[`${t5}${BE}?`,BE,n5,i5,Jae].join("|")}
)`,ile=RegExp(`${VE}(?=${VE})|${nle}${tle}`,"g"),rle=[r5,UP,JV,QV,e5],sle=RegExp(`[${rle.join("")}]`);function ole(n){return n.split("")}function a5(n){return sle.test(n)}function ale(n){return n.match(ile)||[]}function lle(n){return a5(n)?ale(n):ole(n)}function ule(n){return n==null?"":String(n)}function cle(n,e=""){return n=ule(n),n&&jg(n)&&!e&&a5(n)?lle(n):n.split(e)}function HE(n,e){const t=document.createElement(n);return e&&Object.keys(e).forEach(i=>{const r=e[i],s=jg(r)?r.trim():r;s===null||s===""||(i==="children"?t.append(...Vc(s)):t.setAttribute(i,s))}),t}var FP={splitClass:"",lineClass:"line",wordClass:"word",charClass:"char",types:["lines","words","chars"],absolute:!1,tagName:"div"};function fle(n,e){e=hc(FP,e);const t=NP(e.types),i=e.tagName,r=n.nodeValue,s=document.createDocumentFragment();let o=[],a=[];return/^\s/.test(r)&&s.append(" "),o=Kae(r).reduce((l,u,f,d)=>{let p,m;return t.chars&&(m=cle(u).map(g=>{const y=HE(i,{class:`${e.splitClass} ${e.charClass}`,style:"display: inline-block;",children:g});return qo(y,"isChar",!0),a=[...a,y],y})),t.words||t.lines?(p=HE(i,{class:`${e.wordClass} ${e.splitClass}`,style:`display: inline-block; ${t.words&&e.absolute?"position: relative;":""}`,children:t.chars?m:u}),qo(p,{isWord:!0,isWordStart:!0,isWordEnd:!0}),s.appendChild(p)):m.forEach(g=>{s.appendChild(g)}),f<d.length-1&&s.append(" "),t.words?l.concat(p):l},[]),/\s$/.test(r)&&s.append(" "),n.replaceWith(s),{words:o,chars:a}}function l5(n,e){const t=n.nodeType,i={words:[],chars:[]};if(!/(1|3|11)/.test(t))return i;if(t===3&&/\S/.test(n.nodeValue))return fle(n,e);const r=Vc(n.childNodes);if(r.length&&(qo(n,"isSplit",!0),!dc(n).isRoot)){n.style.display="inline-block",n.style.position="relative";const s=n.nextSibling,o=n.previousSibling,a=n.textContent||"",l=s?s.textContent:" ",u=o?o.textContent:" ";qo(n,{isWordEnd:/\s$/.test(a)||/^\s/.test(l),isWordStart:/^\s/.test(a)||/\s$/.test(u)})}return r.reduce((s,o)=>{const{words:a,chars:l}=l5(o,e);return{words:[...s.words,...a],chars:[...s.chars,...l]}},i)}function hle(n,e,t,i){if(!t.absolute)return{top:e?n.offsetTop:null};const r=n.offsetParent,[s,o]=i;let a=0,l=0;if(r&&r!==document.body){const y=r.getBoundingClientRect();a=y.x+s,l=y.y+o}const{width:u,height:f,x:d,y:p}=n.getBoundingClientRect(),m=p+o-l,g=d+s-a;return{width:u,height:f,top:m,left:g}}function u5(n){dc(n).isWord?(KV(n),n.replaceWith(...n.childNodes)):Vc(n.children).forEach(e=>u5(e))}const dle=()=>document.createDocumentFragment();function ple(n,e,t){const i=NP(e.types),r=e.tagName,s=n.getElementsByTagName("*"),o=[];let a=[],l=null,u,f,d,p=[];const m=n.parentElement,g=n.nextElementSibling,y=dle(),x=window.getComputedStyle(n),v=x.textAlign,S=parseFloat(x.fontSize)*.2;return e.absolute&&(d={left:n.offsetLeft,top:n.offsetTop,width:n.offsetWidth},f=n.offsetWidth,u=n.offsetHeight,qo(n,{cssWidth:n.style.width,cssHeight:n.style.height})),Vc(s).forEach(T=>{const b=T.parentElement===n,{width:P,height:R,top:D,left:C}=hle(T,b,e,t);/^br$/i.test(T.nodeName)||(i.lines&&b&&((l===null||D-l>=S)&&(l=D,o.push(a=[])),a.push(T)),e.absolute&&qo(T,{top:D,left:C,width:P,height:R}))}),m&&m.removeChild(n),i.lines&&(p=o.map(T=>{const b=HE(r,{class:`${e.splitClass} ${e.lineClass}`,style:`display: block; text-align: ${v}; width: 100%;`});qo(b,"isLine",!0);const P={height:0,top:1e4};return y.appendChild(b),T.forEach((R,D,C)=>{const{isWordEnd:L,top:F,height:H}=dc(R),G=C[D+1];P.height=Math.max(P.height,H),P.top=Math.min(P.top,F),b.appendChild(R),L&&dc(G).isWordStart&&b.append(" ")}),e.absolute&&qo(b,{height:P.height,top:P.top}),b}),i.words||u5(y),n.replaceChildren(y)),e.absolute&&(n.style.width=`${n.style.width||f}px`,n.style.height=`${u}px`,Vc(s).forEach(T=>{const{isLine:b,top:P,left:R,width:D,height:C}=dc(T),L=dc(T.parentElement),F=!b&&L.isLine;T.style.top=`${F?P-L.top:P}px`,T.style.left=b?`${d.left}px`:`${R-(F?d.left:0)}px`,T.style.height=`${C}px`,T.style.width=b?`${d.width}px`:`${D}px`,T.style.position="absolute"})),m&&(g?m.insertBefore(n,g):m.appendChild(n)),p}let Gf=hc(FP,{});class ix{static get data(){return Va}static get defaults(){return Gf}static set defaults(e){Gf=hc(Gf,py(e))}static setDefaults(e){return Gf=hc(Gf,py(e)),FP}static revert(e){sk(e).forEach(t=>{const{isSplit:i,html:r,cssWidth:s,cssHeight:o}=dc(t);i&&(t.innerHTML=r,t.style.width=s||"",t.style.height=o||"",KV(t))})}static create(e,t){return new ix(e,t)}constructor(e,t){this.isSplit=!1,this.settings=hc(Gf,py(t)),this.elements=sk(e),this.split()}split(e){this.revert(),this.elements.forEach(r=>{qo(r,"html",r.innerHTML)}),this.lines=[],this.words=[],this.chars=[];const t=[window.pageXOffset,window.pageYOffset];e!==void 0&&(this.settings=hc(this.settings,py(e)));const i=NP(this.settings.types);i.none||(this.elements.forEach(r=>{qo(r,"isRoot",!0);const{words:s,chars:o}=l5(r,this.settings);this.words=[...this.words,...s],this.chars=[...this.chars,...o]}),this.elements.forEach(r=>{if(i.lines||this.settings.absolute){const s=ple(r,this.settings,t);this.lines=[...this.lines,...s]}}),this.isSplit=!0,window.scrollTo(t[0],t[1]),$ae())}revert(){this.isSplit&&(this.lines=null,this.words=null,this.chars=null,this.isSplit=!1),ix.revert(this.elements)}}const mle=()=>(O.useEffect(()=>{zE.registerPlugin(Wt);const n=new ix("#target",{type:"chars"});zE.to(n.chars,{delay:1,color:"#ccb2b2",stagger:.5,ease:"none",scrollTrigger:{trigger:"section",start:"top 90%",end:"bottom 80%",scrub:!0}})},[]),yt("section",{className:poe.intro__section,children:[de("h4",{children:"About me"}),de("div",{children:de("h2",{id:"target",children:"Multidisciplinary designer with a passion for creating exciting concepts and products which focuses on engaging the users"})})]})),gle="_highlighted_1kevt_42",vle="_work__section_1kevt_114",yle={highlighted:gle,work__section:vle},_le="_highlighted_hy2s8_42",xle="_work__container_hy2s8_109",Sle="_image__overlay_hy2s8_153",wle="_card_hy2s8_165",Mle="_card__bottom_hy2s8_178",Tle="_card__explore_hy2s8_209",Hu={highlighted:_le,work__container:xle,image__overlay:Sle,card:wle,card__bottom:Mle,card__explore:Tle},Ele={duration:.6,ease:[.6,.01,-.05,.9]},tM=({href:n,subtitle:e,title:t,tags:i,info:r,image:s,imageDetails:o})=>{const a=O.useRef(null),l=ose(a);return de("div",{className:Hu.work__container,ref:a,style:{transform:l?"none":"translateY(20px) scale(1.0)",opacity:l?1:.2,transition:"all 0.9s cubic-bezier(0.17, 0.55, 0.55, 1)"},children:yt(C4,{to:n,children:[yt(bo.div,{initial:!1,exit:{opacity:0},className:Hu.card,children:[yt("div",{className:Hu.card__bottom,children:[de("span",{children:t}),de("ul",{className:Hu.info__tags,children:i})]}),de("span",{className:Hu.card__explore})]}),yt(bo.div,{initial:{width:o.width,height:o.height},className:Hu.img__container,children:[de("img",{src:s}),de(bo.div,{style:{transform:l?"none":"translateY(-100%) scale(1.0)",transition:Ele},animate:l?"scaleY: 0":"",className:Hu.image__overlay})]})]})})},nM=["./img/work-preview-cinema_wide.jpg","./img/work-preview-sn_wide.jpg","./img/work-preview-nfe_wide.jpg","./img/work-preview-y4b_wide.jpg"],ble=({imageDetails:n})=>(console.log(n),de($s,{children:yt("section",{className:yle.work__section,children:[de(tM,{href:"cinema",subtitle:"UX / UI",title:"Cinema / Theatre",tags:["UX","UI"],info:"Design concept to further develope and improve usability for a CMS used by cinema and theatre clients",image:nM[0],imageDetails:n},"cinema"),de(tM,{href:"sno",subtitle:"VR / Concept",title:"SN Oslo",info:"Designing an interactive portal which works as an access point to SN Oslo, a year-round arena for snow experiences",tags:["VR","Unreal Engine","Concept"],image:nM[1],imageDetails:n},"sno"),de(tM,{href:"nfe",subtitle:"3D / UI",title:"Norwegian Folklore",tags:["3D","UI"],info:"Building an interactive experience to retell old folklores on a modern, digital platform",image:nM[2],imageDetails:n},"nfe")]})})),Cle="_highlighted_nhv2g_42",Ple="_experience__section_nhv2g_109",Ale="_experience__list_nhv2g_120",Rle="_experience__info_nhv2g_128",Gu={highlighted:Cle,experience__section:Ple,experience__list:Ale,experience__info:Rle},GE=new Map,my=new WeakMap;let ok=0,Dle;function Lle(n){return n?(my.has(n)||(ok+=1,my.set(n,ok.toString())),my.get(n)):"0"}function Ile(n){return Object.keys(n).sort().filter(e=>n[e]!==void 0).map(e=>`${e}_${e==="root"?Lle(n.root):n[e]}`).toString()}function kle(n){let e=Ile(n),t=GE.get(e);if(!t){const i=new Map;let r;const s=new IntersectionObserver(o=>{o.forEach(a=>{var l;const u=a.isIntersecting&&r.some(f=>a.intersectionRatio>=f);n.trackVisibility&&typeof a.isVisible>"u"&&(a.isVisible=u),(l=i.get(a.target))==null||l.forEach(f=>{f(u,a)})})},n);r=s.thresholds||(Array.isArray(n.threshold)?n.threshold:[n.threshold||0]),t={id:e,observer:s,elements:i},GE.set(e,t)}return t}function Ole(n,e,t={},i=Dle){if(typeof window.IntersectionObserver>"u"&&i!==void 0){const l=n.getBoundingClientRect();return e(i,{isIntersecting:i,target:n,intersectionRatio:typeof t.threshold=="number"?t.threshold:0,time:0,boundingClientRect:l,intersectionRect:l,rootBounds:l}),()=>{}}const{id:r,observer:s,elements:o}=kle(t);let a=o.get(n)||[];return o.has(n)||o.set(n,a),a.push(e),s.observe(n),function(){a.splice(a.indexOf(e),1),a.length===0&&(o.delete(n),s.unobserve(n)),o.size===0&&(s.disconnect(),GE.delete(r))}}function c5({threshold:n,delay:e,trackVisibility:t,rootMargin:i,root:r,triggerOnce:s,skip:o,initialInView:a,fallbackInView:l,onChange:u}={}){var f;const[d,p]=O.useState(null),m=O.useRef(),[g,y]=O.useState({inView:!!a,entry:void 0});m.current=u,O.useEffect(()=>{if(o||!d)return;let S;return S=Ole(d,(T,b)=>{y({inView:T,entry:b}),m.current&&m.current(T,b),b.isIntersecting&&s&&S&&(S(),S=void 0)},{root:r,rootMargin:i,threshold:n,trackVisibility:t,delay:e},l),()=>{S&&S()}},[Array.isArray(n)?n.toString():n,d,r,i,s,o,t,l,e]);const x=(f=g.entry)==null?void 0:f.target,v=O.useRef();!d&&x&&!s&&!o&&v.current!==x&&(v.current=x,y({inView:!!a,entry:void 0}));const w=[p,g.inView,g.entry];return w.ref=w[0],w.inView=w[1],w.entry=w[2],w}const Nle=()=>{const{ref:n,inView:e}=c5({triggerOnce:!0});return yt("section",{className:Gu.experience__section,ref:n,children:[de("h4",{children:"Work experience"}),yt("div",{className:Gu.experience__list,children:[yt("div",{className:Gu.experience__info,children:[de("span",{children:"Bod, Norway"}),de("h3",{children:"Dialog eXe"}),de("span",{children:"2019 - 2020"})]}),de("div",{children:de("p",{children:"Worked as a web designer and front-end developer designing and developing websites for their customers"})})]}),yt("div",{className:Gu.experience__list,children:[yt("div",{className:Gu.experience__info,children:[de("span",{children:"Oslo, Norway"}),de("h3",{children:"Unfold"}),de("span",{children:"2018"})]}),de("div",{children:de("p",{children:"Internship for Unfold working on creating concepts for SN Oslo, the world's most spectacular indoor arena for snow experiences"})})]}),yt("div",{className:Gu.experience__list,children:[yt("div",{className:Gu.experience__info,children:[de("span",{children:"Oslo, Norway"}),de("h3",{children:"Trigger"}),de("span",{children:"2016"})]}),de("div",{children:de("p",{children:"Working as an intern developing a concept and UX/UI for a social platform created to be used by creative people"})})]})]})},Ule="_highlighted_b9br3_42",Fle="_services__section_b9br3_109",zle="_services__list_b9br3_119",_p={highlighted:Ule,services__section:Fle,services__list:zle},Ble=()=>{const{ref:n,inView:e}=c5({triggerOnce:!0});return yt("section",{className:_p.services__section,ref:n,children:[de("h4",{children:"Services"}),yt("div",{className:_p.services__list,children:[yt("h3",{children:["Concept ",de("br",{})," development"]}),de("p",{children:"Concept development helps you evaluate your customers' reactions to your product or service before your product launch. It is a structured way to develop an idea and to see if customers like your idea."})]}),yt("div",{className:_p.services__list,children:[yt("h3",{children:["Branding & ",de("br",{})," identity"]}),de("p",{children:"Consistent marketing and messaging lead to consistent brand identity and, therefore, consistent sales."})]}),yt("div",{className:_p.services__list,children:[de("h3",{children:"UI / UX"}),de("p",{children:"As a web designer, I am responsible for big-picture decisions, like the menus listed on the site, and smaller details, like which fonts, colours, and graphics to use."})]}),yt("div",{className:_p.services__list,children:[de("h3",{children:"Web development"}),de("p",{children:"As a web developer, I am responsible for big-picture decisions, like the menus listed on the site, and smaller details."})]})]})},Vle="_highlighted_1hulk_42",Hle="_various__section_1hulk_109",Gle="_various__list_1hulk_113",gy={highlighted:Vle,various__section:Hle,various__list:Gle},Wle=()=>yt("section",{className:gy.various__section,children:[de("h4",{children:"Various works"}),yt("div",{className:gy.various__list,children:[de("h3",{children:"Lofoten Food Festival"}),de("p",{children:"Typographic poster"})]}),yt("div",{className:gy.various__list,children:[de("h3",{children:"Personal branding"}),de("p",{children:"Branding"})]}),yt("div",{className:gy.various__list,children:[de("h3",{children:"Platform game"}),de("p",{children:"Game design"})]})]}),jle="_highlighted_1ippu_42",Xle="_home__header_1ippu_109",Yle="_intro_1ippu_116",ak={highlighted:jle,home__header:Xle,intro:Yle},qle=()=>{const n=e=>{console.log("hi")};return O.useEffect(()=>{},[]),de("header",{onScroll:n,className:ak.home__header,children:yt("div",{className:ak.intro,children:[de("img",{src:Zz}),yt("h1",{children:["Multidisciplinary ",de("br",{}),"designer and ",de("br",{}),"developer"]})]})})},lk={duration:1.4,ease:[.22,1,.36,1]},r1=n=>({imageDetails:e})=>yt($s,{children:[de(n,{imageDetails:e}),de(bo.div,{className:"slide-in",initial:{scaleY:0},animate:{scaleY:0},exit:{scaleY:1},transition:{delay:0,...lk}}),de(bo.div,{className:"slide-out",initial:{scaleY:1},animate:{scaleY:0},exit:{scaleY:0},transition:{delay:0,...lk}})]}),Zle=({imageDetails:n})=>de($s,{children:yt(bo.main,{initial:!1,children:[de(qle,{}),de(mle,{}),de(ble,{imageDetails:n}),de(Nle,{}),de(Wle,{}),de(Ble,{})]})}),$le=r1(Zle);var Ns={exports:{}},iM,uk;function Kle(){if(uk)return iM;uk=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return iM=n,iM}var rM,ck;function Jle(){if(ck)return rM;ck=1;var n=Kle();function e(){}function t(){}return t.resetWarningCache=e,rM=function(){function i(o,a,l,u,f,d){if(d!==n){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}i.isRequired=i;function r(){return i}var s={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:r,element:i,elementType:i,instanceOf:r,node:i,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:t,resetWarningCache:e};return s.PropTypes=s,s},rM}Ns.exports=Jle()();Ns.exports.array,Ns.exports.string,Ns.exports.number,Ns.exports.number,Ns.exports.object,Ns.exports.number,Ns.exports.number,Ns.exports.number,Ns.exports.object,Ns.exports.bool,Ns.exports.number;const Qle="_highlighted_1kq3q_42",eue="_work__header_1kq3q_109",tue="_heading__container_1kq3q_120",nue="_project__info_1kq3q_135",iue="_work__section_1kq3q_151",rue="_image__container_1kq3q_156",Os={highlighted:Qle,work__header:eue,heading__container:tue,project__info:nue,work__section:iue,image__container:rue},sue=()=>{const{pathname:n}=Gg();O.useEffect(()=>{window.scrollTo(0,0)},[n])},oue={duration:1.4,ease:[.6,.01,-.5,.9]},zP=({subtitle:n,title:e,description:t,yearCreated:i,creators:r,tools:s,url:o,imageDetails:a})=>(sue(),console.log(a),de($s,{children:yt("main",{children:[de("header",{className:Os.work__header,children:yt(bo.div,{initial:{opacity:0},className:Os.heading__container,children:[de("h4",{children:n}),de("h1",{className:Os.highlighted,children:e})]})}),yt("section",{className:Os.work__section,children:[de(bo.div,{className:Os.image__container,initial:{width:"100%",width:a.width,height:a.height},animate:{width:"100%",transition:{...oue}}}),yt("div",{className:Os.project__info,children:[yt("div",{className:Os.project__when,children:[de("h4",{className:Os.highlighted,children:"When"}),de("span",{children:i})]}),yt("div",{className:Os.project__who,children:[de("h4",{className:Os.highlighted,children:"By"}),r]}),yt("div",{className:Os.project__tools,children:[de("h4",{className:Os.highlighted,children:"Tools"}),s]})]}),de("p",{children:t})]})]})})),aue=""+new URL("sno-vr-f117a4a0.mp4",import.meta.url).href,lue=({imageDetails:n})=>de($s,{children:de(zP,{subtitle:"VR / Experience",title:"SN  Oslo",description:"Building an interactive portal for visitors to transcend through.",yearCreated:"2018",creators:["Kenneth Jrgensen","Robin Ingebrigtsen"],tools:["Concept","VR Development","Unreal Engine"],url:aue,imageDetails:n})}),uue=r1(lue),cue=["./img/work-preview-cinema_wide.jpg","./img/work-preview-sn_wide.jpg","./img/work-preview-nfe_wide.jpg","./img/work-preview-y4b_wide.jpg"],fue=({imageDetails:n})=>de($s,{children:de(zP,{subtitle:"UX / UI",title:"Cinema design",description:"Design concept to further develop and improve usability for a CMS used by cinema and theatre clients",yearCreated:"2019",creators:["Kenneth Jrgensen"],tools:["UX / UI"],url:cue[0],imageDetails:n})}),hue=r1(fue),due=({imageDetails:n})=>de($s,{children:de(zP,{subtitle:"UX / UI",title:"Norwegian Folklore",description:"Building an interactive experience to retell old folklores on a modern, digital platform",yearCreated:"2016",creators:["Kenneth Jrgensen","Robin Ingebrigtsen"],tools:["UX / UI","Three.js"],imageDetails:n})}),pue=r1(due),mue="_flag_itt7o_1",gue="_blue_itt7o_9",vue="_yellow_itt7o_14",sM={flag:mue,blue:gue,yellow:vue},yue=()=>de("a",{href:"https://supportukrainenow.org/",children:yt("div",{className:sM.flag,children:[de("div",{className:sM.blue}),de("div",{className:sM.yellow})]})}),_ue=()=>{const n={width:524,height:650};return yt($s,{children:[de(soe,{}),de(Ire,{mode:"wait",children:yt(Zse,{location,children:[de(Pp,{exact:!0,path:"/",element:de($le,{imageDetails:n})}),de(Pp,{path:"/cinema",element:de(hue,{imageDetails:n})},"cinema"),de(Pp,{path:"/sno",element:de(uue,{})},"sno"),de(Pp,{path:"/nfe",element:de(pue,{})},"nfe")]},location.pathname)}),de("div",{id:"canvas",children:yt(EZ,{children:[de(coe,{}),de(_ee,{}),de(qZ,{all:!0})]})}),de(uoe,{}),de(yue,{})]})};oM.createRoot(document.getElementById("root")).render(de(Jl.StrictMode,{children:de(O.Suspense,{children:de(toe,{children:de(_ue,{})})})}));
